!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=97)}([function(e,t,n){"use strict";var r=n(1),i=n(3),a={};function o(e,t,n){return"Expected "+n+" to be typeof "+t+", actual typeof was "+e}a.typeOf={},a.defined=function(e,t){if(!Object(r.a)(t))throw new i.a(function(e){return e+" is required, actual value was undefined"}(e))},a.typeOf.func=function(e,t){if("function"!=typeof t)throw new i.a(o(typeof t,"function",e))},a.typeOf.string=function(e,t){if("string"!=typeof t)throw new i.a(o(typeof t,"string",e))},a.typeOf.number=function(e,t){if("number"!=typeof t)throw new i.a(o(typeof t,"number",e))},a.typeOf.number.lessThan=function(e,t,n){if(a.typeOf.number(e,t),t>=n)throw new i.a("Expected "+e+" to be less than "+n+", actual value was "+t)},a.typeOf.number.lessThanOrEquals=function(e,t,n){if(a.typeOf.number(e,t),t>n)throw new i.a("Expected "+e+" to be less than or equal to "+n+", actual value was "+t)},a.typeOf.number.greaterThan=function(e,t,n){if(a.typeOf.number(e,t),t<=n)throw new i.a("Expected "+e+" to be greater than "+n+", actual value was "+t)},a.typeOf.number.greaterThanOrEquals=function(e,t,n){if(a.typeOf.number(e,t),t<n)throw new i.a("Expected "+e+" to be greater than or equal to"+n+", actual value was "+t)},a.typeOf.object=function(e,t){if("object"!=typeof t)throw new i.a(o(typeof t,"object",e))},a.typeOf.bool=function(e,t){if("boolean"!=typeof t)throw new i.a(o(typeof t,"boolean",e))},a.typeOf.number.equals=function(e,t,n,r){if(a.typeOf.number(e,n),a.typeOf.number(t,r),n!==r)throw new i.a(e+" must be equal to "+t+", the actual values are "+n+" and "+r)},t.a=a},function(e,t,n){"use strict";t.a=function(e){return void 0!==e&&null!==e}},function(e,t,n){"use strict";function r(e,t){return void 0!==e&&null!==e?e:t}r.EMPTY_OBJECT=Object.freeze({}),t.a=r},function(e,t,n){"use strict";var r=n(1);function i(e){var t;this.name="DeveloperError",this.message=e;try{throw new Error}catch(e){t=e.stack}this.stack=t}Object(r.a)(Object.create)&&(i.prototype=Object.create(Error.prototype),i.prototype.constructor=i),i.prototype.toString=function(){var e=this.name+": "+this.message;return Object(r.a)(this.stack)&&(e+="\n"+this.stack.toString()),e},i.throwInstantiationError=function(){throw new i("This function defines an interface and should not be called directly.")},t.a=i},function(e,t,n){"use strict";
/**
  @license
  when.js - https://github.com/cujojs/when

  MIT License (c) copyright B Cavalier & J Hann

 * A lightweight CommonJS Promises/A and when() implementation
 * when is part of the cujo.js family of libraries (http://cujojs.com/)
 *
 * Licensed under the MIT License at:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * @version 1.7.1
 */var r,i,a;function o(e,t,n,r){return s(e).then(t,n,r)}function s(e){var t,n;return e instanceof u?t=e:f(e)?(n=c(),e.then(function(e){n.resolve(e)},function(e){n.reject(e)},function(e){n.progress(e)}),t=n.promise):t=function(e){return new u(function(t){try{return s(t?t(e):e)}catch(e){return l(e)}})}(e),t}function u(e){this.then=e}function l(e){return new u(function(t,n){try{return n?s(n(e)):l(e)}catch(e){return l(e)}})}function c(){var e,t,n,r,i,o;return e=new u(f),t=[],n=[],r=function(e,r,i){var a,o;return a=c(),o="function"==typeof i?function(e){try{a.progress(i(e))}catch(e){a.progress(e)}}:function(e){a.progress(e)},t.push(function(t){t.then(e,r).then(a.resolve,a.reject,o)}),n.push(o),a.promise},i=function(e){return m(n,e),e},o=function(e){return e=s(e),r=e.then,o=s,i=g,m(t,e),n=t=a,e},{then:f,resolve:h,reject:d,progress:p,promise:e,resolver:{resolve:h,reject:d,progress:p}};function f(e,t,n){return r(e,t,n)}function h(e){return o(e)}function d(e){return o(l(e))}function p(e){return i(e)}}function f(e){return e&&"function"==typeof e.then}function h(e,t,n,r,i){return y(2,arguments),o(e,function(e){var a,s,u,l,f,h,d,p,m,y;if(m=e.length>>>0,a=Math.max(0,Math.min(t,m)),u=[],s=m-a+1,l=[],f=c(),a)for(p=f.progress,d=function(e){l.push(e),--s||(h=d=g,f.reject(l))},h=function(e){u.push(e),--a||(h=d=g,f.resolve(u))},y=0;y<m;++y)y in e&&o(e[y],v,b,p);else f.resolve(u);return f.then(n,r,i);function b(e){d(e)}function v(e){h(e)}})}function d(e,t,n,r){return y(1,arguments),p(e,b).then(t,n,r)}function p(e,t){return o(e,function(e){var n,r,i,a,s,u;if(i=r=e.length>>>0,n=[],u=c(),i)for(a=function(e,r){o(e,t).then(function(e){n[r]=e,--i||u.resolve(n)},u.reject)},s=0;s<r;s++)s in e?a(e[s],s):--i;else u.resolve(n);return u.promise})}function m(e,t){for(var n,r=0;n=e[r++];)n(t)}function y(e,t){for(var n,r=t.length;r>e;)if(null!=(n=t[--r])&&"function"!=typeof n)throw new Error("arg "+r+" must be a function")}function g(){}function b(e){return e}o.defer=c,o.resolve=s,o.reject=function(e){return o(e,l)},o.join=function(){return p(arguments,b)},o.all=d,o.map=p,o.reduce=function(e,t){var n=i.call(arguments,1);return o(e,function(e){var i;return i=e.length,n[0]=function(e,n,r){return o(e,function(e){return o(n,function(n){return t(e,n,r,i)})})},r.apply(e,n)})},o.any=function(e,t,n,r){return h(e,1,function(e){return t?t(e[0]):e[0]},n,r)},o.some=h,o.chain=function(e,t,n){var r=arguments.length>2;return o(e,function(e){return e=r?n:e,t.resolve(e),e},function(e){return t.reject(e),l(e)},t.progress)},o.isPromise=f,u.prototype={always:function(e,t){return this.then(e,e,t)},otherwise:function(e){return this.then(a,e)},yield:function(e){return this.then(function(){return e})},spread:function(e){return this.then(function(t){return d(t,function(t){return e.apply(a,t)})})}},i=[].slice,r=[].reduce||function(e){var t,n,r,i,a;if(a=0,i=(t=Object(this)).length>>>0,(n=arguments).length<=1)for(;;){if(a in t){r=t[a++];break}if(++a>=i)throw new TypeError}else r=n[1];for(;a<i;++a)a in t&&(r=e(r,t[a],a,t));return r},t.a=o},function(e,t,n){"use strict";t.a=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5})},function(e,t,n){"use strict";
/**
 * @license
 *
 * Grauw URI utilities
 *
 * See: http://hg.grauw.nl/grauw-lib/file/tip/src/uri.js
 *
 * @author Laurens Holst (http://www.grauw.nl/)
 *
 *   Copyright 2012 Laurens Holst
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 *
 */function r(e){if(e instanceof r)this.scheme=e.scheme,this.authority=e.authority,this.path=e.path,this.query=e.query,this.fragment=e.fragment;else if(e){var t=i.exec(e);this.scheme=t[1],this.authority=t[2],this.path=t[3],this.query=t[4],this.fragment=t[5]}}r.prototype.scheme=null,r.prototype.authority=null,r.prototype.path="",r.prototype.query=null,r.prototype.fragment=null;var i=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");r.prototype.getScheme=function(){return this.scheme},r.prototype.getAuthority=function(){return this.authority},r.prototype.getPath=function(){return this.path},r.prototype.getQuery=function(){return this.query},r.prototype.getFragment=function(){return this.fragment},r.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},r.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query},r.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment},r.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(s,l).replace(a,u)),this.path&&(this.path=this.path.replace(a,u)),this.query&&(this.query=this.query.replace(a,u)),this.fragment&&(this.fragment=this.fragment.replace(a,u))};var a=/%[0-9a-z]{2}/gi,o=/[a-zA-Z0-9\-\._~]/,s=/(.*@)?([^@:]*)(:.*)?/;function u(e){var t=unescape(e);return o.test(t)?t:e.toUpperCase()}function l(e,t,n,r){return(t||"")+n.toLowerCase()+(r||"")}r.prototype.resolve=function(e){var t=new r;return this.scheme?(t.scheme=this.scheme,t.authority=this.authority,t.path=this.path,t.query=this.query):(t.scheme=e.scheme,this.authority?(t.authority=this.authority,t.path=this.path,t.query=this.query):(t.authority=e.authority,""==this.path?(t.path=e.path,t.query=this.query||e.query):("/"==this.path.charAt(0)?(t.path=this.path,t.removeDotSegments()):(e.authority&&""==e.path?t.path="/"+this.path:t.path=e.path.substring(0,e.path.lastIndexOf("/")+1)+this.path,t.removeDotSegments()),t.query=this.query))),t.fragment=this.fragment,t},r.prototype.removeDotSegments=function(){var e,t=this.path.split("/"),n=[],r=""==t[0];r&&t.shift();for(""==t[0]&&t.shift();t.length;)".."==(e=t.shift())?n.pop():"."!=e&&n.push(e);"."!=e&&".."!=e||n.push(""),r&&n.unshift(""),this.path=n.join("/")},r.prototype.toString=function(){var e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+this.authority),e+=this.path,this.query&&(e+="?"+this.query),this.fragment&&(e+="#"+this.fragment),e},t.a=r},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(){try{return echarts}catch(e){return{}}}()},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(58),i=n(59),a=n(34);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=h(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|d(t.length);return 0===(e=s(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?s(e,0):h(e,t);if("Buffer"===t.type&&a(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(c(t),e=s(e,t<0?0:0|d(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|d(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(e).length;default:if(r)return B(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var a,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(a=n;a<s;a++)if(l(e,a)===l(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var f=!0,h=0;h<u;h++)if(l(e,a+h)!==l(t,h)){f=!1;break}if(f)return a}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function v(e,t,n,r){return F(B(t,e.length-n),e,n,r)}function w(e,t,n,r){return F(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function O(e,t,n,r){return w(e,t,n,r)}function _(e,t,n,r){return F(U(t),e,n,r)}function C(e,t,n,r){return F(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function x(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,u,l=e[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(u=(15&l)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=S));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return l(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?x(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return x(this,t,n);case"ascii":return j(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,o=n-t,s=Math.min(a,o),l=this.slice(r,i),c=e.slice(t,n),f=0;f<s;++f)if(l[f]!==c[f]){a=l[f],o=c[f];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return O(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function j(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=q(e[a]);return i}function M(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function A(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function P(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function D(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function k(e,t,n,r,a){return a||D(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,a){return a||D(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):P(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):P(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return k(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return k(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=u.isBuffer(e)?e:B(new u(e,r).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function U(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(7))},function(e,t){e.exports=Cesium},function(e,t,n){"use strict";var r=n(2);t.a=function e(t,n){if(null===t||"object"!=typeof t)return t;n=Object(r.a)(n,!1);var i=new t.constructor;for(var a in t)if(t.hasOwnProperty(a)){var o=t[a];n&&(o=e(o,n)),i[a]=o}return i}},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,l=[],c=!1,f=-1;function h(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length&&d())}function d(){if(!c){var e=s(h);c=!0;for(var t=l.length;t;){for(u=l,l=[];++f<t;)u&&u[f].run();f=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(1);function i(e){var t;this.name="RuntimeError",this.message=e;try{throw new Error}catch(e){t=e.stack}this.stack=t}Object(r.a)(Object.create)&&(i.prototype=Object.create(Error.prototype),i.prototype.constructor=i),i.prototype.toString=function(){var e=this.name+": "+this.message;return Object(r.a)(this.stack)&&(e+="\n"+this.stack.toString()),e},t.a=i},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){"use strict";(function(e){var r,i=n(6),a=n(4),o=n(49),s=n(0),u=n(11),l=n(16),c=n(2),f=n(1),h=n(3),d=n(32),p=n(50),m=n(51),y=n(23),g=n(52),b=n(24),v=n(53),w=n(54),O=n(55),_=n(57),C=n(20),E=n(27),x=n(5),S=n(13),j=n(33),T=function(){try{var e=new XMLHttpRequest;return e.open("GET","#",!0),e.responseType="blob","blob"===e.responseType}catch(e){return!1}}();function I(e,t,n,r){var i,a=e.query;if(!Object(f.a)(a)||0===a.length)return{};if(-1===a.indexOf("=")){var o={};o[a]=void 0,i=o}else i=Object(O.a)(a);t._queryParameters=n?R(i,t._queryParameters,r):i,e.query=void 0}function M(e,t){return Object(f.a)(e)?Object(f.a)(e.clone)?e.clone():Object(u.a)(e):t}function A(e){if(e.state===x.a.ISSUED||e.state===x.a.ACTIVE)throw new S.a("The Resource is already being fetched.");e.state=x.a.UNISSUED,e.deferred=void 0}function R(e,t,n){if(!n)return Object(l.a)(e,t);var r=Object(u.a)(e,!0);for(var i in t)if(t.hasOwnProperty(i)){var a=r[i],o=t[i];Object(f.a)(a)?(Array.isArray(a)||(a=r[i]=[a]),r[i]=a.concat(o)):r[i]=Array.isArray(o)?o.slice():o}return r}function N(e){"string"==typeof(e=Object(c.a)(e,c.a.EMPTY_OBJECT))&&(e={url:e}),s.a.typeOf.string("options.url",e.url),this._url=void 0,this._templateValues=M(e.templateValues,{}),this._queryParameters=M(e.queryParameters,{}),this.headers=M(e.headers,{}),this.request=Object(c.a)(e.request,new _.a),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=Object(c.a)(e.retryAttempts,0),this._retryCount=0;var t=new i.a(e.url);I(t,this,!0,!0),t.fragment=void 0,this._url=t.toString()}function P(e){var t=e.resource,n=e.flipY,r=e.preferImageBitmap,i=t.request;i.url=t.url,i.requestFunction=function(){var e=!1;t.isDataUri||t.isBlobUri||(e=t.isCrossOriginUrl);var o=a.a.defer();return N._Implementations.createImage(i,e,o,n,r),o.promise};var o=E.a.request(i);if(Object(f.a)(o))return o.otherwise(function(e){return i.state!==x.a.FAILED?a.a.reject(e):t.retryOnError(e).then(function(o){return o?(i.state=x.a.UNISSUED,i.deferred=void 0,P({resource:t,flipY:n,preferImageBitmap:r})):a.a.reject(e)})})}N.createIfNeeded=function(e){return e instanceof N?e.getDerivedResource({request:e.request}):"string"!=typeof e?e:new N({url:e})},N.supportsImageBitmapOptions=function(){if(Object(f.a)(r))return r;if("function"!=typeof createImageBitmap)return r=a.a.resolve(!1);return r=N.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWP4////fwAJ+wP9CNHoHgAAAABJRU5ErkJggg=="}).then(function(e){return createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none"})}).then(function(e){return!0}).otherwise(function(){return!1})},Object.defineProperties(N,{isBlobSupported:{get:function(){return T}}}),Object.defineProperties(N.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){var t=new i.a(e);I(t,this,!1),t.fragment=void 0,this._url=t.toString()}},extension:{get:function(){return Object(m.a)(this._url)}},isDataUri:{get:function(){return Object(b.a)(this._url)}},isBlobUri:{get:function(){return Object(y.a)(this._url)}},isCrossOriginUrl:{get:function(){return Object(g.a)(this._url)}},hasHeaders:{get:function(){return Object.keys(this.headers).length>0}}}),N.prototype.toString=function(){return this.getUrlComponent(!0,!0)},N.prototype.getUrlComponent=function(e,t){if(this.isDataUri)return this._url;var n=new i.a(this._url);e&&function(e,t){var n=t._queryParameters,r=Object.keys(n);1!==r.length||Object(f.a)(n[r[0]])?e.query=Object(w.a)(n):e.query=r[0]}(n,this);var r=n.toString().replace(/%7B/g,"{").replace(/%7D/g,"}"),a=this._templateValues;return r=r.replace(/{(.*?)}/g,function(e,t){var n=a[t];return Object(f.a)(n)?encodeURIComponent(n):e}),t&&Object(f.a)(this.proxy)&&(r=this.proxy.getURL(r)),r},N.prototype.setQueryParameters=function(e,t){this._queryParameters=t?R(this._queryParameters,e,!1):R(e,this._queryParameters,!1)},N.prototype.appendQueryParameters=function(e){this._queryParameters=R(e,this._queryParameters,!0)},N.prototype.setTemplateValues=function(e,t){this._templateValues=t?Object(l.a)(this._templateValues,e):Object(l.a)(e,this._templateValues)},N.prototype.getDerivedResource=function(e){var t=this.clone();if(t._retryCount=0,Object(f.a)(e.url)){var n=new i.a(e.url);I(n,t,!0,Object(c.a)(e.preserveQueryParameters,!1)),n.fragment=void 0,t._url=n.resolve(new i.a(Object(d.a)(this._url))).toString()}return Object(f.a)(e.queryParameters)&&(t._queryParameters=Object(l.a)(e.queryParameters,t._queryParameters)),Object(f.a)(e.templateValues)&&(t._templateValues=Object(l.a)(e.templateValues,t.templateValues)),Object(f.a)(e.headers)&&(t.headers=Object(l.a)(e.headers,t.headers)),Object(f.a)(e.proxy)&&(t.proxy=e.proxy),Object(f.a)(e.request)&&(t.request=e.request),Object(f.a)(e.retryCallback)&&(t.retryCallback=e.retryCallback),Object(f.a)(e.retryAttempts)&&(t.retryAttempts=e.retryAttempts),t},N.prototype.retryOnError=function(e){var t=this.retryCallback;if("function"!=typeof t||this._retryCount>=this.retryAttempts)return Object(a.a)(!1);var n=this;return Object(a.a)(t(this,e)).then(function(e){return++n._retryCount,e})},N.prototype.clone=function(e){return Object(f.a)(e)||(e=new N({url:this._url})),e._url=this._url,e._queryParameters=Object(u.a)(this._queryParameters),e._templateValues=Object(u.a)(this._templateValues),e.headers=Object(u.a)(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e},N.prototype.getBaseUri=function(e){return Object(p.a)(this.getUrlComponent(e),e)},N.prototype.appendForwardSlash=function(){this._url=Object(o.a)(this._url)},N.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},N.fetchArrayBuffer=function(e){return new N(e).fetchArrayBuffer()},N.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},N.fetchBlob=function(e){return new N(e).fetchBlob()},N.prototype.fetchImage=function(e){e=Object(c.a)(e,c.a.EMPTY_OBJECT);var t=Object(c.a)(e.preferImageBitmap,!1),n=Object(c.a)(e.preferBlob,!1),r=Object(c.a)(e.flipY,!1);if(A(this.request),!T||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!n)return P({resource:this,flipY:r,preferImageBitmap:t});var i,o,s,u=this.fetchBlob();return Object(f.a)(u)?N.supportsImageBitmapOptions().then(function(e){return i=e&&t,u}).then(function(e){if(Object(f.a)(e)){if(s=e,i)return N.createImageBitmapFromBlob(e,{flipY:r,premultiplyAlpha:!1});var t=window.URL.createObjectURL(e);return P({resource:o=new N({url:t}),flipY:r,preferImageBitmap:!1})}}).then(function(e){if(Object(f.a)(e))return e.blob=s,i?e:(window.URL.revokeObjectURL(o.url),e)}).otherwise(function(e){return Object(f.a)(o)&&window.URL.revokeObjectURL(o.url),e.blob=s,a.a.reject(e)}):void 0},N.fetchImage=function(e){return new N(e).fetchImage({flipY:e.flipY,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},N.prototype.fetchText=function(){return this.fetch({responseType:"text"})},N.fetchText=function(e){return new N(e).fetchText()},N.prototype.fetchJson=function(){var e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(Object(f.a)(e))return e.then(function(e){if(Object(f.a)(e))return JSON.parse(e)})},N.fetchJson=function(e){return new N(e).fetchJson()},N.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},N.fetchXML=function(e){return new N(e).fetchXML()},N.prototype.fetchJsonp=function(e){var t;e=Object(c.a)(e,"callback"),A(this.request);do{t="loadJsonp"+Math.random().toString().substring(2,8)}while(Object(f.a)(window[t]));return function e(t,n,r){var i={};i[n]=r;t.setQueryParameters(i);var o=t.request;o.url=t.url;o.requestFunction=function(){var e=a.a.defer();return window[r]=function(t){e.resolve(t);try{delete window[r]}catch(e){window[r]=void 0}},N._Implementations.loadAndExecuteScript(t.url,r,e),e.promise};var s=E.a.request(o);if(!Object(f.a)(s))return;return s.otherwise(function(i){return o.state!==x.a.FAILED?a.a.reject(i):t.retryOnError(i).then(function(s){return s?(o.state=x.a.UNISSUED,o.deferred=void 0,e(t,n,r)):a.a.reject(i)})})}(this,e,t)},N.fetchJsonp=function(e){return new N(e).fetchJsonp(e.callbackParameterName)},N.prototype._makeRequest=function(e){var t=this;A(t.request);var n=t.request;n.url=t.url,n.requestFunction=function(){var r=e.responseType,i=Object(l.a)(e.headers,t.headers),o=e.overrideMimeType,s=e.method,u=e.data,c=a.a.defer(),h=N._Implementations.loadWithXhr(t.url,r,s,u,i,c,o);return Object(f.a)(h)&&Object(f.a)(h.abort)&&(n.cancelFunction=function(){h.abort()}),c.promise};var r=E.a.request(n);if(Object(f.a)(r))return r.then(function(e){return n.cancelFunction=void 0,e}).otherwise(function(r){return n.cancelFunction=void 0,n.state!==x.a.FAILED?a.a.reject(r):t.retryOnError(r).then(function(i){return i?(n.state=x.a.UNISSUED,n.deferred=void 0,t.fetch(e)):a.a.reject(r)})})};var D=/^data:(.*?)(;base64)?,(.*)$/;function k(e,t){var n=decodeURIComponent(t);return e?atob(n):n}function L(e,t){for(var n=k(e,t),r=new ArrayBuffer(n.length),i=new Uint8Array(r),a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return r}function z(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}N.prototype.fetch=function(e){return(e=M(e,{})).method="GET",this._makeRequest(e)},N.fetch=function(e){return new N(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},N.prototype.delete=function(e){return(e=M(e,{})).method="DELETE",this._makeRequest(e)},N.delete=function(e){return new N(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},N.prototype.head=function(e){return(e=M(e,{})).method="HEAD",this._makeRequest(e)},N.head=function(e){return new N(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},N.prototype.options=function(e){return(e=M(e,{})).method="OPTIONS",this._makeRequest(e)},N.options=function(e){return new N(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},N.prototype.post=function(e,t){return s.a.defined("data",e),(t=M(t,{})).method="POST",t.data=e,this._makeRequest(t)},N.post=function(e){return new N(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},N.prototype.put=function(e,t){return s.a.defined("data",e),(t=M(t,{})).method="PUT",t.data=e,this._makeRequest(t)},N.put=function(e){return new N(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},N.prototype.patch=function(e,t){return s.a.defined("data",e),(t=M(t,{})).method="PATCH",t.data=e,this._makeRequest(t)},N.patch=function(e){return new N(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},N._Implementations={},N._Implementations.createImage=function(e,t,n,r,i){var o=e.url;N.supportsImageBitmapOptions().then(function(s){if(s&&i){var u=a.a.defer(),l=N._Implementations.loadWithXhr(o,"blob","GET",void 0,void 0,u,void 0,void 0,void 0);return Object(f.a)(l)&&Object(f.a)(l.abort)&&(e.cancelFunction=function(){l.abort()}),u.promise.then(function(e){if(Object(f.a)(e))return N.createImageBitmapFromBlob(e,{flipY:r,premultiplyAlpha:!1});n.reject(new S.a("Successfully retrieved "+o+" but it contained no content."))}).then(n.resolve)}!function(e,t,n){var r=new Image;r.onload=function(){n.resolve(r)},r.onerror=function(e){n.reject(e)},t&&(j.a.contains(e)?r.crossOrigin="use-credentials":r.crossOrigin=""),r.src=e}(o,t,n)}).otherwise(n.reject)},N.createImageBitmapFromBlob=function(e,t){return s.a.defined("options",t),s.a.typeOf.bool("options.flipY",t.flipY),s.a.typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none"})};var q="undefined"==typeof XMLHttpRequest;N._Implementations.loadWithXhr=function(t,r,i,a,o,s,u){var l=D.exec(t);if(null===l){if(!q){var d=new XMLHttpRequest;if(j.a.contains(t)&&(d.withCredentials=!0),d.open(i,t,!0),Object(f.a)(u)&&Object(f.a)(d.overrideMimeType)&&d.overrideMimeType(u),Object(f.a)(o))for(var p in o)o.hasOwnProperty(p)&&d.setRequestHeader(p,o[p]);Object(f.a)(r)&&(d.responseType=r);var m=!1;return"string"==typeof t&&(m=0===t.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),d.onload=function(){if(!(d.status<200||d.status>=300)||m&&0===d.status){var e=d.response,t=d.responseType;if("HEAD"===i||"OPTIONS"===i){var n={};return d.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(function(e){var t=e.split(": "),r=t.shift();n[r]=t.join(": ")}),void s.resolve(n)}if(204===d.status)s.resolve();else if(!Object(f.a)(e)||Object(f.a)(r)&&t!==r)if("json"===r&&"string"==typeof e)try{s.resolve(JSON.parse(e))}catch(e){s.reject(e)}else(""===t||"document"===t)&&Object(f.a)(d.responseXML)&&d.responseXML.hasChildNodes()?s.resolve(d.responseXML):""!==t&&"text"!==t||!Object(f.a)(d.responseText)?s.reject(new S.a("Invalid XMLHttpRequest response type.")):s.resolve(d.responseText);else s.resolve(e)}else s.reject(new C.a(d.status,d.response,d.getAllResponseHeaders()))},d.onerror=function(e){s.reject(new C.a)},d.send(a),d}!function(t,r,i,a,o,s,u){var l=n(28).parse(t),c="https:"===l.protocol?n(66):n(35),f=n(79),h={protocol:l.protocol,hostname:l.hostname,port:l.port,path:l.path,query:l.query,method:i,headers:o};c.request(h).on("response",function(t){if(t.statusCode<200||t.statusCode>=300)s.reject(new C.a(t.statusCode,t,t.headers));else{var n=[];t.on("data",function(e){n.push(e)}),t.on("end",function(){var i=e.concat(n);"gzip"===t.headers["content-encoding"]?f.gunzip(i,function(e,t){e?s.reject(new S.a("Error decompressing response.")):s.resolve(z(t,r))}):s.resolve(z(i,r))})}}).on("error",function(e){s.reject(new C.a)}).end()}(t,r,i,0,o,s)}else s.resolve(function(e,t){t=Object(c.a)(t,"");var n=e[1],r=!!e[2],i=e[3];switch(t){case"":case"text":return k(r,i);case"arraybuffer":return L(r,i);case"blob":var a=L(r,i);return new Blob([a],{type:n});case"document":return(new DOMParser).parseFromString(k(r,i),n);case"json":return JSON.parse(k(r,i));default:throw new h.a("Unhandled responseType: "+t)}}(l,r))},N._Implementations.loadAndExecuteScript=function(e,t,n){return Object(v.a)(e,t).otherwise(n.reject)},N._DefaultImplementations={},N._DefaultImplementations.createImage=N._Implementations.createImage,N._DefaultImplementations.loadWithXhr=N._Implementations.loadWithXhr,N._DefaultImplementations.loadAndExecuteScript=N._Implementations.loadAndExecuteScript,N.DEFAULT=Object.freeze(new N({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),t.a=N}).call(this,n(9).Buffer)},function(e,t,n){"use strict";var r=n(2),i=n(1);t.a=function e(t,n,a){a=Object(r.a)(a,!1);var o,s,u,l={},c=Object(i.a)(t),f=Object(i.a)(n);if(c)for(o in t)t.hasOwnProperty(o)&&(s=t[o],f&&a&&"object"==typeof s&&n.hasOwnProperty(o)?(u=n[o],l[o]="object"==typeof u?e(s,u,a):s):l[o]=s);if(f)for(o in n)n.hasOwnProperty(o)&&!l.hasOwnProperty(o)&&(u=n[o],l[o]=u);return l}},function(e,t,n){"use strict";var r=n(21),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=f;var a=Object.create(n(19));a.inherits=n(14);var o=n(38),s=n(31);a.inherits(f,o);for(var u=i(s.prototype),l=0;l<u.length;l++){var c=u[l];f.prototype[c]||(f.prototype[c]=s.prototype[c])}function f(e){if(!(this instanceof f))return new f(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),f.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},function(e,t,n){(t=e.exports=n(38)).Stream=t,t.Readable=t,t.Writable=n(31),t.Duplex=n(17),t.Transform=n(42),t.PassThrough=n(75)},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,n(9).Buffer)},function(e,t,n){"use strict";var r=n(1);var i=function(e){var t={};if(!e)return t;for(var n=e.split("\r\n"),r=0;r<n.length;++r){var i=n[r],a=i.indexOf(": ");if(a>0){var o=i.substring(0,a),s=i.substring(a+2);t[o]=s}}return t};function a(e,t,n){this.statusCode=e,this.response=t,this.responseHeaders=n,"string"==typeof this.responseHeaders&&(this.responseHeaders=i(this.responseHeaders))}a.prototype.toString=function(){var e="Request has failed.";return Object(r.a)(this.statusCode)&&(e+=" Status Code: "+this.statusCode),e};t.a=a},function(e,t,n){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return t.nextTick(function(){e.apply(null,a)})}}}:e.exports=t}).call(this,n(12))},function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){var t,n,r,i,a,o;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)a=e[t],o.set(a,i),i+=a.length;return o}},o={arraySet:function(e,t,n,r,i){for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},function(e,t,n){"use strict";var r=n(0),i=/^blob:/i;t.a=function(e){return r.a.typeOf.string("uri",e),i.test(e)}},function(e,t,n){"use strict";var r=n(0),i=/^data:/i;t.a=function(e){return r.a.typeOf.string("uri",e),i.test(e)}},function(e,t,n){"use strict";(function(e){var n;"undefined"!=typeof ko&&(n=ko),function(e){var t=this||(0,eval)("this"),n=t.document,r=t.navigator,i=t.jQuery,a=t.JSON;i||"undefined"==typeof jQuery||(i=jQuery),function(e){e(t.ko={})}(function(o,s){function u(e,t){return(null===e||typeof e in m)&&e===t}function l(t,n){var r;return function(){r||(r=p.a.setTimeout(function(){r=e,t()},n))}}function c(e,t){var n;return function(){clearTimeout(n),n=p.a.setTimeout(e,t)}}function f(e,t){t&&"change"!==t?"beforeChange"===t?this.pc(e):this.gb(e,t):this.qc(e)}function h(e,t){null!==t&&t.s&&t.s()}function d(e,t){var n=this.qd,r=n[w];r.ra||(this.Qb&&this.mb[t]?(n.uc(t,e,this.mb[t]),this.mb[t]=null,--this.Qb):r.I[t]||n.uc(t,e,r.J?{da:e}:n.$c(e)),e.Ja&&e.gd())}var p=void 0!==o?o:{};p.b=function(e,t){for(var n=e.split("."),r=p,i=0;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=t},p.L=function(e,t,n){e[t]=n},p.version="3.5.1",p.b("version",p.version),p.options={deferUpdates:!1,useOnlyNativeEvents:!1,foreachHidesDestroyed:!1},p.a=function(){function o(e,t){for(var n in e)c.call(e,n)&&t(n,e[n])}function s(e,t){if(t)for(var n in t)c.call(t,n)&&(e[n]=t[n]);return e}function u(e,t){return e.__proto__=t,e}function l(e,t,n,r){var i=e[t].match(v)||[];p.a.D(n.match(v),function(e){p.a.Na(i,e,r)}),e[t]=i.join(" ")}var c=Object.prototype.hasOwnProperty,f={__proto__:[]}instanceof Array,h="function"==typeof Symbol,d={},m={};d[r&&/Firefox\/2/i.test(r.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],d.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),o(d,function(e,t){if(t.length)for(var n=0,r=t.length;n<r;n++)m[t[n]]=e});var y,g={propertychange:!0},b=n&&function(){for(var t=3,r=n.createElement("div"),i=r.getElementsByTagName("i");r.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",i[0];);return 4<t?t:e}(),v=/\S+/g;return{Jc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],D:function(e,t,n){for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e)},A:"function"==typeof Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t)}:function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},Lb:function(t,n,r){for(var i=0,a=t.length;i<a;i++)if(n.call(r,t[i],i,t))return t[i];return e},Pa:function(e,t){var n=p.a.A(e,t);0<n?e.splice(n,1):0===n&&e.shift()},wc:function(e){var t=[];return e&&p.a.D(e,function(e){0>p.a.A(t,e)&&t.push(e)}),t},Mb:function(e,t,n){var r=[];if(e)for(var i=0,a=e.length;i<a;i++)r.push(t.call(n,e[i],i));return r},jb:function(e,t,n){var r=[];if(e)for(var i=0,a=e.length;i<a;i++)t.call(n,e[i],i)&&r.push(e[i]);return r},Nb:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,r=t.length;n<r;n++)e.push(t[n]);return e},Na:function(e,t,n){var r=p.a.A(p.a.bc(e),t);0>r?n&&e.push(t):n||e.splice(r,1)},Ba:f,extend:s,setPrototypeOf:u,Ab:f?u:s,P:o,Ga:function(e,t,n){if(!e)return e;var r,i={};for(r in e)c.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i},Tb:function(e){for(;e.firstChild;)p.removeNode(e.firstChild)},Yb:function(e){for(var t=((e=p.a.la(e))[0]&&e[0].ownerDocument||n).createElement("div"),r=0,i=e.length;r<i;r++)t.appendChild(p.oa(e[r]));return t},Ca:function(e,t){for(var n=0,r=e.length,i=[];n<r;n++){var a=e[n].cloneNode(!0);i.push(t?p.oa(a):a)}return i},va:function(e,t){if(p.a.Tb(e),t)for(var n=0,r=t.length;n<r;n++)e.appendChild(t[n])},Xc:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var r=n[0],i=r.parentNode,a=0,o=t.length;a<o;a++)i.insertBefore(t[a],r);for(a=0,o=n.length;a<o;a++)p.removeNode(n[a])}},Ua:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.splice(0,1);for(;1<e.length&&e[e.length-1].parentNode!==t;)e.length--;if(1<e.length){var n=e[0],r=e[e.length-1];for(e.length=0;n!==r;)e.push(n),n=n.nextSibling;e.push(r)}}return e},Zc:function(e,t){7>b?e.setAttribute("selected",t):e.selected=t},Db:function(t){return null===t||t===e?"":t.trim?t.trim():t.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Ud:function(e,t){return e=e||"",!(t.length>e.length)&&e.substring(0,t.length)===t},vd:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(1!==e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(16&t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},Sb:function(e){return p.a.vd(e,e.ownerDocument.documentElement)},kd:function(e){return!!p.a.Lb(e,p.a.Sb)},R:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},Ac:function(e){return p.onError?function(){try{return e.apply(this,arguments)}catch(e){throw p.onError&&p.onError(e),e}}:e},setTimeout:function(e,t){return setTimeout(p.a.Ac(e),t)},Gc:function(e){setTimeout(function(){throw p.onError&&p.onError(e),e},0)},B:function(e,t,n){var r=p.a.Ac(n);if(n=g[t],p.options.useOnlyNativeEvents||n||!i)if(n||"function"!=typeof e.addEventListener){if(void 0===e.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var a=function(t){r.call(e,t)},o="on"+t;e.attachEvent(o,a),p.a.K.za(e,function(){e.detachEvent(o,a)})}else e.addEventListener(t,r,!1);else y||(y="function"==typeof i(e).on?"on":"bind"),i(e)[y](t,r)},Fb:function(e,r){if(!e||!e.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var a;if(a=!("input"!==p.a.R(e)||!e.type||"click"!=r.toLowerCase()||"checkbox"!=(a=e.type)&&"radio"!=a),p.options.useOnlyNativeEvents||!i||a)if("function"==typeof n.createEvent){if("function"!=typeof e.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");(a=n.createEvent(m[r]||"HTMLEvents")).initEvent(r,!0,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(a)}else if(a&&e.click)e.click();else{if(void 0===e.fireEvent)throw Error("Browser doesn't support triggering events");e.fireEvent("on"+r)}else i(e).trigger(r)},f:function(e){return p.O(e)?e():e},bc:function(e){return p.O(e)?e.v():e},Eb:function(e,t,n){var r;t&&("object"==typeof e.classList?(r=e.classList[n?"add":"remove"],p.a.D(t.match(v),function(t){r.call(e.classList,t)})):"string"==typeof e.className.baseVal?l(e.className,"baseVal",t,n):l(e,"className",t,n))},Bb:function(t,n){var r=p.a.f(n);null!==r&&r!==e||(r="");var i=p.h.firstChild(t);!i||3!=i.nodeType||p.h.nextSibling(i)?p.h.va(t,[t.ownerDocument.createTextNode(r)]):i.data=r,p.a.Ad(t)},Yc:function(e,t){if(e.name=t,7>=b)try{var r=e.name.replace(/[&<>'"]/g,function(e){return"&#"+e.charCodeAt(0)+";"});e.mergeAttributes(n.createElement("<input name='"+r+"'/>"),!1)}catch(e){}},Ad:function(e){9<=b&&(e=1==e.nodeType?e:e.parentNode).style&&(e.style.zoom=e.style.zoom)},wd:function(e){if(b){var t=e.style.width;e.style.width=0,e.style.width=t}},Pd:function(e,t){e=p.a.f(e),t=p.a.f(t);for(var n=[],r=e;r<=t;r++)n.push(r);return n},la:function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t},Da:function(e){return h?Symbol(e):e},Zd:6===b,$d:7===b,W:b,Lc:function(e,t){for(var n=p.a.la(e.getElementsByTagName("input")).concat(p.a.la(e.getElementsByTagName("textarea"))),r="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},i=[],a=n.length-1;0<=a;a--)r(n[a])&&i.push(n[a]);return i},Nd:function(e){return"string"==typeof e&&(e=p.a.Db(e))?a&&a.parse?a.parse(e):new Function("return "+e)():null},hc:function(e,t,n){if(!a||!a.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return a.stringify(p.a.f(e),t,n)},Od:function(e,t,r){var i=(r=r||{}).params||{},a=r.includeFields||this.Jc,s=e;if("object"==typeof e&&"form"===p.a.R(e)){s=e.action;for(var u=a.length-1;0<=u;u--)for(var l=p.a.Lc(e,a[u]),c=l.length-1;0<=c;c--)i[l[c].name]=l[c].value}t=p.a.f(t);var f=n.createElement("form");for(var h in f.style.display="none",f.action=s,f.method="post",t)(e=n.createElement("input")).type="hidden",e.name=h,e.value=p.a.hc(p.a.f(t[h])),f.appendChild(e);o(i,function(e,t){var r=n.createElement("input");r.type="hidden",r.name=e,r.value=t,f.appendChild(r)}),n.body.appendChild(f),r.submitter?r.submitter(f):f.submit(),setTimeout(function(){f.parentNode.removeChild(f)},0)}}}(),p.b("utils",p.a),p.b("utils.arrayForEach",p.a.D),p.b("utils.arrayFirst",p.a.Lb),p.b("utils.arrayFilter",p.a.jb),p.b("utils.arrayGetDistinctValues",p.a.wc),p.b("utils.arrayIndexOf",p.a.A),p.b("utils.arrayMap",p.a.Mb),p.b("utils.arrayPushAll",p.a.Nb),p.b("utils.arrayRemoveItem",p.a.Pa),p.b("utils.cloneNodes",p.a.Ca),p.b("utils.createSymbolOrString",p.a.Da),p.b("utils.extend",p.a.extend),p.b("utils.fieldsIncludedWithJsonPost",p.a.Jc),p.b("utils.getFormFields",p.a.Lc),p.b("utils.objectMap",p.a.Ga),p.b("utils.peekObservable",p.a.bc),p.b("utils.postJson",p.a.Od),p.b("utils.parseJson",p.a.Nd),p.b("utils.registerEventHandler",p.a.B),p.b("utils.stringifyJson",p.a.hc),p.b("utils.range",p.a.Pd),p.b("utils.toggleDomNodeCssClass",p.a.Eb),p.b("utils.triggerEvent",p.a.Fb),p.b("utils.unwrapObservable",p.a.f),p.b("utils.objectForEach",p.a.P),p.b("utils.addOrRemoveItem",p.a.Na),p.b("utils.setTextContent",p.a.Bb),p.b("unwrap",p.a.f),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(1===arguments.length)return function(){return t.apply(e,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice(0);return r.push.apply(r,arguments),t.apply(e,r)}}),p.a.g=new function(){var t,n,r=0,i="__ko__"+(new Date).getTime(),a={};return p.a.W?(t=function(t,n){var o=t[i];if(!o||"null"===o||!a[o]){if(!n)return e;o=t[i]="ko"+r++,a[o]={}}return a[o]},n=function(e){var t=e[i];return!!t&&(delete a[t],e[i]=null,!0)}):(t=function(e,t){var n=e[i];return!n&&t&&(n=e[i]={}),n},n=function(e){return!!e[i]&&(delete e[i],!0)}),{get:function(e,n){var r=t(e,!1);return r&&r[n]},set:function(n,r,i){(n=t(n,i!==e))&&(n[r]=i)},Ub:function(e,n,r){return(e=t(e,!0))[n]||(e[n]=r)},clear:n,Z:function(){return r+++i}}},p.b("utils.domData",p.a.g),p.b("utils.domData.clear",p.a.g.clear),p.a.K=new function(){function t(t,n){var r=p.a.g.get(t,a);return r===e&&n&&(r=[],p.a.g.set(t,a,r)),r}function n(e){if(n=t(e,!1))for(var n=n.slice(0),i=0;i<n.length;i++)n[i](e);p.a.g.clear(e),p.a.K.cleanExternalData(e),s[e.nodeType]&&r(e.childNodes,!0)}function r(e,t){for(var r,i=[],a=0;a<e.length;a++)if((!t||8===e[a].nodeType)&&(n(i[i.length]=r=e[a]),e[a]!==r))for(;a--&&-1==p.a.A(i,e[a]););}var a=p.a.g.Z(),o={1:!0,8:!0,9:!0},s={1:!0,9:!0};return{za:function(e,n){if("function"!=typeof n)throw Error("Callback must be a function");t(e,!0).push(n)},yb:function(n,r){var i=t(n,!1);i&&(p.a.Pa(i,r),0==i.length&&p.a.g.set(n,a,e))},oa:function(e){return p.u.G(function(){o[e.nodeType]&&(n(e),s[e.nodeType]&&r(e.getElementsByTagName("*")))}),e},removeNode:function(e){p.oa(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){i&&"function"==typeof i.cleanData&&i.cleanData([e])}}},p.oa=p.a.K.oa,p.removeNode=p.a.K.removeNode,p.b("cleanNode",p.oa),p.b("removeNode",p.removeNode),p.b("utils.domNodeDisposal",p.a.K),p.b("utils.domNodeDisposal.addDisposeCallback",p.a.K.za),p.b("utils.domNodeDisposal.removeDisposeCallback",p.a.K.yb),function(){var r=[0,"",""],a=[1,"<table>","</table>"],o=[3,"<table><tbody><tr>","</tr></tbody></table>"],s=[1,"<select multiple='multiple'>","</select>"],u={thead:a,tbody:a,tfoot:a,tr:[2,"<table><tbody>","</tbody></table>"],td:o,th:o,option:s,optgroup:s},l=8>=p.a.W;p.a.ua=function(e,a){var o;if(i){if(i.parseHTML)o=i.parseHTML(e,a)||[];else if((o=i.clean([e],a))&&o[0]){for(var s=o[0];s.parentNode&&11!==s.parentNode.nodeType;)s=s.parentNode;s.parentNode&&s.parentNode.removeChild(s)}}else{(o=a)||(o=n),s=o.parentWindow||o.defaultView||t;var c,f=p.a.Db(e).toLowerCase(),h=o.createElement("div");for(c=(f=f.match(/^(?:\x3c!--.*?--\x3e\s*?)*?<([a-z]+)[\s>]/))&&u[f[1]]||r,f=c[0],c="ignored<div>"+c[1]+e+c[2]+"</div>","function"==typeof s.innerShiv?h.appendChild(s.innerShiv(c)):(l&&o.body.appendChild(h),h.innerHTML=c,l&&h.parentNode.removeChild(h));f--;)h=h.lastChild;o=p.a.la(h.lastChild.childNodes)}return o},p.a.Md=function(e,t){var n=p.a.ua(e,t);return n.length&&n[0].parentElement||p.a.Yb(n)},p.a.fc=function(t,n){if(p.a.Tb(t),null!==(n=p.a.f(n))&&n!==e)if("string"!=typeof n&&(n=n.toString()),i)i(t).html(n);else for(var r=p.a.ua(n,t.ownerDocument),a=0;a<r.length;a++)t.appendChild(r[a])}}(),p.b("utils.parseHtmlFragment",p.a.ua),p.b("utils.setHtml",p.a.fc),p.aa=function(){var t={};return{Xb:function(e){if("function"!=typeof e)throw Error("You can only pass a function to ko.memoization.memoize()");var n=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return t[n]=e,"\x3c!--[ko_memo:"+n+"]--\x3e"},bd:function(n,r){var i=t[n];if(i===e)throw Error("Couldn't find any memo with ID "+n+". Perhaps it's already been unmemoized.");try{return i.apply(null,r||[]),!0}finally{delete t[n]}},cd:function(e,t){var n=[];!function e(t,n){if(t)if(8==t.nodeType)null!=(r=p.aa.Uc(t.nodeValue))&&n.push({ud:t,Kd:r});else if(1==t.nodeType)for(var r=0,i=t.childNodes,a=i.length;r<a;r++)e(i[r],n)}(e,n);for(var r=0,i=n.length;r<i;r++){var a=n[r].ud,o=[a];t&&p.a.Nb(o,t),p.aa.bd(n[r].Kd,o),a.nodeValue="",a.parentNode&&a.parentNode.removeChild(a)}},Uc:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:null}}}(),p.b("memoization",p.aa),p.b("memoization.memoize",p.aa.Xb),p.b("memoization.unmemoize",p.aa.bd),p.b("memoization.parseMemoText",p.aa.Uc),p.b("memoization.unmemoizeDomNodeAndDescendants",p.aa.cd),p.na=function(){function e(){if(a)for(var e,t=a,n=0;s<a;)if(e=i[s++]){if(s>t){if(5e3<=++n){s=a,p.a.Gc(Error("'Too much recursion' after processing "+n+" task groups."));break}t=a}try{e()}catch(e){p.a.Gc(e)}}}function r(){e(),s=a=i.length=0}var i=[],a=0,o=1,s=0;return{scheduler:t.MutationObserver?function(e){var t=n.createElement("div");return new MutationObserver(e).observe(t,{attributes:!0}),function(){t.classList.toggle("foo")}}(r):n&&"onreadystatechange"in n.createElement("script")?function(e){var t=n.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,n.documentElement.removeChild(t),t=null,e()},n.documentElement.appendChild(t)}:function(e){setTimeout(e,0)},zb:function(e){return a||p.na.scheduler(r),i[a++]=e,o++},cancel:function(e){(e-=o-a)>=s&&e<a&&(i[e]=null)},resetForTesting:function(){var e=a-s;return s=a=i.length=0,e},Sd:e}}(),p.b("tasks",p.na),p.b("tasks.schedule",p.na.zb),p.b("tasks.runEarly",p.na.Sd),p.Ta={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return p.$({read:e,write:function(r){clearTimeout(n),n=p.a.setTimeout(function(){e(r)},t)}})},rateLimit:function(e,t){var n,r,i;"number"==typeof t?n=t:(n=t.timeout,r=t.method),e.Hb=!1,i="function"==typeof r?r:"notifyWhenChangesStop"==r?c:l,e.ub(function(e){return i(e,n,t)})},deferred:function(t,n){if(!0!==n)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");t.Hb||(t.Hb=!0,t.ub(function(n){var r,i=!1;return function(){if(!i){p.na.cancel(r),r=p.na.zb(n);try{i=!0,t.notifySubscribers(e,"dirty")}finally{i=!1}}}}))},notify:function(e,t){e.equalityComparer="always"==t?null:u}};var m={undefined:1,boolean:1,number:1,string:1};p.b("extenders",p.Ta),p.ic=function(e,t,n){this.da=e,this.lc=t,this.mc=n,this.Ib=!1,this.fb=this.Jb=null,p.L(this,"dispose",this.s),p.L(this,"disposeWhenNodeIsRemoved",this.l)},p.ic.prototype.s=function(){this.Ib||(this.fb&&p.a.K.yb(this.Jb,this.fb),this.Ib=!0,this.mc(),this.da=this.lc=this.mc=this.Jb=this.fb=null)},p.ic.prototype.l=function(e){this.Jb=e,p.a.K.za(e,this.fb=this.s.bind(this))},p.T=function(){p.a.Ab(this,y),y.qb(this)};var y={qb:function(e){e.U={change:[]},e.sc=1},subscribe:function(e,t,n){var r=this;n=n||"change";var i=new p.ic(r,t?e.bind(t):e,function(){p.a.Pa(r.U[n],i),r.hb&&r.hb(n)});return r.Qa&&r.Qa(n),r.U[n]||(r.U[n]=[]),r.U[n].push(i),i},notifySubscribers:function(e,t){if("change"===(t=t||"change")&&this.Gb(),this.Wa(t)){var n="change"===t&&this.ed||this.U[t].slice(0);try{p.u.xc();for(var r,i=0;r=n[i];++i)r.Ib||r.lc(e)}finally{p.u.end()}}},ob:function(){return this.sc},Dd:function(e){return this.ob()!==e},Gb:function(){++this.sc},ub:function(e){var t,n,r,i,a,o=this,s=p.O(o);o.gb||(o.gb=o.notifySubscribers,o.notifySubscribers=f);var u=e(function(){o.Ja=!1,s&&i===o&&(i=o.nc?o.nc():o());var e=n||a&&o.sb(r,i);a=n=t=!1,e&&o.gb(r=i)});o.qc=function(e,n){n&&o.Ja||(a=!n),o.ed=o.U.change.slice(0),o.Ja=t=!0,i=e,u()},o.pc=function(e){t||(r=e,o.gb(e,"beforeChange"))},o.rc=function(){a=!0},o.gd=function(){o.sb(r,o.v(!0))&&(n=!0)}},Wa:function(e){return this.U[e]&&this.U[e].length},Bd:function(e){if(e)return this.U[e]&&this.U[e].length||0;var t=0;return p.a.P(this.U,function(e,n){"dirty"!==e&&(t+=n.length)}),t},sb:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},toString:function(){return"[object Object]"},extend:function(e){var t=this;return e&&p.a.P(e,function(e,n){var r=p.Ta[e];"function"==typeof r&&(t=r(t,n)||t)}),t}};p.L(y,"init",y.qb),p.L(y,"subscribe",y.subscribe),p.L(y,"extend",y.extend),p.L(y,"getSubscriptionsCount",y.Bd),p.a.Ba&&p.a.setPrototypeOf(y,Function.prototype),p.T.fn=y,p.Qc=function(e){return null!=e&&"function"==typeof e.subscribe&&"function"==typeof e.notifySubscribers},p.b("subscribable",p.T),p.b("isSubscribable",p.Qc),p.S=p.u=function(){function e(e){r.push(n),n=e}function t(){n=r.pop()}var n,r=[],i=0;return{xc:e,end:t,cc:function(e){if(n){if(!p.Qc(e))throw Error("Only subscribable things can act as dependencies");n.od.call(n.pd,e,e.fd||(e.fd=++i))}},G:function(n,r,i){try{return e(),n.apply(r,i||[])}finally{t()}},qa:function(){if(n)return n.o.qa()},Va:function(){if(n)return n.o.Va()},Ya:function(){if(n)return n.Ya},o:function(){if(n)return n.o}}}(),p.b("computedContext",p.S),p.b("computedContext.getDependenciesCount",p.S.qa),p.b("computedContext.getDependencies",p.S.Va),p.b("computedContext.isInitial",p.S.Ya),p.b("computedContext.registerDependency",p.S.cc),p.b("ignoreDependencies",p.Yd=p.u.G);var g=p.a.Da("_latestValue");p.ta=function(e){function t(){return 0<arguments.length?(t.sb(t[g],arguments[0])&&(t.ya(),t[g]=arguments[0],t.xa()),this):(p.u.cc(t),t[g])}return t[g]=e,p.a.Ba||p.a.extend(t,p.T.fn),p.T.fn.qb(t),p.a.Ab(t,b),p.options.deferUpdates&&p.Ta.deferred(t,!0),t};var b={equalityComparer:u,v:function(){return this[g]},xa:function(){this.notifySubscribers(this[g],"spectate"),this.notifySubscribers(this[g])},ya:function(){this.notifySubscribers(this[g],"beforeChange")}};p.a.Ba&&p.a.setPrototypeOf(b,p.T.fn);var v=p.ta.Ma="__ko_proto__";b[v]=p.ta,p.O=function(e){if((e="function"==typeof e&&e[v])&&e!==b[v]&&e!==p.o.fn[v])throw Error("Invalid object that looks like an observable; possibly from another Knockout instance");return!!e},p.Za=function(e){return"function"==typeof e&&(e[v]===b[v]||e[v]===p.o.fn[v]&&e.Nc)},p.b("observable",p.ta),p.b("isObservable",p.O),p.b("isWriteableObservable",p.Za),p.b("isWritableObservable",p.Za),p.b("observable.fn",b),p.L(b,"peek",b.v),p.L(b,"valueHasMutated",b.xa),p.L(b,"valueWillMutate",b.ya),p.Ha=function(e){if("object"!=typeof(e=e||[])||!("length"in e))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return e=p.ta(e),p.a.Ab(e,p.Ha.fn),e.extend({trackArrayChanges:!0})},p.Ha.fn={remove:function(e){for(var t=this.v(),n=[],r="function"!=typeof e||p.O(e)?function(t){return t===e}:e,i=0;i<t.length;i++){var a=t[i];if(r(a)){if(0===n.length&&this.ya(),t[i]!==a)throw Error("Array modified during remove; cannot remove item");n.push(a),t.splice(i,1),i--}}return n.length&&this.xa(),n},removeAll:function(t){if(t===e){var n=this.v(),r=n.slice(0);return this.ya(),n.splice(0,n.length),this.xa(),r}return t?this.remove(function(e){return 0<=p.a.A(t,e)}):[]},destroy:function(e){var t=this.v(),n="function"!=typeof e||p.O(e)?function(t){return t===e}:e;this.ya();for(var r=t.length-1;0<=r;r--){var i=t[r];n(i)&&(i._destroy=!0)}this.xa()},destroyAll:function(t){return t===e?this.destroy(function(){return!0}):t?this.destroy(function(e){return 0<=p.a.A(t,e)}):[]},indexOf:function(e){var t=this();return p.a.A(t,e)},replace:function(e,t){var n=this.indexOf(e);0<=n&&(this.ya(),this.v()[n]=t,this.xa())},sorted:function(e){var t=this().slice(0);return e?t.sort(e):t.sort()},reversed:function(){return this().slice(0).reverse()}},p.a.Ba&&p.a.setPrototypeOf(p.Ha.fn,p.ta.fn),p.a.D("pop push reverse shift sort splice unshift".split(" "),function(e){p.Ha.fn[e]=function(){var t=this.v();this.ya(),this.zc(t,e,arguments);var n=t[e].apply(t,arguments);return this.xa(),n===t?this:n}}),p.a.D(["slice"],function(e){p.Ha.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),p.Pc=function(e){return p.O(e)&&"function"==typeof e.remove&&"function"==typeof e.push},p.b("observableArray",p.Ha),p.b("isObservableArray",p.Pc),p.Ta.trackArrayChanges=function(t,n){function r(){function e(){if(l){var e,n=[].concat(t.v()||[]);t.Wa("arrayChange")&&((!u||1<l)&&(u=p.a.Pb(o,n,t.Ob)),e=u),o=n,u=null,l=0,e&&e.length&&t.notifySubscribers(e,"arrayChange")}}s?e():(s=!0,a=t.subscribe(function(){++l},null,"spectate"),o=[].concat(t.v()||[]),u=null,i=t.subscribe(e))}if(t.Ob={},n&&"object"==typeof n&&p.a.extend(t.Ob,n),t.Ob.sparse=!0,!t.zc){var i,a,o,s=!1,u=null,l=0,c=t.Qa,f=t.hb;t.Qa=function(e){c&&c.call(t,e),"arrayChange"===e&&r()},t.hb=function(n){f&&f.call(t,n),"arrayChange"!==n||t.Wa("arrayChange")||(i&&i.s(),a&&a.s(),a=i=null,s=!1,o=e)},t.zc=function(e,t,n){function r(e,t,n){return i[i.length]={status:e,value:t,index:n}}if(s&&!l){var i=[],a=e.length,o=n.length,c=0;switch(t){case"push":c=a;case"unshift":for(t=0;t<o;t++)r("added",n[t],c+t);break;case"pop":c=a-1;case"shift":a&&r("deleted",e[c],c);break;case"splice":t=Math.min(Math.max(0,0>n[0]?a+n[0]:n[0]),a),a=1===o?a:Math.min(t+(n[1]||0),a),o=t+o-2,c=Math.max(a,o);for(var f=[],h=[],d=2;t<c;++t,++d)t<a&&h.push(r("deleted",e[t],t)),t<o&&f.push(r("added",n[d],t));p.a.Kc(h,f);break;default:return}u=i}}}};var w=p.a.Da("_state");p.o=p.$=function(t,n,r){function i(){if(0<arguments.length){if("function"!=typeof a)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return a.apply(o.nb,arguments),this}return o.ra||p.u.cc(i),(o.ka||o.J&&i.Xa())&&i.ha(),o.X}if("object"==typeof t?r=t:(r=r||{},t&&(r.read=t)),"function"!=typeof r.read)throw Error("Pass a function that returns the value of the ko.computed");var a=r.write,o={X:e,sa:!0,ka:!0,rb:!1,jc:!1,ra:!1,wb:!1,J:!1,Wc:r.read,nb:n||r.owner,l:r.disposeWhenNodeIsRemoved||r.l||null,Sa:r.disposeWhen||r.Sa,Rb:null,I:{},V:0,Ic:null};return i[w]=o,i.Nc="function"==typeof a,p.a.Ba||p.a.extend(i,p.T.fn),p.T.fn.qb(i),p.a.Ab(i,O),r.pure?(o.wb=!0,o.J=!0,p.a.extend(i,_)):r.deferEvaluation&&p.a.extend(i,C),p.options.deferUpdates&&p.Ta.deferred(i,!0),o.l&&(o.jc=!0,o.l.nodeType||(o.l=null)),o.J||r.deferEvaluation||i.ha(),o.l&&i.ja()&&p.a.K.za(o.l,o.Rb=function(){i.s()}),i};var O={equalityComparer:u,qa:function(){return this[w].V},Va:function(){var e=[];return p.a.P(this[w].I,function(t,n){e[n.Ka]=n.da}),e},Vb:function(e){if(!this[w].V)return!1;var t=this.Va();return-1!==p.a.A(t,e)||!!p.a.Lb(t,function(t){return t.Vb&&t.Vb(e)})},uc:function(e,t,n){if(this[w].wb&&t===this)throw Error("A 'pure' computed must not be called recursively");this[w].I[e]=n,n.Ka=this[w].V++,n.La=t.ob()},Xa:function(){var e,t,n=this[w].I;for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&(t=n[e],this.Ia&&t.da.Ja||t.da.Dd(t.La)))return!0},Jd:function(){this.Ia&&!this[w].rb&&this.Ia(!1)},ja:function(){var e=this[w];return e.ka||0<e.V},Rd:function(){this.Ja?this[w].ka&&(this[w].sa=!0):this.Hc()},$c:function(e){if(e.Hb){var t=e.subscribe(this.Jd,this,"dirty"),n=e.subscribe(this.Rd,this);return{da:e,s:function(){t.s(),n.s()}}}return e.subscribe(this.Hc,this)},Hc:function(){var e=this,t=e.throttleEvaluation;t&&0<=t?(clearTimeout(this[w].Ic),this[w].Ic=p.a.setTimeout(function(){e.ha(!0)},t)):e.Ia?e.Ia(!0):e.ha(!0)},ha:function(e){var t=this[w],n=t.Sa,r=!1;if(!t.rb&&!t.ra){if(t.l&&!p.a.Sb(t.l)||n&&n()){if(!t.jc)return void this.s()}else t.jc=!1;t.rb=!0;try{r=this.zd(e)}finally{t.rb=!1}return r}},zd:function(t){var n=this[w],r=!1,i=n.wb?e:!n.V;r={qd:this,mb:n.I,Qb:n.V},p.u.xc({pd:r,od:d,o:this,Ya:i}),n.I={},n.V=0;var a=this.yd(n,r);return n.V?r=this.sb(n.X,a):(this.s(),r=!0),r&&(n.J?this.Gb():this.notifySubscribers(n.X,"beforeChange"),n.X=a,this.notifySubscribers(n.X,"spectate"),!n.J&&t&&this.notifySubscribers(n.X),this.rc&&this.rc()),i&&this.notifySubscribers(n.X,"awake"),r},yd:function(e,t){try{var n=e.Wc;return e.nb?n.call(e.nb):n()}finally{p.u.end(),t.Qb&&!e.J&&p.a.P(t.mb,h),e.sa=e.ka=!1}},v:function(e){var t=this[w];return(t.ka&&(e||!t.V)||t.J&&this.Xa())&&this.ha(),t.X},ub:function(e){p.T.fn.ub.call(this,e),this.nc=function(){return this[w].J||(this[w].sa?this.ha():this[w].ka=!1),this[w].X},this.Ia=function(e){this.pc(this[w].X),this[w].ka=!0,e&&(this[w].sa=!0),this.qc(this,!e)}},s:function(){var t=this[w];!t.J&&t.I&&p.a.P(t.I,function(e,t){t.s&&t.s()}),t.l&&t.Rb&&p.a.K.yb(t.l,t.Rb),t.I=e,t.V=0,t.ra=!0,t.sa=!1,t.ka=!1,t.J=!1,t.l=e,t.Sa=e,t.Wc=e,this.Nc||(t.nb=e)}},_={Qa:function(e){var t=this,n=t[w];if(!n.ra&&n.J&&"change"==e){if(n.J=!1,n.sa||t.Xa())n.I=null,n.V=0,t.ha()&&t.Gb();else{var r=[];p.a.P(n.I,function(e,t){r[t.Ka]=e}),p.a.D(r,function(e,r){var i=n.I[e],a=t.$c(i.da);a.Ka=r,a.La=i.La,n.I[e]=a}),t.Xa()&&t.ha()&&t.Gb()}n.ra||t.notifySubscribers(n.X,"awake")}},hb:function(t){var n=this[w];n.ra||"change"!=t||this.Wa("change")||(p.a.P(n.I,function(e,t){t.s&&(n.I[e]={da:t.da,Ka:t.Ka,La:t.La},t.s())}),n.J=!0,this.notifySubscribers(e,"asleep"))},ob:function(){var e=this[w];return e.J&&(e.sa||this.Xa())&&this.ha(),p.T.fn.ob.call(this)}},C={Qa:function(e){"change"!=e&&"beforeChange"!=e||this.v()}};p.a.Ba&&p.a.setPrototypeOf(O,p.T.fn);var E=p.ta.Ma;O[E]=p.o,p.Oc=function(e){return"function"==typeof e&&e[E]===O[E]},p.Fd=function(e){return p.Oc(e)&&e[w]&&e[w].wb},p.b("computed",p.o),p.b("dependentObservable",p.o),p.b("isComputed",p.Oc),p.b("isPureComputed",p.Fd),p.b("computed.fn",O),p.L(O,"peek",O.v),p.L(O,"dispose",O.s),p.L(O,"isActive",O.ja),p.L(O,"getDependenciesCount",O.qa),p.L(O,"getDependencies",O.Va),p.xb=function(e,t){return"function"==typeof e?p.o(e,t,{pure:!0}):((e=p.a.extend({},e)).pure=!0,p.o(e,t))},p.b("pureComputed",p.xb),function(){function t(r,i,a){if(a=a||new n,"object"!=typeof(r=i(r))||null===r||r===e||r instanceof RegExp||r instanceof Date||r instanceof String||r instanceof Number||r instanceof Boolean)return r;var o=r instanceof Array?[]:{};return a.save(r,o),function(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(n in e)t(n)}(r,function(n){var s=i(r[n]);switch(typeof s){case"boolean":case"number":case"string":case"function":o[n]=s;break;case"object":case"undefined":var u=a.get(s);o[n]=u!==e?u:t(s,i,a)}}),o}function n(){this.keys=[],this.values=[]}p.ad=function(e){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return t(e,function(e){for(var t=0;p.O(e)&&10>t;t++)e=e();return e})},p.toJSON=function(e,t,n){return e=p.ad(e),p.a.hc(e,t,n)},n.prototype={constructor:n,save:function(e,t){var n=p.a.A(this.keys,e);0<=n?this.values[n]=t:(this.keys.push(e),this.values.push(t))},get:function(t){return 0<=(t=p.a.A(this.keys,t))?this.values[t]:e}}}(),p.b("toJS",p.ad),p.b("toJSON",p.toJSON),p.Wd=function(e,t,n){function r(t){var r=p.xb(e,n).extend({ma:"always"}),i=r.subscribe(function(e){e&&(i.s(),t(e))});return r.notifySubscribers(r.v()),i}return"function"!=typeof Promise||t?r(t.bind(n)):new Promise(r)},p.b("when",p.Wd),p.w={M:function(t){switch(p.a.R(t)){case"option":return!0===t.__ko__hasDomDataOptionValue__?p.a.g.get(t,p.c.options.$b):7>=p.a.W?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return 0<=t.selectedIndex?p.w.M(t.options[t.selectedIndex]):e;default:return t.value}},cb:function(t,n,r){switch(p.a.R(t)){case"option":"string"==typeof n?(p.a.g.set(t,p.c.options.$b,e),"__ko__hasDomDataOptionValue__"in t&&delete t.__ko__hasDomDataOptionValue__,t.value=n):(p.a.g.set(t,p.c.options.$b,n),t.__ko__hasDomDataOptionValue__=!0,t.value="number"==typeof n?n:"");break;case"select":""!==n&&null!==n||(n=e);for(var i,a=-1,o=0,s=t.options.length;o<s;++o)if((i=p.w.M(t.options[o]))==n||""===i&&n===e){a=o;break}(r||0<=a||n===e&&1<t.size)&&(t.selectedIndex=a,6===p.a.W&&p.a.setTimeout(function(){t.selectedIndex=a},0));break;default:null!==n&&n!==e||(n=""),t.value=n}}},p.b("selectExtensions",p.w),p.b("selectExtensions.readValue",p.w.M),p.b("selectExtensions.writeValue",p.w.cb),p.m=function(){function e(e){123===(e=p.a.Db(e)).charCodeAt(0)&&(e=e.slice(1,-1));var t,n=[],o=(e+="\n,").match(r),s=[],u=0;if(1<o.length){for(var l,c=0;l=o[c];++c){var f=l.charCodeAt(0);if(44===f){if(0>=u){n.push(t&&s.length?{key:t,value:s.join("")}:{unknown:t||s.join("")}),t=u=0,s=[];continue}}else if(58===f){if(!u&&!t&&1===s.length){t=s.pop();continue}}else{if(47===f&&1<l.length&&(47===l.charCodeAt(1)||42===l.charCodeAt(1)))continue;47===f&&c&&1<l.length?(f=o[c-1].match(i))&&!a[f[0]]&&(o=(e=e.substr(e.indexOf(l)+1)).match(r),c=-1,l="/"):40===f||123===f||91===f?++u:41===f||125===f||93===f?--u:t||s.length||34!==f&&39!==f||(l=l.slice(1,-1))}s.push(l)}if(0<u)throw Error("Unbalanced parentheses, braces, or brackets")}return n}var t=["true","false","null","undefined"],n=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,r=RegExp("\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|`(?:\\\\.|[^`])*`|/\\*(?:[^*]|\\*+[^*/])*\\*+/|//.*\n|/(?:\\\\.|[^/])+/w*|[^\\s:,/][^,\"'`{}()/:[\\]]*[^\\s,\"'`{}()/:[\\]]|[^\\s]","g"),i=/[\])"'A-Za-z0-9_$]+$/,a={in:1,return:1,typeof:1},o={};return{Ra:[],wa:o,ac:e,vb:function(r,i){function a(e,r){var i;if(!c){var f=p.getBindingHandler(e);if(f&&f.preprocess&&!(r=f.preprocess(r,e,a)))return;(f=o[e])&&(i=r,i=!(0<=p.a.A(t,i))&&null!==(f=i.match(n))&&(f[1]?"Object("+f[1]+")"+f[2]:i),f=i),f&&u.push("'"+("string"==typeof o[e]?o[e]:e)+"':function(_z){"+i+"=_z}")}l&&(r="function(){return "+r+" }"),s.push("'"+e+"':"+r)}var s=[],u=[],l=(i=i||{}).valueAccessors,c=i.bindingParams,f="string"==typeof r?e(r):r;return p.a.D(f,function(e){a(e.key||e.unknown,e.value)}),u.length&&a("_ko_property_writers","{"+u.join(",")+" }"),s.join(",")},Id:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},eb:function(e,t,n,r,i){e&&p.O(e)?!p.Za(e)||i&&e.v()===r||e(r):(e=t.get("_ko_property_writers"))&&e[n]&&e[n](r)}}}(),p.b("expressionRewriting",p.m),p.b("expressionRewriting.bindingRewriteValidators",p.m.Ra),p.b("expressionRewriting.parseObjectLiteral",p.m.ac),p.b("expressionRewriting.preProcessBindings",p.m.vb),p.b("expressionRewriting._twoWayBindings",p.m.wa),p.b("jsonExpressionRewriting",p.m),p.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",p.m.vb),function(){function e(e){return 8==e.nodeType&&o.test(a?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&s.test(a?e.text:e.nodeValue)}function r(n,r){for(var i=n,a=1,o=[];i=i.nextSibling;){if(t(i)&&(p.a.g.set(i,l,!0),0==--a))return o;o.push(i),e(i)&&a++}if(!r)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function i(e,t){var n=r(e,t);return n?0<n.length?n[n.length-1].nextSibling:e.nextSibling:null}var a=n&&"\x3c!--test--\x3e"===n.createComment("test").text,o=a?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,s=a?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,u={ul:!0,ol:!0},l="__ko_matchedEndComment__";p.h={ea:{},childNodes:function(t){return e(t)?r(t):t.childNodes},Ea:function(t){if(e(t))for(var n=0,r=(t=p.h.childNodes(t)).length;n<r;n++)p.removeNode(t[n]);else p.a.Tb(t)},va:function(t,n){if(e(t)){p.h.Ea(t);for(var r=t.nextSibling,i=0,a=n.length;i<a;i++)r.parentNode.insertBefore(n[i],r)}else p.a.va(t,n)},Vc:function(t,n){var r;e(t)?(r=t.nextSibling,t=t.parentNode):r=t.firstChild,r?n!==r&&t.insertBefore(n,r):t.appendChild(n)},Wb:function(t,n,r){r?(r=r.nextSibling,e(t)&&(t=t.parentNode),r?n!==r&&t.insertBefore(n,r):t.appendChild(n)):p.h.Vc(t,n)},firstChild:function(n){if(e(n))return!n.nextSibling||t(n.nextSibling)?null:n.nextSibling;if(n.firstChild&&t(n.firstChild))throw Error("Found invalid end comment, as the first child of "+n);return n.firstChild},nextSibling:function(n){if(e(n)&&(n=i(n)),n.nextSibling&&t(n.nextSibling)){var r=n.nextSibling;if(t(r)&&!p.a.g.get(r,l))throw Error("Found end comment without a matching opening comment, as child of "+n);return null}return n.nextSibling},Cd:e,Vd:function(e){return(e=(a?e.text:e.nodeValue).match(o))?e[1]:null},Sc:function(n){if(u[p.a.R(n)]){var r=n.firstChild;if(r)do{if(1===r.nodeType){var a,o=null;if(a=r.firstChild)do{if(o)o.push(a);else if(e(a)){var s=i(a,!0);s?a=s:o=[a]}else t(a)&&(o=[a])}while(a=a.nextSibling);if(a=o)for(o=r.nextSibling,s=0;s<a.length;s++)o?n.insertBefore(a[s],o):n.appendChild(a[s])}}while(r=r.nextSibling)}}}}(),p.b("virtualElements",p.h),p.b("virtualElements.allowedBindings",p.h.ea),p.b("virtualElements.emptyNode",p.h.Ea),p.b("virtualElements.insertAfter",p.h.Wb),p.b("virtualElements.prepend",p.h.Vc),p.b("virtualElements.setDomNodeChildren",p.h.va),p.ga=function(){this.nd={}},p.a.extend(p.ga.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind")||p.j.getComponentNameForNode(e);case 8:return p.h.Cd(e);default:return!1}},getBindings:function(e,t){var n=(n=this.getBindingsString(e,t))?this.parseBindingsString(n,t,e):null;return p.j.tc(n,e,t,!1)},getBindingAccessors:function(e,t){var n=(n=this.getBindingsString(e,t))?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null;return p.j.tc(n,e,t,!0)},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return p.h.Vd(e);default:return null}},parseBindingsString:function(e,t,n,r){try{var i,a=this.nd,o=e+(r&&r.valueAccessors||"");if(!(i=a[o])){var s,u="with($context){with($data||{}){return{"+p.m.vb(e,r)+"}}}";s=new Function("$context","$element",u),i=a[o]=s}return i(t,n)}catch(t){throw t.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+t.message,t}}}),p.ga.instance=new p.ga,p.b("bindingProvider",p.ga),function(){function r(e){var t=(e=p.a.g.get(e,O))&&e.N;t&&(e.N=null,t.Tc())}function a(e,t,n){this.node=e,this.yc=t,this.kb=[],this.H=!1,t.N||p.a.K.za(e,r),n&&n.N&&(n.N.kb.push(e),this.Kb=n)}function o(e){return function(){return e}}function s(e){return e()}function u(e){return p.a.Ga(p.u.G(e),function(t,n){return function(){return e()[n]}})}function l(e,t,n){return"function"==typeof e?u(e.bind(null,t,n)):p.a.Ga(e,o)}function c(e,t){return u(this.getBindings.bind(this,e,t))}function f(e,t){var n=p.h.firstChild(t);if(n){var r,i=p.ga.instance,a=i.preprocessNode;if(a){for(;r=n;)n=p.h.nextSibling(r),a.call(i,r);n=p.h.firstChild(t)}for(;r=n;)n=p.h.nextSibling(r),h(e,r)}p.i.ma(t,p.i.H)}function h(e,t){var n=e,r=1===t.nodeType;r&&p.h.Sc(t),(r||p.ga.instance.nodeHasBindings(t))&&(n=d(t,null,e).bindingContextForDescendants),n&&!v[p.a.R(t)]&&f(n,t)}function d(t,n,r){var i,a=p.a.g.Ub(t,O,{}),o=a.hd;if(!n){if(o)throw Error("You cannot apply bindings multiple times to the same element.");a.hd=!0}if(o||(a.context=r),a.Zb||(a.Zb={}),n&&"function"!=typeof n)i=n;else{var u=p.ga.instance,l=u.getBindingAccessors||c,f=p.$(function(){return(i=n?n(r,t):l.call(u,t,r))&&(r[y]&&r[y](),r[b]&&r[b]()),i},null,{l:t});i&&f.ja()||(f=null)}var h,d=r;if(i){var m=function(){return p.a.Ga(f?f():i,s)},g=f?function(e){return function(){return s(f()[e])}}:function(e){return i[e]};m.get=function(e){return i[e]&&s(g(e))},m.has=function(e){return e in i},p.i.H in i&&p.i.subscribe(t,p.i.H,function(){var e=(0,i[p.i.H])();if(e){var n=p.h.childNodes(t);n.length&&e(n,p.Ec(n[0]))}}),p.i.pa in i&&(d=p.i.Cb(t,r),p.i.subscribe(t,p.i.pa,function(){var e=(0,i[p.i.pa])();e&&p.h.firstChild(t)&&e(t)})),a=function(e){var t=[],n={},r=[];return p.a.P(e,function i(a){if(!n[a]){var o=p.getBindingHandler(a);o&&(o.after&&(r.push(a),p.a.D(o.after,function(t){if(e[t]){if(-1!==p.a.A(r,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+r.join(", "));i(t)}}),r.length--),t.push({key:a,Mc:o})),n[a]=!0}}),t}(i),p.a.D(a,function(n){var r=n.Mc.init,a=n.Mc.update,o=n.key;if(8===t.nodeType&&!p.h.ea[o])throw Error("The binding '"+o+"' cannot be used with virtual elements");try{"function"==typeof r&&p.u.G(function(){var n=r(t,g(o),m,d.$data,d);if(n&&n.controlsDescendantBindings){if(h!==e)throw Error("Multiple bindings ("+h+" and "+o+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");h=o}}),"function"==typeof a&&p.$(function(){a(t,g(o),m,d.$data,d)},null,{l:t})}catch(e){throw e.message='Unable to process binding "'+o+": "+i[o]+'"\nMessage: '+e.message,e}})}return{shouldBindDescendants:a=h===e,bindingContextForDescendants:a&&d}}function m(t,n){return t&&t instanceof p.fa?t:new p.fa(t,e,e,n)}var y=p.a.Da("_subscribable"),g=p.a.Da("_ancestorBindingInfo"),b=p.a.Da("_dataDependency");p.c={};var v={script:!0,textarea:!0,template:!0};p.getBindingHandler=function(e){return p.c[e]};var w={};p.fa=function(t,n,r,i,a){function o(){var e=f?c():c,t=p.a.f(e);return n?(p.a.extend(u,n),g in n&&(u[g]=n[g])):(u.$parents=[],u.$root=t,u.ko=p),u[y]=s,l?t=u.$data:(u.$rawData=e,u.$data=t),r&&(u[r]=t),i&&i(u,n,t),n&&n[y]&&!p.S.o().Vb(n[y])&&n[y](),h&&(u[b]=h),u.$data}var s,u=this,l=t===w,c=l?e:t,f="function"==typeof c&&!p.O(c),h=a&&a.dataDependency;a&&a.exportDependencies?o():((s=p.xb(o)).v(),s.ja()?s.equalityComparer=null:u[y]=e)},p.fa.prototype.createChildContext=function(e,t,n,r){if(!r&&t&&"object"==typeof t&&(t=(r=t).as,n=r.extend),t&&r&&r.noChildContext){var i="function"==typeof e&&!p.O(e);return new p.fa(w,this,null,function(r){n&&n(r),r[t]=i?e():e},r)}return new p.fa(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)},r)},p.fa.prototype.extend=function(e,t){return new p.fa(w,this,null,function(t){p.a.extend(t,"function"==typeof e?e(t):e)},t)};var O=p.a.g.Z();a.prototype.Tc=function(){this.Kb&&this.Kb.N&&this.Kb.N.sd(this.node)},a.prototype.sd=function(e){p.a.Pa(this.kb,e),!this.kb.length&&this.H&&this.Cc()},a.prototype.Cc=function(){this.H=!0,this.yc.N&&!this.kb.length&&(this.yc.N=null,p.a.K.yb(this.node,r),p.i.ma(this.node,p.i.pa),this.Tc())},p.i={H:"childrenComplete",pa:"descendantsComplete",subscribe:function(e,t,n,r,i){var a=p.a.g.Ub(e,O,{});return a.Fa||(a.Fa=new p.T),i&&i.notifyImmediately&&a.Zb[t]&&p.u.G(n,r,[e]),a.Fa.subscribe(n,r,t)},ma:function(t,n){var r=p.a.g.get(t,O);if(r&&(r.Zb[n]=!0,r.Fa&&r.Fa.notifySubscribers(t,n),n==p.i.H))if(r.N)r.N.Cc();else if(r.N===e&&r.Fa&&r.Fa.Wa(p.i.pa))throw Error("descendantsComplete event not supported for bindings on this node")},Cb:function(e,t){var n=p.a.g.Ub(e,O,{});return n.N||(n.N=new a(e,n,t[g])),t[g]==n?t:t.extend(function(e){e[g]=n})}},p.Td=function(e){return(e=p.a.g.get(e,O))&&e.context},p.ib=function(e,t,n){return 1===e.nodeType&&p.h.Sc(e),d(e,t,m(n))},p.ld=function(e,t,n){return n=m(n),p.ib(e,l(t,n,e),n)},p.Oa=function(e,t){1!==t.nodeType&&8!==t.nodeType||f(m(e),t)},p.vc=function(e,r,a){if(!i&&t.jQuery&&(i=t.jQuery),2>arguments.length){if(!(r=n.body))throw Error("ko.applyBindings: could not find document.body; has the document been loaded?")}else if(!r||1!==r.nodeType&&8!==r.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");h(m(e,a),r)},p.Dc=function(t){return!t||1!==t.nodeType&&8!==t.nodeType?e:p.Td(t)},p.Ec=function(t){return(t=p.Dc(t))?t.$data:e},p.b("bindingHandlers",p.c),p.b("bindingEvent",p.i),p.b("bindingEvent.subscribe",p.i.subscribe),p.b("bindingEvent.startPossiblyAsyncContentBinding",p.i.Cb),p.b("applyBindings",p.vc),p.b("applyBindingsToDescendants",p.Oa),p.b("applyBindingAccessorsToNode",p.ib),p.b("applyBindingsToNode",p.ld),p.b("contextFor",p.Dc),p.b("dataFor",p.Ec)}(),function(e){function t(t,r){var o,s=Object.prototype.hasOwnProperty.call(i,t)?i[t]:e;s?s.subscribe(r):((s=i[t]=new p.T).subscribe(r),n(t,function(e,n){var r=!(!n||!n.synchronous);a[t]={definition:e,Gd:r},delete i[t],o||r?s.notifySubscribers(e):p.na.zb(function(){s.notifySubscribers(e)})}),o=!0)}function n(e,t){r("getConfig",[e],function(n){n?r("loadComponent",[e,n],function(e){t(e,n)}):t(null,null)})}function r(t,n,i,a){a||(a=p.j.loaders.slice(0));var o=a.shift();if(o){var s=o[t];if(s){var u=!1;if(s.apply(o,n.concat(function(e){u?i(null):null!==e?i(e):r(t,n,i,a)}))!==e&&(u=!0,!o.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else r(t,n,i,a)}else i(null)}var i={},a={};p.j={get:function(n,r){var i=Object.prototype.hasOwnProperty.call(a,n)?a[n]:e;i?i.Gd?p.u.G(function(){r(i.definition)}):p.na.zb(function(){r(i.definition)}):t(n,r)},Bc:function(e){delete a[e]},oc:r},p.j.loaders=[],p.b("components",p.j),p.b("components.get",p.j.get),p.b("components.clearCachedDefinition",p.j.Bc)}(),function(){function e(e,t,n,r){function i(){0==--s&&r(o)}var o={},s=2,u=n.template;n=n.viewModel,u?a(t,u,function(t){p.j.oc("loadTemplate",[e,t],function(e){o.template=e,i()})}):i(),n?a(t,n,function(t){p.j.oc("loadViewModel",[e,t],function(e){o[l]=e,i()})}):i()}function r(e){switch(p.a.R(e)){case"script":return p.a.ua(e.text);case"textarea":return p.a.ua(e.value);case"template":if(i(e.content))return p.a.Ca(e.content.childNodes)}return p.a.Ca(e.childNodes)}function i(e){return t.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}function a(e,n,r){"string"==typeof n.require?s||t.require?(s||t.require)([n.require],function(e){e&&"object"==typeof e&&e.Xd&&e.default&&(e=e.default),r(e)}):e("Uses require, but no AMD loader is present"):r(n)}function o(e){return function(t){throw Error("Component '"+e+"': "+t)}}var u={};p.j.register=function(e,t){if(!t)throw Error("Invalid configuration for "+e);if(p.j.tb(e))throw Error("Component "+e+" is already registered");u[e]=t},p.j.tb=function(e){return Object.prototype.hasOwnProperty.call(u,e)},p.j.unregister=function(e){delete u[e],p.j.Bc(e)},p.j.Fc={getConfig:function(e,t){t(p.j.tb(e)?u[e]:null)},loadComponent:function(t,n,r){var i=o(t);a(i,n,function(n){e(t,i,n,r)})},loadTemplate:function(e,a,s){if(e=o(e),"string"==typeof a)s(p.a.ua(a));else if(a instanceof Array)s(a);else if(i(a))s(p.a.la(a.childNodes));else if(a.element)if(a=a.element,t.HTMLElement?a instanceof HTMLElement:a&&a.tagName&&1===a.nodeType)s(r(a));else if("string"==typeof a){var u=n.getElementById(a);u?s(r(u)):e("Cannot find element with ID "+a)}else e("Unknown element type: "+a);else e("Unknown template value: "+a)},loadViewModel:function(e,t,n){!function e(t,n,r){if("function"==typeof n)r(function(e){return new n(e)});else if("function"==typeof n[l])r(n[l]);else if("instance"in n){var i=n.instance;r(function(){return i})}else"viewModel"in n?e(t,n.viewModel,r):t("Unknown viewModel value: "+n)}(o(e),t,n)}};var l="createViewModel";p.b("components.register",p.j.register),p.b("components.isRegistered",p.j.tb),p.b("components.unregister",p.j.unregister),p.b("components.defaultLoader",p.j.Fc),p.j.loaders.push(p.j.Fc),p.j.dd=u}(),function(){function e(e,n){if(r=e.getAttribute("params")){var r=t.parseBindingsString(r,n,e,{valueAccessors:!0,bindingParams:!0}),i=(r=p.a.Ga(r,function(t){return p.o(t,null,{l:e})}),p.a.Ga(r,function(t){var n=t.v();return t.ja()?p.o({read:function(){return p.a.f(t())},write:p.Za(n)&&function(e){t()(e)},l:e}):n}));return Object.prototype.hasOwnProperty.call(i,"$raw")||(i.$raw=r),i}return{$raw:{}}}p.j.getComponentNameForNode=function(e){var t=p.a.R(e);if(p.j.tb(t)&&(-1!=t.indexOf("-")||"[object HTMLUnknownElement]"==""+e||8>=p.a.W&&e.tagName===t))return t},p.j.tc=function(t,n,r,i){if(1===n.nodeType){var a=p.j.getComponentNameForNode(n);if(a){if((t=t||{}).component)throw Error('Cannot use the "component" binding on a custom element matching a component');var o={name:a,params:e(n,r)};t.component=i?function(){return o}:o}}return t};var t=new p.ga;9>p.a.W&&(p.j.register=function(e){return function(t){return e.apply(this,arguments)}}(p.j.register),n.createDocumentFragment=function(e){return function(){var t,n=e(),r=p.j.dd;for(t in r);return n}}(n.createDocumentFragment))}(),function(){var e=0;p.c.component={init:function(t,n,r,i,a){function o(){var e=s&&s.dispose;"function"==typeof e&&e.call(s),l&&l.s(),u=s=l=null}var s,u,l,c=p.a.la(p.h.childNodes(t));return p.h.Ea(t),p.a.K.za(t,o),p.o(function(){var r,i,f=p.a.f(n());if("string"==typeof f?r=f:(r=p.a.f(f.name),i=p.a.f(f.params)),!r)throw Error("No component name specified");var h=p.i.Cb(t,a),d=u=++e;p.j.get(r,function(e){if(u===d){if(o(),!e)throw Error("Unknown component '"+r+"'");!function(e,t,n){if(!(t=t.template))throw Error("Component '"+e+"' has no template");e=p.a.Ca(t),p.h.va(n,e)}(r,e,t);var n=function(e,t,n){var r=e.createViewModel;return r?r.call(e,t,n):t}(e,i,{element:t,templateNodes:c});e=h.createChildContext(n,{extend:function(e){e.$component=n,e.$componentTemplateNodes=c}}),n&&n.koDescendantsComplete&&(l=p.i.subscribe(t,p.i.pa,n.koDescendantsComplete,n)),s=n,p.Oa(e,t)}})},null,{l:t}),{controlsDescendantBindings:!0}}},p.h.ea.component=!0}();var x={class:"className",for:"htmlFor"};p.c.attr={update:function(t,n){var r=p.a.f(n())||{};p.a.P(r,function(n,r){r=p.a.f(r);var i=n.indexOf(":"),a=(i="lookupNamespaceURI"in t&&0<i&&t.lookupNamespaceURI(n.substr(0,i)),!1===r||null===r||r===e);a?i?t.removeAttributeNS(i,n):t.removeAttribute(n):r=r.toString(),8>=p.a.W&&n in x?(n=x[n],a?t.removeAttribute(n):t[n]=r):a||(i?t.setAttributeNS(i,n,r):t.setAttribute(n,r)),"name"===n&&p.a.Yc(t,a?"":r)})}},p.c.checked={after:["value","attr"],init:function(t,n,r){function i(){var i=t.checked,u=a();if(!p.S.Ya()&&(i||!s&&!p.S.qa())){var f=p.u.G(n);if(l){var d=c?f.v():f,m=h;h=u,m!==u?i&&(p.a.Na(d,u,!0),p.a.Na(d,m,!1)):p.a.Na(d,u,i),c&&p.Za(f)&&f(d)}else o&&(u===e?u=i:i||(u=e)),p.m.eb(f,r,"checked",u,!0)}}var a=p.xb(function(){return r.has("checkedValue")?p.a.f(r.get("checkedValue")):f?r.has("value")?p.a.f(r.get("value")):t.value:void 0}),o="checkbox"==t.type,s="radio"==t.type;if(o||s){var u=n(),l=o&&p.a.f(u)instanceof Array,c=!(l&&u.push&&u.splice),f=s||l,h=l?a():e;s&&!t.name&&p.c.uniqueName.init(t,function(){return!0}),p.o(i,null,{l:t}),p.a.B(t,"click",i),p.o(function(){var r=p.a.f(n()),i=a();l?(t.checked=0<=p.a.A(r,i),h=i):t.checked=o&&i===e?!!r:a()===r},null,{l:t}),u=e}}},p.m.wa.checked=!0,p.c.checkedValue={update:function(e,t){e.value=p.a.f(t())}},p.c.class={update:function(e,t){var n=p.a.Db(p.a.f(t()));p.a.Eb(e,e.__ko__cssValue,!1),e.__ko__cssValue=n,p.a.Eb(e,n,!0)}},p.c.css={update:function(e,t){var n=p.a.f(t());null!==n&&"object"==typeof n?p.a.P(n,function(t,n){n=p.a.f(n),p.a.Eb(e,t,n)}):p.c.class.update(e,t)}},p.c.enable={update:function(e,t){var n=p.a.f(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},p.c.disable={update:function(e,t){p.c.enable.update(e,function(){return!p.a.f(t())})}},p.c.event={init:function(e,t,n,r,i){var a=t()||{};p.a.P(a,function(a){"string"==typeof a&&p.a.B(e,a,function(e){var o,s=t()[a];if(s){try{var u=p.a.la(arguments);r=i.$data,u.unshift(r),o=s.apply(r,u)}finally{!0!==o&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1===n.get(a+"Bubble")&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}},p.c.foreach={Rc:function(e){return function(){var t=e(),n=p.a.bc(t);return n&&"number"!=typeof n.length?(p.a.f(t),{foreach:n.data,as:n.as,noChildContext:n.noChildContext,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:p.ba.Ma}):{foreach:t,templateEngine:p.ba.Ma}}},init:function(e,t){return p.c.template.init(e,p.c.foreach.Rc(t))},update:function(e,t,n,r,i){return p.c.template.update(e,p.c.foreach.Rc(t),n,r,i)}},p.m.Ra.foreach=!1,p.h.ea.foreach=!0,p.c.hasfocus={init:function(e,t,n){function r(r){e.__ko_hasfocusUpdating=!0;var i=e.ownerDocument;if("activeElement"in i){var a;try{a=i.activeElement}catch(e){a=i.body}r=a===e}i=t(),p.m.eb(i,n,"hasfocus",r,!0),e.__ko_hasfocusLastValue=r,e.__ko_hasfocusUpdating=!1}var i=r.bind(null,!0),a=r.bind(null,!1);p.a.B(e,"focus",i),p.a.B(e,"focusin",i),p.a.B(e,"blur",a),p.a.B(e,"focusout",a),e.__ko_hasfocusLastValue=!1},update:function(e,t){var n=!!p.a.f(t());e.__ko_hasfocusUpdating||e.__ko_hasfocusLastValue===n||(n?e.focus():e.blur(),!n&&e.__ko_hasfocusLastValue&&e.ownerDocument.body.focus(),p.u.G(p.a.Fb,null,[e,n?"focusin":"focusout"]))}},p.m.wa.hasfocus=!0,p.c.hasFocus=p.c.hasfocus,p.m.wa.hasFocus="hasfocus",p.c.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){p.a.fc(e,t())}},function(){function e(e,t,n){p.c[e]={init:function(e,r,i,a,o){var s,u,l,c,f,h={};if(t){a=i.get("as");var d=i.get("noChildContext");h={as:a,noChildContext:d,exportDependencies:f=!(a&&d)}}return c=(l="render"==i.get("completeOn"))||i.has(p.i.pa),p.o(function(){var i,a=p.a.f(r()),d=!n!=!a,m=!u;(f||d!==s)&&(c&&(o=p.i.Cb(e,o)),d&&(t&&!f||(h.dataDependency=p.S.o()),i=t?o.createChildContext("function"==typeof a?a:r,h):p.S.qa()?o.extend(null,h):o),m&&p.S.qa()&&(u=p.a.Ca(p.h.childNodes(e),!0)),d?(m||p.h.va(e,p.a.Ca(u)),p.Oa(i,e)):(p.h.Ea(e),l||p.i.ma(e,p.i.H)),s=d)},null,{l:e}),{controlsDescendantBindings:!0}}},p.m.Ra[e]=!1,p.h.ea[e]=!0}e("if"),e("ifnot",!1,!0),e("with",!0)}(),p.c.let={init:function(e,t,n,r,i){return t=i.extend(t),p.Oa(t,e),{controlsDescendantBindings:!0}}},p.h.ea.let=!0;var S={};p.c.options={init:function(e){if("select"!==p.a.R(e))throw Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(t,n,r){function i(){return p.a.jb(t.options,function(e){return e.selected})}function a(e,t,n){var r=typeof t;return"function"==r?t(e):"string"==r?e[t]:n}function o(e,n){if(m&&c)p.i.ma(t,p.i.H);else if(d.length){var r=0<=p.a.A(d,p.w.M(n[0]));p.a.Zc(n[0],r),m&&!r&&p.u.G(p.a.Fb,null,[t,"change"])}}var s=t.multiple,u=0!=t.length&&s?t.scrollTop:null,l=p.a.f(n()),c=r.get("valueAllowUnset")&&r.has("value"),f=r.get("optionsIncludeDestroyed");n={};var h,d=[];c||(s?d=p.a.Mb(i(),p.w.M):0<=t.selectedIndex&&d.push(p.w.M(t.options[t.selectedIndex]))),l&&(void 0===l.length&&(l=[l]),h=p.a.jb(l,function(t){return f||t===e||null===t||!p.a.f(t._destroy)}),r.has("optionsCaption")&&null!==(l=p.a.f(r.get("optionsCaption")))&&l!==e&&h.unshift(S));var m=!1;n.beforeRemove=function(e){t.removeChild(e)},l=o,r.has("optionsAfterRender")&&"function"==typeof r.get("optionsAfterRender")&&(l=function(t,n){o(0,n),p.u.G(r.get("optionsAfterRender"),null,[n[0],t!==S?t:e])}),p.a.ec(t,h,function(n,i,o){return o.length&&(d=!c&&o[0].selected?[p.w.M(o[0])]:[],m=!0),i=t.ownerDocument.createElement("option"),n===S?(p.a.Bb(i,r.get("optionsCaption")),p.w.cb(i,e)):(o=a(n,r.get("optionsValue"),n),p.w.cb(i,p.a.f(o)),n=a(n,r.get("optionsText"),o),p.a.Bb(i,n)),[i]},n,l),c||(s?d.length&&i().length<d.length:d.length&&0<=t.selectedIndex?p.w.M(t.options[t.selectedIndex])!==d[0]:d.length||0<=t.selectedIndex)&&p.u.G(p.a.Fb,null,[t,"change"]),(c||p.S.Ya())&&p.i.ma(t,p.i.H),p.a.wd(t),u&&20<Math.abs(u-t.scrollTop)&&(t.scrollTop=u)}},p.c.options.$b=p.a.g.Z(),p.c.selectedOptions={init:function(e,t,n){function r(){var r=t(),i=[];p.a.D(e.getElementsByTagName("option"),function(e){e.selected&&i.push(p.w.M(e))}),p.m.eb(r,n,"selectedOptions",i)}function i(){var n=p.a.f(t()),r=e.scrollTop;n&&"number"==typeof n.length&&p.a.D(e.getElementsByTagName("option"),function(e){var t=0<=p.a.A(n,p.w.M(e));e.selected!=t&&p.a.Zc(e,t)}),e.scrollTop=r}if("select"!=p.a.R(e))throw Error("selectedOptions binding applies only to SELECT elements");var a;p.i.subscribe(e,p.i.H,function(){a?r():(p.a.B(e,"change",r),a=p.o(i,null,{l:e}))},null,{notifyImmediately:!0})},update:function(){}},p.m.wa.selectedOptions=!0,p.c.style={update:function(t,n){var r=p.a.f(n()||{});p.a.P(r,function(n,r){if(null!==(r=p.a.f(r))&&r!==e&&!1!==r||(r=""),i)i(t).css(n,r);else if(/^--/.test(n))t.style.setProperty(n,r);else{n=n.replace(/-(\w)/g,function(e,t){return t.toUpperCase()});var a=t.style[n];t.style[n]=r,r===a||t.style[n]!=a||isNaN(r)||(t.style[n]=r+"px")}})}},p.c.submit={init:function(e,t,n,r,i){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");p.a.B(e,"submit",function(n){var r,a=t();try{r=a.call(i.$data,e)}finally{!0!==r&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},p.c.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){p.a.Bb(e,t())}},p.h.ea.text=!0,function(){if(t&&t.navigator){var n,r,i,a,o,s=function(e){if(e)return parseFloat(e[1])},u=t.navigator.userAgent;(n=t.opera&&t.opera.version&&parseInt(t.opera.version()))||(o=s(u.match(/Edge\/([^ ]+)$/)))||s(u.match(/Chrome\/([^ ]+)/))||(r=s(u.match(/Version\/([^ ]+) Safari/)))||(i=s(u.match(/Firefox\/([^ ]+)/)))||(a=p.a.W||s(u.match(/MSIE ([^ ]+)/)))||(a=s(u.match(/rv:([^ )]+)/)))}if(8<=a&&10>a)var l=p.a.g.Z(),c=p.a.g.Z(),f=function(e){var t=this.activeElement;(t=t&&p.a.g.get(t,c))&&t(e)},h=function(e,t){var n=e.ownerDocument;p.a.g.get(n,l)||(p.a.g.set(n,l,!0),p.a.B(n,"selectionchange",f)),p.a.g.set(e,c,t)};p.c.textInput={init:function(t,s,u){function l(e,n){p.a.B(t,e,n)}function c(){d||(m=t.value,d=p.a.setTimeout(f,4))}function f(){clearTimeout(d),m=d=e;var n=t.value;y!==n&&(y=n,p.m.eb(s(),u,"textInput",n))}var d,m,y=t.value,g=9==p.a.W?c:f,b=!1;a&&l("keypress",f),11>a&&l("propertychange",function(e){b||"value"!==e.propertyName||g(e)}),8==a&&(l("keyup",f),l("keydown",f)),h&&(h(t,g),l("dragend",c)),(!a||9<=a)&&l("input",g),5>r&&"textarea"===p.a.R(t)?(l("keydown",c),l("paste",c),l("cut",c)):11>n?l("keydown",c):4>i?(l("DOMAutoComplete",f),l("dragdrop",f),l("drop",f)):o&&"number"===t.type&&l("keydown",c),l("change",f),l("blur",f),p.o(function n(){var r=p.a.f(s());null!==r&&r!==e||(r=""),m!==e&&r===m?p.a.setTimeout(n,4):t.value!==r&&(b=!0,t.value=r,b=!1,y=t.value)},null,{l:t})}},p.m.wa.textInput=!0,p.c.textinput={preprocess:function(e,t,n){n("textInput",e)}}}(),p.c.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++p.c.uniqueName.rd;p.a.Yc(e,n)}}},p.c.uniqueName.rd=0,p.c.using={init:function(e,t,n,r,i){var a;return n.has("as")&&(a={as:n.get("as"),noChildContext:n.get("noChildContext")}),t=i.createChildContext(t,a),p.Oa(t,e),{controlsDescendantBindings:!0}}},p.h.ea.using=!0,p.c.value={init:function(t,n,r){var i=p.a.R(t),a="input"==i;if(!a||"checkbox"!=t.type&&"radio"!=t.type){var o=[],s=r.get("valueUpdate"),u=!1,l=null;s&&(o="string"==typeof s?[s]:p.a.wc(s),p.a.Pa(o,"change"));var c,f,h=function(){l=null,u=!1;var e=n(),i=p.w.M(t);p.m.eb(e,r,"value",i)};!p.a.W||!a||"text"!=t.type||"off"==t.autocomplete||t.form&&"off"==t.form.autocomplete||-1!=p.a.A(o,"propertychange")||(p.a.B(t,"propertychange",function(){u=!0}),p.a.B(t,"focus",function(){u=!1}),p.a.B(t,"blur",function(){u&&h()})),p.a.D(o,function(e){var n=h;p.a.Ud(e,"after")&&(n=function(){l=p.w.M(t),p.a.setTimeout(h,0)},e=e.substring(5)),p.a.B(t,e,n)}),c=a&&"file"==t.type?function(){var r=p.a.f(n());null===r||r===e||""===r?t.value="":p.u.G(h)}:function(){var a=p.a.f(n()),o=p.w.M(t);null!==l&&a===l?p.a.setTimeout(c,0):a===o&&o!==e||("select"===i?(o=r.get("valueAllowUnset"),p.w.cb(t,a,o),o||a===p.w.M(t)||p.u.G(h)):p.w.cb(t,a))},"select"===i?p.i.subscribe(t,p.i.H,function(){f?r.get("valueAllowUnset")?c():h():(p.a.B(t,"change",h),f=p.o(c,null,{l:t}))},null,{notifyImmediately:!0}):(p.a.B(t,"change",h),p.o(c,null,{l:t}))}else p.ib(t,{checkedValue:n})},update:function(){}},p.m.wa.value=!0,p.c.visible={update:function(e,t){var n=p.a.f(t()),r="none"!=e.style.display;n&&!r?e.style.display="":!n&&r&&(e.style.display="none")}},p.c.hidden={update:function(e,t){p.c.visible.update(e,function(){return!p.a.f(t())})}},function(e){p.c[e]={init:function(t,n,r,i,a){return p.c.event.init.call(this,t,function(){var t={};return t[e]=n(),t},r,i,a)}}}("click"),p.ca=function(){},p.ca.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},p.ca.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},p.ca.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){var r=(t=t||n).getElementById(e);if(!r)throw Error("Cannot find template with ID "+e);return new p.C.F(r)}if(1==e.nodeType||8==e.nodeType)return new p.C.ia(e);throw Error("Unknown template type: "+e)},p.ca.prototype.renderTemplate=function(e,t,n,r){return e=this.makeTemplateSource(e,r),this.renderTemplateSource(e,t,n,r)},p.ca.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting||this.makeTemplateSource(e,t).data("isRewritten")},p.ca.prototype.rewriteTemplate=function(e,t,n){t=t((e=this.makeTemplateSource(e,n)).text()),e.text(t),e.data("isRewritten",!0)},p.b("templateEngine",p.ca),p.kc=function(){function e(e,t,n,r){e=p.m.ac(e);for(var i=p.m.Ra,a=0;a<e.length;a++){var o=e[a].key;if(Object.prototype.hasOwnProperty.call(i,o)){var s=i[o];if("function"==typeof s){if(o=s(e[a].value))throw Error(o)}else if(!s)throw Error("This template engine does not support the '"+o+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+p.m.vb(e,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",r.createJavaScriptEvaluatorBlock(n)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{xd:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return p.kc.Ld(e,t)},n)},Ld:function(r,i){return r.replace(t,function(t,n,r,a,o){return e(o,n,r,i)}).replace(n,function(t,n){return e(n,"\x3c!-- ko --\x3e","#comment",i)})},md:function(e,t){return p.aa.Xb(function(n,r){var i=n.nextSibling;i&&i.nodeName.toLowerCase()===t&&p.ib(i,e,r)})}}}(),p.b("__tr_ambtns",p.kc.md),function(){p.C={},p.C.F=function(e){if(this.F=e){var t=p.a.R(e);this.ab="script"===t?1:"textarea"===t?2:"template"==t&&e.content&&11===e.content.nodeType?3:4}},p.C.F.prototype.text=function(){var e=1===this.ab?"text":2===this.ab?"value":"innerHTML";if(0==arguments.length)return this.F[e];var t=arguments[0];"innerHTML"===e?p.a.fc(this.F,t):this.F[e]=t};var t=p.a.g.Z()+"_";p.C.F.prototype.data=function(e){if(1===arguments.length)return p.a.g.get(this.F,t+e);p.a.g.set(this.F,t+e,arguments[1])};var n=p.a.g.Z();p.C.F.prototype.nodes=function(){var t=this.F;if(0==arguments.length){var r=p.a.g.get(t,n)||{},i=r.lb||(3===this.ab?t.content:4===this.ab?t:e);if(!i||r.jd){var a=this.text();a&&a!==r.bb&&(i=p.a.Md(a,t.ownerDocument),p.a.g.set(t,n,{lb:i,bb:a,jd:!0}))}return i}r=arguments[0],this.ab!==e&&this.text(""),p.a.g.set(t,n,{lb:r})},p.C.ia=function(e){this.F=e},p.C.ia.prototype=new p.C.F,p.C.ia.prototype.constructor=p.C.ia,p.C.ia.prototype.text=function(){if(0==arguments.length){var t=p.a.g.get(this.F,n)||{};return t.bb===e&&t.lb&&(t.bb=t.lb.innerHTML),t.bb}p.a.g.set(this.F,n,{bb:arguments[0]})},p.b("templateSources",p.C),p.b("templateSources.domElement",p.C.F),p.b("templateSources.anonymousTemplate",p.C.ia)}(),function(){function t(e,t,n){var r;for(t=p.h.nextSibling(t);e&&(r=e)!==t;)n(r,e=p.h.nextSibling(r))}function n(e,n){if(e.length){var r=e[0],i=e[e.length-1],a=r.parentNode,o=p.ga.instance,s=o.preprocessNode;if(s){if(t(r,i,function(e,t){var n=e.previousSibling,a=s.call(o,e);a&&(e===r&&(r=a[0]||t),e===i&&(i=a[a.length-1]||n))}),e.length=0,!r)return;r===i?e.push(r):(e.push(r,i),p.a.Ua(e,a))}t(r,i,function(e){1!==e.nodeType&&8!==e.nodeType||p.vc(n,e)}),t(r,i,function(e){1!==e.nodeType&&8!==e.nodeType||p.aa.cd(e,[n])}),p.a.Ua(e,a)}}function r(e){return e.nodeType?e:0<e.length?e[0]:null}function i(e,t,i,a,s){s=s||{};var u=(e&&r(e)||i||{}).ownerDocument,l=s.templateEngine||o;if(p.kc.xd(i,l,u),"number"!=typeof(i=l.renderTemplate(i,a,s,u)).length||0<i.length&&"number"!=typeof i[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(u=!1,t){case"replaceChildren":p.h.va(e,i),u=!0;break;case"replaceNode":p.a.Xc(e,i),u=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+t)}return u&&(n(i,a),s.afterRender&&p.u.G(s.afterRender,null,[i,a[s.as||"$data"]]),"replaceChildren"==t&&p.i.ma(e,p.i.H)),i}function a(e,t,n){return p.O(e)?e():"function"==typeof e?e(t,n):e}var o;p.gc=function(t){if(t!=e&&!(t instanceof p.ca))throw Error("templateEngine must inherit from ko.templateEngine");o=t},p.dc=function(t,n,s,u,l){if(((s=s||{}).templateEngine||o)==e)throw Error("Set a template engine before calling renderTemplate");if(l=l||"replaceChildren",u){var c=r(u);return p.$(function(){var e=n&&n instanceof p.fa?n:new p.fa(n,null,null,null,{exportDependencies:!0}),o=a(t,e.$data,e);e=i(u,l,o,e,s),"replaceNode"==l&&(c=r(u=e))},null,{Sa:function(){return!c||!p.a.Sb(c)},l:c&&"replaceNode"==l?c.parentNode:c})}return p.aa.Xb(function(e){p.dc(t,n,s,e,"replaceNode")})},p.Qd=function(t,r,o,s,u){function l(e,t){p.u.G(p.a.ec,null,[s,e,f,o,c,t]),p.i.ma(s,p.i.H)}function c(e,t){n(t,h),o.afterRender&&o.afterRender(t,e),h=null}function f(e,n){h=u.createChildContext(e,{as:d,noChildContext:o.noChildContext,extend:function(e){e.$index=n,d&&(e[d+"Index"]=n)}});var r=a(t,e,h);return i(s,"ignoreTargetNode",r,h,o)}var h,d=o.as,m=!1===o.includeDestroyed||p.options.foreachHidesDestroyed&&!o.includeDestroyed;if(m||o.beforeRemove||!p.Pc(r))return p.$(function(){var t=p.a.f(r)||[];void 0===t.length&&(t=[t]),m&&(t=p.a.jb(t,function(t){return t===e||null===t||!p.a.f(t._destroy)})),l(t)},null,{l:s});l(r.v());var y=r.subscribe(function(e){l(r(),e)},null,"arrayChange");return y.l(s),y};var s=p.a.g.Z(),u=p.a.g.Z();p.c.template={init:function(e,t){var n=p.a.f(t());if("string"==typeof n||"name"in n)p.h.Ea(e);else if("nodes"in n){if(n=n.nodes||[],p.O(n))throw Error('The "nodes" option must be a plain, non-observable array.');var r=n[0]&&n[0].parentNode;r&&p.a.g.get(r,u)||(r=p.a.Yb(n),p.a.g.set(r,u,!0)),new p.C.ia(e).nodes(r)}else{if(!(0<(n=p.h.childNodes(e)).length))throw Error("Anonymous template defined, but no template content was provided");r=p.a.Yb(n),new p.C.ia(e).nodes(r)}return{controlsDescendantBindings:!0}},update:function(t,n,r,i,a){var o=n();r=!0,i=null,"string"==typeof(n=p.a.f(o))?n={}:(o="name"in n?n.name:t,"if"in n&&(r=p.a.f(n.if)),r&&"ifnot"in n&&(r=!p.a.f(n.ifnot)),r&&!o&&(r=!1)),"foreach"in n?i=p.Qd(o,r&&n.foreach||[],n,t,a):r?(r=a,"data"in n&&(r=a.createChildContext(n.data,{as:n.as,noChildContext:n.noChildContext,exportDependencies:!0})),i=p.dc(o,r,n,t)):p.h.Ea(t),a=i,(n=p.a.g.get(t,s))&&"function"==typeof n.s&&n.s(),p.a.g.set(t,s,!a||a.ja&&!a.ja()?e:a)}},p.m.Ra.template=function(e){return 1==(e=p.m.ac(e)).length&&e[0].unknown||p.m.Id(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"},p.h.ea.template=!0}(),p.b("setTemplateEngine",p.gc),p.b("renderTemplate",p.dc),p.a.Kc=function(e,t,n){var r,i,a,o,s;if(e.length&&t.length)for(r=i=0;(!n||r<n)&&(o=e[i]);++i){for(a=0;s=t[a];++a)if(o.value===s.value){o.moved=s.index,s.moved=o.index,t.splice(a,1),r=a=0;break}r+=a}},p.a.Pb=function(){function e(e,t,n,r,i){var a,o,s,u,l,c=Math.min,f=Math.max,h=[],d=e.length,m=t.length,y=m-d||1,g=d+m+1;for(a=0;a<=d;a++)for(u=s,h.push(s=[]),l=c(m,a+y),o=f(0,a-1);o<=l;o++)s[o]=o?a?e[a-1]===t[o-1]?u[o-1]:c(u[o]||g,s[o-1]||g)+1:o+1:a+1;for(c=[],f=[],y=[],a=d,o=m;a||o;)m=h[a][o]-1,o&&m===h[a][o-1]?f.push(c[c.length]={status:n,value:t[--o],index:o}):a&&m===h[a-1][o]?y.push(c[c.length]={status:r,value:e[--a],index:a}):(--o,--a,i.sparse||c.push({status:"retained",value:t[o]}));return p.a.Kc(y,f,!i.dontLimitMoves&&10*d),c.reverse()}return function(t,n,r){return r="boolean"==typeof r?{dontLimitMoves:r}:r||{},t=t||[],n=n||[],t.length<n.length?e(t,n,"added","deleted",r):e(n,t,"deleted","added",r)}}(),p.b("utils.compareArrays",p.a.Pb),function(){function t(t,n,r,i,a){var o=[],s=p.$(function(){var e=n(r,a,p.a.Ua(o,t))||[];0<o.length&&(p.a.Xc(o,e),i&&p.u.G(i,null,[r,e,a])),o.length=0,p.a.Nb(o,e)},null,{l:t,Sa:function(){return!p.a.kd(o)}});return{Y:o,$:s.ja()?s:e}}var n=p.a.g.Z(),r=p.a.g.Z();p.a.ec=function(i,a,o,s,u,l){function c(e){d={Aa:e,pb:p.ta(_++)},w.push(d),v||j.push(d)}function f(e){d=b[e],_!==d.pb.v()&&S.push(d),d.pb(_++),p.a.Ua(d.Y,i),w.push(d)}function h(e,t){if(e)for(var n=0,r=t.length;n<r;n++)p.a.D(t[n].Y,function(r){e(r,n,t[n].Aa)})}void 0===(a=a||[]).length&&(a=[a]),s=s||{};var d,m,y,g,b=p.a.g.get(i,n),v=!b,w=[],O=0,_=0,C=[],E=[],x=[],S=[],j=[],T=0;if(v)p.a.D(a,c);else{if(!l||b&&b._countWaitingForRemove){var I=p.a.Mb(b,function(e){return e.Aa});l=p.a.Pb(I,a,{dontLimitMoves:s.dontLimitMoves,sparse:!0})}var M,A,R;for(I=0;M=l[I];I++)switch(A=M.moved,R=M.index,M.status){case"deleted":for(;O<R;)f(O++);A===e&&((d=b[O]).$&&(d.$.s(),d.$=e),p.a.Ua(d.Y,i).length&&(s.beforeRemove&&(w.push(d),T++,d.Aa===r?d=null:x.push(d)),d&&C.push.apply(C,d.Y))),O++;break;case"added":for(;_<R;)f(O++);A!==e?(E.push(w.length),f(A)):c(M.value)}for(;_<a.length;)f(O++);w._countWaitingForRemove=T}p.a.g.set(i,n,w),h(s.beforeMove,S),p.a.D(C,s.beforeRemove?p.oa:p.removeNode);try{g=i.ownerDocument.activeElement}catch(e){}if(E.length)for(;(I=E.shift())!=e;){for(d=w[I],m=e;I;)if((y=w[--I].Y)&&y.length){m=y[y.length-1];break}for(a=0;O=d.Y[a];m=O,a++)p.h.Wb(i,O,m)}for(I=0;d=w[I];I++){for(d.Y||p.a.extend(d,t(i,o,d.Aa,u,d.pb)),a=0;O=d.Y[a];m=O,a++)p.h.Wb(i,O,m);!d.Ed&&u&&(u(d.Aa,d.Y,d.pb),d.Ed=!0,m=d.Y[d.Y.length-1])}for(g&&i.ownerDocument.activeElement!=g&&g.focus(),h(s.beforeRemove,x),I=0;I<x.length;++I)x[I].Aa=r;h(s.afterMove,S),h(s.afterAdd,j)}}(),p.b("utils.setDomNodeChildrenFromArrayMapping",p.a.ec),p.ba=function(){this.allowTemplateRewriting=!1},p.ba.prototype=new p.ca,p.ba.prototype.constructor=p.ba,p.ba.prototype.renderTemplateSource=function(e,t,n,r){return(t=9>p.a.W||!e.nodes?null:e.nodes())?p.a.la(t.cloneNode(!0).childNodes):(e=e.text(),p.a.ua(e,r))},p.ba.Ma=new p.ba,p.gc(p.ba.Ma),p.b("nativeTemplateEngine",p.ba),function(){p.$a=function(){var e=this.Hd=function(){if(!i||!i.tmpl)return 0;try{if(0<=i.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(t,r,a,o){if(o=o||n,a=a||{},2>e)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var s=t.data("precompiled");return s||(s=t.text()||"",s=i.template(null,"{{ko_with $item.koBindingContext}}"+s+"{{/ko_with}}"),t.data("precompiled",s)),t=[r.$data],r=i.extend({koBindingContext:r},a.templateOptions),(r=i.tmpl(s,t,r)).appendTo(o.createElement("div")),i.fragments={},r},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){n.write("<script type='text/html' id='"+e+"'>"+t+"<\/script>")},0<e&&(i.tmpl.tag.ko_code={open:"__.push($1 || '');"},i.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},p.$a.prototype=new p.ca,p.$a.prototype.constructor=p.$a;var e=new p.$a;0<e.Hd&&p.gc(e),p.b("jqueryTmplTemplateEngine",p.$a)}()})}();var r=ko;"undefined"!=typeof window?(ko=window.ko,void 0!==n?window.ko=n:delete window.ko):(ko=e.ko,void 0!==n?e.ko=n:delete e.ko),t.a=r}).call(this,n(7))},function(e,t){e.exports=function(){try{return mapv}catch(e){return{}}}()},function(e,t,n){"use strict";var r=n(6),i=n(4),a=n(0),o=n(2),s=n(1);function u(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function l(e,t){return t-e}Object.defineProperties(u.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),u.prototype.addEventListener=function(e,t){a.a.typeOf.func("listener",e),this._listeners.push(e),this._scopes.push(t);var n=this;return function(){n.removeEventListener(e,t)}},u.prototype.removeEventListener=function(e,t){a.a.typeOf.func("listener",e);for(var n=this._listeners,r=this._scopes,i=-1,o=0;o<n.length;o++)if(n[o]===e&&r[o]===t){i=o;break}return-1!==i&&(this._insideRaiseEvent?(this._toRemove.push(i),n[i]=void 0,r[i]=void 0):(n.splice(i,1),r.splice(i,1)),!0)},u.prototype.raiseEvent=function(){var e;this._insideRaiseEvent=!0;var t=this._listeners,n=this._scopes,r=t.length;for(e=0;e<r;e++){var i=t[e];Object(s.a)(i)&&t[e].apply(n[e],arguments)}var a=this._toRemove;if((r=a.length)>0){for(a.sort(l),e=0;e<r;e++){var o=a[e];t.splice(o,1),n.splice(o,1)}a.length=0}this._insideRaiseEvent=!1};var c=u;function f(e){a.a.typeOf.object("options",e),a.a.defined("options.comparator",e.comparator),this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function h(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}Object.defineProperties(f.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){a.a.typeOf.number.greaterThanOrEquals("maximumLength",e,0);var t=this._length;if(e<t){for(var n=this._array,r=e;r<t;++r)n[r]=void 0;this._length=e,n.length=e}this._maximumLength=e}},comparator:{get:function(){return this._comparator}}}),f.prototype.reserve=function(e){e=Object(o.a)(e,this._length),this._array.length=e},f.prototype.heapify=function(e){e=Object(o.a)(e,0);for(var t=this._length,n=this._comparator,r=this._array,i=-1,a=!0;a;){var s=2*(e+1),u=s-1;i=u<t&&n(r[u],r[e])<0?u:e,s<t&&n(r[s],r[i])<0&&(i=s),i!==e?(h(r,i,e),e=i):a=!1}},f.prototype.resort=function(){for(var e=this._length,t=Math.ceil(e/2);t>=0;--t)this.heapify(t)},f.prototype.insert=function(e){a.a.defined("element",e);var t,n=this._array,r=this._comparator,i=this._maximumLength,o=this._length++;for(o<n.length?n[o]=e:n.push(e);0!==o;){var u=Math.floor((o-1)/2);if(!(r(n[o],n[u])<0))break;h(n,o,u),o=u}return Object(s.a)(i)&&this._length>i&&(t=n[i],this._length=i),t},f.prototype.pop=function(e){if(e=Object(o.a)(e,0),0!==this._length){a.a.typeOf.number.lessThan("index",e,this._length);var t=this._array,n=t[e];return h(t,e,--this._length),this.heapify(e),t[this._length]=void 0,n}};var d=f,p=n(23),m=n(24),y=n(5);var g={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},b=20,v=new d({comparator:function(e,t){return e.priority-t.priority}});v.maximumLength=b,v.reserve(b);var w=[],O={},_="undefined"!=typeof document?new r.a(document.location.href):new r.a,C=new c;function E(){}function x(e){Object(s.a)(e.priorityFunction)&&(e.priority=e.priorityFunction())}function S(e){var t=Object(o.a)(E.requestsByServer[e],E.maximumRequestsPerServer);return O[e]<t}function j(e){return e.state===y.a.UNISSUED&&(e.state=y.a.ISSUED,e.deferred=i.a.defer()),e.deferred.promise}function T(e){var t=j(e);return e.state=y.a.ACTIVE,w.push(e),++g.numberOfActiveRequests,++g.numberOfActiveRequestsEver,++O[e.serverKey],e.requestFunction().then(function(e){return function(t){e.state!==y.a.CANCELLED&&(--g.numberOfActiveRequests,--O[e.serverKey],C.raiseEvent(),e.state=y.a.RECEIVED,e.deferred.resolve(t),e.deferred=void 0)}}(e)).otherwise(function(e){return function(t){e.state!==y.a.CANCELLED&&(++g.numberOfFailedRequests,--g.numberOfActiveRequests,--O[e.serverKey],C.raiseEvent(t),e.state=y.a.FAILED,e.deferred.reject(t))}}(e)),t}function I(e){var t=e.state===y.a.ACTIVE;e.state=y.a.CANCELLED,++g.numberOfCancelledRequests,Object(s.a)(e.deferred)&&(e.deferred.reject(),e.deferred=void 0),t&&(--g.numberOfActiveRequests,--O[e.serverKey],++g.numberOfCancelledActiveRequests),Object(s.a)(e.cancelFunction)&&e.cancelFunction()}E.maximumRequests=50,E.maximumRequestsPerServer=6,E.requestsByServer={"api.cesium.com:443":18,"assets.cesium.com:443":18},E.throttleRequests=!0,E.debugShowStatistics=!1,E.requestCompletedEvent=C,Object.defineProperties(E,{statistics:{get:function(){return g}},priorityHeapLength:{get:function(){return b},set:function(e){if(e<b)for(;v.length>e;){I(v.pop())}b=e,v.maximumLength=e,v.reserve(e)}}}),E.update=function(){var e,t,n=0,r=w.length;for(e=0;e<r;++e)(t=w[e]).cancelled&&I(t),t.state===y.a.ACTIVE?n>0&&(w[e-n]=t):++n;w.length-=n;var i=v.internalArray,a=v.length;for(e=0;e<a;++e)x(i[e]);v.resort();for(var o=Math.max(E.maximumRequests-w.length,0),s=0;s<o&&v.length>0;)(t=v.pop()).cancelled?I(t):!t.throttleByServer||S(t.serverKey)?(T(t),++s):I(t);!function(){if(!E.debugShowStatistics)return;0===g.numberOfActiveRequests&&g.lastNumberOfActiveRequests>0&&(g.numberOfAttemptedRequests>0&&(console.log("Number of attempted requests: "+g.numberOfAttemptedRequests),g.numberOfAttemptedRequests=0),g.numberOfCancelledRequests>0&&(console.log("Number of cancelled requests: "+g.numberOfCancelledRequests),g.numberOfCancelledRequests=0),g.numberOfCancelledActiveRequests>0&&(console.log("Number of cancelled active requests: "+g.numberOfCancelledActiveRequests),g.numberOfCancelledActiveRequests=0),g.numberOfFailedRequests>0&&(console.log("Number of failed requests: "+g.numberOfFailedRequests),g.numberOfFailedRequests=0));g.lastNumberOfActiveRequests=g.numberOfActiveRequests}()},E.getServerKey=function(e){a.a.typeOf.string("url",e);var t=new r.a(e).resolve(_);t.normalize();var n=t.authority;/:/.test(n)||(n=n+":"+("https"===t.scheme?"443":"80"));var i=O[n];return Object(s.a)(i)||(O[n]=0),n},E.request=function(e){if(a.a.typeOf.object("request",e),a.a.typeOf.string("request.url",e.url),a.a.typeOf.func("request.requestFunction",e.requestFunction),Object(m.a)(e.url)||Object(p.a)(e.url))return C.raiseEvent(),e.state=y.a.RECEIVED,e.requestFunction();if(++g.numberOfAttemptedRequests,Object(s.a)(e.serverKey)||(e.serverKey=E.getServerKey(e.url)),!E.throttleRequests||!e.throttleByServer||S(e.serverKey)){if(!E.throttleRequests||!e.throttle)return T(e);if(!(w.length>=E.maximumRequests)){x(e);var t=v.insert(e);if(Object(s.a)(t)){if(t===e)return;I(t)}return j(e)}}},E.clearForSpecs=function(){for(;v.length>0;){I(v.pop())}for(var e=w.length,t=0;t<e;++t)I(w[t]);w.length=0,O={},g.numberOfAttemptedRequests=0,g.numberOfActiveRequests=0,g.numberOfCancelledRequests=0,g.numberOfCancelledActiveRequests=0,g.numberOfFailedRequests=0,g.numberOfActiveRequestsEver=0,g.lastNumberOfActiveRequests=0},E.numberOfActiveRequestsByServer=function(e){return O[e]},E.requestHeap=v;t.a=E},function(e,t,n){"use strict";var r=n(60),i=n(62);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=v,t.resolve=function(e,t){return v(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?v(e,!1,!0).resolveObject(t):t},t.format=function(e){i.isString(e)&&(e=v(e));return e instanceof a?e.format():a.prototype.format.call(e)},t.Url=a;var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),f=["%","/","?",";","#"].concat(c),h=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(63);function v(e,t,n){if(e&&i.isObject(e)&&e instanceof a)return e;var r=new a;return r.parse(e,t,n),r}a.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),s=-1!==a&&a<e.indexOf("#")?"?":"#",l=e.split(s);l[0]=l[0].replace(/\\/g,"/");var v=e=l.join(s);if(v=v.trim(),!n&&1===e.split("#").length){var w=u.exec(v);if(w)return this.path=v,this.href=v,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var O=o.exec(v);if(O){var _=(O=O[0]).toLowerCase();this.protocol=_,v=v.substr(O.length)}if(n||O||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var C="//"===v.substr(0,2);!C||O&&y[O]||(v=v.substr(2),this.slashes=!0)}if(!y[O]&&(C||O&&!g[O])){for(var E,x,S=-1,j=0;j<h.length;j++){-1!==(T=v.indexOf(h[j]))&&(-1===S||T<S)&&(S=T)}-1!==(x=-1===S?v.lastIndexOf("@"):v.lastIndexOf("@",S))&&(E=v.slice(0,x),v=v.slice(x+1),this.auth=decodeURIComponent(E)),S=-1;for(j=0;j<f.length;j++){var T;-1!==(T=v.indexOf(f[j]))&&(-1===S||T<S)&&(S=T)}-1===S&&(S=v.length),this.host=v.slice(0,S),v=v.slice(S),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var M=this.hostname.split(/\./),A=(j=0,M.length);j<A;j++){var R=M[j];if(R&&!R.match(d)){for(var N="",P=0,D=R.length;P<D;P++)R.charCodeAt(P)>127?N+="x":N+=R[P];if(!N.match(d)){var k=M.slice(0,j),L=M.slice(j+1),z=R.match(p);z&&(k.push(z[1]),L.unshift(z[2])),L.length&&(v="/"+L.join(".")+v),this.hostname=k.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=r.toASCII(this.hostname));var q=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+q,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!m[_])for(j=0,A=c.length;j<A;j++){var U=c[j];if(-1!==v.indexOf(U)){var F=encodeURIComponent(U);F===U&&(F=escape(U)),v=v.split(U).join(F)}}var V=v.indexOf("#");-1!==V&&(this.hash=v.substr(V),v=v.slice(0,V));var W=v.indexOf("?");if(-1!==W?(this.search=v.substr(W),this.query=v.substr(W+1),t&&(this.query=b.parse(this.query)),v=v.slice(0,W)):t&&(this.search="",this.query={}),v&&(this.pathname=v),g[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){q=this.pathname||"";var Z=this.search||"";this.path=q+Z}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",a=!1,o="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(o=b.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==a?(a="//"+(a||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):a||(a=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+a+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(s=s.replace("#","%23"))+r},a.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(i.isString(e)){var t=new a;t.parse(e,!1,!0),e=t}for(var n=new a,r=Object.keys(this),o=0;o<r.length;o++){var s=r[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),l=0;l<u.length;l++){var c=u[l];"protocol"!==c&&(n[c]=e[c])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!g[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var d=f[h];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||y[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",b=n.search||"";n.path=m+b}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),O=w||v||n.host&&e.pathname,_=O,C=n.pathname&&n.pathname.split("/")||[],E=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===C[0]?C[0]=n.host:C.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),O=O&&(""===p[0]||""===C[0])),w)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,C=p;else if(p.length)C||(C=[]),C.pop(),C=C.concat(p),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(E)n.hostname=n.host=C.shift(),(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift());return n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!C.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=C.slice(-1)[0],S=(n.host||e.host||C.length>1)&&("."===x||".."===x)||""===x,j=0,T=C.length;T>=0;T--)"."===(x=C[T])?C.splice(T,1):".."===x?(C.splice(T,1),j++):j&&(C.splice(T,1),j--);if(!O&&!_)for(;j--;j)C.unshift("..");!O||""===C[0]||C[0]&&"/"===C[0].charAt(0)||C.unshift(""),S&&"/"!==C.join("/").substr(-1)&&C.push("");var I,M=""===C[0]||C[0]&&"/"===C[0].charAt(0);E&&(n.hostname=n.host=M?"":C.length?C.shift():"",(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift()));return(O=O||n.host&&C.length)&&!M&&C.unshift(""),C.length?n.pathname=C.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},a.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,a,o;if(l(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=o.length,function(e){console&&console.warn&&console.warn(e)}(s)}return e}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)a(u,this,t);else{var l=u.length,c=m(u,l);for(n=0;n<l;++n)a(c[n],this,t)}return!0},s.prototype.addListener=function(e,t){return f(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return f(this,e,t,!0)},s.prototype.once=function(e,t){return l(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,a,o;if(l(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){var r=n(9),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=o),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){"use strict";(function(t,r,i){var a=n(21);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=b;var s,u=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:a.nextTick;b.WritableState=g;var l=Object.create(n(19));l.inherits=n(14);var c={deprecate:n(73)},f=n(39),h=n(30).Buffer,d=i.Uint8Array||function(){};var p,m=n(40);function y(){}function g(e,t){s=s||n(17),e=e||{};var r=t instanceof s;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,l=e.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(l||0===l)?l:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=!1===e.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(a.nextTick(i,r),a.nextTick(E,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),E(e,t))}(e,n,r,t,i);else{var o=_(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||O(e,n),r?u(w,e,n,o,i):w(e,n,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function b(e){if(s=s||n(17),!(p.call(b,this)||this instanceof s))return new b(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),f.call(this)}function v(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function w(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),E(e,t)}function O(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,v(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,f=n.callback;if(v(e,t,!1,t.objectMode?1:l.length,l,c,f),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function _(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),E(e,t)})}function E(e,t){var n=_(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,a.nextTick(C,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}l.inherits(b,f),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===b&&(e&&e._writableState instanceof g)}})):p=function(e){return e instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&function(e){return h.isBuffer(e)||e instanceof d}(e);return o&&!h.isBuffer(e)&&(e=function(e){return h.from(e)}(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=y),r.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),a.nextTick(t,n)}(this,n):(o||function(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),a.nextTick(r,o),i=!1),i}(this,r,e,n))&&(r.pendingcb++,i=function(e,t,n,r,i,a){if(!n){var o=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,n));return t}(t,r,i);r!==o&&(n=!0,i="buffer",r=o)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else v(e,t,!1,s,r,i,a);return u}(this,r,o,e,t,n)),i},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||O(this,e))},b.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,E(e,t),n&&(t.finished?a.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(12),n(71).setImmediate,n(7))},function(e,t,n){"use strict";var r=n(6),i=n(2),a=n(1),o=n(3);function s(e,t){var n;return"undefined"!=typeof document&&(n=document),s._implementation(e,t,n)}s._implementation=function(e,t,n){if(!Object(a.a)(e))throw new o.a("relative uri is required.");if(!Object(a.a)(t)){if(void 0===n)return e;t=Object(i.a)(n.baseURI,n.location.href)}var s=new r.a(t);return new r.a(e).resolve(s).toString()},t.a=s},function(e,t,n){"use strict";var r=n(6),i=n(1),a=n(3),o={},s={};o.add=function(e,t){if(!Object(i.a)(e))throw new a.a("host is required.");if(!Object(i.a)(t)||t<=0)throw new a.a("port is required to be greater than 0.");var n=e.toLowerCase()+":"+t;Object(i.a)(s[n])||(s[n]=!0)},o.remove=function(e,t){if(!Object(i.a)(e))throw new a.a("host is required.");if(!Object(i.a)(t)||t<=0)throw new a.a("port is required to be greater than 0.");var n=e.toLowerCase()+":"+t;Object(i.a)(s[n])&&delete s[n]},o.contains=function(e){if(!Object(i.a)(e))throw new a.a("url is required.");var t=function(e){var t=new r.a(e);t.normalize();var n=t.getAuthority();if(Object(i.a)(n)){if(-1!==n.indexOf("@")&&(n=n.split("@")[1]),-1===n.indexOf(":")){var a=t.getScheme();if(Object(i.a)(a)||(a=(a=window.location.protocol).substring(0,a.length-1)),"http"===a)n+=":80";else{if("https"!==a)return;n+=":443"}}return n}}(e);return!(!Object(i.a)(t)||!Object(i.a)(s[t]))},o.clear=function(){s={}},t.a=o},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(e){var r=n(67),i=n(37),a=n(77),o=n(78),s=n(28),u=t;u.request=function(t,n){t="string"==typeof t?s.parse(t):a(t);var i=-1===e.location.protocol.search(/^https?:$/)?"http:":"",o=t.protocol||i,u=t.hostname||t.host,l=t.port,c=t.path||"/";u&&-1!==u.indexOf(":")&&(u="["+u+"]"),t.url=(u?o+"//"+u:"")+(l?":"+l:"")+c,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var f=new r(t);return n&&f.on("response",n),f},u.get=function(e,t){var n=u.request(e,t);return n.end(),n},u.ClientRequest=r,u.IncomingMessage=i.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=o,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,n(7))},function(e,t,n){(function(e){t.fetch=s(e.fetch)&&s(e.ReadableStream),t.writableStream=s(e.WritableStream),t.abortController=s(e.AbortController),t.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),t.blobConstructor=!0}catch(e){}var n;function r(){if(void 0!==n)return n;if(e.XMLHttpRequest){n=new e.XMLHttpRequest;try{n.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){n=null}}else n=null;return n}function i(e){var t=r();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}var a=void 0!==e.ArrayBuffer,o=a&&s(e.ArrayBuffer.prototype.slice);function s(e){return"function"==typeof e}t.arraybuffer=t.fetch||a&&i("arraybuffer"),t.msstream=!t.fetch&&o&&i("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&a&&i("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!r()&&s(r().overrideMimeType),t.vbArray=s(e.VBArray),n=null}).call(this,n(7))},function(e,t,n){(function(e,r,i){var a=n(36),o=n(14),s=n(18),u=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=t.IncomingMessage=function(t,n,o,u){var l=this;if(s.Readable.call(l),l._mode=o,l.headers={},l.rawHeaders=[],l.trailers={},l.rawTrailers=[],l.on("end",function(){e.nextTick(function(){l.emit("close")})}),"fetch"===o){if(l._fetchResponse=n,l.url=n.url,l.statusCode=n.status,l.statusMessage=n.statusText,n.headers.forEach(function(e,t){l.headers[t.toLowerCase()]=e,l.rawHeaders.push(t,e)}),a.writableStream){var c=new WritableStream({write:function(e){return new Promise(function(t,n){l._destroyed?n():l.push(new r(e))?t():l._resumeFetch=t})},close:function(){i.clearTimeout(u),l._destroyed||l.push(null)},abort:function(e){l._destroyed||l.emit("error",e)}});try{return void n.body.pipeTo(c).catch(function(e){i.clearTimeout(u),l._destroyed||l.emit("error",e)})}catch(e){}}var f=n.body.getReader();!function e(){f.read().then(function(t){if(!l._destroyed){if(t.done)return i.clearTimeout(u),void l.push(null);l.push(new r(t.value)),e()}}).catch(function(e){i.clearTimeout(u),l._destroyed||l.emit("error",e)})}()}else{if(l._xhr=t,l._pos=0,l.url=t.responseURL,l.statusCode=t.status,l.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var n=t[1].toLowerCase();"set-cookie"===n?(void 0===l.headers[n]&&(l.headers[n]=[]),l.headers[n].push(t[2])):void 0!==l.headers[n]?l.headers[n]+=", "+t[2]:l.headers[n]=t[2],l.rawHeaders.push(t[1],t[2])}}),l._charset="x-user-defined",!a.overrideMimeType){var h=l.rawHeaders["mime-type"];if(h){var d=h.match(/;\s*charset=([^;])(;|$)/);d&&(l._charset=d[1].toLowerCase())}l._charset||(l._charset="utf-8")}}};o(l,s.Readable),l.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},l.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==u.DONE)break;try{n=new i.VBArray(t.responseBody).toArray()}catch(e){}if(null!==n){e.push(new r(n));break}case"text":try{n=t.responseText}catch(t){e._mode="text:vbarray";break}if(n.length>e._pos){var a=n.substr(e._pos);if("x-user-defined"===e._charset){for(var o=new r(a.length),s=0;s<a.length;s++)o[s]=255&a.charCodeAt(s);e.push(o)}else e.push(a,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==u.DONE||!t.response)break;n=t.response,e.push(new r(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==u.LOADING||!n)break;e.push(new r(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==u.LOADING)break;var l=new i.MSStreamReader;l.onprogress=function(){l.result.byteLength>e._pos&&(e.push(new r(new Uint8Array(l.result.slice(e._pos)))),e._pos=l.result.byteLength)},l.onload=function(){e.push(null)},l.readAsArrayBuffer(n)}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,n(12),n(9).Buffer,n(7))},function(e,t,n){"use strict";(function(t,r){var i=n(21);e.exports=v;var a,o=n(34);v.ReadableState=b;n(29).EventEmitter;var s=function(e,t){return e.listeners(t).length},u=n(39),l=n(30).Buffer,c=t.Uint8Array||function(){};var f=Object.create(n(19));f.inherits=n(14);var h=n(68),d=void 0;d=h&&h.debuglog?h.debuglog("stream"):function(){};var p,m=n(69),y=n(40);f.inherits(v,u);var g=["error","close","destroy","pause","resume"];function b(e,t){a=a||n(17),e=e||{};var r=t instanceof a;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=n(41).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function v(e){if(a=a||n(17),!(this instanceof v))return new v(e);this._readableState=new b(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function w(e,t,n,r,i){var a,o=e._readableState;null===t?(o.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,E(e)}(e,o)):(i||(a=function(e,t){var n;(function(e){return l.isBuffer(e)||e instanceof c})(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(o,t)),a?e.emit("error",a):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),r?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):O(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?O(e,o,t,!1):S(e,o)):O(e,o,t,!1))):r||(o.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function O(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&E(e)),S(e,t)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),v.prototype.destroy=y.destroy,v.prototype._undestroy=y.undestroy,v.prototype._destroy=function(e,t){this.push(null),t(e)},v.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=""),n=!0),w(this,e,t,!1,n)},v.prototype.unshift=function(e){return w(this,e,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(e){return p||(p=n(41).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};var _=8388608;function C(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=_?e=_:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function E(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(d("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(x,e):x(e))}function x(e){d("emit readable"),e.emit("readable"),M(e)}function S(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(j,e,t))}function j(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(d("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function T(e){d("readable nexttick read 0"),e.read(0)}function I(e,t){t.reading||(d("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(d("flow",t.flowing);t.flowing&&null!==e.read(););}function A(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0===(e-=o)){o===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=l.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,o),0===(e-=o)){o===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(o));break}++i}return t.length-=i,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function R(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(N,t,e))}function N(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function P(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}v.prototype.read=function(e){d("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return d("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?R(this):E(this),null;if(0===(e=C(e,t))&&t.ended)return 0===t.length&&R(this),null;var r,i=t.needReadable;return d("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&d("length less than watermark",i=!0),t.ended||t.reading?d("reading or ended",i=!1):i&&(d("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=C(n,t))),null===(r=e>0?A(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&R(this)),null!==r&&this.emit("data",r),r},v.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(e,t){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,d("pipe count=%d opts=%j",a.pipesCount,t);var u=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?c:v;function l(t,r){d("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,d("cleanup"),e.removeListener("close",g),e.removeListener("finish",b),e.removeListener("drain",f),e.removeListener("error",y),e.removeListener("unpipe",l),n.removeListener("end",c),n.removeListener("end",v),n.removeListener("data",m),h=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||f())}function c(){d("onend"),e.end()}a.endEmitted?i.nextTick(u):n.once("end",u),e.on("unpipe",l);var f=function(e){return function(){var t=e._readableState;d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,M(e))}}(n);e.on("drain",f);var h=!1;var p=!1;function m(t){d("ondata"),p=!1,!1!==e.write(t)||p||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==P(a.pipes,e))&&!h&&(d("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function y(t){d("onerror",t),v(),e.removeListener("error",y),0===s(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",b),v()}function b(){d("onfinish"),e.removeListener("close",g),v()}function v(){d("unpipe"),n.unpipe(e)}return n.on("data",m),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",y),e.once("close",g),e.once("finish",b),e.emit("pipe",n),a.flowing||(d("pipe resume"),n.resume()),e},v.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var o=P(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},v.prototype.on=function(e,t){var n=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&E(this):i.nextTick(T,this))}return n},v.prototype.addListener=v.prototype.on,v.prototype.resume=function(){var e=this._readableState;return e.flowing||(d("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(I,e,t))}(this,e)),this},v.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},v.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(d("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(d("wrapped data"),n.decoder&&(i=n.decoder.write(i)),!n.objectMode||null!==i&&void 0!==i)&&((n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause())))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<g.length;a++)e.on(g[a],this.emit.bind(this,g[a]));return this._read=function(t){d("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),v._fromList=A}).call(this,n(7),n(12))},function(e,t,n){e.exports=n(29).EventEmitter},function(e,t,n){"use strict";var r=n(21);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){"use strict";var r=n(74).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=f,t=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";e.exports=a;var r=n(17),i=Object.create(n(19));function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){s(e,t,n)}):s(this,null,null)}function s(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n(14),i.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},function(e,t,n){"use strict";(function(t){var r=n(86);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function i(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function a(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var o=n(44),s=Object.prototype.hasOwnProperty,u=Array.prototype.slice,l="foo"===function(){}.name;function c(e){return Object.prototype.toString.call(e)}function f(e){return!a(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var h=e.exports=b,d=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(o.isFunction(e)){if(l)return e.name;var t=e.toString().match(d);return t&&t[1]}}function m(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function y(e){if(l||!o.isFunction(e))return o.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function g(e,t,n,r,i){throw new h.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function b(e,t){e||g(e,!0,t,"==",h.ok)}function v(e,t,n,r){if(e===t)return!0;if(a(e)&&a(t))return 0===i(e,t);if(o.isDate(e)&&o.isDate(t))return e.getTime()===t.getTime();if(o.isRegExp(e)&&o.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(f(e)&&f(t)&&c(e)===c(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var s=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==s&&s===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=w(e),a=w(t);if(i&&!a||!i&&a)return!1;if(i)return e=u.call(e),t=u.call(t),v(e,t,n);var s,l,c=C(e),f=C(t);if(c.length!==f.length)return!1;for(c.sort(),f.sort(),l=c.length-1;l>=0;l--)if(c[l]!==f[l])return!1;for(l=c.length-1;l>=0;l--)if(s=c[l],!v(e[s],t[s],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function w(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function O(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function _(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&g(i,n,"Missing expected exception"+r);var a="string"==typeof r,s=!e&&o.isError(i),u=!e&&i&&!n;if((s&&a&&O(i,n)||u)&&g(i,n,"Got unwanted exception"+r),e&&i&&n&&!O(i,n)||!e&&i)throw i}h.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return m(y(e.actual),128)+" "+e.operator+" "+m(y(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=p(t),a=r.indexOf("\n"+i);if(a>=0){var o=r.indexOf("\n",a+1);r=r.substring(o+1)}this.stack=r}}},o.inherits(h.AssertionError,Error),h.fail=g,h.ok=b,h.equal=function(e,t,n){e!=t&&g(e,t,n,"==",h.equal)},h.notEqual=function(e,t,n){e==t&&g(e,t,n,"!=",h.notEqual)},h.deepEqual=function(e,t,n){v(e,t,!1)||g(e,t,n,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(e,t,n){v(e,t,!0)||g(e,t,n,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(e,t,n){v(e,t,!1)&&g(e,t,n,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function e(t,n,r){v(t,n,!0)&&g(t,n,r,"notDeepStrictEqual",e)},h.strictEqual=function(e,t,n){e!==t&&g(e,t,n,"===",h.strictEqual)},h.notStrictEqual=function(e,t,n){e===t&&g(e,t,n,"!==",h.notStrictEqual)},h.throws=function(e,t,n){_(!0,e,t,n)},h.doesNotThrow=function(e,t,n){_(!1,e,t,n)},h.ifError=function(e){if(e)throw e},h.strict=r(function e(t,n){t||g(t,!0,n,"==",e)},h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var C=Object.keys||function(e){var t=[];for(var n in e)s.call(e,n)&&t.push(n);return t}}).call(this,n(7))},function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!g(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,a=r.length,o=String(e).replace(i,function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),u=r[n];n<a;u=r[++n])m(u)||!w(u)?o+=" "+u:o+=" "+s(u);return o},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var a,o={};function s(e,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),c(r,e,r.depth)}function u(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function l(e,t){return e}function c(e,n,r){if(e.customInspect&&n&&C(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return g(i)||(i=c(e,i,r)),i}var a=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(g(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(y(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,n);if(a)return a;var o=Object.keys(n),s=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),_(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return f(n);if(0===o.length){if(C(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(v(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(O(n))return e.stylize(Date.prototype.toString.call(n),"date");if(_(n))return f(n)}var l,w="",E=!1,x=["{","}"];(d(n)&&(E=!0,x=["[","]"]),C(n))&&(w=" [Function"+(n.name?": "+n.name:"")+"]");return v(n)&&(w=" "+RegExp.prototype.toString.call(n)),O(n)&&(w=" "+Date.prototype.toUTCString.call(n)),_(n)&&(w=" "+f(n)),0!==o.length||E&&0!=n.length?r<0?v(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=E?function(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)j(t,String(o))?a.push(h(e,t,n,r,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(h(e,t,n,r,i,!0))}),a}(e,n,r,s,o):o.map(function(t){return h(e,n,r,s,t,E)}),e.seen.pop(),function(e,t,n){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,w,x)):x[0]+w+x[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),j(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=m(n)?c(e,u.value,null):c(e,u.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),b(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function d(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function m(e){return null===e}function y(e){return"number"==typeof e}function g(e){return"string"==typeof e}function b(e){return void 0===e}function v(e){return w(e)&&"[object RegExp]"===E(e)}function w(e){return"object"==typeof e&&null!==e}function O(e){return w(e)&&"[object Date]"===E(e)}function _(e){return w(e)&&("[object Error]"===E(e)||e instanceof Error)}function C(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function x(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(b(a)&&(a=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!o[n])if(new RegExp("\\b"+n+"\\b","i").test(a)){var r=e.pid;o[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else o[n]=function(){};return o[n]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=p,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=g,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=b,t.isRegExp=v,t.isObject=w,t.isDate=O,t.isError=_,t.isFunction=C,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(87);var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",function(){var e=new Date,t=[x(e.getHours()),x(e.getMinutes()),x(e.getSeconds())].join(":");return[e.getDate(),S[e.getMonth()],t].join(" ")}(),t.format.apply(t,arguments))},t.inherits=n(88),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function I(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(T&&e[T]){var t;if("function"!=typeof(t=e[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise(function(e,r){t=e,n=r}),i=[],a=0;a<arguments.length;a++)i.push(arguments[a]);i.push(function(e,r){e?n(e):t(r)});try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),T&&Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=T,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return i.apply(a,arguments)};t.apply(this,n).then(function(t){e.nextTick(o,null,t)},function(t){e.nextTick(I,t,o)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(12))},function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{a=a+(i=i+t[r++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}},function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,i){var a=r,o=i+n;e^=-1;for(var s=i;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=47},function(e,t){(function(t){e.exports=t}).call(this,{toUrlUndefined:!0})},function(e,t,n){"use strict";t.a=function(e){return 0!==e.length&&"/"===e[e.length-1]||(e+="/"),e}},function(e,t,n){"use strict";var r=n(6),i=n(1),a=n(3);t.a=function(e,t){if(!Object(i.a)(e))throw new a.a("uri is required.");var n="",o=e.lastIndexOf("/");return-1!==o&&(n=e.substring(0,o+1)),t?(e=new r.a(e),Object(i.a)(e.query)&&(n+="?"+e.query),Object(i.a)(e.fragment)&&(n+="#"+e.fragment),n):n}},function(e,t,n){"use strict";var r=n(6),i=n(1),a=n(3);t.a=function(e){if(!Object(i.a)(e))throw new a.a("uri is required.");var t=new r.a(e);t.normalize();var n=t.path,o=n.lastIndexOf("/");return-1!==o&&(n=n.substr(o+1)),n=-1===(o=n.lastIndexOf("."))?"":n.substr(o+1)}},function(e,t,n){"use strict";var r,i=n(1);t.a=function(e){Object(i.a)(r)||(r=document.createElement("a")),r.href=window.location.href;var t=r.host,n=r.protocol;return r.href=e,r.href=r.href,n!==r.protocol||t!==r.host}},function(e,t,n){"use strict";var r=n(4);t.a=function(e){var t=r.a.defer(),n=document.createElement("script");n.async=!0,n.src=e;var i=document.getElementsByTagName("head")[0];return n.onload=function(){n.onload=void 0,i.removeChild(n),t.resolve()},n.onerror=function(e){t.reject(e)},i.appendChild(n),t.promise}},function(e,t,n){"use strict";var r=n(1),i=n(3);t.a=function(e){if(!Object(r.a)(e))throw new i.a("obj is required.");var t="";for(var n in e)if(e.hasOwnProperty(n)){var a=e[n],o=encodeURIComponent(n)+"=";if(Array.isArray(a))for(var s=0,u=a.length;s<u;++s)t+=o+encodeURIComponent(a[s])+"&";else t+=o+encodeURIComponent(a)+"&"}return t=t.slice(0,-1)}},function(e,t,n){"use strict";var r=n(1),i=n(3);t.a=function(e){if(!Object(r.a)(e))throw new i.a("queryString is required.");var t={};if(""===e)return t;for(var n=e.replace(/\+/g,"%20").split(/[&;]/),a=0,o=n.length;a<o;++a){var s=n[a].split("="),u=decodeURIComponent(s[0]),l=s[1];l=Object(r.a)(l)?decodeURIComponent(l):"";var c=t[u];"string"==typeof c?t[u]=[c,l]:Array.isArray(c)?c.push(l):t[u]=l}return t}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8c3ZnIHdpZHRoPSIxNzZweCIgaGVpZ2h0PSIxNzZweCIgdmlld0JveD0iMCAwIDE3NiAxNzYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6c2tldGNoPSJodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2gvbnMiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4xLjEgKDg3NjEpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5Mb2NhdGlvblRhcmdldCArIFBhdGg8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxkZWZzPg0KICAgICAgICA8ZmlsdGVyIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xIj4NCiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjAiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+DQogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIyIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+DQogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC41MjY0NDY0NDUgMCIgaW49InNoYWRvd0JsdXJPdXRlcjEiIHR5cGU9Im1hdHJpeCIgcmVzdWx0PSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVDb2xvck1hdHJpeD4NCiAgICAgICAgICAgIDxmZU1lcmdlPg0KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIj48L2ZlTWVyZ2VOb2RlPg0KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iU291cmNlR3JhcGhpYyI+PC9mZU1lcmdlTm9kZT4NCiAgICAgICAgICAgIDwvZmVNZXJnZT4NCiAgICAgICAgPC9maWx0ZXI+DQogICAgICAgIDxmaWx0ZXIgeD0iLTUwJSIgeT0iLTUwJSIgd2lkdGg9IjIwMCUiIGhlaWdodD0iMjAwJSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPg0KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4NCiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjIiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4NCiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwICAgMCAwIDAgMCAwICAgMCAwIDAgMCAwICAwIDAgMCAwLjUyNjQ0NjQ0NSAwIiBpbj0ic2hhZG93Qmx1ck91dGVyMSIgdHlwZT0ibWF0cml4IiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSI+PC9mZUNvbG9yTWF0cml4Pg0KICAgICAgICAgICAgPGZlTWVyZ2U+DQogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVNZXJnZU5vZGU+DQogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIj48L2ZlTWVyZ2VOb2RlPg0KICAgICAgICAgICAgPC9mZU1lcmdlPg0KICAgICAgICA8L2ZpbHRlcj4NCiAgICA8L2RlZnM+DQogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBcnRib2FyZC0xIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNjkxLjAwMDAwMCwgLTQ5OC4wMDAwMDApIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZT0iI0ZGRkZGRiI+DQogICAgICAgICAgICA8ZyBpZD0iTG9jYXRpb25UYXJnZXQtKy1QYXRoIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2OTkuMDAwMDAwLCA1MDYuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPHBhdGggZD0iTTgwLDE0NCBDMTE1LjM0NjIyNCwxNDQgMTQ0LDExNS4zNDYyMjQgMTQ0LDgwIEMxNDQsNDQuNjUzNzc2IDExNS4zNDYyMjQsMTYgODAsMTYgQzQ0LjY1Mzc3NiwxNiAxNiw0NC42NTM3NzYgMTYsODAgQzE2LDExNS4zNDYyMjQgNDQuNjUzNzc2LDE0NCA4MCwxNDQgWiBNMTYwLDgwIEwxNDQsODAgTTE2LDgwIEwwLDgwIE03OS42LC0wLjQgTDc5LjYsMTUuNiBNNzguOCwxNDQgTDc4LjgsMTYwIiBpZD0iTG9jYXRpb25UYXJnZXQiIHN0cm9rZS13aWR0aD0iNyIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0xKSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgIDxjaXJjbGUgaWQ9IlBhdGgiIHN0cm9rZS13aWR0aD0iMiIgb3BhY2l0eT0iMC4yNTIyMTU0ODUiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIGN4PSI4MCIgY3k9IjgwIiByPSI2Ij48L2NpcmNsZT4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=="},function(e,t,n){"use strict";var r=n(2),i=n(1),a=n(5),o=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function s(e){e=Object(r.a)(e,r.a.EMPTY_OBJECT);var t=Object(r.a)(e.throttleByServer,!1),n=Object(r.a)(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=Object(r.a)(e.priority,0),this.throttle=n,this.throttleByServer=t,this.type=Object(r.a)(e.type,o.OTHER),this.serverKey=void 0,this.state=a.a.UNISSUED,this.deferred=void 0,this.cancelled=!1}s.prototype.cancel=function(){this.cancelled=!0},s.prototype.clone=function(e){return Object(i.a)(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=this.RequestState.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new s(this)};t.a=s},function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=l(e),o=r[0],s=r[1],u=new a(function(e,t,n){return 3*(t+n)/4-n}(0,o,s)),c=0,f=s>0?o-4:o;for(n=0;n<f;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[c++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(f(e,o,o+16383>s?s:o+16383));1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function f(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(c(r));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+e[t+f],f+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+f],f+=h,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),a-=l}return(d?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(t*u-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+d]=255&o,d+=p,o/=256,l-=8);e[n+d-p]|=128*m}},function(e,t,n){(function(e,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(a){"object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType;var o="object"==typeof r&&r;o.global!==o&&o.window!==o&&o.self;var s,u=2147483647,l=36,c=1,f=26,h=38,d=700,p=72,m=128,y="-",g=/^xn--/,b=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=l-c,_=Math.floor,C=String.fromCharCode;function E(e){throw new RangeError(w[e])}function x(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function S(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+x((e=e.replace(v,".")).split("."),t).join(".")}function j(e){for(var t,n,r=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function T(e){return x(e,function(e){var t="";return e>65535&&(t+=C((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=C(e)}).join("")}function I(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:l}function M(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function A(e,t,n){var r=0;for(e=n?_(e/d):e>>1,e+=_(e/t);e>O*f>>1;r+=l)e=_(e/O);return _(r+(O+1)*e/(e+h))}function R(e){var t,n,r,i,a,o,s,h,d,g,b=[],v=e.length,w=0,O=m,C=p;for((n=e.lastIndexOf(y))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&E("not-basic"),b.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<v;){for(a=w,o=1,s=l;i>=v&&E("invalid-input"),((h=I(e.charCodeAt(i++)))>=l||h>_((u-w)/o))&&E("overflow"),w+=h*o,!(h<(d=s<=C?c:s>=C+f?f:s-C));s+=l)o>_(u/(g=l-d))&&E("overflow"),o*=g;C=A(w-a,t=b.length+1,0==a),_(w/t)>u-O&&E("overflow"),O+=_(w/t),w%=t,b.splice(w++,0,O)}return T(b)}function N(e){var t,n,r,i,a,o,s,h,d,g,b,v,w,O,x,S=[];for(v=(e=j(e)).length,t=m,n=0,a=p,o=0;o<v;++o)(b=e[o])<128&&S.push(C(b));for(r=i=S.length,i&&S.push(y);r<v;){for(s=u,o=0;o<v;++o)(b=e[o])>=t&&b<s&&(s=b);for(s-t>_((u-n)/(w=r+1))&&E("overflow"),n+=(s-t)*w,t=s,o=0;o<v;++o)if((b=e[o])<t&&++n>u&&E("overflow"),b==t){for(h=n,d=l;!(h<(g=d<=a?c:d>=a+f?f:d-a));d+=l)x=h-g,O=l-g,S.push(C(M(g+x%O,0))),h=_(x/O);S.push(C(M(h,0))),a=A(n,w,r==i),n=0,++r}++n,++t}return S.join("")}s={version:"1.4.1",ucs2:{decode:j,encode:T},decode:R,encode:N,toASCII:function(e){return S(e,function(e){return b.test(e)?"xn--"+N(e):e})},toUnicode:function(e){return S(e,function(e){return g.test(e)?R(e.slice(4).toLowerCase()):e})}},void 0===(i=function(){return s}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(61)(e),n(7))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(64),t.encode=t.stringify=n(65)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,a){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var u=1e3;a&&"number"==typeof a.maxKeys&&(u=a.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var f,h,d,p,m=e[c].replace(s,"%20"),y=m.indexOf(n);y>=0?(f=m.substr(0,y),h=m.substr(y+1)):(f=m,h=""),d=decodeURIComponent(f),p=decodeURIComponent(h),r(o,d)?i(o[d])?o[d].push(p):o[d]=[o[d],p]:o[d]=p}return o};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?a(o(e),function(o){var s=encodeURIComponent(r(o))+n;return i(e[o])?a(e[o],function(e){return s+encodeURIComponent(r(e))}).join(t):s+encodeURIComponent(r(e[o]))}).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){var r=n(35),i=n(28),a=e.exports;for(var o in r)r.hasOwnProperty(o)&&(a[o]=r[o]);function s(e){if("string"==typeof e&&(e=i.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}a.request=function(e,t){return e=s(e),r.request.call(this,e,t)},a.get=function(e,t){return e=s(e),r.get.call(this,e,t)}},function(e,t,n){(function(t,r,i){var a=n(36),o=n(14),s=n(37),u=n(18),l=n(76),c=s.IncomingMessage,f=s.readyStates;var h=e.exports=function(e){var n,r=this;u.Writable.call(r),r._opts=e,r._body=[],r._headers={},e.auth&&r.setHeader("Authorization","Basic "+new t(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(t){r.setHeader(t,e.headers[t])});var i=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!a.abortController)i=!1,n=!0;else if("prefer-streaming"===e.mode)n=!1;else if("allow-wrong-content-type"===e.mode)n=!a.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");n=!0}r._mode=function(e,t){return a.fetch&&t?"fetch":a.mozchunkedarraybuffer?"moz-chunked-arraybuffer":a.msstream?"ms-stream":a.arraybuffer&&e?"arraybuffer":a.vbArray&&e?"text:vbarray":"text"}(n,i),r._fetchTimer=null,r.on("finish",function(){r._onFinish()})};o(h,u.Writable),h.prototype.setHeader=function(e,t){var n=e.toLowerCase();-1===d.indexOf(n)&&(this._headers[n]={name:e,value:t})},h.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},h.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},h.prototype._onFinish=function(){var e=this;if(!e._destroyed){var n=e._opts,o=e._headers,s=null;"GET"!==n.method&&"HEAD"!==n.method&&(s=a.arraybuffer?l(t.concat(e._body)):a.blobConstructor?new r.Blob(e._body.map(function(e){return l(e)}),{type:(o["content-type"]||{}).value||""}):t.concat(e._body).toString());var u=[];if(Object.keys(o).forEach(function(e){var t=o[e].name,n=o[e].value;Array.isArray(n)?n.forEach(function(e){u.push([t,e])}):u.push([t,n])}),"fetch"===e._mode){var c=null;if(a.abortController){var h=new AbortController;c=h.signal,e._fetchAbortController=h,"requestTimeout"in n&&0!==n.requestTimeout&&(e._fetchTimer=r.setTimeout(function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()},n.requestTimeout))}r.fetch(e._opts.url,{method:e._opts.method,headers:u,body:s||void 0,mode:"cors",credentials:n.withCredentials?"include":"same-origin",signal:c}).then(function(t){e._fetchResponse=t,e._connect()},function(t){r.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)})}else{var d=e._xhr=new r.XMLHttpRequest;try{d.open(e._opts.method,e._opts.url,!0)}catch(t){return void i.nextTick(function(){e.emit("error",t)})}"responseType"in d&&(d.responseType=e._mode.split(":")[0]),"withCredentials"in d&&(d.withCredentials=!!n.withCredentials),"text"===e._mode&&"overrideMimeType"in d&&d.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in n&&(d.timeout=n.requestTimeout,d.ontimeout=function(){e.emit("requestTimeout")}),u.forEach(function(e){d.setRequestHeader(e[0],e[1])}),e._response=null,d.onreadystatechange=function(){switch(d.readyState){case f.LOADING:case f.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(d.onprogress=function(){e._onXHRProgress()}),d.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{d.send(s)}catch(t){return void i.nextTick(function(){e.emit("error",t)})}}}},h.prototype._onXHRProgress=function(){(function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},h.prototype._connect=function(){var e=this;e._destroyed||(e._response=new c(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},h.prototype._write=function(e,t,n){this._body.push(e),n()},h.prototype.abort=h.prototype.destroy=function(){this._destroyed=!0,r.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},h.prototype.end=function(e,t,n){"function"==typeof e&&(n=e,e=void 0),u.Writable.prototype.end.call(this,e,t,n)},h.prototype.flushHeaders=function(){},h.prototype.setTimeout=function(){},h.prototype.setNoDelay=function(){},h.prototype.setSocketKeepAlive=function(){};var d=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,n(9).Buffer,n(7),n(12))},function(e,t){},function(e,t,n){"use strict";var r=n(30).Buffer,i=n(70);function a(e,t,n){e.copy(t,n)}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t=r.allocUnsafe(e>>>0),n=this.head,i=0;n;)a(n.data,t,i),i+=n.data.length,n=n.next;return t},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(72),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(7))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i=1,a={},o=!1,s=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){c(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&c(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){c(e.data)},r=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;r=function(t){var n=s.createElement("script");n.onreadystatechange=function(){c(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(c,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return a[i]=o,r(i),i++},u.clearImmediate=l}function l(e){delete a[e]}function c(e){if(o)setTimeout(c,0,e);else{var t=a[e];if(t){o=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{l(e),o=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(7),n(12))},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(7))},function(e,t,n){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=n(9),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=o),o.prototype=Object.create(i.prototype),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){"use strict";e.exports=a;var r=n(42),i=Object.create(n(19));function a(e){if(!(this instanceof a))return new a(e);r.call(this,e)}i.inherits=n(14),i.inherits(a,r),a.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){var r=n(9).Buffer;e.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(r.isBuffer(e)){for(var t=new Uint8Array(e.length),n=e.length,i=0;i<n;i++)t[i]=e[i];return t.buffer}throw new Error("Argument must be a Buffer")}},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e};var n=Object.prototype.hasOwnProperty},function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(e,t,n){"use strict";(function(e){var r=n(9).Buffer,i=n(80).Transform,a=n(85),o=n(44),s=n(43).ok,u=n(9).kMaxLength,l="Cannot create final Buffer. It would be larger than 0x"+u.toString(16)+" bytes";a.Z_MIN_WINDOWBITS=8,a.Z_MAX_WINDOWBITS=15,a.Z_DEFAULT_WINDOWBITS=15,a.Z_MIN_CHUNK=64,a.Z_MAX_CHUNK=1/0,a.Z_DEFAULT_CHUNK=16384,a.Z_MIN_MEMLEVEL=1,a.Z_MAX_MEMLEVEL=9,a.Z_DEFAULT_MEMLEVEL=8,a.Z_MIN_LEVEL=-1,a.Z_MAX_LEVEL=9,a.Z_DEFAULT_LEVEL=a.Z_DEFAULT_COMPRESSION;for(var c=Object.keys(a),f=0;f<c.length;f++){var h=c[f];h.match(/^Z/)&&Object.defineProperty(t,h,{enumerable:!0,value:a[h],writable:!1})}for(var d={Z_OK:a.Z_OK,Z_STREAM_END:a.Z_STREAM_END,Z_NEED_DICT:a.Z_NEED_DICT,Z_ERRNO:a.Z_ERRNO,Z_STREAM_ERROR:a.Z_STREAM_ERROR,Z_DATA_ERROR:a.Z_DATA_ERROR,Z_MEM_ERROR:a.Z_MEM_ERROR,Z_BUF_ERROR:a.Z_BUF_ERROR,Z_VERSION_ERROR:a.Z_VERSION_ERROR},p=Object.keys(d),m=0;m<p.length;m++){var y=p[m];d[d[y]]=y}function g(e,t,n){var i=[],a=0;function o(){for(var t;null!==(t=e.read());)i.push(t),a+=t.length;e.once("readable",o)}function s(){var t,o=null;a>=u?o=new RangeError(l):t=r.concat(i,a),i=[],e.close(),n(o,t)}e.on("error",function(t){e.removeListener("end",s),e.removeListener("readable",o),n(t)}),e.on("end",s),e.end(t),o()}function b(e,t){if("string"==typeof t&&(t=r.from(t)),!r.isBuffer(t))throw new TypeError("Not a string or buffer");var n=e._finishFlushFlag;return e._processChunk(t,n)}function v(e){if(!(this instanceof v))return new v(e);j.call(this,e,a.DEFLATE)}function w(e){if(!(this instanceof w))return new w(e);j.call(this,e,a.INFLATE)}function O(e){if(!(this instanceof O))return new O(e);j.call(this,e,a.GZIP)}function _(e){if(!(this instanceof _))return new _(e);j.call(this,e,a.GUNZIP)}function C(e){if(!(this instanceof C))return new C(e);j.call(this,e,a.DEFLATERAW)}function E(e){if(!(this instanceof E))return new E(e);j.call(this,e,a.INFLATERAW)}function x(e){if(!(this instanceof x))return new x(e);j.call(this,e,a.UNZIP)}function S(e){return e===a.Z_NO_FLUSH||e===a.Z_PARTIAL_FLUSH||e===a.Z_SYNC_FLUSH||e===a.Z_FULL_FLUSH||e===a.Z_FINISH||e===a.Z_BLOCK}function j(e,n){var o=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,i.call(this,e),e.flush&&!S(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!S(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||a.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:a.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!r.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new a.Zlib(n);var s=this;this._hadError=!1,this._handle.onerror=function(e,n){T(s),s._hadError=!0;var r=new Error(e);r.errno=n,r.code=t.codes[n],s.emit("error",r)};var u=t.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(u=e.level);var l=t.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(l=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,u,e.memLevel||t.Z_DEFAULT_MEMLEVEL,l,e.dictionary),this._buffer=r.allocUnsafe(this._chunkSize),this._offset=0,this._level=u,this._strategy=l,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!o._handle},configurable:!0,enumerable:!0})}function T(t,n){n&&e.nextTick(n),t._handle&&(t._handle.close(),t._handle=null)}function I(e){e.emit("close")}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(d),writable:!1}),t.Deflate=v,t.Inflate=w,t.Gzip=O,t.Gunzip=_,t.DeflateRaw=C,t.InflateRaw=E,t.Unzip=x,t.createDeflate=function(e){return new v(e)},t.createInflate=function(e){return new w(e)},t.createDeflateRaw=function(e){return new C(e)},t.createInflateRaw=function(e){return new E(e)},t.createGzip=function(e){return new O(e)},t.createGunzip=function(e){return new _(e)},t.createUnzip=function(e){return new x(e)},t.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),g(new v(t),e,n)},t.deflateSync=function(e,t){return b(new v(t),e)},t.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),g(new O(t),e,n)},t.gzipSync=function(e,t){return b(new O(t),e)},t.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),g(new C(t),e,n)},t.deflateRawSync=function(e,t){return b(new C(t),e)},t.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),g(new x(t),e,n)},t.unzipSync=function(e,t){return b(new x(t),e)},t.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),g(new w(t),e,n)},t.inflateSync=function(e,t){return b(new w(t),e)},t.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),g(new _(t),e,n)},t.gunzipSync=function(e,t){return b(new _(t),e)},t.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),g(new E(t),e,n)},t.inflateRawSync=function(e,t){return b(new E(t),e)},o.inherits(j,i),j.prototype.params=function(n,r,i){if(n<t.Z_MIN_LEVEL||n>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+n);if(r!=t.Z_FILTERED&&r!=t.Z_HUFFMAN_ONLY&&r!=t.Z_RLE&&r!=t.Z_FIXED&&r!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==n||this._strategy!==r){var o=this;this.flush(a.Z_SYNC_FLUSH,function(){s(o._handle,"zlib binding closed"),o._handle.params(n,r),o._hadError||(o._level=n,o._strategy=r,i&&i())})}else e.nextTick(i)},j.prototype.reset=function(){return s(this._handle,"zlib binding closed"),this._handle.reset()},j.prototype._flush=function(e){this._transform(r.alloc(0),"",e)},j.prototype.flush=function(t,n){var i=this,o=this._writableState;("function"==typeof t||void 0===t&&!n)&&(n=t,t=a.Z_FULL_FLUSH),o.ended?n&&e.nextTick(n):o.ending?n&&this.once("end",n):o.needDrain?n&&this.once("drain",function(){return i.flush(t,n)}):(this._flushFlag=t,this.write(r.alloc(0),"",n))},j.prototype.close=function(t){T(this,t),e.nextTick(I,this)},j.prototype._transform=function(e,t,n){var i,o=this._writableState,s=(o.ending||o.ended)&&(!e||o.length===e.length);return null===e||r.isBuffer(e)?this._handle?(s?i=this._finishFlushFlag:(i=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||a.Z_NO_FLUSH)),void this._processChunk(e,i,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},j.prototype._processChunk=function(e,t,n){var i=e&&e.length,a=this._chunkSize-this._offset,o=0,c=this,f="function"==typeof n;if(!f){var h,d=[],p=0;this.on("error",function(e){h=e}),s(this._handle,"zlib binding closed");do{var m=this._handle.writeSync(t,e,o,i,this._buffer,this._offset,a)}while(!this._hadError&&b(m[0],m[1]));if(this._hadError)throw h;if(p>=u)throw T(this),new RangeError(l);var y=r.concat(d,p);return T(this),y}s(this._handle,"zlib binding closed");var g=this._handle.write(t,e,o,i,this._buffer,this._offset,a);function b(u,l){if(this&&(this.buffer=null,this.callback=null),!c._hadError){var h=a-l;if(s(h>=0,"have should not go down"),h>0){var m=c._buffer.slice(c._offset,c._offset+h);c._offset+=h,f?c.push(m):(d.push(m),p+=m.length)}if((0===l||c._offset>=c._chunkSize)&&(a=c._chunkSize,c._offset=0,c._buffer=r.allocUnsafe(c._chunkSize)),0===l){if(o+=i-u,i=u,!f)return!0;var y=c._handle.write(t,e,o,i,c._buffer,c._offset,c._chunkSize);return y.callback=b,void(y.buffer=e)}if(!f)return!1;n()}}g.buffer=e,g.callback=b},o.inherits(v,j),o.inherits(w,j),o.inherits(O,j),o.inherits(_,j),o.inherits(C,j),o.inherits(E,j),o.inherits(x,j)}).call(this,n(12))},function(e,t,n){e.exports=i;var r=n(29).EventEmitter;function i(){r.call(this)}n(14)(i,r),i.Readable=n(18),i.Writable=n(81),i.Duplex=n(82),i.Transform=n(83),i.PassThrough=n(84),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",u));var o=!1;function s(){o||(o=!0,e.end())}function u(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(c(),0===r.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",i),e.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",l),e.on("error",l),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e}},function(e,t,n){e.exports=n(31)},function(e,t,n){e.exports=n(17)},function(e,t,n){e.exports=n(18).Transform},function(e,t,n){e.exports=n(18).PassThrough},function(e,t,n){"use strict";(function(e,r){var i=n(43),a=n(89),o=n(90),s=n(93),u=n(96);for(var l in u)t[l]=u[l];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7;function c(e){if("number"!=typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}c.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,i(this.init_done,"close before init"),i(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?o.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||s.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null)},c.prototype.write=function(e,t,n,r,i,a,o){return this._write(!0,e,t,n,r,i,a,o)},c.prototype.writeSync=function(e,t,n,r,i,a,o){return this._write(!1,e,t,n,r,i,a,o)},c.prototype._write=function(n,a,o,s,u,l,c,f){if(i.equal(arguments.length,8),i(this.init_done,"write before init"),i(this.mode!==t.NONE,"already finalized"),i.equal(!1,this.write_in_progress,"write already in progress"),i.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,i.equal(!1,void 0===a,"must provide flush value"),this.write_in_progress=!0,a!==t.Z_NO_FLUSH&&a!==t.Z_PARTIAL_FLUSH&&a!==t.Z_SYNC_FLUSH&&a!==t.Z_FULL_FLUSH&&a!==t.Z_FINISH&&a!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==o&&(o=e.alloc(0),u=0,s=0),this.strm.avail_in=u,this.strm.input=o,this.strm.next_in=s,this.strm.avail_out=f,this.strm.output=l,this.strm.next_out=c,this.flush=a,!n)return this._process(),this._checkError()?this._afterSync():void 0;var h=this;return r.nextTick(function(){h._process(),h._after()}),this},c.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},c.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=o.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=s.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=s.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=s.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=s.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},c.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},c.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},c.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},c.prototype.init=function(e,n,r,a,o){i(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),i(e>=8&&e<=15,"invalid windowBits"),i(n>=-1&&n<=9,"invalid compression level"),i(r>=1&&r<=9,"invalid memlevel"),i(a===t.Z_FILTERED||a===t.Z_HUFFMAN_ONLY||a===t.Z_RLE||a===t.Z_FIXED||a===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(n,e,r,a,o),this._setDictionary()},c.prototype.params=function(){throw new Error("deflateParams Not supported")},c.prototype.reset=function(){this._reset(),this._setDictionary()},c.prototype._init=function(e,n,r,i,u){switch(this.level=e,this.windowBits=n,this.memLevel=r,this.strategy=i,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new a,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=o.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=s.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=u,this.write_in_progress=!1,this.init_done=!0},c.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=o.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},c.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=o.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=s.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=c}).call(this,n(9).Buffer,n(12))},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,o,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))i.call(n,l)&&(s[l]=n[l]);if(r){o=r(n);for(var c=0;c<o.length;c++)a.call(n,o[c])&&(s[o[c]]=n[o[c]])}}return s}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){"use strict";var r,i=n(22),a=n(91),o=n(45),s=n(46),u=n(92),l=0,c=1,f=3,h=4,d=5,p=0,m=1,y=-2,g=-3,b=-5,v=-1,w=1,O=2,_=3,C=4,E=0,x=2,S=8,j=9,T=15,I=8,M=286,A=30,R=19,N=2*M+1,P=15,D=3,k=258,L=k+D+1,z=32,q=42,B=69,U=73,F=91,V=103,W=113,Z=666,H=1,G=2,Y=3,X=4,J=3;function K(e,t){return e.msg=u[t],t}function $(e){return(e<<1)-(e>4?9:0)}function Q(e){for(var t=e.length;--t>=0;)e[t]=0}function ee(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function te(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ee(e.strm)}function ne(e,t){e.pending_buf[e.pending++]=t}function re(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function ie(e,t,n,r){var a=e.avail_in;return a>r&&(a=r),0===a?0:(e.avail_in-=a,i.arraySet(t,e.input,e.next_in,a,n),1===e.state.wrap?e.adler=o(e.adler,t,a,n):2===e.state.wrap&&(e.adler=s(e.adler,t,a,n)),e.next_in+=a,e.total_in+=a,a)}function ae(e,t){var n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-L?e.strstart-(e.w_size-L):0,l=e.window,c=e.w_mask,f=e.prev,h=e.strstart+k,d=l[a+o-1],p=l[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(l[(n=t)+o]===p&&l[n+o-1]===d&&l[n]===l[a]&&l[++n]===l[a+1]){a+=2,n++;do{}while(l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&a<h);if(r=k-(h-a),a=h-k,r>o){if(e.match_start=t,o=r,r>=s)break;d=l[a+o-1],p=l[a+o]}}}while((t=f[t&c])>u&&0!=--i);return o<=e.lookahead?o:e.lookahead}function oe(e){var t,n,r,a,o,s=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-L)){i.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=s?r-s:0}while(--n);t=n=s;do{r=e.prev[--t],e.prev[t]=r>=s?r-s:0}while(--n);a+=s}if(0===e.strm.avail_in)break;if(n=ie(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=n,e.lookahead+e.insert>=D)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+D-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<D)););}while(e.lookahead<L&&0!==e.strm.avail_in)}function se(e,t){for(var n,r;;){if(e.lookahead<L){if(oe(e),e.lookahead<L&&t===l)return H;if(0===e.lookahead)break}if(n=0,e.lookahead>=D&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+D-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-L&&(e.match_length=ae(e,n)),e.match_length>=D)if(r=a._tr_tally(e,e.strstart-e.match_start,e.match_length-D),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=D){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+D-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(te(e,!1),0===e.strm.avail_out))return H}return e.insert=e.strstart<D-1?e.strstart:D-1,t===h?(te(e,!0),0===e.strm.avail_out?Y:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?H:G}function ue(e,t){for(var n,r,i;;){if(e.lookahead<L){if(oe(e),e.lookahead<L&&t===l)return H;if(0===e.lookahead)break}if(n=0,e.lookahead>=D&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+D-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=D-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-L&&(e.match_length=ae(e,n),e.match_length<=5&&(e.strategy===w||e.match_length===D&&e.strstart-e.match_start>4096)&&(e.match_length=D-1)),e.prev_length>=D&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-D,r=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-D),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+D-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=D-1,e.strstart++,r&&(te(e,!1),0===e.strm.avail_out))return H}else if(e.match_available){if((r=a._tr_tally(e,0,e.window[e.strstart-1]))&&te(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return H}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<D-1?e.strstart:D-1,t===h?(te(e,!0),0===e.strm.avail_out?Y:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?H:G}function le(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function ce(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=x,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?q:W,e.adler=2===t.wrap?0:1,t.last_flush=l,a._tr_init(t),p):K(e,y)}function fe(e){var t=ce(e);return t===p&&function(e){e.window_size=2*e.w_size,Q(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=D-1,e.match_available=0,e.ins_h=0}(e.state),t}function he(e,t,n,r,a,o){if(!e)return y;var s=1;if(t===v&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),a<1||a>j||n!==S||r<8||r>15||t<0||t>9||o<0||o>C)return K(e,y);8===r&&(r=9);var u=new function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*N),this.dyn_dtree=new i.Buf16(2*(2*A+1)),this.bl_tree=new i.Buf16(2*(2*R+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(P+1),this.heap=new i.Buf16(2*M+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*M+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0};return e.state=u,u.strm=e,u.wrap=s,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=a+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+D-1)/D),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<a+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=o,u.method=n,fe(e)}r=[new le(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(oe(e),0===e.lookahead&&t===l)return H;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,te(e,!1),0===e.strm.avail_out))return H;if(e.strstart-e.block_start>=e.w_size-L&&(te(e,!1),0===e.strm.avail_out))return H}return e.insert=0,t===h?(te(e,!0),0===e.strm.avail_out?Y:X):(e.strstart>e.block_start&&(te(e,!1),e.strm.avail_out),H)}),new le(4,4,8,4,se),new le(4,5,16,8,se),new le(4,6,32,32,se),new le(4,4,16,16,ue),new le(8,16,32,32,ue),new le(8,16,128,128,ue),new le(8,32,128,256,ue),new le(32,128,258,1024,ue),new le(32,258,258,4096,ue)],t.deflateInit=function(e,t){return he(e,t,S,T,I,E)},t.deflateInit2=he,t.deflateReset=fe,t.deflateResetKeep=ce,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?y:(e.state.gzhead=t,p):y},t.deflate=function(e,t){var n,i,o,u;if(!e||!e.state||t>d||t<0)return e?K(e,y):y;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||i.status===Z&&t!==h)return K(e,0===e.avail_out?b:y);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===q)if(2===i.wrap)e.adler=0,ne(i,31),ne(i,139),ne(i,8),i.gzhead?(ne(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),ne(i,255&i.gzhead.time),ne(i,i.gzhead.time>>8&255),ne(i,i.gzhead.time>>16&255),ne(i,i.gzhead.time>>24&255),ne(i,9===i.level?2:i.strategy>=O||i.level<2?4:0),ne(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(ne(i,255&i.gzhead.extra.length),ne(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=B):(ne(i,0),ne(i,0),ne(i,0),ne(i,0),ne(i,0),ne(i,9===i.level?2:i.strategy>=O||i.level<2?4:0),ne(i,J),i.status=W);else{var g=S+(i.w_bits-8<<4)<<8;g|=(i.strategy>=O||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(g|=z),g+=31-g%31,i.status=W,re(i,g),0!==i.strstart&&(re(i,e.adler>>>16),re(i,65535&e.adler)),e.adler=1}if(i.status===B)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),ee(e),o=i.pending,i.pending!==i.pending_buf_size));)ne(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=U)}else i.status=U;if(i.status===U)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),ee(e),o=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,ne(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===u&&(i.gzindex=0,i.status=F)}else i.status=F;if(i.status===F)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),ee(e),o=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,ne(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===u&&(i.status=V)}else i.status=V;if(i.status===V&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&ee(e),i.pending+2<=i.pending_buf_size&&(ne(i,255&e.adler),ne(i,e.adler>>8&255),e.adler=0,i.status=W)):i.status=W),0!==i.pending){if(ee(e),0===e.avail_out)return i.last_flush=-1,p}else if(0===e.avail_in&&$(t)<=$(n)&&t!==h)return K(e,b);if(i.status===Z&&0!==e.avail_in)return K(e,b);if(0!==e.avail_in||0!==i.lookahead||t!==l&&i.status!==Z){var v=i.strategy===O?function(e,t){for(var n;;){if(0===e.lookahead&&(oe(e),0===e.lookahead)){if(t===l)return H;break}if(e.match_length=0,n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(te(e,!1),0===e.strm.avail_out))return H}return e.insert=0,t===h?(te(e,!0),0===e.strm.avail_out?Y:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?H:G}(i,t):i.strategy===_?function(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=k){if(oe(e),e.lookahead<=k&&t===l)return H;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=D&&e.strstart>0&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){o=e.strstart+k;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=k-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=D?(n=a._tr_tally(e,1,e.match_length-D),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(te(e,!1),0===e.strm.avail_out))return H}return e.insert=0,t===h?(te(e,!0),0===e.strm.avail_out?Y:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?H:G}(i,t):r[i.level].func(i,t);if(v!==Y&&v!==X||(i.status=Z),v===H||v===Y)return 0===e.avail_out&&(i.last_flush=-1),p;if(v===G&&(t===c?a._tr_align(i):t!==d&&(a._tr_stored_block(i,0,0,!1),t===f&&(Q(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),ee(e),0===e.avail_out))return i.last_flush=-1,p}return t!==h?p:i.wrap<=0?m:(2===i.wrap?(ne(i,255&e.adler),ne(i,e.adler>>8&255),ne(i,e.adler>>16&255),ne(i,e.adler>>24&255),ne(i,255&e.total_in),ne(i,e.total_in>>8&255),ne(i,e.total_in>>16&255),ne(i,e.total_in>>24&255)):(re(i,e.adler>>>16),re(i,65535&e.adler)),ee(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?p:m)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==q&&t!==B&&t!==U&&t!==F&&t!==V&&t!==W&&t!==Z?K(e,y):(e.state=null,t===W?K(e,g):p):y},t.deflateSetDictionary=function(e,t){var n,r,a,s,u,l,c,f,h=t.length;if(!e||!e.state)return y;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==q||n.lookahead)return y;for(1===s&&(e.adler=o(e.adler,t,h,0)),n.wrap=0,h>=n.w_size&&(0===s&&(Q(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new i.Buf8(n.w_size),i.arraySet(f,t,h-n.w_size,n.w_size,0),t=f,h=n.w_size),u=e.avail_in,l=e.next_in,c=e.input,e.avail_in=h,e.next_in=0,e.input=t,oe(n);n.lookahead>=D;){r=n.strstart,a=n.lookahead-(D-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+D-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--a);n.strstart=r,n.lookahead=D-1,oe(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=D-1,n.match_available=0,e.next_in=l,e.input=c,e.avail_in=u,n.wrap=s,p},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";var r=n(22),i=4,a=0,o=1,s=2;function u(e){for(var t=e.length;--t>=0;)e[t]=0}var l=0,c=1,f=2,h=29,d=256,p=d+1+h,m=30,y=19,g=2*p+1,b=15,v=16,w=7,O=256,_=16,C=17,E=18,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],I=new Array(2*(p+2));u(I);var M=new Array(2*m);u(M);var A=new Array(512);u(A);var R=new Array(256);u(R);var N=new Array(h);u(N);var P,D,k,L=new Array(m);function z(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function q(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function B(e){return e<256?A[e]:A[256+(e>>>7)]}function U(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function F(e,t,n){e.bi_valid>v-n?(e.bi_buf|=t<<e.bi_valid&65535,U(e,e.bi_buf),e.bi_buf=t>>v-e.bi_valid,e.bi_valid+=n-v):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function V(e,t,n){F(e,n[2*t],n[2*t+1])}function W(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function Z(e,t,n){var r,i,a=new Array(b+1),o=0;for(r=1;r<=b;r++)a[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=W(a[s]++,s))}}function H(e){var t;for(t=0;t<p;t++)e.dyn_ltree[2*t]=0;for(t=0;t<m;t++)e.dyn_dtree[2*t]=0;for(t=0;t<y;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*O]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function G(e){e.bi_valid>8?U(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Y(e,t,n,r){var i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]}function X(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&Y(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Y(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function J(e,t,n){var r,i,a,o,s=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===r?V(e,i,t):(V(e,(a=R[i])+d+1,t),0!==(o=x[a])&&F(e,i-=N[a],o),V(e,a=B(--r),n),0!==(o=S[a])&&F(e,r-=L[a],o))}while(s<e.last_lit);V(e,O,t)}function K(e,t){var n,r,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=g,n=0;n<u;n++)0!==a[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)X(e,a,n);i=u;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],X(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,X(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,a,o,s,u=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,f=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(a=0;a<=b;a++)e.bl_count[a]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<g;n++)(a=u[2*u[2*(r=e.heap[n])+1]+1]+1)>p&&(a=p,m++),u[2*r+1]=a,r>l||(e.bl_count[a]++,o=0,r>=d&&(o=h[r-d]),s=u[2*r],e.opt_len+=s*(a+o),f&&(e.static_len+=s*(c[2*r+1]+o)));if(0!==m){do{for(a=p-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(a=p;0!==a;a--)for(r=e.bl_count[a];0!==r;)(i=e.heap[--n])>l||(u[2*i+1]!==a&&(e.opt_len+=(a-u[2*i+1])*u[2*i],u[2*i+1]=a),r--)}}(e,t),Z(a,l,e.bl_count)}function $(e,t,n){var r,i,a=-1,o=t[1],s=0,u=7,l=4;for(0===o&&(u=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++s<u&&i===o||(s<l?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*_]++):s<=10?e.bl_tree[2*C]++:e.bl_tree[2*E]++,s=0,a=i,0===o?(u=138,l=3):i===o?(u=6,l=3):(u=7,l=4))}function Q(e,t,n){var r,i,a=-1,o=t[1],s=0,u=7,l=4;for(0===o&&(u=138,l=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++s<u&&i===o)){if(s<l)do{V(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(V(e,i,e.bl_tree),s--),V(e,_,e.bl_tree),F(e,s-3,2)):s<=10?(V(e,C,e.bl_tree),F(e,s-3,3)):(V(e,E,e.bl_tree),F(e,s-11,7));s=0,a=i,0===o?(u=138,l=3):i===o?(u=6,l=3):(u=7,l=4)}}u(L);var ee=!1;function te(e,t,n,i){F(e,(l<<1)+(i?1:0),3),function(e,t,n,i){G(e),i&&(U(e,n),U(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){ee||(function(){var e,t,n,r,i,a=new Array(b+1);for(n=0,r=0;r<h-1;r++)for(N[r]=n,e=0;e<1<<x[r];e++)R[n++]=r;for(R[n-1]=r,i=0,r=0;r<16;r++)for(L[r]=i,e=0;e<1<<S[r];e++)A[i++]=r;for(i>>=7;r<m;r++)for(L[r]=i<<7,e=0;e<1<<S[r]-7;e++)A[256+i++]=r;for(t=0;t<=b;t++)a[t]=0;for(e=0;e<=143;)I[2*e+1]=8,e++,a[8]++;for(;e<=255;)I[2*e+1]=9,e++,a[9]++;for(;e<=279;)I[2*e+1]=7,e++,a[7]++;for(;e<=287;)I[2*e+1]=8,e++,a[8]++;for(Z(I,p+1,a),e=0;e<m;e++)M[2*e+1]=5,M[2*e]=W(e,5);P=new z(I,x,d+1,p,b),D=new z(M,S,0,m,b),k=new z(new Array(0),j,0,y,w)}(),ee=!0),e.l_desc=new q(e.dyn_ltree,P),e.d_desc=new q(e.dyn_dtree,D),e.bl_desc=new q(e.bl_tree,k),e.bi_buf=0,e.bi_valid=0,H(e)},t._tr_stored_block=te,t._tr_flush_block=function(e,t,n,r){var u,l,h=0;e.level>0?(e.strm.data_type===s&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return a;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return o;for(t=32;t<d;t++)if(0!==e.dyn_ltree[2*t])return o;return a}(e)),K(e,e.l_desc),K(e,e.d_desc),h=function(e){var t;for($(e,e.dyn_ltree,e.l_desc.max_code),$(e,e.dyn_dtree,e.d_desc.max_code),K(e,e.bl_desc),t=y-1;t>=3&&0===e.bl_tree[2*T[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),u=e.opt_len+3+7>>>3,(l=e.static_len+3+7>>>3)<=u&&(u=l)):u=l=n+5,n+4<=u&&-1!==t?te(e,t,n,r):e.strategy===i||l===u?(F(e,(c<<1)+(r?1:0),3),J(e,I,M)):(F(e,(f<<1)+(r?1:0),3),function(e,t,n,r){var i;for(F(e,t-257,5),F(e,n-1,5),F(e,r-4,4),i=0;i<r;i++)F(e,e.bl_tree[2*T[i]+1],3);Q(e,e.dyn_ltree,t-1),Q(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,h+1),J(e,e.dyn_ltree,e.dyn_dtree)),H(e),r&&G(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(R[n]+d+1)]++,e.dyn_dtree[2*B(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){F(e,c<<1,3),V(e,O,I),function(e){16===e.bi_valid?(U(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){"use strict";var r=n(22),i=n(45),a=n(46),o=n(94),s=n(95),u=0,l=1,c=2,f=4,h=5,d=6,p=0,m=1,y=2,g=-2,b=-3,v=-4,w=-5,O=8,_=1,C=2,E=3,x=4,S=5,j=6,T=7,I=8,M=9,A=10,R=11,N=12,P=13,D=14,k=15,L=16,z=17,q=18,B=19,U=20,F=21,V=22,W=23,Z=24,H=25,G=26,Y=27,X=28,J=29,K=30,$=31,Q=32,ee=852,te=592,ne=15;function re(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function ie(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=_,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(ee),t.distcode=t.distdyn=new r.Buf32(te),t.sane=1,t.back=-1,p):g}function ae(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,ie(e)):g}function oe(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?g:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,ae(e))):g}function se(e,t){var n,i;return e?(i=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},e.state=i,i.window=null,(n=oe(e,t))!==p&&(e.state=null),n):g}var ue,le,ce=!0;function fe(e){if(ce){var t;for(ue=new r.Buf32(512),le=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(l,e.lens,0,288,ue,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(c,e.lens,0,32,le,0,e.work,{bits:5}),ce=!1}e.lencode=ue,e.lenbits=9,e.distcode=le,e.distbits=5}function he(e,t,n,i){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>i&&(a=i),r.arraySet(o.window,t,n-i,a,o.wnext),(i-=a)?(r.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}t.inflateReset=ae,t.inflateReset2=oe,t.inflateResetKeep=ie,t.inflateInit=function(e){return se(e,ne)},t.inflateInit2=se,t.inflate=function(e,t){var n,ee,te,ne,ie,ae,oe,se,ue,le,ce,de,pe,me,ye,ge,be,ve,we,Oe,_e,Ce,Ee,xe,Se=0,je=new r.Buf8(4),Te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return g;(n=e.state).mode===N&&(n.mode=P),ie=e.next_out,te=e.output,oe=e.avail_out,ne=e.next_in,ee=e.input,ae=e.avail_in,se=n.hold,ue=n.bits,le=ae,ce=oe,Ce=p;e:for(;;)switch(n.mode){case _:if(0===n.wrap){n.mode=P;break}for(;ue<16;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if(2&n.wrap&&35615===se){n.check=0,je[0]=255&se,je[1]=se>>>8&255,n.check=a(n.check,je,2,0),se=0,ue=0,n.mode=C;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&se)<<8)+(se>>8))%31){e.msg="incorrect header check",n.mode=K;break}if((15&se)!==O){e.msg="unknown compression method",n.mode=K;break}if(ue-=4,_e=8+(15&(se>>>=4)),0===n.wbits)n.wbits=_e;else if(_e>n.wbits){e.msg="invalid window size",n.mode=K;break}n.dmax=1<<_e,e.adler=n.check=1,n.mode=512&se?A:N,se=0,ue=0;break;case C:for(;ue<16;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if(n.flags=se,(255&n.flags)!==O){e.msg="unknown compression method",n.mode=K;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=K;break}n.head&&(n.head.text=se>>8&1),512&n.flags&&(je[0]=255&se,je[1]=se>>>8&255,n.check=a(n.check,je,2,0)),se=0,ue=0,n.mode=E;case E:for(;ue<32;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}n.head&&(n.head.time=se),512&n.flags&&(je[0]=255&se,je[1]=se>>>8&255,je[2]=se>>>16&255,je[3]=se>>>24&255,n.check=a(n.check,je,4,0)),se=0,ue=0,n.mode=x;case x:for(;ue<16;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}n.head&&(n.head.xflags=255&se,n.head.os=se>>8),512&n.flags&&(je[0]=255&se,je[1]=se>>>8&255,n.check=a(n.check,je,2,0)),se=0,ue=0,n.mode=S;case S:if(1024&n.flags){for(;ue<16;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}n.length=se,n.head&&(n.head.extra_len=se),512&n.flags&&(je[0]=255&se,je[1]=se>>>8&255,n.check=a(n.check,je,2,0)),se=0,ue=0}else n.head&&(n.head.extra=null);n.mode=j;case j:if(1024&n.flags&&((de=n.length)>ae&&(de=ae),de&&(n.head&&(_e=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,ee,ne,de,_e)),512&n.flags&&(n.check=a(n.check,ee,de,ne)),ae-=de,ne+=de,n.length-=de),n.length))break e;n.length=0,n.mode=T;case T:if(2048&n.flags){if(0===ae)break e;de=0;do{_e=ee[ne+de++],n.head&&_e&&n.length<65536&&(n.head.name+=String.fromCharCode(_e))}while(_e&&de<ae);if(512&n.flags&&(n.check=a(n.check,ee,de,ne)),ae-=de,ne+=de,_e)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=I;case I:if(4096&n.flags){if(0===ae)break e;de=0;do{_e=ee[ne+de++],n.head&&_e&&n.length<65536&&(n.head.comment+=String.fromCharCode(_e))}while(_e&&de<ae);if(512&n.flags&&(n.check=a(n.check,ee,de,ne)),ae-=de,ne+=de,_e)break e}else n.head&&(n.head.comment=null);n.mode=M;case M:if(512&n.flags){for(;ue<16;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if(se!==(65535&n.check)){e.msg="header crc mismatch",n.mode=K;break}se=0,ue=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=N;break;case A:for(;ue<32;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}e.adler=n.check=re(se),se=0,ue=0,n.mode=R;case R:if(0===n.havedict)return e.next_out=ie,e.avail_out=oe,e.next_in=ne,e.avail_in=ae,n.hold=se,n.bits=ue,y;e.adler=n.check=1,n.mode=N;case N:if(t===h||t===d)break e;case P:if(n.last){se>>>=7&ue,ue-=7&ue,n.mode=Y;break}for(;ue<3;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}switch(n.last=1&se,ue-=1,3&(se>>>=1)){case 0:n.mode=D;break;case 1:if(fe(n),n.mode=U,t===d){se>>>=2,ue-=2;break e}break;case 2:n.mode=z;break;case 3:e.msg="invalid block type",n.mode=K}se>>>=2,ue-=2;break;case D:for(se>>>=7&ue,ue-=7&ue;ue<32;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if((65535&se)!=(se>>>16^65535)){e.msg="invalid stored block lengths",n.mode=K;break}if(n.length=65535&se,se=0,ue=0,n.mode=k,t===d)break e;case k:n.mode=L;case L:if(de=n.length){if(de>ae&&(de=ae),de>oe&&(de=oe),0===de)break e;r.arraySet(te,ee,ne,de,ie),ae-=de,ne+=de,oe-=de,ie+=de,n.length-=de;break}n.mode=N;break;case z:for(;ue<14;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if(n.nlen=257+(31&se),se>>>=5,ue-=5,n.ndist=1+(31&se),se>>>=5,ue-=5,n.ncode=4+(15&se),se>>>=4,ue-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=K;break}n.have=0,n.mode=q;case q:for(;n.have<n.ncode;){for(;ue<3;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}n.lens[Te[n.have++]]=7&se,se>>>=3,ue-=3}for(;n.have<19;)n.lens[Te[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Ee={bits:n.lenbits},Ce=s(u,n.lens,0,19,n.lencode,0,n.work,Ee),n.lenbits=Ee.bits,Ce){e.msg="invalid code lengths set",n.mode=K;break}n.have=0,n.mode=B;case B:for(;n.have<n.nlen+n.ndist;){for(;ge=(Se=n.lencode[se&(1<<n.lenbits)-1])>>>16&255,be=65535&Se,!((ye=Se>>>24)<=ue);){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if(be<16)se>>>=ye,ue-=ye,n.lens[n.have++]=be;else{if(16===be){for(xe=ye+2;ue<xe;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if(se>>>=ye,ue-=ye,0===n.have){e.msg="invalid bit length repeat",n.mode=K;break}_e=n.lens[n.have-1],de=3+(3&se),se>>>=2,ue-=2}else if(17===be){for(xe=ye+3;ue<xe;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}ue-=ye,_e=0,de=3+(7&(se>>>=ye)),se>>>=3,ue-=3}else{for(xe=ye+7;ue<xe;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}ue-=ye,_e=0,de=11+(127&(se>>>=ye)),se>>>=7,ue-=7}if(n.have+de>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=K;break}for(;de--;)n.lens[n.have++]=_e}}if(n.mode===K)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=K;break}if(n.lenbits=9,Ee={bits:n.lenbits},Ce=s(l,n.lens,0,n.nlen,n.lencode,0,n.work,Ee),n.lenbits=Ee.bits,Ce){e.msg="invalid literal/lengths set",n.mode=K;break}if(n.distbits=6,n.distcode=n.distdyn,Ee={bits:n.distbits},Ce=s(c,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Ee),n.distbits=Ee.bits,Ce){e.msg="invalid distances set",n.mode=K;break}if(n.mode=U,t===d)break e;case U:n.mode=F;case F:if(ae>=6&&oe>=258){e.next_out=ie,e.avail_out=oe,e.next_in=ne,e.avail_in=ae,n.hold=se,n.bits=ue,o(e,ce),ie=e.next_out,te=e.output,oe=e.avail_out,ne=e.next_in,ee=e.input,ae=e.avail_in,se=n.hold,ue=n.bits,n.mode===N&&(n.back=-1);break}for(n.back=0;ge=(Se=n.lencode[se&(1<<n.lenbits)-1])>>>16&255,be=65535&Se,!((ye=Se>>>24)<=ue);){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if(ge&&0==(240&ge)){for(ve=ye,we=ge,Oe=be;ge=(Se=n.lencode[Oe+((se&(1<<ve+we)-1)>>ve)])>>>16&255,be=65535&Se,!(ve+(ye=Se>>>24)<=ue);){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}se>>>=ve,ue-=ve,n.back+=ve}if(se>>>=ye,ue-=ye,n.back+=ye,n.length=be,0===ge){n.mode=G;break}if(32&ge){n.back=-1,n.mode=N;break}if(64&ge){e.msg="invalid literal/length code",n.mode=K;break}n.extra=15&ge,n.mode=V;case V:if(n.extra){for(xe=n.extra;ue<xe;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}n.length+=se&(1<<n.extra)-1,se>>>=n.extra,ue-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=W;case W:for(;ge=(Se=n.distcode[se&(1<<n.distbits)-1])>>>16&255,be=65535&Se,!((ye=Se>>>24)<=ue);){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if(0==(240&ge)){for(ve=ye,we=ge,Oe=be;ge=(Se=n.distcode[Oe+((se&(1<<ve+we)-1)>>ve)])>>>16&255,be=65535&Se,!(ve+(ye=Se>>>24)<=ue);){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}se>>>=ve,ue-=ve,n.back+=ve}if(se>>>=ye,ue-=ye,n.back+=ye,64&ge){e.msg="invalid distance code",n.mode=K;break}n.offset=be,n.extra=15&ge,n.mode=Z;case Z:if(n.extra){for(xe=n.extra;ue<xe;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}n.offset+=se&(1<<n.extra)-1,se>>>=n.extra,ue-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=K;break}n.mode=H;case H:if(0===oe)break e;if(de=ce-oe,n.offset>de){if((de=n.offset-de)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=K;break}de>n.wnext?(de-=n.wnext,pe=n.wsize-de):pe=n.wnext-de,de>n.length&&(de=n.length),me=n.window}else me=te,pe=ie-n.offset,de=n.length;de>oe&&(de=oe),oe-=de,n.length-=de;do{te[ie++]=me[pe++]}while(--de);0===n.length&&(n.mode=F);break;case G:if(0===oe)break e;te[ie++]=n.length,oe--,n.mode=F;break;case Y:if(n.wrap){for(;ue<32;){if(0===ae)break e;ae--,se|=ee[ne++]<<ue,ue+=8}if(ce-=oe,e.total_out+=ce,n.total+=ce,ce&&(e.adler=n.check=n.flags?a(n.check,te,ce,ie-ce):i(n.check,te,ce,ie-ce)),ce=oe,(n.flags?se:re(se))!==n.check){e.msg="incorrect data check",n.mode=K;break}se=0,ue=0}n.mode=X;case X:if(n.wrap&&n.flags){for(;ue<32;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if(se!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=K;break}se=0,ue=0}n.mode=J;case J:Ce=m;break e;case K:Ce=b;break e;case $:return v;case Q:default:return g}return e.next_out=ie,e.avail_out=oe,e.next_in=ne,e.avail_in=ae,n.hold=se,n.bits=ue,(n.wsize||ce!==e.avail_out&&n.mode<K&&(n.mode<Y||t!==f))&&he(e,e.output,e.next_out,ce-e.avail_out)?(n.mode=$,v):(le-=e.avail_in,ce-=e.avail_out,e.total_in+=le,e.total_out+=ce,n.total+=ce,n.wrap&&ce&&(e.adler=n.check=n.flags?a(n.check,te,ce,e.next_out-ce):i(n.check,te,ce,e.next_out-ce)),e.data_type=n.bits+(n.last?64:0)+(n.mode===N?128:0)+(n.mode===U||n.mode===k?256:0),(0===le&&0===ce||t===f)&&Ce===p&&(Ce=w),Ce)},t.inflateEnd=function(e){if(!e||!e.state)return g;var t=e.state;return t.window&&(t.window=null),e.state=null,p},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?g:(n.head=t,t.done=!1,p):g},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&n.mode!==R?g:n.mode===R&&i(1,t,r,0)!==n.check?b:he(e,t,r,r)?(n.mode=$,v):(n.havedict=1,p):g},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i,a,o,s,u,l,c,f,h,d,p,m,y,g,b,v,w,O,_,C,E,x,S;n=e.state,r=e.next_in,x=e.input,i=r+(e.avail_in-5),a=e.next_out,S=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),u=n.dmax,l=n.wsize,c=n.whave,f=n.wnext,h=n.window,d=n.hold,p=n.bits,m=n.lencode,y=n.distcode,g=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;e:do{p<15&&(d+=x[r++]<<p,p+=8,d+=x[r++]<<p,p+=8),v=m[d&g];t:for(;;){if(d>>>=w=v>>>24,p-=w,0===(w=v>>>16&255))S[a++]=65535&v;else{if(!(16&w)){if(0==(64&w)){v=m[(65535&v)+(d&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}O=65535&v,(w&=15)&&(p<w&&(d+=x[r++]<<p,p+=8),O+=d&(1<<w)-1,d>>>=w,p-=w),p<15&&(d+=x[r++]<<p,p+=8,d+=x[r++]<<p,p+=8),v=y[d&b];n:for(;;){if(d>>>=w=v>>>24,p-=w,!(16&(w=v>>>16&255))){if(0==(64&w)){v=y[(65535&v)+(d&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(_=65535&v,p<(w&=15)&&(d+=x[r++]<<p,(p+=8)<w&&(d+=x[r++]<<p,p+=8)),(_+=d&(1<<w)-1)>u){e.msg="invalid distance too far back",n.mode=30;break e}if(d>>>=w,p-=w,_>(w=a-o)){if((w=_-w)>c&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(C=0,E=h,0===f){if(C+=l-w,w<O){O-=w;do{S[a++]=h[C++]}while(--w);C=a-_,E=S}}else if(f<w){if(C+=l+f-w,(w-=f)<O){O-=w;do{S[a++]=h[C++]}while(--w);if(C=0,f<O){O-=w=f;do{S[a++]=h[C++]}while(--w);C=a-_,E=S}}}else if(C+=f-w,w<O){O-=w;do{S[a++]=h[C++]}while(--w);C=a-_,E=S}for(;O>2;)S[a++]=E[C++],S[a++]=E[C++],S[a++]=E[C++],O-=3;O&&(S[a++]=E[C++],O>1&&(S[a++]=E[C++]))}else{C=a-_;do{S[a++]=S[C++],S[a++]=S[C++],S[a++]=S[C++],O-=3}while(O>2);O&&(S[a++]=S[C++],O>1&&(S[a++]=S[C++]))}break}}break}}while(r<i&&a<s);r-=O=p>>3,d&=(1<<(p-=O<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=a<s?s-a+257:257-(a-s),n.hold=d,n.bits=p}},function(e,t,n){"use strict";var r=n(22),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,u,l,c,f,h){var d,p,m,y,g,b,v,w,O,_=h.bits,C=0,E=0,x=0,S=0,j=0,T=0,I=0,M=0,A=0,R=0,N=null,P=0,D=new r.Buf16(16),k=new r.Buf16(16),L=null,z=0;for(C=0;C<=15;C++)D[C]=0;for(E=0;E<u;E++)D[t[n+E]]++;for(j=_,S=15;S>=1&&0===D[S];S--);if(j>S&&(j=S),0===S)return l[c++]=20971520,l[c++]=20971520,h.bits=1,0;for(x=1;x<S&&0===D[x];x++);for(j<x&&(j=x),M=1,C=1;C<=15;C++)if(M<<=1,(M-=D[C])<0)return-1;if(M>0&&(0===e||1!==S))return-1;for(k[1]=0,C=1;C<15;C++)k[C+1]=k[C]+D[C];for(E=0;E<u;E++)0!==t[n+E]&&(f[k[t[n+E]]++]=E);if(0===e?(N=L=f,b=19):1===e?(N=i,P-=257,L=a,z-=257,b=256):(N=o,L=s,b=-1),R=0,E=0,C=x,g=c,T=j,I=0,m=-1,y=(A=1<<j)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){v=C-I,f[E]<b?(w=0,O=f[E]):f[E]>b?(w=L[z+f[E]],O=N[P+f[E]]):(w=96,O=0),d=1<<C-I,x=p=1<<T;do{l[g+(R>>I)+(p-=d)]=v<<24|w<<16|O|0}while(0!==p);for(d=1<<C-1;R&d;)d>>=1;if(0!==d?(R&=d-1,R+=d):R=0,E++,0==--D[C]){if(C===S)break;C=t[n+f[E]]}if(C>j&&(R&y)!==m){for(0===I&&(I=j),g+=x,M=1<<(T=C-I);T+I<S&&!((M-=D[T+I])<=0);)T++,M<<=1;if(A+=1<<T,1===e&&A>852||2===e&&A>592)return 1;l[m=R&y]=j<<24|T<<16|g-c|0}}return 0!==R&&(l[g+R]=C-I<<24|64<<16|0),h.bits=j,0}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){"use strict";n.r(t),window.CesiumZondy=window.CesiumZondy||{};var r=window.CesiumZondy||{};r.Manager=r.Manager||{},r.UI=r.UI||{},r.GeoSpark=r.GeoSpark||{},r.ElasticSearch=r.ElasticSearch||{},r.Overlayer=r.Overlayer||{},r.Layer=r.Layer||{},r.Provider=r.Provider||{};var i=n(10),a=n.n(i),o=n(1);
/**
@license
tween.js - https://github.com/sole/tween.js

Copyright (c) 2010-2012 Tween.js authors.

Easing equations Copyright (c) 2001 Robert Penner http://robertpenner.com/easing/

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/
void 0===Date.now&&(Date.now=function(){return(new Date).valueOf()});var s=s||function(){var e=[];return{REVISION:"13",getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},update:function(t){if(0===e.length)return!1;var n=0;for(t=void 0!==t?t:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();n<e.length;)e[n].update(t)?n++:e.splice(n,1);return!0}}}();s.Tween=function(e){var t=e,n={},r={},i={},a=1e3,o=0,u=!1,l=!1,c=!1,f=0,h=null,d=s.Easing.Linear.None,p=s.Interpolation.Linear,m=[],y=null,g=!1,b=null,v=null,w=null;for(var O in e)n[O]=parseFloat(e[O],10);this.to=function(e,t){return void 0!==t&&(a=t),r=e,this},this.start=function(e){for(var a in s.add(this),l=!0,g=!1,h=void 0!==e?e:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),h+=f,r){if(r[a]instanceof Array){if(0===r[a].length)continue;r[a]=[t[a]].concat(r[a])}n[a]=t[a],n[a]instanceof Array==!1&&(n[a]*=1),i[a]=n[a]||0}return this},this.stop=function(){return l?(s.remove(this),l=!1,null!==w&&w.call(t),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var e=0,t=m.length;e<t;e++)m[e].stop()},this.delay=function(e){return f=e,this},this.repeat=function(e){return o=e,this},this.yoyo=function(e){return u=e,this},this.easing=function(e){return d=e,this},this.interpolation=function(e){return p=e,this},this.chain=function(){return m=arguments,this},this.onStart=function(e){return y=e,this},this.onUpdate=function(e){return b=e,this},this.onComplete=function(e){return v=e,this},this.onStop=function(e){return w=e,this},this.update=function(e){var s;if(e<h)return!0;!1===g&&(null!==y&&y.call(t),g=!0);var l=(e-h)/a,w=d(l=l>1?1:l);for(s in r){var O=n[s]||0,_=r[s];_ instanceof Array?t[s]=p(_,w):("string"==typeof _&&(_=O+parseFloat(_,10)),"number"==typeof _&&(t[s]=O+(_-O)*w))}if(null!==b&&b.call(t,w),1==l){if(o>0){for(s in isFinite(o)&&o--,i){if("string"==typeof r[s]&&(i[s]=i[s]+parseFloat(r[s],10)),u){var C=i[s];i[s]=r[s],r[s]=C}n[s]=i[s]}return u&&(c=!c),h=e+f,!0}null!==v&&v.call(t);for(var E=0,x=m.length;E<x;E++)m[E].start(e);return!1}return!0}},s.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},Out:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},InOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-s.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*s.Easing.Bounce.In(2*e):.5*s.Easing.Bounce.Out(2*e-1)+.5}}},s.Interpolation={Linear:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),a=s.Interpolation.Utils.Linear;return t<0?a(e[0],e[1],r):t>1?a(e[n],e[n-1],n-r):a(e[i],e[i+1>n?n:i+1],r-i)},Bezier:function(e,t){var n,r=0,i=e.length-1,a=Math.pow,o=s.Interpolation.Utils.Bernstein;for(n=0;n<=i;n++)r+=a(1-t,i-n)*a(t,n)*e[n]*o(i,n);return r},CatmullRom:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),a=s.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(i=Math.floor(r=n*(1+t))),a(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],r-i)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(a(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):a(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],r-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=s.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n,r=1;if(e[t])return e[t];for(n=t;n>1;n--)r*=n;return e[t]=r}}(),CatmullRom:function(e,t,n,r,i){var a=.5*(n-e),o=.5*(r-t),s=i*i;return(2*t-2*n+a+o)*(i*s)+(-3*t+3*n-2*a-o)*s+a*i+t}}};var u=s,l={LINEAR_NONE:u.Easing.Linear.None,QUADRACTIC_IN:u.Easing.Quadratic.In,QUADRACTIC_OUT:u.Easing.Quadratic.Out,QUADRACTIC_IN_OUT:u.Easing.Quadratic.InOut,CUBIC_IN:u.Easing.Cubic.In,CUBIC_OUT:u.Easing.Cubic.Out,CUBIC_IN_OUT:u.Easing.Cubic.InOut,QUARTIC_IN:u.Easing.Quartic.In,QUARTIC_OUT:u.Easing.Quartic.Out,QUARTIC_IN_OUT:u.Easing.Quartic.InOut,QUINTIC_IN:u.Easing.Quintic.In,QUINTIC_OUT:u.Easing.Quintic.Out,QUINTIC_IN_OUT:u.Easing.Quintic.InOut,SINUSOIDAL_IN:u.Easing.Sinusoidal.In,SINUSOIDAL_OUT:u.Easing.Sinusoidal.Out,SINUSOIDAL_IN_OUT:u.Easing.Sinusoidal.InOut,EXPONENTIAL_IN:u.Easing.Exponential.In,EXPONENTIAL_OUT:u.Easing.Exponential.Out,EXPONENTIAL_IN_OUT:u.Easing.Exponential.InOut,CIRCULAR_IN:u.Easing.Circular.In,CIRCULAR_OUT:u.Easing.Circular.Out,CIRCULAR_IN_OUT:u.Easing.Circular.InOut,ELASTIC_IN:u.Easing.Elastic.In,ELASTIC_OUT:u.Easing.Elastic.Out,ELASTIC_IN_OUT:u.Easing.Elastic.InOut,BACK_IN:u.Easing.Back.In,BACK_OUT:u.Easing.Back.Out,BACK_IN_OUT:u.Easing.Back.InOut,BOUNCE_IN:u.Easing.Bounce.In,BOUNCE_OUT:u.Easing.Bounce.Out,BOUNCE_IN_OUT:u.Easing.Bounce.InOut},c=Object.freeze(l),f=n(25),h="__knockoutObservables",d="__knockoutSubscribable";function p(e,t){if(!e)throw new Error("When calling ko.track, you must pass an object as the first parameter.");var n=this,r=m(e,!0);return(t=t||Object.getOwnPropertyNames(e)).forEach(function(t){if(t!==h&&t!==d&&!(t in r)){var i=e[t],a=i instanceof Array,o=n.isObservable(i)?i:a?n.observableArray(i):n.observable(i);Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:o,set:n.isWriteableObservable(o)?o:void 0}),r[t]=o,a&&function(e,t){var n=null;e.computed(function(){n&&(n.dispose(),n=null);var r=t();r instanceof Array&&(n=function(e,t,n){return function(e,t){var n=t[d];if(!n){n=new e.subscribable,Object.defineProperty(t,d,{value:n});var r={};!function(e,t,n){["pop","push","reverse","shift","sort","splice","unshift"].forEach(function(r){var i=e[r];e[r]=function(){var e=i.apply(this,arguments);return!0!==n.pause&&t.notifySubscribers(this),e}})}(t,n,r),function(e,t,n,r){["remove","removeAll","destroy","destroyAll","replace"].forEach(function(i){Object.defineProperty(t,i,{enumerable:!1,value:function(){var a;r.pause=!0;try{a=e.observableArray.fn[i].apply(e.observableArray(t),arguments)}finally{r.pause=!1}return n.notifySubscribers(t),a}})})}(e,t,n,r)}return n}(e,n).subscribe(t)}(e,t,r))})}(n,o)}}),e}function m(e,t){var n=e[h];return!n&&t&&(n={},Object.defineProperty(e,h,{value:n})),n}function y(e,t,n){var r={owner:e,deferEvaluation:!0};if("function"==typeof n)r.read=n;else{if("value"in n)throw new Error('For ko.defineProperty, you must not specify a "value" for the property. You must provide a "get" function.');if("function"!=typeof n.get)throw new Error('For ko.defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".');r.read=n.get,r.write=n.set}return e[t]=this.computed(r),p.call(this,e,[t]),e}function g(e,t){if(!e)return null;var n=m(e,!1);return n&&n[t]||null}function b(e,t){var n=g(e,t);n&&n.valueHasMutated()}var v="http://www.w3.org/2000/svg",w={register:function(e){e.bindingHandlers.cesiumSvgPath={init:function(t,n){var r=document.createElementNS(v,"svg:svg");r.setAttribute("class","cesium-svgPath-svg");var i=document.createElementNS(v,"path");return r.appendChild(i),e.virtualElements.setDomNodeChildren(t,[r]),e.computed({read:function(){var t=e.unwrap(n());i.setAttribute("d",e.unwrap(t.path));var a=e.unwrap(t.width),o=e.unwrap(t.height);r.setAttribute("width",a),r.setAttribute("height",o),r.setAttribute("viewBox","0 0 "+a+" "+o),t.css&&r.setAttribute("class","cesium-svgPath-svg "+e.unwrap(t.css))},disposeWhenNodeIsRemoved:t}),{controlsDescendantBindings:!0}}},e.virtualElements.allowedBindings.cesiumSvgPath=!0}};({attachToKo:function(e){e.track=p,e.getObservable=g,e.valueHasMutated=b,e.defineProperty=y}}).attachToKo(f.a),w.register(f.a);var O=f.a,_=n(0),C=n(2),E=n(3);
/**
@license
mersenne-twister.js - https://gist.github.com/banksean/300494

   Copyright (C) 1997 - 2002, Makoto Matsumoto and Takuji Nishimura,
   All rights reserved.

   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:

     1. Redistributions of source code must retain the above copyright
        notice, this list of conditions and the following disclaimer.

     2. Redistributions in binary form must reproduce the above copyright
        notice, this list of conditions and the following disclaimer in the
        documentation and/or other materials provided with the distribution.

     3. The names of its contributors may not be used to endorse or promote
        products derived from this software without specific prior written
        permission.

   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
   "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
   LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
   A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
   CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
   EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
   PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
   PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
   LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
   NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
function x(e){void 0==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_genrand(e)}x.prototype.init_genrand=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},x.prototype.genrand_int32=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_genrand(5489),n=0;n<this.N-this.M;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^e>>>1^t[1&e];for(;n<this.N-1;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^e>>>1^t[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},x.prototype.random=function(){return this.genrand_int32()*(1/4294967296)};var S=x,j={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,EPSILON21:1e-21,GRAVITATIONALPARAMETER:3986004418e5,SOLAR_RADIUS:6955e5,LUNAR_RADIUS:1737400,SIXTY_FOUR_KILOBYTES:65536,FOUR_GIGABYTES:4294967296};j.sign=Object(C.a)(Math.sign,function(e){return 0===(e=+e)||e!=e?e:e>0?1:-1}),j.signNotZero=function(e){return e<0?-1:1},j.toSNorm=function(e,t){return t=Object(C.a)(t,255),Math.round((.5*j.clamp(e,-1,1)+.5)*t)},j.fromSNorm=function(e,t){return t=Object(C.a)(t,255),j.clamp(e,0,t)/t*2-1},j.normalize=function(e,t,n){return 0===(n=Math.max(n-t,0))?0:j.clamp((e-t)/n,0,1)},j.sinh=Object(C.a)(Math.sinh,function(e){return(Math.exp(e)-Math.exp(-e))/2}),j.cosh=Object(C.a)(Math.cosh,function(e){return(Math.exp(e)+Math.exp(-e))/2}),j.lerp=function(e,t,n){return(1-n)*e+n*t},j.PI=Math.PI,j.ONE_OVER_PI=1/Math.PI,j.PI_OVER_TWO=Math.PI/2,j.PI_OVER_THREE=Math.PI/3,j.PI_OVER_FOUR=Math.PI/4,j.PI_OVER_SIX=Math.PI/6,j.THREE_PI_OVER_TWO=3*Math.PI/2,j.TWO_PI=2*Math.PI,j.ONE_OVER_TWO_PI=1/(2*Math.PI),j.RADIANS_PER_DEGREE=Math.PI/180,j.DEGREES_PER_RADIAN=180/Math.PI,j.RADIANS_PER_ARCSECOND=j.RADIANS_PER_DEGREE/3600,j.toRadians=function(e){if(!Object(o.a)(e))throw new E.a("degrees is required.");return e*j.RADIANS_PER_DEGREE},j.toDegrees=function(e){if(!Object(o.a)(e))throw new E.a("radians is required.");return e*j.DEGREES_PER_RADIAN},j.convertLongitudeRange=function(e){if(!Object(o.a)(e))throw new E.a("angle is required.");var t=j.TWO_PI,n=e-Math.floor(e/t)*t;return n<-Math.PI?n+t:n>=Math.PI?n-t:n},j.clampToLatitudeRange=function(e){if(!Object(o.a)(e))throw new E.a("angle is required.");return j.clamp(e,-1*j.PI_OVER_TWO,j.PI_OVER_TWO)},j.negativePiToPi=function(e){if(!Object(o.a)(e))throw new E.a("angle is required.");return j.zeroToTwoPi(e+j.PI)-j.PI},j.zeroToTwoPi=function(e){if(!Object(o.a)(e))throw new E.a("angle is required.");var t=j.mod(e,j.TWO_PI);return Math.abs(t)<j.EPSILON14&&Math.abs(e)>j.EPSILON14?j.TWO_PI:t},j.mod=function(e,t){if(!Object(o.a)(e))throw new E.a("m is required.");if(!Object(o.a)(t))throw new E.a("n is required.");return(e%t+t)%t},j.equalsEpsilon=function(e,t,n,r){if(!Object(o.a)(e))throw new E.a("left is required.");if(!Object(o.a)(t))throw new E.a("right is required.");n=Object(C.a)(n,0),r=Object(C.a)(r,n);var i=Math.abs(e-t);return i<=r||i<=n*Math.max(Math.abs(e),Math.abs(t))},j.lessThan=function(e,t,n){if(!Object(o.a)(e))throw new E.a("first is required.");if(!Object(o.a)(t))throw new E.a("second is required.");if(!Object(o.a)(n))throw new E.a("relativeEpsilon is required.");return e-t<-n},j.lessThanOrEquals=function(e,t,n){if(!Object(o.a)(e))throw new E.a("first is required.");if(!Object(o.a)(t))throw new E.a("second is required.");if(!Object(o.a)(n))throw new E.a("relativeEpsilon is required.");return e-t<n},j.greaterThan=function(e,t,n){if(!Object(o.a)(e))throw new E.a("first is required.");if(!Object(o.a)(t))throw new E.a("second is required.");if(!Object(o.a)(n))throw new E.a("relativeEpsilon is required.");return e-t>n},j.greaterThanOrEquals=function(e,t,n){if(!Object(o.a)(e))throw new E.a("first is required.");if(!Object(o.a)(t))throw new E.a("second is required.");if(!Object(o.a)(n))throw new E.a("relativeEpsilon is required.");return e-t>-n};var T=[1];j.factorial=function(e){if("number"!=typeof e||e<0)throw new E.a("A number greater than or equal to 0 is required.");var t=T.length;if(e>=t)for(var n=T[t-1],r=t;r<=e;r++){var i=n*r;T.push(i),n=i}return T[e]},j.incrementWrap=function(e,t,n){if(n=Object(C.a)(n,0),!Object(o.a)(e))throw new E.a("n is required.");if(t<=n)throw new E.a("maximumValue must be greater than minimumValue.");return++e>t&&(e=n),e},j.isPowerOfTwo=function(e){if("number"!=typeof e||e<0)throw new E.a("A number greater than or equal to 0 is required.");return 0!==e&&0==(e&e-1)},j.nextPowerOfTwo=function(e){if("number"!=typeof e||e<0)throw new E.a("A number greater than or equal to 0 is required.");return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},j.clamp=function(e,t,n){if(!Object(o.a)(e))throw new E.a("value is required");if(!Object(o.a)(t))throw new E.a("min is required.");if(!Object(o.a)(n))throw new E.a("max is required.");return e<t?t:e>n?n:e};var I=new S;j.setRandomNumberSeed=function(e){if(!Object(o.a)(e))throw new E.a("seed is required.");I=new S(e)},j.nextRandomNumber=function(){return I.random()},j.randomBetween=function(e,t){return j.nextRandomNumber()*(t-e)+e},j.acosClamped=function(e){if(!Object(o.a)(e))throw new E.a("value is required.");return Math.acos(j.clamp(e,-1,1))},j.asinClamped=function(e){if(!Object(o.a)(e))throw new E.a("value is required.");return Math.asin(j.clamp(e,-1,1))},j.chordLength=function(e,t){if(!Object(o.a)(e))throw new E.a("angle is required.");if(!Object(o.a)(t))throw new E.a("radius is required.");return 2*t*Math.sin(.5*e)},j.logBase=function(e,t){if(!Object(o.a)(e))throw new E.a("number is required.");if(!Object(o.a)(t))throw new E.a("base is required.");return Math.log(e)/Math.log(t)},j.cbrt=Object(C.a)(Math.cbrt,function(e){var t=Math.pow(Math.abs(e),1/3);return e<0?-t:t}),j.log2=Object(C.a)(Math.log2,function(e){return Math.log(e)*Math.LOG2E}),j.fog=function(e,t){var n=e*t;return 1-Math.exp(-n*n)},j.fastApproximateAtan=function(e){return _.a.typeOf.number("x",e),e*(-.1784*Math.abs(e)-.0663*e*e+1.0301)},j.fastApproximateAtan2=function(e,t){var n,r;_.a.typeOf.number("x",e),_.a.typeOf.number("y",t);var i=Math.abs(e);n=Math.abs(t),r=Math.max(i,n);var a=(n=Math.min(i,n))/r;if(isNaN(a))throw new E.a("either x or y must be nonzero");return i=j.fastApproximateAtan(a),i=Math.abs(t)>Math.abs(e)?j.PI_OVER_TWO-i:i,i=e<0?j.PI-i:i,i=t<0?-i:i};var M=j;function A(e,t){this.x=Object(C.a)(e,0),this.y=Object(C.a)(t,0)}A.fromElements=function(e,t,n){return Object(o.a)(n)?(n.x=e,n.y=t,n):new A(e,t)},A.clone=function(e,t){if(Object(o.a)(e))return Object(o.a)(t)?(t.x=e.x,t.y=e.y,t):new A(e.x,e.y)},A.fromCartesian3=A.clone,A.fromCartesian4=A.clone,A.packedLength=2,A.pack=function(e,t,n){return _.a.typeOf.object("value",e),_.a.defined("array",t),n=Object(C.a)(n,0),t[n++]=e.x,t[n]=e.y,t},A.unpack=function(e,t,n){return _.a.defined("array",e),t=Object(C.a)(t,0),Object(o.a)(n)||(n=new A),n.x=e[t++],n.y=e[t],n},A.packArray=function(e,t){_.a.defined("array",e);var n=e.length,r=2*n;if(Object(o.a)(t)){if(!Array.isArray(t)&&t.length!==r)throw new E.a("If result is a typed array, it must have exactly array.length * 2 elements");t.length!==r&&(t.length=r)}else t=new Array(r);for(var i=0;i<n;++i)A.pack(e[i],t,2*i);return t},A.unpackArray=function(e,t){if(_.a.defined("array",e),_.a.typeOf.number.greaterThanOrEquals("array.length",e.length,2),e.length%2!=0)throw new E.a("array length must be a multiple of 2.");var n=e.length;Object(o.a)(t)?t.length=n/2:t=new Array(n/2);for(var r=0;r<n;r+=2){var i=r/2;t[i]=A.unpack(e,r,t[i])}return t},A.fromArray=A.unpack,A.maximumComponent=function(e){return _.a.typeOf.object("cartesian",e),Math.max(e.x,e.y)},A.minimumComponent=function(e){return _.a.typeOf.object("cartesian",e),Math.min(e.x,e.y)},A.minimumByComponent=function(e,t,n){return _.a.typeOf.object("first",e),_.a.typeOf.object("second",t),_.a.typeOf.object("result",n),n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n},A.maximumByComponent=function(e,t,n){return _.a.typeOf.object("first",e),_.a.typeOf.object("second",t),_.a.typeOf.object("result",n),n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n},A.magnitudeSquared=function(e){return _.a.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y},A.magnitude=function(e){return Math.sqrt(A.magnitudeSquared(e))};var R=new A;A.distance=function(e,t){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),A.subtract(e,t,R),A.magnitude(R)},A.distanceSquared=function(e,t){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),A.subtract(e,t,R),A.magnitudeSquared(R)},A.normalize=function(e,t){_.a.typeOf.object("cartesian",e),_.a.typeOf.object("result",t);var n=A.magnitude(e);if(t.x=e.x/n,t.y=e.y/n,isNaN(t.x)||isNaN(t.y))throw new E.a("normalized result is not a number");return t},A.dot=function(e,t){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),e.x*t.x+e.y*t.y},A.multiplyComponents=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n.x=e.x*t.x,n.y=e.y*t.y,n},A.divideComponents=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n.x=e.x/t.x,n.y=e.y/t.y,n},A.add=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n.x=e.x+t.x,n.y=e.y+t.y,n},A.subtract=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n.x=e.x-t.x,n.y=e.y-t.y,n},A.multiplyByScalar=function(e,t,n){return _.a.typeOf.object("cartesian",e),_.a.typeOf.number("scalar",t),_.a.typeOf.object("result",n),n.x=e.x*t,n.y=e.y*t,n},A.divideByScalar=function(e,t,n){return _.a.typeOf.object("cartesian",e),_.a.typeOf.number("scalar",t),_.a.typeOf.object("result",n),n.x=e.x/t,n.y=e.y/t,n},A.negate=function(e,t){return _.a.typeOf.object("cartesian",e),_.a.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t},A.abs=function(e,t){return _.a.typeOf.object("cartesian",e),_.a.typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t};var N=new A;A.lerp=function(e,t,n,r){return _.a.typeOf.object("start",e),_.a.typeOf.object("end",t),_.a.typeOf.number("t",n),_.a.typeOf.object("result",r),A.multiplyByScalar(t,n,N),r=A.multiplyByScalar(e,1-n,r),A.add(N,r,r)};var P=new A,D=new A;A.angleBetween=function(e,t){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),A.normalize(e,P),A.normalize(t,D),M.acosClamped(A.dot(P,D))};var k=new A;A.mostOrthogonalAxis=function(e,t){_.a.typeOf.object("cartesian",e),_.a.typeOf.object("result",t);var n=A.normalize(e,k);return A.abs(n,n),t=n.x<=n.y?A.clone(A.UNIT_X,t):A.clone(A.UNIT_Y,t)},A.equals=function(e,t){return e===t||Object(o.a)(e)&&Object(o.a)(t)&&e.x===t.x&&e.y===t.y},A.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]},A.equalsEpsilon=function(e,t,n,r){return e===t||Object(o.a)(e)&&Object(o.a)(t)&&M.equalsEpsilon(e.x,t.x,n,r)&&M.equalsEpsilon(e.y,t.y,n,r)},A.ZERO=Object.freeze(new A(0,0)),A.UNIT_X=Object.freeze(new A(1,0)),A.UNIT_Y=Object.freeze(new A(0,1)),A.prototype.clone=function(e){return A.clone(this,e)},A.prototype.equals=function(e){return A.equals(this,e)},A.prototype.equalsEpsilon=function(e,t,n){return A.equalsEpsilon(this,e,t,n)},A.prototype.toString=function(){return"("+this.x+", "+this.y+")"};var L=A;function z(e,t,n){this.x=Object(C.a)(e,0),this.y=Object(C.a)(t,0),this.z=Object(C.a)(n,0)}z.fromSpherical=function(e,t){_.a.typeOf.object("spherical",e),Object(o.a)(t)||(t=new z);var n=e.clock,r=e.cone,i=Object(C.a)(e.magnitude,1),a=i*Math.sin(r);return t.x=a*Math.cos(n),t.y=a*Math.sin(n),t.z=i*Math.cos(r),t},z.fromElements=function(e,t,n,r){return Object(o.a)(r)?(r.x=e,r.y=t,r.z=n,r):new z(e,t,n)},z.clone=function(e,t){if(Object(o.a)(e))return Object(o.a)(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new z(e.x,e.y,e.z)},z.fromCartesian4=z.clone,z.packedLength=3,z.pack=function(e,t,n){return _.a.typeOf.object("value",e),_.a.defined("array",t),n=Object(C.a)(n,0),t[n++]=e.x,t[n++]=e.y,t[n]=e.z,t},z.unpack=function(e,t,n){return _.a.defined("array",e),t=Object(C.a)(t,0),Object(o.a)(n)||(n=new z),n.x=e[t++],n.y=e[t++],n.z=e[t],n},z.packArray=function(e,t){_.a.defined("array",e);var n=e.length,r=3*n;if(Object(o.a)(t)){if(!Array.isArray(t)&&t.length!==r)throw new E.a("If result is a typed array, it must have exactly array.length * 3 elements");t.length!==r&&(t.length=r)}else t=new Array(r);for(var i=0;i<n;++i)z.pack(e[i],t,3*i);return t},z.unpackArray=function(e,t){if(_.a.defined("array",e),_.a.typeOf.number.greaterThanOrEquals("array.length",e.length,3),e.length%3!=0)throw new E.a("array length must be a multiple of 3.");var n=e.length;Object(o.a)(t)?t.length=n/3:t=new Array(n/3);for(var r=0;r<n;r+=3){var i=r/3;t[i]=z.unpack(e,r,t[i])}return t},z.fromArray=z.unpack,z.maximumComponent=function(e){return _.a.typeOf.object("cartesian",e),Math.max(e.x,e.y,e.z)},z.minimumComponent=function(e){return _.a.typeOf.object("cartesian",e),Math.min(e.x,e.y,e.z)},z.minimumByComponent=function(e,t,n){return _.a.typeOf.object("first",e),_.a.typeOf.object("second",t),_.a.typeOf.object("result",n),n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n},z.maximumByComponent=function(e,t,n){return _.a.typeOf.object("first",e),_.a.typeOf.object("second",t),_.a.typeOf.object("result",n),n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n},z.magnitudeSquared=function(e){return _.a.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y+e.z*e.z},z.magnitude=function(e){return Math.sqrt(z.magnitudeSquared(e))};var q=new z;z.distance=function(e,t){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),z.subtract(e,t,q),z.magnitude(q)},z.distanceSquared=function(e,t){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),z.subtract(e,t,q),z.magnitudeSquared(q)},z.normalize=function(e,t){_.a.typeOf.object("cartesian",e),_.a.typeOf.object("result",t);var n=z.magnitude(e);if(t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,isNaN(t.x)||isNaN(t.y)||isNaN(t.z))throw new E.a("normalized result is not a number");return t},z.dot=function(e,t){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z},z.multiplyComponents=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n},z.divideComponents=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n},z.add=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n},z.subtract=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n},z.multiplyByScalar=function(e,t,n){return _.a.typeOf.object("cartesian",e),_.a.typeOf.number("scalar",t),_.a.typeOf.object("result",n),n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n},z.divideByScalar=function(e,t,n){return _.a.typeOf.object("cartesian",e),_.a.typeOf.number("scalar",t),_.a.typeOf.object("result",n),n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n},z.negate=function(e,t){return _.a.typeOf.object("cartesian",e),_.a.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t},z.abs=function(e,t){return _.a.typeOf.object("cartesian",e),_.a.typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t};var B=new z;z.lerp=function(e,t,n,r){return _.a.typeOf.object("start",e),_.a.typeOf.object("end",t),_.a.typeOf.number("t",n),_.a.typeOf.object("result",r),z.multiplyByScalar(t,n,B),r=z.multiplyByScalar(e,1-n,r),z.add(B,r,r)};var U=new z,F=new z;z.angleBetween=function(e,t){_.a.typeOf.object("left",e),_.a.typeOf.object("right",t),z.normalize(e,U),z.normalize(t,F);var n=z.dot(U,F),r=z.magnitude(z.cross(U,F,U));return Math.atan2(r,n)};var V=new z;z.mostOrthogonalAxis=function(e,t){_.a.typeOf.object("cartesian",e),_.a.typeOf.object("result",t);var n=z.normalize(e,V);return z.abs(n,n),t=n.x<=n.y?n.x<=n.z?z.clone(z.UNIT_X,t):z.clone(z.UNIT_Z,t):n.y<=n.z?z.clone(z.UNIT_Y,t):z.clone(z.UNIT_Z,t)},z.projectVector=function(e,t,n){_.a.defined("a",e),_.a.defined("b",t),_.a.defined("result",n);var r=z.dot(e,t)/z.dot(t,t);return z.multiplyByScalar(t,r,n)},z.equals=function(e,t){return e===t||Object(o.a)(e)&&Object(o.a)(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z},z.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]&&e.z===t[n+2]},z.equalsEpsilon=function(e,t,n,r){return e===t||Object(o.a)(e)&&Object(o.a)(t)&&M.equalsEpsilon(e.x,t.x,n,r)&&M.equalsEpsilon(e.y,t.y,n,r)&&M.equalsEpsilon(e.z,t.z,n,r)},z.cross=function(e,t,n){_.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n);var r=e.x,i=e.y,a=e.z,o=t.x,s=t.y,u=t.z,l=i*u-a*s,c=a*o-r*u,f=r*s-i*o;return n.x=l,n.y=c,n.z=f,n},z.midpoint=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y),n.z=.5*(e.z+t.z),n},z.fromDegrees=function(e,t,n,r,i){return _.a.typeOf.number("longitude",e),_.a.typeOf.number("latitude",t),e=M.toRadians(e),t=M.toRadians(t),z.fromRadians(e,t,n,r,i)};var W=new z,Z=new z,H=new z(40680631590769,40680631590769,40408299984661.445);z.fromRadians=function(e,t,n,r,i){_.a.typeOf.number("longitude",e),_.a.typeOf.number("latitude",t),n=Object(C.a)(n,0);var a=Object(o.a)(r)?r.radiiSquared:H,s=Math.cos(t);W.x=s*Math.cos(e),W.y=s*Math.sin(e),W.z=Math.sin(t),W=z.normalize(W,W),z.multiplyComponents(a,W,Z);var u=Math.sqrt(z.dot(W,Z));return Z=z.divideByScalar(Z,u,Z),W=z.multiplyByScalar(W,n,W),Object(o.a)(i)||(i=new z),z.add(Z,W,i)},z.fromDegreesArray=function(e,t,n){if(_.a.defined("coordinates",e),e.length<2||e.length%2!=0)throw new E.a("the number of coordinates must be a multiple of 2 and at least 2");var r=e.length;Object(o.a)(n)?n.length=r/2:n=new Array(r/2);for(var i=0;i<r;i+=2){var a=e[i],s=e[i+1],u=i/2;n[u]=z.fromDegrees(a,s,0,t,n[u])}return n},z.fromRadiansArray=function(e,t,n){if(_.a.defined("coordinates",e),e.length<2||e.length%2!=0)throw new E.a("the number of coordinates must be a multiple of 2 and at least 2");var r=e.length;Object(o.a)(n)?n.length=r/2:n=new Array(r/2);for(var i=0;i<r;i+=2){var a=e[i],s=e[i+1],u=i/2;n[u]=z.fromRadians(a,s,0,t,n[u])}return n},z.fromDegreesArrayHeights=function(e,t,n){if(_.a.defined("coordinates",e),e.length<3||e.length%3!=0)throw new E.a("the number of coordinates must be a multiple of 3 and at least 3");var r=e.length;Object(o.a)(n)?n.length=r/3:n=new Array(r/3);for(var i=0;i<r;i+=3){var a=e[i],s=e[i+1],u=e[i+2],l=i/3;n[l]=z.fromDegrees(a,s,u,t,n[l])}return n},z.fromRadiansArrayHeights=function(e,t,n){if(_.a.defined("coordinates",e),e.length<3||e.length%3!=0)throw new E.a("the number of coordinates must be a multiple of 3 and at least 3");var r=e.length;Object(o.a)(n)?n.length=r/3:n=new Array(r/3);for(var i=0;i<r;i+=3){var a=e[i],s=e[i+1],u=e[i+2],l=i/3;n[l]=z.fromRadians(a,s,u,t,n[l])}return n},z.ZERO=Object.freeze(new z(0,0,0)),z.UNIT_X=Object.freeze(new z(1,0,0)),z.UNIT_Y=Object.freeze(new z(0,1,0)),z.UNIT_Z=Object.freeze(new z(0,0,1)),z.prototype.clone=function(e){return z.clone(this,e)},z.prototype.equals=function(e){return z.equals(this,e)},z.prototype.equalsEpsilon=function(e,t,n){return z.equalsEpsilon(this,e,t,n)},z.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};var G=z,Y=new G,X=new G;var J=function(e,t,n,r,i){if(!Object(o.a)(e))throw new E.a("cartesian is required.");if(!Object(o.a)(t))throw new E.a("oneOverRadii is required.");if(!Object(o.a)(n))throw new E.a("oneOverRadiiSquared is required.");if(!Object(o.a)(r))throw new E.a("centerToleranceSquared is required.");var a=e.x,s=e.y,u=e.z,l=t.x,c=t.y,f=t.z,h=a*a*l*l,d=s*s*c*c,p=u*u*f*f,m=h+d+p,y=Math.sqrt(1/m),g=G.multiplyByScalar(e,y,Y);if(m<r)return isFinite(y)?G.clone(g,i):void 0;var b=n.x,v=n.y,w=n.z,O=X;O.x=g.x*b*2,O.y=g.y*v*2,O.z=g.z*w*2;var _,C,x,S,j,T,I,A=(1-y)*G.magnitude(e)/(.5*G.magnitude(O)),R=0;do{R=(_=h*(j=(C=1/(1+(A-=R)*b))*C)+d*(T=(x=1/(1+A*v))*x)+p*(I=(S=1/(1+A*w))*S)-1)/(-2*(h*(j*C)*b+d*(T*x)*v+p*(I*S)*w))}while(Math.abs(_)>M.EPSILON12);return Object(o.a)(i)?(i.x=a*C,i.y=s*x,i.z=u*S,i):new G(a*C,s*x,u*S)};function K(e,t,n){this.longitude=Object(C.a)(e,0),this.latitude=Object(C.a)(t,0),this.height=Object(C.a)(n,0)}K.fromRadians=function(e,t,n,r){return _.a.typeOf.number("longitude",e),_.a.typeOf.number("latitude",t),n=Object(C.a)(n,0),Object(o.a)(r)?(r.longitude=e,r.latitude=t,r.height=n,r):new K(e,t,n)},K.fromDegrees=function(e,t,n,r){return _.a.typeOf.number("longitude",e),_.a.typeOf.number("latitude",t),e=M.toRadians(e),t=M.toRadians(t),K.fromRadians(e,t,n,r)};var $=new G,Q=new G,ee=new G,te=new G(1/6378137,1/6378137,1/6356752.314245179),ne=new G(1/40680631590769,1/40680631590769,1/40408299984661.445),re=M.EPSILON1;K.fromCartesian=function(e,t,n){var r=Object(o.a)(t)?t.oneOverRadii:te,i=Object(o.a)(t)?t.oneOverRadiiSquared:ne,a=Object(o.a)(t)?t._centerToleranceSquared:re,s=J(e,r,i,a,Q);if(Object(o.a)(s)){var u=G.multiplyComponents(s,i,$);u=G.normalize(u,u);var l=G.subtract(e,s,ee),c=Math.atan2(u.y,u.x),f=Math.asin(u.z),h=M.sign(G.dot(l,e))*G.magnitude(l);return Object(o.a)(n)?(n.longitude=c,n.latitude=f,n.height=h,n):new K(c,f,h)}},K.toCartesian=function(e,t,n){return _.a.defined("cartographic",e),G.fromRadians(e.longitude,e.latitude,e.height,t,n)},K.clone=function(e,t){if(Object(o.a)(e))return Object(o.a)(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new K(e.longitude,e.latitude,e.height)},K.equals=function(e,t){return e===t||Object(o.a)(e)&&Object(o.a)(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height},K.equalsEpsilon=function(e,t,n){return n=Object(C.a)(n,0),e===t||Object(o.a)(e)&&Object(o.a)(t)&&Math.abs(e.longitude-t.longitude)<=n&&Math.abs(e.latitude-t.latitude)<=n&&Math.abs(e.height-t.height)<=n},K.ZERO=Object.freeze(new K(0,0,0)),K.prototype.clone=function(e){return K.clone(this,e)},K.prototype.equals=function(e){return K.equals(this,e)},K.prototype.equalsEpsilon=function(e,t){return K.equalsEpsilon(this,e,t)},K.prototype.toString=function(){return"("+this.longitude+", "+this.latitude+", "+this.height+")"};var ie=K;function ae(e,t,n,r){t=Object(C.a)(t,0),n=Object(C.a)(n,0),r=Object(C.a)(r,0),_.a.typeOf.number.greaterThanOrEquals("x",t,0),_.a.typeOf.number.greaterThanOrEquals("y",n,0),_.a.typeOf.number.greaterThanOrEquals("z",r,0),e._radii=new G(t,n,r),e._radiiSquared=new G(t*t,n*n,r*r),e._radiiToTheFourth=new G(t*t*t*t,n*n*n*n,r*r*r*r),e._oneOverRadii=new G(0===t?0:1/t,0===n?0:1/n,0===r?0:1/r),e._oneOverRadiiSquared=new G(0===t?0:1/(t*t),0===n?0:1/(n*n),0===r?0:1/(r*r)),e._minimumRadius=Math.min(t,n,r),e._maximumRadius=Math.max(t,n,r),e._centerToleranceSquared=M.EPSILON1,0!==e._radiiSquared.z&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function oe(e,t,n){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,ae(this,e,t,n)}Object.defineProperties(oe.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),oe.clone=function(e,t){if(Object(o.a)(e)){var n=e._radii;return Object(o.a)(t)?(G.clone(n,t._radii),G.clone(e._radiiSquared,t._radiiSquared),G.clone(e._radiiToTheFourth,t._radiiToTheFourth),G.clone(e._oneOverRadii,t._oneOverRadii),G.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new oe(n.x,n.y,n.z)}},oe.fromCartesian3=function(e,t){return Object(o.a)(t)||(t=new oe),Object(o.a)(e)?(ae(t,e.x,e.y,e.z),t):t},oe.WGS84=Object.freeze(new oe(6378137,6378137,6356752.314245179)),oe.UNIT_SPHERE=Object.freeze(new oe(1,1,1)),oe.MOON=Object.freeze(new oe(M.LUNAR_RADIUS,M.LUNAR_RADIUS,M.LUNAR_RADIUS)),oe.prototype.clone=function(e){return oe.clone(this,e)},oe.packedLength=G.packedLength,oe.pack=function(e,t,n){return _.a.typeOf.object("value",e),_.a.defined("array",t),n=Object(C.a)(n,0),G.pack(e._radii,t,n),t},oe.unpack=function(e,t,n){_.a.defined("array",e),t=Object(C.a)(t,0);var r=G.unpack(e,t);return oe.fromCartesian3(r,n)},oe.prototype.geocentricSurfaceNormal=G.normalize,oe.prototype.geodeticSurfaceNormalCartographic=function(e,t){_.a.typeOf.object("cartographic",e);var n=e.longitude,r=e.latitude,i=Math.cos(r),a=i*Math.cos(n),s=i*Math.sin(n),u=Math.sin(r);return Object(o.a)(t)||(t=new G),t.x=a,t.y=s,t.z=u,G.normalize(t,t)},oe.prototype.geodeticSurfaceNormal=function(e,t){if(!G.equalsEpsilon(e,G.ZERO,M.EPSILON14))return Object(o.a)(t)||(t=new G),t=G.multiplyComponents(e,this._oneOverRadiiSquared,t),G.normalize(t,t)};var se=new G,ue=new G;oe.prototype.cartographicToCartesian=function(e,t){var n=se,r=ue;this.geodeticSurfaceNormalCartographic(e,n),G.multiplyComponents(this._radiiSquared,n,r);var i=Math.sqrt(G.dot(n,r));return G.divideByScalar(r,i,r),G.multiplyByScalar(n,e.height,n),Object(o.a)(t)||(t=new G),G.add(r,n,t)},oe.prototype.cartographicArrayToCartesianArray=function(e,t){_.a.defined("cartographics",e);var n=e.length;Object(o.a)(t)?t.length=n:t=new Array(n);for(var r=0;r<n;r++)t[r]=this.cartographicToCartesian(e[r],t[r]);return t};var le=new G,ce=new G,fe=new G;oe.prototype.cartesianToCartographic=function(e,t){var n=this.scaleToGeodeticSurface(e,ce);if(Object(o.a)(n)){var r=this.geodeticSurfaceNormal(n,le),i=G.subtract(e,n,fe),a=Math.atan2(r.y,r.x),s=Math.asin(r.z),u=M.sign(G.dot(i,e))*G.magnitude(i);return Object(o.a)(t)?(t.longitude=a,t.latitude=s,t.height=u,t):new ie(a,s,u)}},oe.prototype.cartesianArrayToCartographicArray=function(e,t){_.a.defined("cartesians",e);var n=e.length;Object(o.a)(t)?t.length=n:t=new Array(n);for(var r=0;r<n;++r)t[r]=this.cartesianToCartographic(e[r],t[r]);return t},oe.prototype.scaleToGeodeticSurface=function(e,t){return J(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)},oe.prototype.scaleToGeocentricSurface=function(e,t){_.a.typeOf.object("cartesian",e),Object(o.a)(t)||(t=new G);var n=e.x,r=e.y,i=e.z,a=this._oneOverRadiiSquared,s=1/Math.sqrt(n*n*a.x+r*r*a.y+i*i*a.z);return G.multiplyByScalar(e,s,t)},oe.prototype.transformPositionToScaledSpace=function(e,t){return Object(o.a)(t)||(t=new G),G.multiplyComponents(e,this._oneOverRadii,t)},oe.prototype.transformPositionFromScaledSpace=function(e,t){return Object(o.a)(t)||(t=new G),G.multiplyComponents(e,this._radii,t)},oe.prototype.equals=function(e){return this===e||Object(o.a)(e)&&G.equals(this._radii,e._radii)},oe.prototype.toString=function(){return this._radii.toString()},oe.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,t,n){if(_.a.typeOf.object("position",e),!M.equalsEpsilon(this._radii.x,this._radii.y,M.EPSILON15))throw new E.a("Ellipsoid must be an ellipsoid of revolution (radii.x == radii.y)");_.a.typeOf.number.greaterThan("Ellipsoid.radii.z",this._radii.z,0),t=Object(C.a)(t,0);var r=this._squaredXOverSquaredZ;if(Object(o.a)(n)||(n=new G),n.x=0,n.y=0,n.z=e.z*(1-r),!(Math.abs(n.z)>=this._radii.z-t))return n};var he=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],de=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function pe(e,t,n){_.a.typeOf.number("a",e),_.a.typeOf.number("b",t),_.a.typeOf.func("func",n);for(var r=.5*(t+e),i=.5*(t-e),a=0,o=0;o<5;o++){var s=i*he[o];a+=de[o]*(n(r+s)+n(r-s))}return a*=i}oe.prototype.surfaceArea=function(e){_.a.typeOf.object("rectangle",e);for(var t=e.west,n=e.east,r=e.south,i=e.north;n<t;)n+=M.TWO_PI;var a=this._radiiSquared,o=a.x,s=a.y,u=a.z,l=o*s;return pe(r,i,function(e){var r=Math.cos(e),i=Math.sin(e);return Math.cos(e)*pe(t,n,function(e){var t=Math.cos(e),n=Math.sin(e);return Math.sqrt(l*i*i+u*(s*t*t+o*n*n)*r*r)})})};var me=oe;function ye(e){this._ellipsoid=Object(C.a)(e,me.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(ye.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),ye.prototype.project=function(e,t){var n=this._semimajorAxis,r=e.longitude*n,i=e.latitude*n,a=e.height;return Object(o.a)(t)?(t.x=r,t.y=i,t.z=a,t):new G(r,i,a)},ye.prototype.unproject=function(e,t){if(!Object(o.a)(e))throw new E.a("cartesian is required");var n=this._oneOverSemimajorAxis,r=e.x*n,i=e.y*n,a=e.z;return Object(o.a)(t)?(t.longitude=r,t.latitude=i,t.height=a,t):new ie(r,i,a)};var ge=ye,be=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function ve(e,t,n,r){this.west=Object(C.a)(e,0),this.south=Object(C.a)(t,0),this.east=Object(C.a)(n,0),this.north=Object(C.a)(r,0)}Object.defineProperties(ve.prototype,{width:{get:function(){return ve.computeWidth(this)}},height:{get:function(){return ve.computeHeight(this)}}}),ve.packedLength=4,ve.pack=function(e,t,n){return _.a.typeOf.object("value",e),_.a.defined("array",t),n=Object(C.a)(n,0),t[n++]=e.west,t[n++]=e.south,t[n++]=e.east,t[n]=e.north,t},ve.unpack=function(e,t,n){return _.a.defined("array",e),t=Object(C.a)(t,0),Object(o.a)(n)||(n=new ve),n.west=e[t++],n.south=e[t++],n.east=e[t++],n.north=e[t],n},ve.computeWidth=function(e){_.a.typeOf.object("rectangle",e);var t=e.east,n=e.west;return t<n&&(t+=M.TWO_PI),t-n},ve.computeHeight=function(e){return _.a.typeOf.object("rectangle",e),e.north-e.south},ve.fromDegrees=function(e,t,n,r,i){return e=M.toRadians(Object(C.a)(e,0)),t=M.toRadians(Object(C.a)(t,0)),n=M.toRadians(Object(C.a)(n,0)),r=M.toRadians(Object(C.a)(r,0)),Object(o.a)(i)?(i.west=e,i.south=t,i.east=n,i.north=r,i):new ve(e,t,n,r)},ve.fromRadians=function(e,t,n,r,i){return Object(o.a)(i)?(i.west=Object(C.a)(e,0),i.south=Object(C.a)(t,0),i.east=Object(C.a)(n,0),i.north=Object(C.a)(r,0),i):new ve(e,t,n,r)},ve.fromCartographicArray=function(e,t){_.a.defined("cartographics",e);for(var n=Number.MAX_VALUE,r=-Number.MAX_VALUE,i=Number.MAX_VALUE,a=-Number.MAX_VALUE,s=Number.MAX_VALUE,u=-Number.MAX_VALUE,l=0,c=e.length;l<c;l++){var f=e[l];n=Math.min(n,f.longitude),r=Math.max(r,f.longitude),s=Math.min(s,f.latitude),u=Math.max(u,f.latitude);var h=f.longitude>=0?f.longitude:f.longitude+M.TWO_PI;i=Math.min(i,h),a=Math.max(a,h)}return r-n>a-i&&(n=i,(r=a)>M.PI&&(r-=M.TWO_PI),n>M.PI&&(n-=M.TWO_PI)),Object(o.a)(t)?(t.west=n,t.south=s,t.east=r,t.north=u,t):new ve(n,s,r,u)},ve.fromCartesianArray=function(e,t,n){_.a.defined("cartesians",e),t=Object(C.a)(t,me.WGS84);for(var r=Number.MAX_VALUE,i=-Number.MAX_VALUE,a=Number.MAX_VALUE,s=-Number.MAX_VALUE,u=Number.MAX_VALUE,l=-Number.MAX_VALUE,c=0,f=e.length;c<f;c++){var h=t.cartesianToCartographic(e[c]);r=Math.min(r,h.longitude),i=Math.max(i,h.longitude),u=Math.min(u,h.latitude),l=Math.max(l,h.latitude);var d=h.longitude>=0?h.longitude:h.longitude+M.TWO_PI;a=Math.min(a,d),s=Math.max(s,d)}return i-r>s-a&&(r=a,(i=s)>M.PI&&(i-=M.TWO_PI),r>M.PI&&(r-=M.TWO_PI)),Object(o.a)(n)?(n.west=r,n.south=u,n.east=i,n.north=l,n):new ve(r,u,i,l)},ve.clone=function(e,t){if(Object(o.a)(e))return Object(o.a)(t)?(t.west=e.west,t.south=e.south,t.east=e.east,t.north=e.north,t):new ve(e.west,e.south,e.east,e.north)},ve.equalsEpsilon=function(e,t,n){return n=Object(C.a)(n,0),e===t||Object(o.a)(e)&&Object(o.a)(t)&&Math.abs(e.west-t.west)<=n&&Math.abs(e.south-t.south)<=n&&Math.abs(e.east-t.east)<=n&&Math.abs(e.north-t.north)<=n},ve.prototype.clone=function(e){return ve.clone(this,e)},ve.prototype.equals=function(e){return ve.equals(this,e)},ve.equals=function(e,t){return e===t||Object(o.a)(e)&&Object(o.a)(t)&&e.west===t.west&&e.south===t.south&&e.east===t.east&&e.north===t.north},ve.prototype.equalsEpsilon=function(e,t){return ve.equalsEpsilon(this,e,t)},ve.validate=function(e){_.a.typeOf.object("rectangle",e);var t=e.north;_.a.typeOf.number.greaterThanOrEquals("north",t,-M.PI_OVER_TWO),_.a.typeOf.number.lessThanOrEquals("north",t,M.PI_OVER_TWO);var n=e.south;_.a.typeOf.number.greaterThanOrEquals("south",n,-M.PI_OVER_TWO),_.a.typeOf.number.lessThanOrEquals("south",n,M.PI_OVER_TWO);var r=e.west;_.a.typeOf.number.greaterThanOrEquals("west",r,-Math.PI),_.a.typeOf.number.lessThanOrEquals("west",r,Math.PI);var i=e.east;_.a.typeOf.number.greaterThanOrEquals("east",i,-Math.PI),_.a.typeOf.number.lessThanOrEquals("east",i,Math.PI)},ve.southwest=function(e,t){return _.a.typeOf.object("rectangle",e),Object(o.a)(t)?(t.longitude=e.west,t.latitude=e.south,t.height=0,t):new ie(e.west,e.south)},ve.northwest=function(e,t){return _.a.typeOf.object("rectangle",e),Object(o.a)(t)?(t.longitude=e.west,t.latitude=e.north,t.height=0,t):new ie(e.west,e.north)},ve.northeast=function(e,t){return _.a.typeOf.object("rectangle",e),Object(o.a)(t)?(t.longitude=e.east,t.latitude=e.north,t.height=0,t):new ie(e.east,e.north)},ve.southeast=function(e,t){return _.a.typeOf.object("rectangle",e),Object(o.a)(t)?(t.longitude=e.east,t.latitude=e.south,t.height=0,t):new ie(e.east,e.south)},ve.center=function(e,t){_.a.typeOf.object("rectangle",e);var n=e.east,r=e.west;n<r&&(n+=M.TWO_PI);var i=M.negativePiToPi(.5*(r+n)),a=.5*(e.south+e.north);return Object(o.a)(t)?(t.longitude=i,t.latitude=a,t.height=0,t):new ie(i,a)},ve.intersection=function(e,t,n){_.a.typeOf.object("rectangle",e),_.a.typeOf.object("otherRectangle",t);var r=e.east,i=e.west,a=t.east,s=t.west;r<i&&a>0?r+=M.TWO_PI:a<s&&r>0&&(a+=M.TWO_PI),r<i&&s<0?s+=M.TWO_PI:a<s&&i<0&&(i+=M.TWO_PI);var u=M.negativePiToPi(Math.max(i,s)),l=M.negativePiToPi(Math.min(r,a));if(!((e.west<e.east||t.west<t.east)&&l<=u)){var c=Math.max(e.south,t.south),f=Math.min(e.north,t.north);if(!(c>=f))return Object(o.a)(n)?(n.west=u,n.south=c,n.east=l,n.north=f,n):new ve(u,c,l,f)}},ve.simpleIntersection=function(e,t,n){_.a.typeOf.object("rectangle",e),_.a.typeOf.object("otherRectangle",t);var r=Math.max(e.west,t.west),i=Math.max(e.south,t.south),a=Math.min(e.east,t.east),s=Math.min(e.north,t.north);if(!(i>=s||r>=a))return Object(o.a)(n)?(n.west=r,n.south=i,n.east=a,n.north=s,n):new ve(r,i,a,s)},ve.union=function(e,t,n){_.a.typeOf.object("rectangle",e),_.a.typeOf.object("otherRectangle",t),Object(o.a)(n)||(n=new ve);var r=e.east,i=e.west,a=t.east,s=t.west;r<i&&a>0?r+=M.TWO_PI:a<s&&r>0&&(a+=M.TWO_PI),r<i&&s<0?s+=M.TWO_PI:a<s&&i<0&&(i+=M.TWO_PI);var u=M.convertLongitudeRange(Math.min(i,s)),l=M.convertLongitudeRange(Math.max(r,a));return n.west=u,n.south=Math.min(e.south,t.south),n.east=l,n.north=Math.max(e.north,t.north),n},ve.expand=function(e,t,n){return _.a.typeOf.object("rectangle",e),_.a.typeOf.object("cartographic",t),Object(o.a)(n)||(n=new ve),n.west=Math.min(e.west,t.longitude),n.south=Math.min(e.south,t.latitude),n.east=Math.max(e.east,t.longitude),n.north=Math.max(e.north,t.latitude),n},ve.contains=function(e,t){_.a.typeOf.object("rectangle",e),_.a.typeOf.object("cartographic",t);var n=t.longitude,r=t.latitude,i=e.west,a=e.east;return a<i&&(a+=M.TWO_PI,n<0&&(n+=M.TWO_PI)),(n>i||M.equalsEpsilon(n,i,M.EPSILON14))&&(n<a||M.equalsEpsilon(n,a,M.EPSILON14))&&r>=e.south&&r<=e.north};var we=new ie;ve.subsample=function(e,t,n,r){_.a.typeOf.object("rectangle",e),t=Object(C.a)(t,me.WGS84),n=Object(C.a)(n,0),Object(o.a)(r)||(r=[]);var i=0,a=e.north,s=e.south,u=e.east,l=e.west,c=we;c.height=n,c.longitude=l,c.latitude=a,r[i]=t.cartographicToCartesian(c,r[i]),i++,c.longitude=u,r[i]=t.cartographicToCartesian(c,r[i]),i++,c.latitude=s,r[i]=t.cartographicToCartesian(c,r[i]),i++,c.longitude=l,r[i]=t.cartographicToCartesian(c,r[i]),i++,c.latitude=a<0?a:s>0?s:0;for(var f=1;f<8;++f)c.longitude=-Math.PI+f*M.PI_OVER_TWO,ve.contains(e,c)&&(r[i]=t.cartographicToCartesian(c,r[i]),i++);return 0===c.latitude&&(c.longitude=l,r[i]=t.cartographicToCartesian(c,r[i]),i++,c.longitude=u,r[i]=t.cartographicToCartesian(c,r[i]),i++),r.length=i,r},ve.MAX_VALUE=Object.freeze(new ve(-Math.PI,-M.PI_OVER_TWO,Math.PI,M.PI_OVER_TWO));var Oe=ve;function _e(e,t,n,r){this.x=Object(C.a)(e,0),this.y=Object(C.a)(t,0),this.width=Object(C.a)(n,0),this.height=Object(C.a)(r,0)}_e.packedLength=4,_e.pack=function(e,t,n){return _.a.typeOf.object("value",e),_.a.defined("array",t),n=Object(C.a)(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.width,t[n]=e.height,t},_e.unpack=function(e,t,n){return _.a.defined("array",e),t=Object(C.a)(t,0),Object(o.a)(n)||(n=new _e),n.x=e[t++],n.y=e[t++],n.width=e[t++],n.height=e[t],n},_e.fromPoints=function(e,t){if(Object(o.a)(t)||(t=new _e),!Object(o.a)(e)||0===e.length)return t.x=0,t.y=0,t.width=0,t.height=0,t;for(var n=e.length,r=e[0].x,i=e[0].y,a=e[0].x,s=e[0].y,u=1;u<n;u++){var l=e[u],c=l.x,f=l.y;r=Math.min(c,r),a=Math.max(c,a),i=Math.min(f,i),s=Math.max(f,s)}return t.x=r,t.y=i,t.width=a-r,t.height=s-i,t};var Ce=new ge,Ee=new ie,xe=new ie;_e.fromRectangle=function(e,t,n){if(Object(o.a)(n)||(n=new _e),!Object(o.a)(e))return n.x=0,n.y=0,n.width=0,n.height=0,n;var r=(t=Object(C.a)(t,Ce)).project(Oe.southwest(e,Ee)),i=t.project(Oe.northeast(e,xe));return L.subtract(i,r,i),n.x=r.x,n.y=r.y,n.width=i.x,n.height=i.y,n},_e.clone=function(e,t){if(Object(o.a)(e))return Object(o.a)(t)?(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t):new _e(e.x,e.y,e.width,e.height)},_e.union=function(e,t,n){_.a.typeOf.object("left",e),_.a.typeOf.object("right",t),Object(o.a)(n)||(n=new _e);var r=Math.min(e.x,t.x),i=Math.min(e.y,t.y),a=Math.max(e.x+e.width,t.x+t.width),s=Math.max(e.y+e.height,t.y+t.height);return n.x=r,n.y=i,n.width=a-r,n.height=s-i,n},_e.expand=function(e,t,n){_.a.typeOf.object("rectangle",e),_.a.typeOf.object("point",t),n=_e.clone(e,n);var r=t.x-n.x,i=t.y-n.y;return r>n.width?n.width=r:r<0&&(n.width-=r,n.x=t.x),i>n.height?n.height=i:i<0&&(n.height-=i,n.y=t.y),n},_e.intersect=function(e,t){_.a.typeOf.object("left",e),_.a.typeOf.object("right",t);var n=e.x,r=e.y,i=t.x,a=t.y;return n>i+t.width||n+e.width<i||r+e.height<a||r>a+t.height?be.OUTSIDE:be.INTERSECTING},_e.equals=function(e,t){return e===t||Object(o.a)(e)&&Object(o.a)(t)&&e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},_e.prototype.clone=function(e){return _e.clone(this,e)},_e.prototype.intersect=function(e){return _e.intersect(this,e)},_e.prototype.equals=function(e){return _e.equals(this,e)};var Se=_e;function je(e,t,n,r){this.x=Object(C.a)(e,0),this.y=Object(C.a)(t,0),this.z=Object(C.a)(n,0),this.w=Object(C.a)(r,0)}je.fromElements=function(e,t,n,r,i){return Object(o.a)(i)?(i.x=e,i.y=t,i.z=n,i.w=r,i):new je(e,t,n,r)},je.fromColor=function(e,t){return _.a.typeOf.object("color",e),Object(o.a)(t)?(t.x=e.red,t.y=e.green,t.z=e.blue,t.w=e.alpha,t):new je(e.red,e.green,e.blue,e.alpha)},je.clone=function(e,t){if(Object(o.a)(e))return Object(o.a)(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new je(e.x,e.y,e.z,e.w)},je.packedLength=4,je.pack=function(e,t,n){return _.a.typeOf.object("value",e),_.a.defined("array",t),n=Object(C.a)(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t},je.unpack=function(e,t,n){return _.a.defined("array",e),t=Object(C.a)(t,0),Object(o.a)(n)||(n=new je),n.x=e[t++],n.y=e[t++],n.z=e[t++],n.w=e[t],n},je.packArray=function(e,t){_.a.defined("array",e);var n=e.length,r=4*n;if(Object(o.a)(t)){if(!Array.isArray(t)&&t.length!==r)throw new E.a("If result is a typed array, it must have exactly array.length * 4 elements");t.length!==r&&(t.length=r)}else t=new Array(r);for(var i=0;i<n;++i)je.pack(e[i],t,4*i);return t},je.unpackArray=function(e,t){if(_.a.defined("array",e),_.a.typeOf.number.greaterThanOrEquals("array.length",e.length,4),e.length%4!=0)throw new E.a("array length must be a multiple of 4.");var n=e.length;Object(o.a)(t)?t.length=n/4:t=new Array(n/4);for(var r=0;r<n;r+=4){var i=r/4;t[i]=je.unpack(e,r,t[i])}return t},je.fromArray=je.unpack,je.maximumComponent=function(e){return _.a.typeOf.object("cartesian",e),Math.max(e.x,e.y,e.z,e.w)},je.minimumComponent=function(e){return _.a.typeOf.object("cartesian",e),Math.min(e.x,e.y,e.z,e.w)},je.minimumByComponent=function(e,t,n){return _.a.typeOf.object("first",e),_.a.typeOf.object("second",t),_.a.typeOf.object("result",n),n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n.w=Math.min(e.w,t.w),n},je.maximumByComponent=function(e,t,n){return _.a.typeOf.object("first",e),_.a.typeOf.object("second",t),_.a.typeOf.object("result",n),n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n.w=Math.max(e.w,t.w),n},je.magnitudeSquared=function(e){return _.a.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},je.magnitude=function(e){return Math.sqrt(je.magnitudeSquared(e))};var Te=new je;je.distance=function(e,t){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),je.subtract(e,t,Te),je.magnitude(Te)},je.distanceSquared=function(e,t){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),je.subtract(e,t,Te),je.magnitudeSquared(Te)},je.normalize=function(e,t){_.a.typeOf.object("cartesian",e),_.a.typeOf.object("result",t);var n=je.magnitude(e);if(t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t.w=e.w/n,isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||isNaN(t.w))throw new E.a("normalized result is not a number");return t},je.dot=function(e,t){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},je.multiplyComponents=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n.w=e.w*t.w,n},je.divideComponents=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n.w=e.w/t.w,n},je.add=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n},je.subtract=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n},je.multiplyByScalar=function(e,t,n){return _.a.typeOf.object("cartesian",e),_.a.typeOf.number("scalar",t),_.a.typeOf.object("result",n),n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n},je.divideByScalar=function(e,t,n){return _.a.typeOf.object("cartesian",e),_.a.typeOf.number("scalar",t),_.a.typeOf.object("result",n),n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n},je.negate=function(e,t){return _.a.typeOf.object("cartesian",e),_.a.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},je.abs=function(e,t){return _.a.typeOf.object("cartesian",e),_.a.typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};var Ie=new je;je.lerp=function(e,t,n,r){return _.a.typeOf.object("start",e),_.a.typeOf.object("end",t),_.a.typeOf.number("t",n),_.a.typeOf.object("result",r),je.multiplyByScalar(t,n,Ie),r=je.multiplyByScalar(e,1-n,r),je.add(Ie,r,r)};var Me=new je;je.mostOrthogonalAxis=function(e,t){_.a.typeOf.object("cartesian",e),_.a.typeOf.object("result",t);var n=je.normalize(e,Me);return je.abs(n,n),t=n.x<=n.y?n.x<=n.z?n.x<=n.w?je.clone(je.UNIT_X,t):je.clone(je.UNIT_W,t):n.z<=n.w?je.clone(je.UNIT_Z,t):je.clone(je.UNIT_W,t):n.y<=n.z?n.y<=n.w?je.clone(je.UNIT_Y,t):je.clone(je.UNIT_W,t):n.z<=n.w?je.clone(je.UNIT_Z,t):je.clone(je.UNIT_W,t)},je.equals=function(e,t){return e===t||Object(o.a)(e)&&Object(o.a)(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},je.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]&&e.z===t[n+2]&&e.w===t[n+3]},je.equalsEpsilon=function(e,t,n,r){return e===t||Object(o.a)(e)&&Object(o.a)(t)&&M.equalsEpsilon(e.x,t.x,n,r)&&M.equalsEpsilon(e.y,t.y,n,r)&&M.equalsEpsilon(e.z,t.z,n,r)&&M.equalsEpsilon(e.w,t.w,n,r)},je.ZERO=Object.freeze(new je(0,0,0,0)),je.UNIT_X=Object.freeze(new je(1,0,0,0)),je.UNIT_Y=Object.freeze(new je(0,1,0,0)),je.UNIT_Z=Object.freeze(new je(0,0,1,0)),je.UNIT_W=Object.freeze(new je(0,0,0,1)),je.prototype.clone=function(e){return je.clone(this,e)},je.prototype.equals=function(e){return je.equals(this,e)},je.prototype.equalsEpsilon=function(e,t,n){return je.equalsEpsilon(this,e,t,n)},je.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var Ae=new Float32Array(1);je.packFloat=function(e,t){if(_.a.typeOf.number("value",e),Object(o.a)(t)||(t=new je),Ae[0]=e,0===(e=Ae[0]))return je.clone(je.ZERO,t);var n,r=e<0?1:0;isFinite(e)?(e=Math.abs(e),n=Math.floor(M.logBase(e,10))+1,e/=Math.pow(10,n)):(e=.1,n=38);var i=256*e;return t.x=Math.floor(i),i=256*(i-t.x),t.y=Math.floor(i),i=256*(i-t.y),t.z=Math.floor(i),t.w=2*(n+38)+r,t},je.unpackFloat=function(e){_.a.typeOf.object("packedFloat",e);var t=e.w/2,n=Math.floor(t),r=2*(t-n);if(r=-(r=2*r-1),(n-=38)>=38)return r<0?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY;var i=r*e.x*(1/256);return i+=r*e.y*(1/65536),(i+=r*e.z*(1/16777216))*Math.pow(10,n)};var Re=je;function Ne(e,t,n,r,i,a,o,s,u){this[0]=Object(C.a)(e,0),this[1]=Object(C.a)(r,0),this[2]=Object(C.a)(o,0),this[3]=Object(C.a)(t,0),this[4]=Object(C.a)(i,0),this[5]=Object(C.a)(s,0),this[6]=Object(C.a)(n,0),this[7]=Object(C.a)(a,0),this[8]=Object(C.a)(u,0)}Ne.packedLength=9,Ne.pack=function(e,t,n){return _.a.typeOf.object("value",e),_.a.defined("array",t),n=Object(C.a)(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t[n++]=e[4],t[n++]=e[5],t[n++]=e[6],t[n++]=e[7],t[n++]=e[8],t},Ne.unpack=function(e,t,n){return _.a.defined("array",e),t=Object(C.a)(t,0),Object(o.a)(n)||(n=new Ne),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n[4]=e[t++],n[5]=e[t++],n[6]=e[t++],n[7]=e[t++],n[8]=e[t++],n},Ne.clone=function(e,t){if(Object(o.a)(e))return Object(o.a)(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new Ne(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},Ne.fromArray=function(e,t,n){return _.a.defined("array",e),t=Object(C.a)(t,0),Object(o.a)(n)||(n=new Ne),n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],n[4]=e[t+4],n[5]=e[t+5],n[6]=e[t+6],n[7]=e[t+7],n[8]=e[t+8],n},Ne.fromColumnMajorArray=function(e,t){return _.a.defined("values",e),Ne.clone(e,t)},Ne.fromRowMajorArray=function(e,t){return _.a.defined("values",e),Object(o.a)(t)?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new Ne(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},Ne.fromQuaternion=function(e,t){_.a.typeOf.object("quaternion",e);var n=e.x*e.x,r=e.x*e.y,i=e.x*e.z,a=e.x*e.w,s=e.y*e.y,u=e.y*e.z,l=e.y*e.w,c=e.z*e.z,f=e.z*e.w,h=e.w*e.w,d=n-s-c+h,p=2*(r-f),m=2*(i+l),y=2*(r+f),g=-n+s-c+h,b=2*(u-a),v=2*(i-l),w=2*(u+a),O=-n-s+c+h;return Object(o.a)(t)?(t[0]=d,t[1]=y,t[2]=v,t[3]=p,t[4]=g,t[5]=w,t[6]=m,t[7]=b,t[8]=O,t):new Ne(d,p,m,y,g,b,v,w,O)},Ne.fromHeadingPitchRoll=function(e,t){_.a.typeOf.object("headingPitchRoll",e);var n=Math.cos(-e.pitch),r=Math.cos(-e.heading),i=Math.cos(e.roll),a=Math.sin(-e.pitch),s=Math.sin(-e.heading),u=Math.sin(e.roll),l=n*r,c=-i*s+u*a*r,f=u*s+i*a*r,h=n*s,d=i*r+u*a*s,p=-u*r+i*a*s,m=-a,y=u*n,g=i*n;return Object(o.a)(t)?(t[0]=l,t[1]=h,t[2]=m,t[3]=c,t[4]=d,t[5]=y,t[6]=f,t[7]=p,t[8]=g,t):new Ne(l,c,f,h,d,p,m,y,g)},Ne.fromScale=function(e,t){return _.a.typeOf.object("scale",e),Object(o.a)(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new Ne(e.x,0,0,0,e.y,0,0,0,e.z)},Ne.fromUniformScale=function(e,t){return _.a.typeOf.number("scale",e),Object(o.a)(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new Ne(e,0,0,0,e,0,0,0,e)},Ne.fromCrossProduct=function(e,t){return _.a.typeOf.object("vector",e),Object(o.a)(t)?(t[0]=0,t[1]=e.z,t[2]=-e.y,t[3]=-e.z,t[4]=0,t[5]=e.x,t[6]=e.y,t[7]=-e.x,t[8]=0,t):new Ne(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)},Ne.fromRotationX=function(e,t){_.a.typeOf.number("angle",e);var n=Math.cos(e),r=Math.sin(e);return Object(o.a)(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=n,t[5]=r,t[6]=0,t[7]=-r,t[8]=n,t):new Ne(1,0,0,0,n,-r,0,r,n)},Ne.fromRotationY=function(e,t){_.a.typeOf.number("angle",e);var n=Math.cos(e),r=Math.sin(e);return Object(o.a)(t)?(t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=1,t[5]=0,t[6]=r,t[7]=0,t[8]=n,t):new Ne(n,0,r,0,1,0,-r,0,n)},Ne.fromRotationZ=function(e,t){_.a.typeOf.number("angle",e);var n=Math.cos(e),r=Math.sin(e);return Object(o.a)(t)?(t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new Ne(n,-r,0,r,n,0,0,0,1)},Ne.toArray=function(e,t){return _.a.typeOf.object("matrix",e),Object(o.a)(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},Ne.getElementIndex=function(e,t){return _.a.typeOf.number.greaterThanOrEquals("row",t,0),_.a.typeOf.number.lessThanOrEquals("row",t,2),_.a.typeOf.number.greaterThanOrEquals("column",e,0),_.a.typeOf.number.lessThanOrEquals("column",e,2),3*e+t},Ne.getColumn=function(e,t,n){_.a.typeOf.object("matrix",e),_.a.typeOf.number.greaterThanOrEquals("index",t,0),_.a.typeOf.number.lessThanOrEquals("index",t,2),_.a.typeOf.object("result",n);var r=3*t,i=e[r],a=e[r+1],o=e[r+2];return n.x=i,n.y=a,n.z=o,n},Ne.setColumn=function(e,t,n,r){_.a.typeOf.object("matrix",e),_.a.typeOf.number.greaterThanOrEquals("index",t,0),_.a.typeOf.number.lessThanOrEquals("index",t,2),_.a.typeOf.object("cartesian",n),_.a.typeOf.object("result",r);var i=3*t;return(r=Ne.clone(e,r))[i]=n.x,r[i+1]=n.y,r[i+2]=n.z,r},Ne.getRow=function(e,t,n){_.a.typeOf.object("matrix",e),_.a.typeOf.number.greaterThanOrEquals("index",t,0),_.a.typeOf.number.lessThanOrEquals("index",t,2),_.a.typeOf.object("result",n);var r=e[t],i=e[t+3],a=e[t+6];return n.x=r,n.y=i,n.z=a,n},Ne.setRow=function(e,t,n,r){return _.a.typeOf.object("matrix",e),_.a.typeOf.number.greaterThanOrEquals("index",t,0),_.a.typeOf.number.lessThanOrEquals("index",t,2),_.a.typeOf.object("cartesian",n),_.a.typeOf.object("result",r),(r=Ne.clone(e,r))[t]=n.x,r[t+3]=n.y,r[t+6]=n.z,r};var Pe=new G;Ne.getScale=function(e,t){return _.a.typeOf.object("matrix",e),_.a.typeOf.object("result",t),t.x=G.magnitude(G.fromElements(e[0],e[1],e[2],Pe)),t.y=G.magnitude(G.fromElements(e[3],e[4],e[5],Pe)),t.z=G.magnitude(G.fromElements(e[6],e[7],e[8],Pe)),t};var De=new G;Ne.getMaximumScale=function(e){return Ne.getScale(e,De),G.maximumComponent(De)},Ne.multiply=function(e,t,n){_.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n);var r=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],i=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],a=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],o=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],s=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],u=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],l=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],c=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],f=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return n[0]=r,n[1]=i,n[2]=a,n[3]=o,n[4]=s,n[5]=u,n[6]=l,n[7]=c,n[8]=f,n},Ne.add=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n},Ne.subtract=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n},Ne.multiplyByVector=function(e,t,n){_.a.typeOf.object("matrix",e),_.a.typeOf.object("cartesian",t),_.a.typeOf.object("result",n);var r=t.x,i=t.y,a=t.z,o=e[0]*r+e[3]*i+e[6]*a,s=e[1]*r+e[4]*i+e[7]*a,u=e[2]*r+e[5]*i+e[8]*a;return n.x=o,n.y=s,n.z=u,n},Ne.multiplyByScalar=function(e,t,n){return _.a.typeOf.object("matrix",e),_.a.typeOf.number("scalar",t),_.a.typeOf.object("result",n),n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n},Ne.multiplyByScale=function(e,t,n){return _.a.typeOf.object("matrix",e),_.a.typeOf.object("scale",t),_.a.typeOf.object("result",n),n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.x,n[3]=e[3]*t.y,n[4]=e[4]*t.y,n[5]=e[5]*t.y,n[6]=e[6]*t.z,n[7]=e[7]*t.z,n[8]=e[8]*t.z,n},Ne.negate=function(e,t){return _.a.typeOf.object("matrix",e),_.a.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t},Ne.transpose=function(e,t){_.a.typeOf.object("matrix",e),_.a.typeOf.object("result",t);var n=e[0],r=e[3],i=e[6],a=e[1],o=e[4],s=e[7],u=e[2],l=e[5],c=e[8];return t[0]=n,t[1]=r,t[2]=i,t[3]=a,t[4]=o,t[5]=s,t[6]=u,t[7]=l,t[8]=c,t};var ke=new G(1,1,1);Ne.getRotation=function(e,t){_.a.typeOf.object("matrix",e),_.a.typeOf.object("result",t);var n=G.divideComponents(ke,Ne.getScale(e,De),De);return t=Ne.multiplyByScale(e,n,t)};var Le=[1,0,0],ze=[2,2,1];function qe(e){for(var t=0,n=0;n<3;++n){var r=e[Ne.getElementIndex(ze[n],Le[n])];t+=2*r*r}return Math.sqrt(t)}function Be(e,t){for(var n=M.EPSILON15,r=0,i=1,a=0;a<3;++a){var o=Math.abs(e[Ne.getElementIndex(ze[a],Le[a])]);o>r&&(i=a,r=o)}var s=1,u=0,l=Le[i],c=ze[i];if(Math.abs(e[Ne.getElementIndex(c,l)])>n){var f,h=(e[Ne.getElementIndex(c,c)]-e[Ne.getElementIndex(l,l)])/2/e[Ne.getElementIndex(c,l)];u=(f=h<0?-1/(-h+Math.sqrt(1+h*h)):1/(h+Math.sqrt(1+h*h)))*(s=1/Math.sqrt(1+f*f))}return(t=Ne.clone(Ne.IDENTITY,t))[Ne.getElementIndex(l,l)]=t[Ne.getElementIndex(c,c)]=s,t[Ne.getElementIndex(c,l)]=u,t[Ne.getElementIndex(l,c)]=-u,t}var Ue=new Ne,Fe=new Ne;Ne.computeEigenDecomposition=function(e,t){_.a.typeOf.object("matrix",e);var n=M.EPSILON20,r=0,i=0;Object(o.a)(t)||(t={});for(var a=t.unitary=Ne.clone(Ne.IDENTITY,t.unitary),s=t.diagonal=Ne.clone(e,t.diagonal),u=n*function(e){for(var t=0,n=0;n<9;++n){var r=e[n];t+=r*r}return Math.sqrt(t)}(s);i<10&&qe(s)>u;)Be(s,Ue),Ne.transpose(Ue,Fe),Ne.multiply(s,Ue,s),Ne.multiply(Fe,s,s),Ne.multiply(a,Ue,a),++r>2&&(++i,r=0);return t},Ne.abs=function(e,t){return _.a.typeOf.object("matrix",e),_.a.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t},Ne.determinant=function(e){_.a.typeOf.object("matrix",e);var t=e[0],n=e[3],r=e[6],i=e[1],a=e[4],o=e[7],s=e[2],u=e[5],l=e[8];return t*(a*l-u*o)+i*(u*r-n*l)+s*(n*o-a*r)},Ne.inverse=function(e,t){_.a.typeOf.object("matrix",e),_.a.typeOf.object("result",t);var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=Ne.determinant(e);if(Math.abs(f)<=M.EPSILON15)throw new E.a("matrix is not invertible");t[0]=o*c-l*s,t[1]=l*i-r*c,t[2]=r*s-o*i,t[3]=u*s-a*c,t[4]=n*c-u*i,t[5]=a*i-n*s,t[6]=a*l-u*o,t[7]=u*r-n*l,t[8]=n*o-a*r;var h=1/f;return Ne.multiplyByScalar(t,h,t)},Ne.equals=function(e,t){return e===t||Object(o.a)(e)&&Object(o.a)(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},Ne.equalsEpsilon=function(e,t,n){return n=Object(C.a)(n,0),e===t||Object(o.a)(e)&&Object(o.a)(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n&&Math.abs(e[4]-t[4])<=n&&Math.abs(e[5]-t[5])<=n&&Math.abs(e[6]-t[6])<=n&&Math.abs(e[7]-t[7])<=n&&Math.abs(e[8]-t[8])<=n},Ne.IDENTITY=Object.freeze(new Ne(1,0,0,0,1,0,0,0,1)),Ne.ZERO=Object.freeze(new Ne(0,0,0,0,0,0,0,0,0)),Ne.COLUMN0ROW0=0,Ne.COLUMN0ROW1=1,Ne.COLUMN0ROW2=2,Ne.COLUMN1ROW0=3,Ne.COLUMN1ROW1=4,Ne.COLUMN1ROW2=5,Ne.COLUMN2ROW0=6,Ne.COLUMN2ROW1=7,Ne.COLUMN2ROW2=8,Object.defineProperties(Ne.prototype,{length:{get:function(){return Ne.packedLength}}}),Ne.prototype.clone=function(e){return Ne.clone(this,e)},Ne.prototype.equals=function(e){return Ne.equals(this,e)},Ne.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]},Ne.prototype.equalsEpsilon=function(e,t){return Ne.equalsEpsilon(this,e,t)},Ne.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n("+this[1]+", "+this[4]+", "+this[7]+")\n("+this[2]+", "+this[5]+", "+this[8]+")"};var Ve=Ne,We=n(13);function Ze(e,t,n,r,i,a,o,s,u,l,c,f,h,d,p,m){this[0]=Object(C.a)(e,0),this[1]=Object(C.a)(i,0),this[2]=Object(C.a)(u,0),this[3]=Object(C.a)(h,0),this[4]=Object(C.a)(t,0),this[5]=Object(C.a)(a,0),this[6]=Object(C.a)(l,0),this[7]=Object(C.a)(d,0),this[8]=Object(C.a)(n,0),this[9]=Object(C.a)(o,0),this[10]=Object(C.a)(c,0),this[11]=Object(C.a)(p,0),this[12]=Object(C.a)(r,0),this[13]=Object(C.a)(s,0),this[14]=Object(C.a)(f,0),this[15]=Object(C.a)(m,0)}Ze.packedLength=16,Ze.pack=function(e,t,n){return _.a.typeOf.object("value",e),_.a.defined("array",t),n=Object(C.a)(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t[n++]=e[4],t[n++]=e[5],t[n++]=e[6],t[n++]=e[7],t[n++]=e[8],t[n++]=e[9],t[n++]=e[10],t[n++]=e[11],t[n++]=e[12],t[n++]=e[13],t[n++]=e[14],t[n]=e[15],t},Ze.unpack=function(e,t,n){return _.a.defined("array",e),t=Object(C.a)(t,0),Object(o.a)(n)||(n=new Ze),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n[4]=e[t++],n[5]=e[t++],n[6]=e[t++],n[7]=e[t++],n[8]=e[t++],n[9]=e[t++],n[10]=e[t++],n[11]=e[t++],n[12]=e[t++],n[13]=e[t++],n[14]=e[t++],n[15]=e[t],n},Ze.clone=function(e,t){if(Object(o.a)(e))return Object(o.a)(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new Ze(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},Ze.fromArray=Ze.unpack,Ze.fromColumnMajorArray=function(e,t){return _.a.defined("values",e),Ze.clone(e,t)},Ze.fromRowMajorArray=function(e,t){return _.a.defined("values",e),Object(o.a)(t)?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new Ze(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},Ze.fromRotationTranslation=function(e,t,n){return _.a.typeOf.object("rotation",e),t=Object(C.a)(t,G.ZERO),Object(o.a)(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=0,n[4]=e[3],n[5]=e[4],n[6]=e[5],n[7]=0,n[8]=e[6],n[9]=e[7],n[10]=e[8],n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,n):new Ze(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)},Ze.fromTranslationQuaternionRotationScale=function(e,t,n,r){_.a.typeOf.object("translation",e),_.a.typeOf.object("rotation",t),_.a.typeOf.object("scale",n),Object(o.a)(r)||(r=new Ze);var i=n.x,a=n.y,s=n.z,u=t.x*t.x,l=t.x*t.y,c=t.x*t.z,f=t.x*t.w,h=t.y*t.y,d=t.y*t.z,p=t.y*t.w,m=t.z*t.z,y=t.z*t.w,g=t.w*t.w,b=u-h-m+g,v=2*(l-y),w=2*(c+p),O=2*(l+y),C=-u+h-m+g,E=2*(d-f),x=2*(c-p),S=2*(d+f),j=-u-h+m+g;return r[0]=b*i,r[1]=O*i,r[2]=x*i,r[3]=0,r[4]=v*a,r[5]=C*a,r[6]=S*a,r[7]=0,r[8]=w*s,r[9]=E*s,r[10]=j*s,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,r},Ze.fromTranslationRotationScale=function(e,t){return _.a.typeOf.object("translationRotationScale",e),Ze.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)},Ze.fromTranslation=function(e,t){return _.a.typeOf.object("translation",e),Ze.fromRotationTranslation(Ve.IDENTITY,e,t)},Ze.fromScale=function(e,t){return _.a.typeOf.object("scale",e),Object(o.a)(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new Ze(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},Ze.fromUniformScale=function(e,t){return _.a.typeOf.number("scale",e),Object(o.a)(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new Ze(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};var He=new G,Ge=new G,Ye=new G;Ze.fromCamera=function(e,t){_.a.typeOf.object("camera",e);var n=e.position,r=e.direction,i=e.up;_.a.typeOf.object("camera.position",n),_.a.typeOf.object("camera.direction",r),_.a.typeOf.object("camera.up",i),G.normalize(r,He),G.normalize(G.cross(He,i,Ge),Ge),G.normalize(G.cross(Ge,He,Ye),Ye);var a=Ge.x,s=Ge.y,u=Ge.z,l=He.x,c=He.y,f=He.z,h=Ye.x,d=Ye.y,p=Ye.z,m=n.x,y=n.y,g=n.z,b=a*-m+s*-y+u*-g,v=h*-m+d*-y+p*-g,w=l*m+c*y+f*g;return Object(o.a)(t)?(t[0]=a,t[1]=h,t[2]=-l,t[3]=0,t[4]=s,t[5]=d,t[6]=-c,t[7]=0,t[8]=u,t[9]=p,t[10]=-f,t[11]=0,t[12]=b,t[13]=v,t[14]=w,t[15]=1,t):new Ze(a,s,u,b,h,d,p,v,-l,-c,-f,w,0,0,0,1)},Ze.computePerspectiveFieldOfView=function(e,t,n,r,i){_.a.typeOf.number.greaterThan("fovY",e,0),_.a.typeOf.number.lessThan("fovY",e,Math.PI),_.a.typeOf.number.greaterThan("near",n,0),_.a.typeOf.number.greaterThan("far",r,0),_.a.typeOf.object("result",i);var a=1/Math.tan(.5*e),o=a/t,s=(r+n)/(n-r),u=2*r*n/(n-r);return i[0]=o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=a,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=s,i[11]=-1,i[12]=0,i[13]=0,i[14]=u,i[15]=0,i},Ze.computeOrthographicOffCenter=function(e,t,n,r,i,a,o){_.a.typeOf.number("left",e),_.a.typeOf.number("right",t),_.a.typeOf.number("bottom",n),_.a.typeOf.number("top",r),_.a.typeOf.number("near",i),_.a.typeOf.number("far",a),_.a.typeOf.object("result",o);var s=1/(t-e),u=1/(r-n),l=1/(a-i),c=-(t+e)*s,f=-(r+n)*u,h=-(a+i)*l;return s*=2,u*=2,l*=-2,o[0]=s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=l,o[11]=0,o[12]=c,o[13]=f,o[14]=h,o[15]=1,o},Ze.computePerspectiveOffCenter=function(e,t,n,r,i,a,o){_.a.typeOf.number("left",e),_.a.typeOf.number("right",t),_.a.typeOf.number("bottom",n),_.a.typeOf.number("top",r),_.a.typeOf.number("near",i),_.a.typeOf.number("far",a),_.a.typeOf.object("result",o);var s=2*i/(t-e),u=2*i/(r-n),l=(t+e)/(t-e),c=(r+n)/(r-n),f=-(a+i)/(a-i),h=-2*a*i/(a-i);return o[0]=s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=l,o[9]=c,o[10]=f,o[11]=-1,o[12]=0,o[13]=0,o[14]=h,o[15]=0,o},Ze.computeInfinitePerspectiveOffCenter=function(e,t,n,r,i,a){_.a.typeOf.number("left",e),_.a.typeOf.number("right",t),_.a.typeOf.number("bottom",n),_.a.typeOf.number("top",r),_.a.typeOf.number("near",i),_.a.typeOf.object("result",a);var o=2*i/(t-e),s=2*i/(r-n),u=(t+e)/(t-e),l=(r+n)/(r-n),c=-2*i;return a[0]=o,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=s,a[6]=0,a[7]=0,a[8]=u,a[9]=l,a[10]=-1,a[11]=-1,a[12]=0,a[13]=0,a[14]=c,a[15]=0,a},Ze.computeViewportTransformation=function(e,t,n,r){Object(o.a)(r)||(r=new Ze),e=Object(C.a)(e,C.a.EMPTY_OBJECT);var i=Object(C.a)(e.x,0),a=Object(C.a)(e.y,0),s=Object(C.a)(e.width,0),u=Object(C.a)(e.height,0);t=Object(C.a)(t,0);var l=.5*s,c=.5*u,f=.5*((n=Object(C.a)(n,1))-t),h=l,d=c,p=f,m=i+l,y=a+c,g=t+f;return r[0]=h,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=d,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=p,r[11]=0,r[12]=m,r[13]=y,r[14]=g,r[15]=1,r},Ze.computeView=function(e,t,n,r,i){return _.a.typeOf.object("position",e),_.a.typeOf.object("direction",t),_.a.typeOf.object("up",n),_.a.typeOf.object("right",r),_.a.typeOf.object("result",i),i[0]=r.x,i[1]=n.x,i[2]=-t.x,i[3]=0,i[4]=r.y,i[5]=n.y,i[6]=-t.y,i[7]=0,i[8]=r.z,i[9]=n.z,i[10]=-t.z,i[11]=0,i[12]=-G.dot(r,e),i[13]=-G.dot(n,e),i[14]=G.dot(t,e),i[15]=1,i},Ze.toArray=function(e,t){return _.a.typeOf.object("matrix",e),Object(o.a)(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},Ze.getElementIndex=function(e,t){return _.a.typeOf.number.greaterThanOrEquals("row",t,0),_.a.typeOf.number.lessThanOrEquals("row",t,3),_.a.typeOf.number.greaterThanOrEquals("column",e,0),_.a.typeOf.number.lessThanOrEquals("column",e,3),4*e+t},Ze.getColumn=function(e,t,n){_.a.typeOf.object("matrix",e),_.a.typeOf.number.greaterThanOrEquals("index",t,0),_.a.typeOf.number.lessThanOrEquals("index",t,3),_.a.typeOf.object("result",n);var r=4*t,i=e[r],a=e[r+1],o=e[r+2],s=e[r+3];return n.x=i,n.y=a,n.z=o,n.w=s,n},Ze.setColumn=function(e,t,n,r){_.a.typeOf.object("matrix",e),_.a.typeOf.number.greaterThanOrEquals("index",t,0),_.a.typeOf.number.lessThanOrEquals("index",t,3),_.a.typeOf.object("cartesian",n),_.a.typeOf.object("result",r);var i=4*t;return(r=Ze.clone(e,r))[i]=n.x,r[i+1]=n.y,r[i+2]=n.z,r[i+3]=n.w,r},Ze.setTranslation=function(e,t,n){return _.a.typeOf.object("matrix",e),_.a.typeOf.object("translation",t),_.a.typeOf.object("result",n),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=e[15],n};var Xe=new G;Ze.setScale=function(e,t,n){_.a.typeOf.object("matrix",e),_.a.typeOf.object("scale",t),_.a.typeOf.object("result",n);var r=Ze.getScale(e,Xe),i=G.divideComponents(t,r,Xe);return Ze.multiplyByScale(e,i,n)},Ze.getRow=function(e,t,n){_.a.typeOf.object("matrix",e),_.a.typeOf.number.greaterThanOrEquals("index",t,0),_.a.typeOf.number.lessThanOrEquals("index",t,3),_.a.typeOf.object("result",n);var r=e[t],i=e[t+4],a=e[t+8],o=e[t+12];return n.x=r,n.y=i,n.z=a,n.w=o,n},Ze.setRow=function(e,t,n,r){return _.a.typeOf.object("matrix",e),_.a.typeOf.number.greaterThanOrEquals("index",t,0),_.a.typeOf.number.lessThanOrEquals("index",t,3),_.a.typeOf.object("cartesian",n),_.a.typeOf.object("result",r),(r=Ze.clone(e,r))[t]=n.x,r[t+4]=n.y,r[t+8]=n.z,r[t+12]=n.w,r};var Je=new G;Ze.getScale=function(e,t){return _.a.typeOf.object("matrix",e),_.a.typeOf.object("result",t),t.x=G.magnitude(G.fromElements(e[0],e[1],e[2],Je)),t.y=G.magnitude(G.fromElements(e[4],e[5],e[6],Je)),t.z=G.magnitude(G.fromElements(e[8],e[9],e[10],Je)),t};var Ke=new G;Ze.getMaximumScale=function(e){return Ze.getScale(e,Ke),G.maximumComponent(Ke)},Ze.multiply=function(e,t,n){_.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n);var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=e[9],d=e[10],p=e[11],m=e[12],y=e[13],g=e[14],b=e[15],v=t[0],w=t[1],O=t[2],C=t[3],E=t[4],x=t[5],S=t[6],j=t[7],T=t[8],I=t[9],M=t[10],A=t[11],R=t[12],N=t[13],P=t[14],D=t[15],k=r*v+s*w+f*O+m*C,L=i*v+u*w+h*O+y*C,z=a*v+l*w+d*O+g*C,q=o*v+c*w+p*O+b*C,B=r*E+s*x+f*S+m*j,U=i*E+u*x+h*S+y*j,F=a*E+l*x+d*S+g*j,V=o*E+c*x+p*S+b*j,W=r*T+s*I+f*M+m*A,Z=i*T+u*I+h*M+y*A,H=a*T+l*I+d*M+g*A,G=o*T+c*I+p*M+b*A,Y=r*R+s*N+f*P+m*D,X=i*R+u*N+h*P+y*D,J=a*R+l*N+d*P+g*D,K=o*R+c*N+p*P+b*D;return n[0]=k,n[1]=L,n[2]=z,n[3]=q,n[4]=B,n[5]=U,n[6]=F,n[7]=V,n[8]=W,n[9]=Z,n[10]=H,n[11]=G,n[12]=Y,n[13]=X,n[14]=J,n[15]=K,n},Ze.add=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n[9]=e[9]+t[9],n[10]=e[10]+t[10],n[11]=e[11]+t[11],n[12]=e[12]+t[12],n[13]=e[13]+t[13],n[14]=e[14]+t[14],n[15]=e[15]+t[15],n},Ze.subtract=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n[9]=e[9]-t[9],n[10]=e[10]-t[10],n[11]=e[11]-t[11],n[12]=e[12]-t[12],n[13]=e[13]-t[13],n[14]=e[14]-t[14],n[15]=e[15]-t[15],n},Ze.multiplyTransformation=function(e,t,n){_.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n);var r=e[0],i=e[1],a=e[2],o=e[4],s=e[5],u=e[6],l=e[8],c=e[9],f=e[10],h=e[12],d=e[13],p=e[14],m=t[0],y=t[1],g=t[2],b=t[4],v=t[5],w=t[6],O=t[8],C=t[9],E=t[10],x=t[12],S=t[13],j=t[14],T=r*m+o*y+l*g,I=i*m+s*y+c*g,M=a*m+u*y+f*g,A=r*b+o*v+l*w,R=i*b+s*v+c*w,N=a*b+u*v+f*w,P=r*O+o*C+l*E,D=i*O+s*C+c*E,k=a*O+u*C+f*E,L=r*x+o*S+l*j+h,z=i*x+s*S+c*j+d,q=a*x+u*S+f*j+p;return n[0]=T,n[1]=I,n[2]=M,n[3]=0,n[4]=A,n[5]=R,n[6]=N,n[7]=0,n[8]=P,n[9]=D,n[10]=k,n[11]=0,n[12]=L,n[13]=z,n[14]=q,n[15]=1,n},Ze.multiplyByMatrix3=function(e,t,n){_.a.typeOf.object("matrix",e),_.a.typeOf.object("rotation",t),_.a.typeOf.object("result",n);var r=e[0],i=e[1],a=e[2],o=e[4],s=e[5],u=e[6],l=e[8],c=e[9],f=e[10],h=t[0],d=t[1],p=t[2],m=t[3],y=t[4],g=t[5],b=t[6],v=t[7],w=t[8],O=r*h+o*d+l*p,C=i*h+s*d+c*p,E=a*h+u*d+f*p,x=r*m+o*y+l*g,S=i*m+s*y+c*g,j=a*m+u*y+f*g,T=r*b+o*v+l*w,I=i*b+s*v+c*w,M=a*b+u*v+f*w;return n[0]=O,n[1]=C,n[2]=E,n[3]=0,n[4]=x,n[5]=S,n[6]=j,n[7]=0,n[8]=T,n[9]=I,n[10]=M,n[11]=0,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n},Ze.multiplyByTranslation=function(e,t,n){_.a.typeOf.object("matrix",e),_.a.typeOf.object("translation",t),_.a.typeOf.object("result",n);var r=t.x,i=t.y,a=t.z,o=r*e[0]+i*e[4]+a*e[8]+e[12],s=r*e[1]+i*e[5]+a*e[9]+e[13],u=r*e[2]+i*e[6]+a*e[10]+e[14];return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=o,n[13]=s,n[14]=u,n[15]=e[15],n};var $e=new G;Ze.multiplyByUniformScale=function(e,t,n){return _.a.typeOf.object("matrix",e),_.a.typeOf.number("scale",t),_.a.typeOf.object("result",n),$e.x=t,$e.y=t,$e.z=t,Ze.multiplyByScale(e,$e,n)},Ze.multiplyByScale=function(e,t,n){_.a.typeOf.object("matrix",e),_.a.typeOf.object("scale",t),_.a.typeOf.object("result",n);var r=t.x,i=t.y,a=t.z;return 1===r&&1===i&&1===a?Ze.clone(e,n):(n[0]=r*e[0],n[1]=r*e[1],n[2]=r*e[2],n[3]=0,n[4]=i*e[4],n[5]=i*e[5],n[6]=i*e[6],n[7]=0,n[8]=a*e[8],n[9]=a*e[9],n[10]=a*e[10],n[11]=0,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=1,n)},Ze.multiplyByVector=function(e,t,n){_.a.typeOf.object("matrix",e),_.a.typeOf.object("cartesian",t),_.a.typeOf.object("result",n);var r=t.x,i=t.y,a=t.z,o=t.w,s=e[0]*r+e[4]*i+e[8]*a+e[12]*o,u=e[1]*r+e[5]*i+e[9]*a+e[13]*o,l=e[2]*r+e[6]*i+e[10]*a+e[14]*o,c=e[3]*r+e[7]*i+e[11]*a+e[15]*o;return n.x=s,n.y=u,n.z=l,n.w=c,n},Ze.multiplyByPointAsVector=function(e,t,n){_.a.typeOf.object("matrix",e),_.a.typeOf.object("cartesian",t),_.a.typeOf.object("result",n);var r=t.x,i=t.y,a=t.z,o=e[0]*r+e[4]*i+e[8]*a,s=e[1]*r+e[5]*i+e[9]*a,u=e[2]*r+e[6]*i+e[10]*a;return n.x=o,n.y=s,n.z=u,n},Ze.multiplyByPoint=function(e,t,n){_.a.typeOf.object("matrix",e),_.a.typeOf.object("cartesian",t),_.a.typeOf.object("result",n);var r=t.x,i=t.y,a=t.z,o=e[0]*r+e[4]*i+e[8]*a+e[12],s=e[1]*r+e[5]*i+e[9]*a+e[13],u=e[2]*r+e[6]*i+e[10]*a+e[14];return n.x=o,n.y=s,n.z=u,n},Ze.multiplyByScalar=function(e,t,n){return _.a.typeOf.object("matrix",e),_.a.typeOf.number("scalar",t),_.a.typeOf.object("result",n),n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11]*t,n[12]=e[12]*t,n[13]=e[13]*t,n[14]=e[14]*t,n[15]=e[15]*t,n},Ze.negate=function(e,t){return _.a.typeOf.object("matrix",e),_.a.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},Ze.transpose=function(e,t){_.a.typeOf.object("matrix",e),_.a.typeOf.object("result",t);var n=e[1],r=e[2],i=e[3],a=e[6],o=e[7],s=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[10]=e[10],t[11]=e[14],t[12]=i,t[13]=o,t[14]=s,t[15]=e[15],t},Ze.abs=function(e,t){return _.a.typeOf.object("matrix",e),_.a.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t},Ze.equals=function(e,t){return e===t||Object(o.a)(e)&&Object(o.a)(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15]},Ze.equalsEpsilon=function(e,t,n){return n=Object(C.a)(n,0),e===t||Object(o.a)(e)&&Object(o.a)(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n&&Math.abs(e[4]-t[4])<=n&&Math.abs(e[5]-t[5])<=n&&Math.abs(e[6]-t[6])<=n&&Math.abs(e[7]-t[7])<=n&&Math.abs(e[8]-t[8])<=n&&Math.abs(e[9]-t[9])<=n&&Math.abs(e[10]-t[10])<=n&&Math.abs(e[11]-t[11])<=n&&Math.abs(e[12]-t[12])<=n&&Math.abs(e[13]-t[13])<=n&&Math.abs(e[14]-t[14])<=n&&Math.abs(e[15]-t[15])<=n},Ze.getTranslation=function(e,t){return _.a.typeOf.object("matrix",e),_.a.typeOf.object("result",t),t.x=e[12],t.y=e[13],t.z=e[14],t},Ze.getMatrix3=function(e,t){return _.a.typeOf.object("matrix",e),_.a.typeOf.object("result",t),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};var Qe=new Ve,et=new Ve,tt=new Re,nt=new Re(0,0,0,1);Ze.inverse=function(e,t){_.a.typeOf.object("matrix",e),_.a.typeOf.object("result",t);var n=e[0],r=e[4],i=e[8],a=e[12],o=e[1],s=e[5],u=e[9],l=e[13],c=e[2],f=e[6],h=e[10],d=e[14],p=e[3],m=e[7],y=e[11],g=e[15],b=h*g,v=d*y,w=f*g,O=d*m,C=f*y,E=h*m,x=c*g,S=d*p,j=c*y,T=h*p,I=c*m,A=f*p,R=b*s+O*u+C*l-(v*s+w*u+E*l),N=v*o+x*u+T*l-(b*o+S*u+j*l),P=w*o+S*s+I*l-(O*o+x*s+A*l),D=E*o+j*s+A*u-(C*o+T*s+I*u),k=v*r+w*i+E*a-(b*r+O*i+C*a),L=b*n+S*i+j*a-(v*n+x*i+T*a),z=O*n+x*r+A*a-(w*n+S*r+I*a),q=C*n+T*r+I*i-(E*n+j*r+A*i),B=(b=i*l)*m+(O=a*s)*y+(C=r*u)*g-((v=a*u)*m+(w=r*l)*y+(E=i*s)*g),U=v*p+(x=n*l)*y+(T=i*o)*g-(b*p+(S=a*o)*y+(j=n*u)*g),F=w*p+S*m+(I=n*s)*g-(O*p+x*m+(A=r*o)*g),V=E*p+j*m+A*y-(C*p+T*m+I*y),W=w*h+E*d+v*f-(C*d+b*f+O*h),Z=j*d+b*c+S*h-(x*h+T*d+v*c),H=x*f+A*d+O*c-(I*d+w*c+S*f),G=I*h+C*c+T*f-(j*f+A*h+E*c),Y=n*R+r*N+i*P+a*D;if(Math.abs(Y)<M.EPSILON21){if(Ve.equalsEpsilon(Ze.getMatrix3(e,Qe),et,M.EPSILON7)&&Re.equals(Ze.getRow(e,3,tt),nt))return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1,t;throw new We.a("matrix is not invertible because its determinate is zero.")}return Y=1/Y,t[0]=R*Y,t[1]=N*Y,t[2]=P*Y,t[3]=D*Y,t[4]=k*Y,t[5]=L*Y,t[6]=z*Y,t[7]=q*Y,t[8]=B*Y,t[9]=U*Y,t[10]=F*Y,t[11]=V*Y,t[12]=W*Y,t[13]=Z*Y,t[14]=H*Y,t[15]=G*Y,t},Ze.inverseTransformation=function(e,t){_.a.typeOf.object("matrix",e),_.a.typeOf.object("result",t);var n=e[0],r=e[1],i=e[2],a=e[4],o=e[5],s=e[6],u=e[8],l=e[9],c=e[10],f=e[12],h=e[13],d=e[14],p=-n*f-r*h-i*d,m=-a*f-o*h-s*d,y=-u*f-l*h-c*d;return t[0]=n,t[1]=a,t[2]=u,t[3]=0,t[4]=r,t[5]=o,t[6]=l,t[7]=0,t[8]=i,t[9]=s,t[10]=c,t[11]=0,t[12]=p,t[13]=m,t[14]=y,t[15]=1,t},Ze.IDENTITY=Object.freeze(new Ze(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),Ze.ZERO=Object.freeze(new Ze(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),Ze.COLUMN0ROW0=0,Ze.COLUMN0ROW1=1,Ze.COLUMN0ROW2=2,Ze.COLUMN0ROW3=3,Ze.COLUMN1ROW0=4,Ze.COLUMN1ROW1=5,Ze.COLUMN1ROW2=6,Ze.COLUMN1ROW3=7,Ze.COLUMN2ROW0=8,Ze.COLUMN2ROW1=9,Ze.COLUMN2ROW2=10,Ze.COLUMN2ROW3=11,Ze.COLUMN3ROW0=12,Ze.COLUMN3ROW1=13,Ze.COLUMN3ROW2=14,Ze.COLUMN3ROW3=15,Object.defineProperties(Ze.prototype,{length:{get:function(){return Ze.packedLength}}}),Ze.prototype.clone=function(e){return Ze.clone(this,e)},Ze.prototype.equals=function(e){return Ze.equals(this,e)},Ze.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]&&e[9]===t[n+9]&&e[10]===t[n+10]&&e[11]===t[n+11]&&e[12]===t[n+12]&&e[13]===t[n+13]&&e[14]===t[n+14]&&e[15]===t[n+15]},Ze.prototype.equalsEpsilon=function(e,t){return Ze.equalsEpsilon(this,e,t)},Ze.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"};var rt=Ze;function it(e,t){if(_.a.typeOf.object("normal",e),!M.equalsEpsilon(G.magnitude(e),1,M.EPSILON6))throw new E.a("normal must be normalized.");_.a.typeOf.number("distance",t),this.normal=G.clone(e),this.distance=t}it.fromPointNormal=function(e,t,n){if(_.a.typeOf.object("point",e),_.a.typeOf.object("normal",t),!M.equalsEpsilon(G.magnitude(t),1,M.EPSILON6))throw new E.a("normal must be normalized.");var r=-G.dot(t,e);return Object(o.a)(n)?(G.clone(t,n.normal),n.distance=r,n):new it(t,r)};var at=new G;it.fromCartesian4=function(e,t){_.a.typeOf.object("coefficients",e);var n=G.fromCartesian4(e,at),r=e.w;if(!M.equalsEpsilon(G.magnitude(n),1,M.EPSILON6))throw new E.a("normal must be normalized.");return Object(o.a)(t)?(G.clone(n,t.normal),t.distance=r,t):new it(n,r)},it.getPointDistance=function(e,t){return _.a.typeOf.object("plane",e),_.a.typeOf.object("point",t),G.dot(e.normal,t)+e.distance};var ot=new G;it.projectPointOntoPlane=function(e,t,n){_.a.typeOf.object("plane",e),_.a.typeOf.object("point",t),Object(o.a)(n)||(n=new G);var r=it.getPointDistance(e,t),i=G.multiplyByScalar(e.normal,r,ot);return G.subtract(t,i,n)};var st=new G;it.transform=function(e,t,n){return _.a.typeOf.object("plane",e),_.a.typeOf.object("transform",t),rt.multiplyByPointAsVector(t,e.normal,at),G.normalize(at,at),G.multiplyByScalar(e.normal,-e.distance,st),rt.multiplyByPoint(t,st,st),it.fromPointNormal(st,at,n)},it.clone=function(e,t){return _.a.typeOf.object("plane",e),Object(o.a)(t)?(G.clone(e.normal,t.normal),t.distance=e.distance,t):new it(e.normal,e.distance)},it.equals=function(e,t){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),e.distance===t.distance&&G.equals(e.normal,t.normal)},it.ORIGIN_XY_PLANE=Object.freeze(new it(G.UNIT_Z,0)),it.ORIGIN_YZ_PLANE=Object.freeze(new it(G.UNIT_X,0)),it.ORIGIN_ZX_PLANE=Object.freeze(new it(G.UNIT_Y,0));var ut=it;function lt(e){this.planes=Object(C.a)(e,[])}var ct=[new G,new G,new G];G.clone(G.UNIT_X,ct[0]),G.clone(G.UNIT_Y,ct[1]),G.clone(G.UNIT_Z,ct[2]);var ft=new G,ht=new G,dt=new ut(new G(1,0,0),0);lt.fromBoundingSphere=function(e,t){if(!Object(o.a)(e))throw new E.a("boundingSphere is required.");Object(o.a)(t)||(t=new lt);var n=ct.length,r=t.planes;r.length=2*n;for(var i=e.center,a=e.radius,s=0,u=0;u<n;++u){var l=ct[u],c=r[s],f=r[s+1];Object(o.a)(c)||(c=r[s]=new Re),Object(o.a)(f)||(f=r[s+1]=new Re),G.multiplyByScalar(l,-a,ft),G.add(i,ft,ft),c.x=l.x,c.y=l.y,c.z=l.z,c.w=-G.dot(l,ft),G.multiplyByScalar(l,a,ft),G.add(i,ft,ft),f.x=-l.x,f.y=-l.y,f.z=-l.z,f.w=-G.dot(G.negate(l,ht),ft),s+=2}return t},lt.prototype.computeVisibility=function(e){if(!Object(o.a)(e))throw new E.a("boundingVolume is required.");for(var t=this.planes,n=!1,r=0,i=t.length;r<i;++r){var a=e.intersectPlane(ut.fromCartesian4(t[r],dt));if(a===be.OUTSIDE)return be.OUTSIDE;a===be.INTERSECTING&&(n=!0)}return n?be.INTERSECTING:be.INSIDE},lt.prototype.computeVisibilityWithPlaneMask=function(e,t){if(!Object(o.a)(e))throw new E.a("boundingVolume is required.");if(!Object(o.a)(t))throw new E.a("parentPlaneMask is required.");if(t===lt.MASK_OUTSIDE||t===lt.MASK_INSIDE)return t;for(var n=lt.MASK_INSIDE,r=this.planes,i=0,a=r.length;i<a;++i){var s=i<31?1<<i:0;if(!(i<31&&0==(t&s))){var u=e.intersectPlane(ut.fromCartesian4(r[i],dt));if(u===be.OUTSIDE)return lt.MASK_OUTSIDE;u===be.INTERSECTING&&(n|=s)}}return n},lt.MASK_OUTSIDE=4294967295,lt.MASK_INSIDE=0,lt.MASK_INDETERMINATE=2147483647;var pt=lt;function mt(e){e=Object(C.a)(e,C.a.EMPTY_OBJECT),this.left=e.left,this._left=void 0,this.right=e.right,this._right=void 0,this.top=e.top,this._top=void 0,this.bottom=e.bottom,this._bottom=void 0,this.near=Object(C.a)(e.near,1),this._near=this.near,this.far=Object(C.a)(e.far,5e8),this._far=this.far,this._cullingVolume=new pt,this._orthographicMatrix=new rt}function yt(e){if(!(Object(o.a)(e.right)&&Object(o.a)(e.left)&&Object(o.a)(e.top)&&Object(o.a)(e.bottom)&&Object(o.a)(e.near)&&Object(o.a)(e.far)))throw new E.a("right, left, top, bottom, near, or far parameters are not set.");if(e.top!==e._top||e.bottom!==e._bottom||e.left!==e._left||e.right!==e._right||e.near!==e._near||e.far!==e._far){if(e.left>e.right)throw new E.a("right must be greater than left.");if(e.bottom>e.top)throw new E.a("top must be greater than bottom.");if(e.near<=0||e.near>e.far)throw new E.a("near must be greater than zero and less than far.");e._left=e.left,e._right=e.right,e._top=e.top,e._bottom=e.bottom,e._near=e.near,e._far=e.far,e._orthographicMatrix=rt.computeOrthographicOffCenter(e.left,e.right,e.bottom,e.top,e.near,e.far,e._orthographicMatrix)}}Object.defineProperties(mt.prototype,{projectionMatrix:{get:function(){return yt(this),this._orthographicMatrix}}});var gt=new G,bt=new G,vt=new G,wt=new G;mt.prototype.computeCullingVolume=function(e,t,n){if(!Object(o.a)(e))throw new E.a("position is required.");if(!Object(o.a)(t))throw new E.a("direction is required.");if(!Object(o.a)(n))throw new E.a("up is required.");var r=this._cullingVolume.planes,i=this.top,a=this.bottom,s=this.right,u=this.left,l=this.near,c=this.far,f=G.cross(t,n,gt);G.normalize(f,f);var h=bt;G.multiplyByScalar(t,l,h),G.add(e,h,h);var d=vt;G.multiplyByScalar(f,u,d),G.add(h,d,d);var p=r[0];return Object(o.a)(p)||(p=r[0]=new Re),p.x=f.x,p.y=f.y,p.z=f.z,p.w=-G.dot(f,d),G.multiplyByScalar(f,s,d),G.add(h,d,d),p=r[1],Object(o.a)(p)||(p=r[1]=new Re),p.x=-f.x,p.y=-f.y,p.z=-f.z,p.w=-G.dot(G.negate(f,wt),d),G.multiplyByScalar(n,a,d),G.add(h,d,d),p=r[2],Object(o.a)(p)||(p=r[2]=new Re),p.x=n.x,p.y=n.y,p.z=n.z,p.w=-G.dot(n,d),G.multiplyByScalar(n,i,d),G.add(h,d,d),p=r[3],Object(o.a)(p)||(p=r[3]=new Re),p.x=-n.x,p.y=-n.y,p.z=-n.z,p.w=-G.dot(G.negate(n,wt),d),p=r[4],Object(o.a)(p)||(p=r[4]=new Re),p.x=t.x,p.y=t.y,p.z=t.z,p.w=-G.dot(t,h),G.multiplyByScalar(t,c,d),G.add(e,d,d),p=r[5],Object(o.a)(p)||(p=r[5]=new Re),p.x=-t.x,p.y=-t.y,p.z=-t.z,p.w=-G.dot(G.negate(t,wt),d),this._cullingVolume},mt.prototype.getPixelDimensions=function(e,t,n,r,i){if(yt(this),!Object(o.a)(e)||!Object(o.a)(t))throw new E.a("Both drawingBufferWidth and drawingBufferHeight are required.");if(e<=0)throw new E.a("drawingBufferWidth must be greater than zero.");if(t<=0)throw new E.a("drawingBufferHeight must be greater than zero.");if(!Object(o.a)(n))throw new E.a("distance is required.");if(!Object(o.a)(r))throw new E.a("pixelRatio is required.");if(r<=0)throw new E.a("pixelRatio must be greater than zero.");if(!Object(o.a)(i))throw new E.a("A result object is required.");var a=r*(this.right-this.left)/e,s=r*(this.top-this.bottom)/t;return i.x=a,i.y=s,i},mt.prototype.clone=function(e){return Object(o.a)(e)||(e=new mt),e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e._left=void 0,e._right=void 0,e._top=void 0,e._bottom=void 0,e._near=void 0,e._far=void 0,e},mt.prototype.equals=function(e){return Object(o.a)(e)&&e instanceof mt&&this.right===e.right&&this.left===e.left&&this.top===e.top&&this.bottom===e.bottom&&this.near===e.near&&this.far===e.far},mt.prototype.equalsEpsilon=function(e,t,n){return e===this||Object(o.a)(e)&&e instanceof mt&&M.equalsEpsilon(this.right,e.right,t,n)&&M.equalsEpsilon(this.left,e.left,t,n)&&M.equalsEpsilon(this.top,e.top,t,n)&&M.equalsEpsilon(this.bottom,e.bottom,t,n)&&M.equalsEpsilon(this.near,e.near,t,n)&&M.equalsEpsilon(this.far,e.far,t,n)};var Ot=mt;function _t(e){e=Object(C.a)(e,C.a.EMPTY_OBJECT),this._offCenterFrustum=new Ot,this.width=e.width,this._width=void 0,this.aspectRatio=e.aspectRatio,this._aspectRatio=void 0,this.near=Object(C.a)(e.near,1),this._near=this.near,this.far=Object(C.a)(e.far,5e8),this._far=this.far}function Ct(e){if(!(Object(o.a)(e.width)&&Object(o.a)(e.aspectRatio)&&Object(o.a)(e.near)&&Object(o.a)(e.far)))throw new E.a("width, aspectRatio, near, or far parameters are not set.");var t=e._offCenterFrustum;if(e.width!==e._width||e.aspectRatio!==e._aspectRatio||e.near!==e._near||e.far!==e._far){if(e.aspectRatio<0)throw new E.a("aspectRatio must be positive.");if(e.near<0||e.near>e.far)throw new E.a("near must be greater than zero and less than far.");e._aspectRatio=e.aspectRatio,e._width=e.width,e._near=e.near,e._far=e.far;var n=1/e.aspectRatio;t.right=.5*e.width,t.left=-t.right,t.top=n*t.right,t.bottom=-t.top,t.near=e.near,t.far=e.far}}_t.packedLength=4,_t.pack=function(e,t,n){return _.a.typeOf.object("value",e),_.a.defined("array",t),n=Object(C.a)(n,0),t[n++]=e.width,t[n++]=e.aspectRatio,t[n++]=e.near,t[n]=e.far,t},_t.unpack=function(e,t,n){return _.a.defined("array",e),t=Object(C.a)(t,0),Object(o.a)(n)||(n=new _t),n.width=e[t++],n.aspectRatio=e[t++],n.near=e[t++],n.far=e[t],n},Object.defineProperties(_t.prototype,{projectionMatrix:{get:function(){return Ct(this),this._offCenterFrustum.projectionMatrix}}}),_t.prototype.computeCullingVolume=function(e,t,n){return Ct(this),this._offCenterFrustum.computeCullingVolume(e,t,n)},_t.prototype.getPixelDimensions=function(e,t,n,r,i){return Ct(this),this._offCenterFrustum.getPixelDimensions(e,t,n,r,i)},_t.prototype.clone=function(e){return Object(o.a)(e)||(e=new _t),e.aspectRatio=this.aspectRatio,e.width=this.width,e.near=this.near,e.far=this.far,e._aspectRatio=void 0,e._width=void 0,e._near=void 0,e._far=void 0,this._offCenterFrustum.clone(e._offCenterFrustum),e},_t.prototype.equals=function(e){return!!(Object(o.a)(e)&&e instanceof _t)&&(Ct(this),Ct(e),this.width===e.width&&this.aspectRatio===e.aspectRatio&&this._offCenterFrustum.equals(e._offCenterFrustum))},_t.prototype.equalsEpsilon=function(e,t,n){return!!(Object(o.a)(e)&&e instanceof _t)&&(Ct(this),Ct(e),M.equalsEpsilon(this.width,e.width,t,n)&&M.equalsEpsilon(this.aspectRatio,e.aspectRatio,t,n)&&this._offCenterFrustum.equalsEpsilon(e._offCenterFrustum,t,n))};var Et=_t,xt=n(4);var St=function(e,t,n){_.a.defined("array",e),_.a.defined("itemToFind",t),_.a.defined("comparator",n);for(var r,i,a=0,o=e.length-1;a<=o;)if((i=n(e[r=~~((a+o)/2)],t))<0)a=r+1;else{if(!(i>0))return r;o=r-1}return~(o+1)};var jt=function(e,t,n,r,i){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=n,this.yPoleOffset=r,this.ut1MinusUtc=i};
/**
@license
sprintf.js from the php.js project - https://github.com/kvz/phpjs
Directly from https://github.com/kvz/phpjs/blob/master/functions/strings/sprintf.js

php.js is copyright 2012 Kevin van Zonneveld.

Portions copyright Brett Zamir (http://brett-zamir.me), Kevin van Zonneveld
(http://kevin.vanzonneveld.net), Onno Marsman, Theriault, Michael White
(http://getsprink.com), Waldo Malqui Silva, Paulo Freitas, Jack, Jonas
Raoni Soares Silva (http://www.jsfromhell.com), Philip Peterson, Legaev
Andrey, Ates Goral (http://magnetiq.com), Alex, Ratheous, Martijn Wieringa,
Rafa? Kukawski (http://blog.kukawski.pl), lmeyrick
(https://sourceforge.net/projects/bcmath-js/), Nate, Philippe Baumann,
Enrique Gonzalez, Webtoolkit.info (http://www.webtoolkit.info/), Carlos R.
L. Rodrigues (http://www.jsfromhell.com), Ash Searle
(http://hexmen.com/blog/), Jani Hartikainen, travc, Ole Vrijenhoek,
Erkekjetter, Michael Grier, Rafa? Kukawski (http://kukawski.pl), Johnny
Mast (http://www.phpvrouwen.nl), T.Wild, d3x,
http://stackoverflow.com/questions/57803/how-to-convert-decimal-to-hex-in-javascript,
Rafa? Kukawski (http://blog.kukawski.pl/), stag019, pilus, WebDevHobo
(http://webdevhobo.blogspot.com/), marrtins, GeekFG
(http://geekfg.blogspot.com), Andrea Giammarchi
(http://webreflection.blogspot.com), Arpad Ray (mailto:arpad@php.net),
gorthaur, Paul Smith, Tim de Koning (http://www.kingsquare.nl), Joris, Oleg
Eremeev, Steve Hilder, majak, gettimeofday, KELAN, Josh Fraser
(http://onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/),
Marc Palau, Martin
(http://www.erlenwiese.de/), Breaking Par Consulting Inc
(http://www.breakingpar.com/bkp/home.nsf/0/87256B280015193F87256CFB006C45F7),
Chris, Mirek Slugen, saulius, Alfonso Jimenez
(http://www.alfonsojimenez.com), Diplom@t (http://difane.com/), felix,
Mailfaker (http://www.weedem.fr/), Tyler Akins (http://rumkin.com), Caio
Ariede (http://caioariede.com), Robin, Kankrelune
(http://www.webfaktory.info/), Karol Kowalski, Imgen Tata
(http://www.myipdf.com/), mdsjack (http://www.mdsjack.bo.it), Dreamer,
Felix Geisendoerfer (http://www.debuggable.com/felix), Lars Fischer, AJ,
David, Aman Gupta, Michael White, Public Domain
(http://www.json.org/json2.js), Steven Levithan
(http://blog.stevenlevithan.com), Sakimori, Pellentesque Malesuada,
Thunder.m, Dj (http://phpjs.org/functions/htmlentities:425#comment_134018),
Steve Clay, David James, Francois, class_exists, nobbler, T. Wild, Itsacon
(http://www.itsacon.net/), date, Ole Vrijenhoek (http://www.nervous.nl/),
Fox, Raphael (Ao RUDLER), Marco, noname, Mateusz "loonquawl" Zalega, Frank
Forte, Arno, ger, mktime, john (http://www.jd-tech.net), Nick Kolosov
(http://sammy.ru), marc andreu, Scott Cariss, Douglas Crockford
(http://javascript.crockford.com), madipta, Slawomir Kaniecki,
ReverseSyntax, Nathan, Alex Wilson, kenneth, Bayron Guevara, Adam Wallner
(http://web2.bitbaro.hu/), paulo kuong, jmweb, Lincoln Ramsay, djmix,
Pyerre, Jon Hohle, Thiago Mata (http://thiagomata.blog.com), lmeyrick
(https://sourceforge.net/projects/bcmath-js/this.), Linuxworld, duncan,
Gilbert, Sanjoy Roy, Shingo, sankai, Oskar Larsson H?gfeldt
(http://oskar-lh.name/), Denny Wardhana, 0m3r, Everlasto, Subhasis Deb,
josh, jd, Pier Paolo Ramon (http://www.mastersoup.com/), P, merabi, Soren
Hansen, Eugene Bulkin (http://doubleaw.com/), Der Simon
(http://innerdom.sourceforge.net/), echo is bad, Ozh, XoraX
(http://www.xorax.info), EdorFaus, JB, J A R, Marc Jansen, Francesco, LH,
Stoyan Kyosev (http://www.svest.org/), nord_ua, omid
(http://phpjs.org/functions/380:380#comment_137122), Brad Touesnard, MeEtc
(http://yass.meetcweb.com), Peter-Paul Koch
(http://www.quirksmode.org/js/beat.html), Olivier Louvignes
(http://mg-crea.com/), T0bsn, Tim Wiel, Bryan Elliott, Jalal Berrami,
Martin, JT, David Randall, Thomas Beaucourt (http://www.webapp.fr), taith,
vlado houba, Pierre-Luc Paour, Kristof Coomans (SCK-CEN Belgian Nucleair
Research Centre), Martin Pool, Kirk Strobeck, Rick Waldron, Brant Messenger
(http://www.brantmessenger.com/), Devan Penner-Woelk, Saulo Vallory, Wagner
B. Soares, Artur Tchernychev, Valentina De Rosa, Jason Wong
(http://carrot.org/), Christoph, Daniel Esteban, strftime, Mick@el, rezna,
Simon Willison (http://simonwillison.net), Anton Ongson, Gabriel Paderni,
Marco van Oort, penutbutterjelly, Philipp Lenssen, Bjorn Roesbeke
(http://www.bjornroesbeke.be/), Bug?, Eric Nagel, Tomasz Wesolowski,
Evertjan Garretsen, Bobby Drake, Blues (http://tech.bluesmoon.info/), Luke
Godfrey, Pul, uestla, Alan C, Ulrich, Rafal Kukawski, Yves Sucaet,
sowberry, Norman "zEh" Fuchs, hitwork, Zahlii, johnrembo, Nick Callen,
Steven Levithan (stevenlevithan.com), ejsanders, Scott Baker, Brian Tafoya
(http://www.premasolutions.com/), Philippe Jausions
(http://pear.php.net/user/jausions), Aidan Lister
(http://aidanlister.com/), Rob, e-mike, HKM, ChaosNo1, metjay, strcasecmp,
strcmp, Taras Bogach, jpfle, Alexander Ermolaev
(http://snippets.dzone.com/user/AlexanderErmolaev), DxGx, kilops, Orlando,
dptr1988, Le Torbi, James (http://www.james-bell.co.uk/), Pedro Tainha
(http://www.pedrotainha.com), James, Arnout Kazemier
(http://www.3rd-Eden.com), Chris McMacken, gabriel paderni, Yannoo,
FGFEmperor, baris ozdil, Tod Gentille, Greg Frazier, jakes, 3D-GRAF, Allan
Jensen (http://www.winternet.no), Howard Yeend, Benjamin Lupton, davook,
daniel airton wermann (http://wermann.com.br), Atli T¨®r, Maximusya, Ryan
W Tenney (http://ryan.10e.us), Alexander M Beedie, fearphage
(http://http/my.opera.com/fearphage/), Nathan Sepulveda, Victor, Matteo,
Billy, stensi, Cord, Manish, T.J. Leahy, Riddler
(http://www.frontierwebdev.com/), Rafa? Kukawski, FremyCompany, Matt
Bradley, Tim de Koning, Luis Salazar (http://www.freaky-media.com/), Diogo
Resende, Rival, Andrej Pavlovic, Garagoth, Le Torbi
(http://www.letorbi.de/), Dino, Josep Sanz (http://www.ws3.es/), rem,
Russell Walker (http://www.nbill.co.uk/), Jamie Beck
(http://www.terabit.ca/), setcookie, Michael, YUI Library:
http://developer.yahoo.com/yui/docs/YAHOO.util.DateLocale.html, Blues at
http://hacks.bluesmoon.info/strftime/strftime.js, Ben
(http://benblume.co.uk/), DtTvB
(http://dt.in.th/2008-09-16.string-length-in-bytes.html), Andreas, William,
meo, incidence, Cagri Ekin, Amirouche, Amir Habibi
(http://www.residence-mixte.com/), Luke Smith (http://lucassmith.name),
Kheang Hok Chin (http://www.distantia.ca/), Jay Klehr, Lorenzo Pisani,
Tony, Yen-Wei Liu, Greenseed, mk.keck, Leslie Hoare, dude, booeyOH, Ben
Bryan

Licensed under the MIT (MIT-LICENSE.txt) license.

Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL KEVIN VAN ZONNEVELD BE LIABLE FOR ANY CLAIM, DAMAGES
OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
*/var Tt=function(){var e=arguments,t=0,n=function(e,t,n,r){n||(n=" ");var i=e.length>=t?"":Array(1+t-e.length>>>0).join(n);return r?e+i:i+e},r=function(e,t,r,i,a,o){var s=i-e.length;return s>0&&(e=r||!a?n(e,i,o,r):e.slice(0,t.length)+n("",s,"0",!0)+e.slice(t.length)),e},i=function(e,t,i,a,o,s,u){var l=e>>>0;return e=(i=i&&l&&{2:"0b",8:"0",16:"0x"}[t]||"")+n(l.toString(t),s||0,"0",!1),r(e,i,a,o,u)},a=function(e,t,n,i,a,o){return null!=i&&(e=e.slice(0,i)),r(e,"",t,n,a,o)};return e[t++].replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,function(o,s,u,l,c,f,h){var d,p,m,y,g;if("%%"==o)return"%";for(var b=!1,v="",w=!1,O=!1,_=" ",C=u.length,E=0;u&&E<C;E++)switch(u.charAt(E)){case" ":v=" ";break;case"+":v="+";break;case"-":b=!0;break;case"'":_=u.charAt(E+1);break;case"0":w=!0;break;case"#":O=!0}if((l=l?"*"==l?+e[t++]:"*"==l.charAt(0)?+e[l.slice(1,-1)]:+l:0)<0&&(l=-l,b=!0),!isFinite(l))throw new Error("sprintf: (minimum-)width must be finite");switch(f=f?"*"==f?+e[t++]:"*"==f.charAt(0)?+e[f.slice(1,-1)]:+f:"fFeE".indexOf(h)>-1?6:"d"==h?0:void 0,g=s?e[s.slice(0,-1)]:e[t++],h){case"s":return a(String(g),b,l,f,w,_);case"c":return a(String.fromCharCode(+g),b,l,f,w);case"b":return i(g,2,O,b,l,f,w);case"o":return i(g,8,O,b,l,f,w);case"x":return i(g,16,O,b,l,f,w);case"X":return i(g,16,O,b,l,f,w).toUpperCase();case"u":return i(g,10,O,b,l,f,w);case"i":case"d":return d=+g||0,g=(p=(d=Math.round(d-d%1))<0?"-":v)+n(String(Math.abs(d)),f,"0",!1),r(g,p,b,l,w);case"e":case"E":case"f":case"F":case"g":case"G":return p=(d=+g)<0?"-":v,m=["toExponential","toFixed","toPrecision"]["efg".indexOf(h.toLowerCase())],y=["toString","toUpperCase"]["eEfFgG".indexOf(h)%2],g=p+Math.abs(d)[m](f),r(g,p,b,l,w)[y]();default:return o}})};var It=function(e,t,n,r,i,a,o,s){this.year=e,this.month=t,this.day=n,this.hour=r,this.minute=i,this.second=a,this.millisecond=o,this.isLeapSecond=s};var Mt=function(e){if(null===e||isNaN(e))throw new E.a("year is required and must be a number.");return e%4==0&&e%100!=0||e%400==0};var At=function(e,t){this.julianDate=e,this.offset=t},Rt=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),Nt=Object.freeze({UTC:0,TAI:1}),Pt=new It,Dt=[31,28,31,30,31,30,31,31,30,31,30,31];function kt(e,t){return $t.compare(e.julianDate,t.julianDate)}var Lt=new At;function zt(e){Lt.julianDate=e;var t=$t.leapSeconds,n=St(t,Lt,kt);n<0&&(n=~n),n>=t.length&&(n=t.length-1);var r=t[n].offset;n>0&&($t.secondsDifference(t[n].julianDate,e)>r&&(r=t[--n].offset));$t.addSeconds(e,r,e)}function qt(e,t){Lt.julianDate=e;var n=$t.leapSeconds,r=St(n,Lt,kt);if(r<0&&(r=~r),0===r)return $t.addSeconds(e,-n[0].offset,t);if(r>=n.length)return $t.addSeconds(e,-n[r-1].offset,t);var i=$t.secondsDifference(n[r].julianDate,e);return 0===i?$t.addSeconds(e,-n[r].offset,t):i<=1?void 0:$t.addSeconds(e,-n[--r].offset,t)}function Bt(e,t,n){var r=t/Rt.SECONDS_PER_DAY|0;return e+=r,(t-=Rt.SECONDS_PER_DAY*r)<0&&(e--,t+=Rt.SECONDS_PER_DAY),n.dayNumber=e,n.secondsOfDay=t,n}function Ut(e,t,n,r,i,a,o){var s=(t-14)/12|0,u=e+4800+s,l=(1461*u/4|0)+(367*(t-2-12*s)/12|0)-(3*((u+100)/100|0)/4|0)+n-32075;(r-=12)<0&&(r+=24);var c=a+(r*Rt.SECONDS_PER_HOUR+i*Rt.SECONDS_PER_MINUTE+o*Rt.SECONDS_PER_MILLISECOND);return c>=43200&&(l-=1),[l,c]}var Ft=/^(\d{4})$/,Vt=/^(\d{4})-(\d{2})$/,Wt=/^(\d{4})-?(\d{3})$/,Zt=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,Ht=/^(\d{4})-?(\d{2})-?(\d{2})$/,Gt=/([Z+\-])?(\d{2})?:?(\d{2})?$/,Yt=/^(\d{2})(\.\d+)?/.source+Gt.source,Xt=/^(\d{2}):?(\d{2})(\.\d+)?/.source+Gt.source,Jt=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+Gt.source,Kt="Invalid ISO 8601 date.";function $t(e,t,n){this.dayNumber=void 0,this.secondsOfDay=void 0,e=Object(C.a)(e,0),t=Object(C.a)(t,0),n=Object(C.a)(n,Nt.UTC);var r=0|e;Bt(r,t+=(e-r)*Rt.SECONDS_PER_DAY,this),n===Nt.UTC&&zt(this)}$t.fromGregorianDate=function(e,t){if(!(e instanceof It))throw new E.a("date must be a valid GregorianDate.");var n=Ut(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return Object(o.a)(t)?(Bt(n[0],n[1],t),zt(t),t):new $t(n[0],n[1],Nt.UTC)},$t.fromDate=function(e,t){if(!(e instanceof Date)||isNaN(e.getTime()))throw new E.a("date must be a valid JavaScript Date.");var n=Ut(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return Object(o.a)(t)?(Bt(n[0],n[1],t),zt(t),t):new $t(n[0],n[1],Nt.UTC)},$t.fromIso8601=function(e,t){if("string"!=typeof e)throw new E.a(Kt);var n,r,i,a,s,u=(e=e.replace(",",".")).split("T"),l=1,c=1,f=0,h=0,d=0,p=0,m=u[0],y=u[1];if(!Object(o.a)(m))throw new E.a(Kt);if(null!==(u=m.match(Ht))){if((a=m.split("-").length-1)>0&&2!==a)throw new E.a(Kt);n=+u[1],l=+u[2],c=+u[3]}else if(null!==(u=m.match(Vt)))n=+u[1],l=+u[2];else if(null!==(u=m.match(Ft)))n=+u[1];else{var g;if(null!==(u=m.match(Wt))){if(n=+u[1],g=+u[2],i=Mt(n),g<1||i&&g>366||!i&&g>365)throw new E.a(Kt)}else{if(null===(u=m.match(Zt)))throw new E.a(Kt);n=+u[1];var b=+u[2],v=+u[3]||0;if((a=m.split("-").length-1)>0&&(!Object(o.a)(u[3])&&1!==a||Object(o.a)(u[3])&&2!==a))throw new E.a(Kt);g=7*b+v-new Date(Date.UTC(n,0,4)).getUTCDay()-3}(r=new Date(Date.UTC(n,0,1))).setUTCDate(g),l=r.getUTCMonth()+1,c=r.getUTCDate()}if(i=Mt(n),l<1||l>12||c<1||(2!==l||!i)&&c>Dt[l-1]||i&&2===l&&c>29)throw new E.a(Kt);if(Object(o.a)(y)){if(null!==(u=y.match(Jt))){if((a=y.split(":").length-1)>0&&2!==a&&3!==a)throw new E.a(Kt);f=+u[1],h=+u[2],d=+u[3],p=1e3*+(u[4]||0),s=5}else if(null!==(u=y.match(Xt))){if((a=y.split(":").length-1)>2)throw new E.a(Kt);f=+u[1],h=+u[2],d=60*+(u[3]||0),s=4}else{if(null===(u=y.match(Yt)))throw new E.a(Kt);f=+u[1],h=60*+(u[2]||0),s=3}if(h>=60||d>=61||f>24||24===f&&(h>0||d>0||p>0))throw new E.a(Kt);var w=u[s],O=+u[s+1],_=+(u[s+2]||0);switch(w){case"+":f-=O,h-=_;break;case"-":f+=O,h+=_;break;case"Z":break;default:h+=new Date(Date.UTC(n,l-1,c,f,h)).getTimezoneOffset()}}var C=60===d;for(C&&d--;h>=60;)h-=60,f++;for(;f>=24;)f-=24,c++;for(r=i&&2===l?29:Dt[l-1];c>r;)c-=r,++l>12&&(l-=12,n++),r=i&&2===l?29:Dt[l-1];for(;h<0;)h+=60,f--;for(;f<0;)f+=24,c--;for(;c<1;)--l<1&&(l+=12,n--),c+=r=i&&2===l?29:Dt[l-1];var x=Ut(n,l,c,f,h,d,p);return Object(o.a)(t)?(Bt(x[0],x[1],t),zt(t)):t=new $t(x[0],x[1],Nt.UTC),C&&$t.addSeconds(t,1,t),t},$t.now=function(e){return $t.fromDate(new Date,e)};var Qt=new $t(0,0,Nt.TAI);$t.toGregorianDate=function(e,t){if(!Object(o.a)(e))throw new E.a("julianDate is required.");var n=!1,r=qt(e,Qt);Object(o.a)(r)||($t.addSeconds(e,-1,Qt),r=qt(Qt,Qt),n=!0);var i=r.dayNumber,a=r.secondsOfDay;a>=43200&&(i+=1);var s=i+68569|0,u=4*s/146097|0,l=4e3*((s=s-((146097*u+3)/4|0)|0)+1)/1461001|0,c=80*(s=s-(1461*l/4|0)+31|0)/2447|0,f=s-(2447*c/80|0)|0,h=c+2-12*(s=c/11|0)|0,d=100*(u-49)+l+s|0,p=a/Rt.SECONDS_PER_HOUR|0,m=a-p*Rt.SECONDS_PER_HOUR,y=m/Rt.SECONDS_PER_MINUTE|0,g=0|(m-=y*Rt.SECONDS_PER_MINUTE),b=(m-g)/Rt.SECONDS_PER_MILLISECOND;return(p+=12)>23&&(p-=24),n&&(g+=1),Object(o.a)(t)?(t.year=d,t.month=h,t.day=f,t.hour=p,t.minute=y,t.second=g,t.millisecond=b,t.isLeapSecond=n,t):new It(d,h,f,p,y,g,b,n)},$t.toDate=function(e){if(!Object(o.a)(e))throw new E.a("julianDate is required.");var t=$t.toGregorianDate(e,Pt),n=t.second;return t.isLeapSecond&&(n-=1),new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,n,t.millisecond))},$t.toIso8601=function(e,t){if(!Object(o.a)(e))throw new E.a("julianDate is required.");var n,r=$t.toGregorianDate(e,Pt),i=r.year,a=r.month,s=r.day,u=r.hour,l=r.minute,c=r.second,f=r.millisecond;return 1e4===i&&1===a&&1===s&&0===u&&0===l&&0===c&&0===f&&(i=9999,a=12,s=31,u=24),Object(o.a)(t)||0===f?Object(o.a)(t)&&0!==t?(n=(.01*f).toFixed(t).replace(".","").slice(0,t),Tt("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",i,a,s,u,l,c,n)):Tt("%04d-%02d-%02dT%02d:%02d:%02dZ",i,a,s,u,l,c):(n=(.01*f).toString().replace(".",""),Tt("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",i,a,s,u,l,c,n))},$t.clone=function(e,t){if(Object(o.a)(e))return Object(o.a)(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new $t(e.dayNumber,e.secondsOfDay,Nt.TAI)},$t.compare=function(e,t){if(!Object(o.a)(e))throw new E.a("left is required.");if(!Object(o.a)(t))throw new E.a("right is required.");var n=e.dayNumber-t.dayNumber;return 0!==n?n:e.secondsOfDay-t.secondsOfDay},$t.equals=function(e,t){return e===t||Object(o.a)(e)&&Object(o.a)(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},$t.equalsEpsilon=function(e,t,n){return n=Object(C.a)(n,0),e===t||Object(o.a)(e)&&Object(o.a)(t)&&Math.abs($t.secondsDifference(e,t))<=n},$t.totalDays=function(e){if(!Object(o.a)(e))throw new E.a("julianDate is required.");return e.dayNumber+e.secondsOfDay/Rt.SECONDS_PER_DAY},$t.secondsDifference=function(e,t){if(!Object(o.a)(e))throw new E.a("left is required.");if(!Object(o.a)(t))throw new E.a("right is required.");return(e.dayNumber-t.dayNumber)*Rt.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},$t.daysDifference=function(e,t){if(!Object(o.a)(e))throw new E.a("left is required.");if(!Object(o.a)(t))throw new E.a("right is required.");return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/Rt.SECONDS_PER_DAY},$t.computeTaiMinusUtc=function(e){Lt.julianDate=e;var t=$t.leapSeconds,n=St(t,Lt,kt);return n<0&&(n=~n,--n<0&&(n=0)),t[n].offset},$t.addSeconds=function(e,t,n){if(!Object(o.a)(e))throw new E.a("julianDate is required.");if(!Object(o.a)(t))throw new E.a("seconds is required.");if(!Object(o.a)(n))throw new E.a("result is required.");return Bt(e.dayNumber,e.secondsOfDay+t,n)},$t.addMinutes=function(e,t,n){if(!Object(o.a)(e))throw new E.a("julianDate is required.");if(!Object(o.a)(t))throw new E.a("minutes is required.");if(!Object(o.a)(n))throw new E.a("result is required.");var r=e.secondsOfDay+t*Rt.SECONDS_PER_MINUTE;return Bt(e.dayNumber,r,n)},$t.addHours=function(e,t,n){if(!Object(o.a)(e))throw new E.a("julianDate is required.");if(!Object(o.a)(t))throw new E.a("hours is required.");if(!Object(o.a)(n))throw new E.a("result is required.");var r=e.secondsOfDay+t*Rt.SECONDS_PER_HOUR;return Bt(e.dayNumber,r,n)},$t.addDays=function(e,t,n){if(!Object(o.a)(e))throw new E.a("julianDate is required.");if(!Object(o.a)(t))throw new E.a("days is required.");if(!Object(o.a)(n))throw new E.a("result is required.");return Bt(e.dayNumber+t,e.secondsOfDay,n)},$t.lessThan=function(e,t){return $t.compare(e,t)<0},$t.lessThanOrEquals=function(e,t){return $t.compare(e,t)<=0},$t.greaterThan=function(e,t){return $t.compare(e,t)>0},$t.greaterThanOrEquals=function(e,t){return $t.compare(e,t)>=0},$t.prototype.clone=function(e){return $t.clone(this,e)},$t.prototype.equals=function(e){return $t.equals(this,e)},$t.prototype.equalsEpsilon=function(e,t){return $t.equalsEpsilon(this,e,t)},$t.prototype.toString=function(){return $t.toIso8601(this)},$t.leapSeconds=[new At(new $t(2441317,43210,Nt.TAI),10),new At(new $t(2441499,43211,Nt.TAI),11),new At(new $t(2441683,43212,Nt.TAI),12),new At(new $t(2442048,43213,Nt.TAI),13),new At(new $t(2442413,43214,Nt.TAI),14),new At(new $t(2442778,43215,Nt.TAI),15),new At(new $t(2443144,43216,Nt.TAI),16),new At(new $t(2443509,43217,Nt.TAI),17),new At(new $t(2443874,43218,Nt.TAI),18),new At(new $t(2444239,43219,Nt.TAI),19),new At(new $t(2444786,43220,Nt.TAI),20),new At(new $t(2445151,43221,Nt.TAI),21),new At(new $t(2445516,43222,Nt.TAI),22),new At(new $t(2446247,43223,Nt.TAI),23),new At(new $t(2447161,43224,Nt.TAI),24),new At(new $t(2447892,43225,Nt.TAI),25),new At(new $t(2448257,43226,Nt.TAI),26),new At(new $t(2448804,43227,Nt.TAI),27),new At(new $t(2449169,43228,Nt.TAI),28),new At(new $t(2449534,43229,Nt.TAI),29),new At(new $t(2450083,43230,Nt.TAI),30),new At(new $t(2450630,43231,Nt.TAI),31),new At(new $t(2451179,43232,Nt.TAI),32),new At(new $t(2453736,43233,Nt.TAI),33),new At(new $t(2454832,43234,Nt.TAI),34),new At(new $t(2456109,43235,Nt.TAI),35),new At(new $t(2457204,43236,Nt.TAI),36),new At(new $t(2457754,43237,Nt.TAI),37)];var en=$t,tn=n(15);function nn(e){if(e=Object(C.a)(e,C.a.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=Object(C.a)(e.addNewLeapSeconds,!0),Object(o.a)(e.data))an(this,e.data);else if(Object(o.a)(e.url)){var t=tn.a.createIfNeeded(e.url),n=this;this._downloadPromise=t.fetchJson().then(function(e){an(n,e)}).otherwise(function(){n._dataError="An error occurred while retrieving the EOP data from the URL "+t.url+"."})}else an(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function rn(e,t){return en.compare(e.julianDate,t)}function an(e,t){if(Object(o.a)(t.columnNames))if(Object(o.a)(t.samples)){var n=t.columnNames.indexOf("modifiedJulianDateUtc"),r=t.columnNames.indexOf("xPoleWanderRadians"),i=t.columnNames.indexOf("yPoleWanderRadians"),a=t.columnNames.indexOf("ut1MinusUtcSeconds"),s=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),u=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),l=t.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||r<0||i<0||a<0||s<0||u<0||l<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var c,f=e._samples=t.samples,h=e._dates=[];e._dateColumn=n,e._xPoleWanderRadiansColumn=r,e._yPoleWanderRadiansColumn=i,e._ut1MinusUtcSecondsColumn=a,e._xCelestialPoleOffsetRadiansColumn=s,e._yCelestialPoleOffsetRadiansColumn=u,e._taiMinusUtcSecondsColumn=l,e._columnCount=t.columnNames.length,e._lastIndex=void 0;for(var d=e._addNewLeapSeconds,p=0,m=f.length;p<m;p+=e._columnCount){var y=f[p+n],g=f[p+l],b=y+Rt.MODIFIED_JULIAN_DATE_DIFFERENCE,v=new en(b,g,Nt.TAI);if(h.push(v),d){if(g!==c&&Object(o.a)(c)){var w=en.leapSeconds,O=St(w,v,rn);if(O<0){var _=new At(v,g);w.splice(~O,0,_)}}c=g}}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function on(e,t,n,r,i){var a=n*r;i.xPoleWander=t[a+e._xPoleWanderRadiansColumn],i.yPoleWander=t[a+e._yPoleWanderRadiansColumn],i.xPoleOffset=t[a+e._xCelestialPoleOffsetRadiansColumn],i.yPoleOffset=t[a+e._yCelestialPoleOffsetRadiansColumn],i.ut1MinusUtc=t[a+e._ut1MinusUtcSecondsColumn]}function sn(e,t,n){return t+e*(n-t)}function un(e,t,n,r,i,a,o){var s=e._columnCount;if(a>t.length-1)return o.xPoleWander=0,o.yPoleWander=0,o.xPoleOffset=0,o.yPoleOffset=0,o.ut1MinusUtc=0,o;var u=t[i],l=t[a];if(u.equals(l)||r.equals(u))return on(e,n,i,s,o),o;if(r.equals(l))return on(e,n,a,s,o),o;var c=en.secondsDifference(r,u)/en.secondsDifference(l,u),f=i*s,h=a*s,d=n[f+e._ut1MinusUtcSecondsColumn],p=n[h+e._ut1MinusUtcSecondsColumn],m=p-d;if(m>.5||m<-.5){var y=n[f+e._taiMinusUtcSecondsColumn],g=n[h+e._taiMinusUtcSecondsColumn];y!==g&&(l.equals(r)?d=p:p-=g-y)}return o.xPoleWander=sn(c,n[f+e._xPoleWanderRadiansColumn],n[h+e._xPoleWanderRadiansColumn]),o.yPoleWander=sn(c,n[f+e._yPoleWanderRadiansColumn],n[h+e._yPoleWanderRadiansColumn]),o.xPoleOffset=sn(c,n[f+e._xCelestialPoleOffsetRadiansColumn],n[h+e._xCelestialPoleOffsetRadiansColumn]),o.yPoleOffset=sn(c,n[f+e._yCelestialPoleOffsetRadiansColumn],n[h+e._yCelestialPoleOffsetRadiansColumn]),o.ut1MinusUtc=sn(c,d,p),o}nn.NONE=Object.freeze({getPromiseToLoad:function(){return xt.a.resolve()},compute:function(e,t){return Object(o.a)(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new jt(0,0,0,0,0),t}}),nn.prototype.getPromiseToLoad=function(){return Object(xt.a)(this._downloadPromise)},nn.prototype.compute=function(e,t){if(Object(o.a)(this._samples)){if(Object(o.a)(t)||(t=new jt(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;var n=this._dates,r=this._lastIndex,i=0,a=0;if(Object(o.a)(r)){var s=n[r],u=n[r+1],l=en.lessThanOrEquals(s,e),c=!Object(o.a)(u),f=c||en.greaterThanOrEquals(u,e);if(l&&f)return i=r,!c&&u.equals(e)&&++i,a=i+1,un(this,n,this._samples,e,i,a,t),t}var h=St(n,e,en.compare,this._dateColumn);return h>=0?(h<n.length-1&&n[h+1].equals(e)&&++h,i=h,a=h):(i=(a=~h)-1)<0&&(i=0),this._lastIndex=i,un(this,n,this._samples,e,i,a,t),t}if(Object(o.a)(this._dataError))throw new We.a(this._dataError)};var ln=nn;function cn(e,t,n){this.heading=Object(C.a)(e,0),this.pitch=Object(C.a)(t,0),this.roll=Object(C.a)(n,0)}cn.fromQuaternion=function(e,t){if(!Object(o.a)(e))throw new E.a("quaternion is required");Object(o.a)(t)||(t=new cn);var n=2*(e.w*e.y-e.z*e.x),r=1-2*(e.x*e.x+e.y*e.y),i=2*(e.w*e.x+e.y*e.z),a=1-2*(e.y*e.y+e.z*e.z),s=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(s,a),t.roll=Math.atan2(i,r),t.pitch=-M.asinClamped(n),t},cn.fromDegrees=function(e,t,n,r){if(!Object(o.a)(e))throw new E.a("heading is required");if(!Object(o.a)(t))throw new E.a("pitch is required");if(!Object(o.a)(n))throw new E.a("roll is required");return Object(o.a)(r)||(r=new cn),r.heading=e*M.RADIANS_PER_DEGREE,r.pitch=t*M.RADIANS_PER_DEGREE,r.roll=n*M.RADIANS_PER_DEGREE,r},cn.clone=function(e,t){if(Object(o.a)(e))return Object(o.a)(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new cn(e.heading,e.pitch,e.roll)},cn.equals=function(e,t){return e===t||Object(o.a)(e)&&Object(o.a)(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},cn.equalsEpsilon=function(e,t,n,r){return e===t||Object(o.a)(e)&&Object(o.a)(t)&&M.equalsEpsilon(e.heading,t.heading,n,r)&&M.equalsEpsilon(e.pitch,t.pitch,n,r)&&M.equalsEpsilon(e.roll,t.roll,n,r)},cn.prototype.clone=function(e){return cn.clone(this,e)},cn.prototype.equals=function(e){return cn.equals(this,e)},cn.prototype.equalsEpsilon=function(e,t,n){return cn.equalsEpsilon(this,e,t,n)},cn.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var fn,hn,dn,pn=cn,mn=(n(32),/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/);function yn(e){return"undefined"==typeof document?e:(Object(o.a)(fn)||(fn=document.createElement("a")),fn.href=e,fn.href=fn.href,fn.href)}function gn(){if(Object(o.a)(hn))return hn;var e;if(e="",!Object(o.a)(e))throw new E.a("Unable to determine Cesium base URL automatically, try defining a global variable called CESIUM_BASE_URL.");return(hn=new tn.a({url:yn(e)})).appendForwardSlash(),hn}function bn(e){return yn(n(47).toUrl("../"+e))}function vn(e){return gn().getDerivedResource({url:e}).url}function wn(e){return Object(o.a)(dn)||(dn="object"==typeof define&&Object(o.a)(n(48))&&!n(48).toUrlUndefined&&Object(o.a)(n(47).toUrl)?bn:vn),dn(e)}wn._cesiumScriptRegex=mn,wn._buildModuleUrlFromBaseUrl=vn,wn._clearBaseResource=function(){hn=void 0},wn.setBaseUrl=function(e){hn=tn.a.DEFAULT.getDerivedResource({url:e})},wn.getCesiumBaseUrl=gn;var On=wn;var _n=function(e,t,n){this.x=e,this.y=t,this.s=n};function Cn(e){e=Object(C.a)(e,C.a.EMPTY_OBJECT),this._xysFileUrlTemplate=tn.a.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=Object(C.a)(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=Object(C.a)(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new en(this._sampleZeroJulianEphemerisDate,0,Nt.TAI),this._stepSizeDays=Object(C.a)(e.stepSizeDays,1),this._samplesPerXysFile=Object(C.a)(e.samplesPerXysFile,1e3),this._totalSamples=Object(C.a)(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var t=this._interpolationOrder,n=this._denominators=new Array(t+1),r=this._xTable=new Array(t+1),i=Math.pow(this._stepSizeDays,t),a=0;a<=t;++a){n[a]=i,r[a]=a*this._stepSizeDays;for(var o=0;o<=t;++o)o!==a&&(n[a]*=a-o);n[a]=1/n[a]}this._work=new Array(t+1),this._coef=new Array(t+1)}var En=new en(0,0,Nt.TAI);function xn(e,t,n){var r=En;return r.dayNumber=t,r.secondsOfDay=n,en.daysDifference(r,e._sampleZeroDateTT)}function Sn(e,t){if(e._chunkDownloadsInProgress[t])return e._chunkDownloadsInProgress[t];var n,r=xt.a.defer();e._chunkDownloadsInProgress[t]=r;var i=e._xysFileUrlTemplate;return n=Object(o.a)(i)?i.getDerivedResource({templateValues:{0:t}}):new tn.a({url:On("Assets/IAU2006_XYS/IAU2006_XYS_"+t+".json")}),Object(xt.a)(n.fetchJson(),function(n){e._chunkDownloadsInProgress[t]=!1;for(var i=e._samples,a=n.samples,o=t*e._samplesPerXysFile*3,s=0,u=a.length;s<u;++s)i[o+s]=a[s];r.resolve()}),r.promise}Cn.prototype.preload=function(e,t,n,r){var i=xn(this,e,t),a=xn(this,n,r),o=i/this._stepSizeDays-this._interpolationOrder/2|0;o<0&&(o=0);var s=a/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;s>=this._totalSamples&&(s=this._totalSamples-1);for(var u=o/this._samplesPerXysFile|0,l=s/this._samplesPerXysFile|0,c=[],f=u;f<=l;++f)c.push(Sn(this,f));return xt.a.all(c)},Cn.prototype.computeXysRadians=function(e,t,n){var r=xn(this,e,t);if(!(r<0)){var i=r/this._stepSizeDays|0;if(!(i>=this._totalSamples)){var a=this._interpolationOrder,s=i-(a/2|0);s<0&&(s=0);var u=s+a;u>=this._totalSamples&&(s=(u=this._totalSamples-1)-a)<0&&(s=0);var l=!1,c=this._samples;if(Object(o.a)(c[3*s])||(Sn(this,s/this._samplesPerXysFile|0),l=!0),Object(o.a)(c[3*u])||(Sn(this,u/this._samplesPerXysFile|0),l=!0),!l){Object(o.a)(n)?(n.x=0,n.y=0,n.s=0):n=new _n(0,0,0);var f,h,d=r-s*this._stepSizeDays,p=this._work,m=this._denominators,y=this._coef,g=this._xTable;for(f=0;f<=a;++f)p[f]=d-g[f];for(f=0;f<=a;++f){for(y[f]=1,h=0;h<=a;++h)h!==f&&(y[f]*=p[h]);y[f]*=m[f];var b=3*(s+f);n.x+=y[f]*c[b++],n.y+=y[f]*c[b++],n.s+=y[f]*c[b]}return n}}}};var jn,Tn=Cn,In={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},Mn={};Object.defineProperties(Mn,{element:{get:function(){if(Mn.supportsFullscreen())return document[In.fullscreenElement]}},changeEventName:{get:function(){if(Mn.supportsFullscreen())return In.fullscreenchange}},errorEventName:{get:function(){if(Mn.supportsFullscreen())return In.fullscreenerror}},enabled:{get:function(){if(Mn.supportsFullscreen())return document[In.fullscreenEnabled]}},fullscreen:{get:function(){if(Mn.supportsFullscreen())return null!==Mn.element}}}),Mn.supportsFullscreen=function(){if(Object(o.a)(jn))return jn;jn=!1;var e=document.body;if("function"==typeof e.requestFullscreen)return In.requestFullscreen="requestFullscreen",In.exitFullscreen="exitFullscreen",In.fullscreenEnabled="fullscreenEnabled",In.fullscreenElement="fullscreenElement",In.fullscreenchange="fullscreenchange",In.fullscreenerror="fullscreenerror",jn=!0;for(var t,n=["webkit","moz","o","ms","khtml"],r=0,i=n.length;r<i;++r){var a=n[r];"function"==typeof e[t=a+"RequestFullscreen"]?(In.requestFullscreen=t,jn=!0):"function"==typeof e[t=a+"RequestFullScreen"]&&(In.requestFullscreen=t,jn=!0),t=a+"ExitFullscreen","function"==typeof document[t]?In.exitFullscreen=t:(t=a+"CancelFullScreen","function"==typeof document[t]&&(In.exitFullscreen=t)),t=a+"FullscreenEnabled",void 0!==document[t]?In.fullscreenEnabled=t:(t=a+"FullScreenEnabled",void 0!==document[t]&&(In.fullscreenEnabled=t)),t=a+"FullscreenElement",void 0!==document[t]?In.fullscreenElement=t:(t=a+"FullScreenElement",void 0!==document[t]&&(In.fullscreenElement=t)),t=a+"fullscreenchange",void 0!==document["on"+t]&&("ms"===a&&(t="MSFullscreenChange"),In.fullscreenchange=t),t=a+"fullscreenerror",void 0!==document["on"+t]&&("ms"===a&&(t="MSFullscreenError"),In.fullscreenerror=t)}return jn},Mn.requestFullscreen=function(e,t){Mn.supportsFullscreen()&&e[In.requestFullscreen]({vrDisplay:t})},Mn.exitFullscreen=function(){Mn.supportsFullscreen()&&document[In.exitFullscreen]()},Mn._names=In;var An,Rn,Nn,Pn,Dn,kn,Ln,zn,qn,Bn,Un,Fn,Vn,Wn,Zn,Hn,Gn,Yn=Mn;function Xn(e){for(var t=e.split("."),n=0,r=t.length;n<r;++n)t[n]=parseInt(t[n],10);return t}function Jn(){if(!Object(o.a)(Rn)&&(Rn=!1,!er())){var e=/ Chrome\/([\.0-9]+)/.exec(An.userAgent);null!==e&&(Rn=!0,Nn=Xn(e[1]))}return Rn}function Kn(){if(!Object(o.a)(Pn)&&(Pn=!1,!Jn()&&!er()&&/ Safari\/[\.0-9]+/.test(An.userAgent))){var e=/ Version\/([\.0-9]+)/.exec(An.userAgent);null!==e&&(Pn=!0,Dn=Xn(e[1]))}return Pn}function $n(){if(!Object(o.a)(kn)){kn=!1;var e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(An.userAgent);null!==e&&(kn=!0,(Ln=Xn(e[1])).isNightly=!!e[2])}return kn}function Qn(){var e;Object(o.a)(zn)||(zn=!1,"Microsoft Internet Explorer"===An.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(An.userAgent))&&(zn=!0,qn=Xn(e[1])):"Netscape"===An.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(An.userAgent))&&(zn=!0,qn=Xn(e[1])));return zn}function er(){if(!Object(o.a)(Bn)){Bn=!1;var e=/ Edge\/([\.0-9]+)/.exec(An.userAgent);null!==e&&(Bn=!0,Un=Xn(e[1]))}return Bn}function tr(){if(!Object(o.a)(Fn)){Fn=!1;var e=/Firefox\/([\.0-9]+)/.exec(An.userAgent);null!==e&&(Fn=!0,Vn=Xn(e[1]))}return Fn}function nr(){if(!Object(o.a)(Gn)){var e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");var t=e.style.imageRendering;(Gn=Object(o.a)(t)&&""!==t)&&(Hn=t)}return Gn}function rr(){if(!rr.initialized)throw new E.a("You must call FeatureDetection.supportsWebP.initialize and wait for the promise to resolve before calling FeatureDetection.supportsWebP");return rr._result}An="undefined"!=typeof navigator?navigator:{},rr._promise=void 0,rr._result=void 0,rr.initialize=function(){if(Object(o.a)(rr._promise))return rr._promise;var e=xt.a.defer();if(rr._promise=e.promise,er())return rr._result=!1,e.resolve(rr._result),e.promise;var t=new Image;return t.onload=function(){rr._result=t.width>0&&t.height>0,e.resolve(rr._result)},t.onerror=function(){rr._result=!1,e.resolve(rr._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.promise},Object.defineProperties(rr,{initialized:{get:function(){return Object(o.a)(rr._result)}}});var ir=[];"undefined"!=typeof ArrayBuffer&&(ir.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&ir.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&ir.push(Uint8ClampedArray));var ar={isChrome:Jn,chromeVersion:function(){return Jn()&&Nn},isSafari:Kn,safariVersion:function(){return Kn()&&Dn},isWebkit:$n,webkitVersion:function(){return $n()&&Ln},isInternetExplorer:Qn,internetExplorerVersion:function(){return Qn()&&qn},isEdge:er,edgeVersion:function(){return er()&&Un},isFirefox:tr,firefoxVersion:function(){return tr()&&Vn},isWindows:function(){return Object(o.a)(Wn)||(Wn=/Windows/i.test(An.appVersion)),Wn},hardwareConcurrency:Object(C.a)(An.hardwareConcurrency,3),supportsPointerEvents:function(){return Object(o.a)(Zn)||(Zn=!tr()&&"undefined"!=typeof PointerEvent&&(!Object(o.a)(An.pointerEnabled)||An.pointerEnabled)),Zn},supportsImageRenderingPixelated:nr,supportsWebP:rr,imageRenderingValue:function(){return nr()?Hn:void 0},typedArrayTypes:ir,supportsFullscreen:function(){return Yn.supportsFullscreen()},supportsTypedArrays:function(){return"undefined"!=typeof ArrayBuffer},supportsWebWorkers:function(){return"undefined"!=typeof Worker},supportsWebAssembly:function(){return"undefined"!=typeof WebAssembly&&!ar.isEdge()}},or=ar;function sr(e,t,n,r){this.x=Object(C.a)(e,0),this.y=Object(C.a)(t,0),this.z=Object(C.a)(n,0),this.w=Object(C.a)(r,0)}var ur=new G;sr.fromAxisAngle=function(e,t,n){_.a.typeOf.object("axis",e),_.a.typeOf.number("angle",t);var r=t/2,i=Math.sin(r),a=(ur=G.normalize(e,ur)).x*i,s=ur.y*i,u=ur.z*i,l=Math.cos(r);return Object(o.a)(n)?(n.x=a,n.y=s,n.z=u,n.w=l,n):new sr(a,s,u,l)};var lr=[1,2,0],cr=new Array(3);sr.fromRotationMatrix=function(e,t){var n,r,i,a,s;_.a.typeOf.object("matrix",e);var u=e[Ve.COLUMN0ROW0],l=e[Ve.COLUMN1ROW1],c=e[Ve.COLUMN2ROW2],f=u+l+c;if(f>0)s=.5*(n=Math.sqrt(f+1)),n=.5/n,r=(e[Ve.COLUMN1ROW2]-e[Ve.COLUMN2ROW1])*n,i=(e[Ve.COLUMN2ROW0]-e[Ve.COLUMN0ROW2])*n,a=(e[Ve.COLUMN0ROW1]-e[Ve.COLUMN1ROW0])*n;else{var h=0;l>u&&(h=1),c>u&&c>l&&(h=2);var d=lr[h],p=lr[d];n=Math.sqrt(e[Ve.getElementIndex(h,h)]-e[Ve.getElementIndex(d,d)]-e[Ve.getElementIndex(p,p)]+1);var m=cr;m[h]=.5*n,n=.5/n,s=(e[Ve.getElementIndex(p,d)]-e[Ve.getElementIndex(d,p)])*n,m[d]=(e[Ve.getElementIndex(d,h)]+e[Ve.getElementIndex(h,d)])*n,m[p]=(e[Ve.getElementIndex(p,h)]+e[Ve.getElementIndex(h,p)])*n,r=-m[0],i=-m[1],a=-m[2]}return Object(o.a)(t)?(t.x=r,t.y=i,t.z=a,t.w=s,t):new sr(r,i,a,s)};var fr=new sr,hr=new sr,dr=new sr,pr=new sr;sr.fromHeadingPitchRoll=function(e,t){return _.a.typeOf.object("headingPitchRoll",e),pr=sr.fromAxisAngle(G.UNIT_X,e.roll,fr),dr=sr.fromAxisAngle(G.UNIT_Y,-e.pitch,t),t=sr.multiply(dr,pr,dr),hr=sr.fromAxisAngle(G.UNIT_Z,-e.heading,fr),sr.multiply(hr,t,t)};var mr=new G,yr=new G,gr=new sr,br=new sr,vr=new sr;sr.packedLength=4,sr.pack=function(e,t,n){return _.a.typeOf.object("value",e),_.a.defined("array",t),n=Object(C.a)(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t},sr.unpack=function(e,t,n){return _.a.defined("array",e),t=Object(C.a)(t,0),Object(o.a)(n)||(n=new sr),n.x=e[t],n.y=e[t+1],n.z=e[t+2],n.w=e[t+3],n},sr.packedInterpolationLength=3,sr.convertPackedArrayForInterpolation=function(e,t,n,r){sr.unpack(e,4*n,vr),sr.conjugate(vr,vr);for(var i=0,a=n-t+1;i<a;i++){var s=3*i;sr.unpack(e,4*(t+i),gr),sr.multiply(gr,vr,gr),gr.w<0&&sr.negate(gr,gr),sr.computeAxis(gr,mr);var u=sr.computeAngle(gr);Object(o.a)(r)||(r=[]),r[s]=mr.x*u,r[s+1]=mr.y*u,r[s+2]=mr.z*u}},sr.unpackInterpolationResult=function(e,t,n,r,i){Object(o.a)(i)||(i=new sr),G.fromArray(e,0,yr);var a=G.magnitude(yr);return sr.unpack(t,4*r,br),0===a?sr.clone(sr.IDENTITY,gr):sr.fromAxisAngle(yr,a,gr),sr.multiply(gr,br,i)},sr.clone=function(e,t){if(Object(o.a)(e))return Object(o.a)(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new sr(e.x,e.y,e.z,e.w)},sr.conjugate=function(e,t){return _.a.typeOf.object("quaternion",e),_.a.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},sr.magnitudeSquared=function(e){return _.a.typeOf.object("quaternion",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},sr.magnitude=function(e){return Math.sqrt(sr.magnitudeSquared(e))},sr.normalize=function(e,t){_.a.typeOf.object("result",t);var n=1/sr.magnitude(e),r=e.x*n,i=e.y*n,a=e.z*n,o=e.w*n;return t.x=r,t.y=i,t.z=a,t.w=o,t},sr.inverse=function(e,t){_.a.typeOf.object("result",t);var n=sr.magnitudeSquared(e);return t=sr.conjugate(e,t),sr.multiplyByScalar(t,1/n,t)},sr.add=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n},sr.subtract=function(e,t,n){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n),n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n},sr.negate=function(e,t){return _.a.typeOf.object("quaternion",e),_.a.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},sr.dot=function(e,t){return _.a.typeOf.object("left",e),_.a.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},sr.multiply=function(e,t,n){_.a.typeOf.object("left",e),_.a.typeOf.object("right",t),_.a.typeOf.object("result",n);var r=e.x,i=e.y,a=e.z,o=e.w,s=t.x,u=t.y,l=t.z,c=t.w,f=o*s+r*c+i*l-a*u,h=o*u-r*l+i*c+a*s,d=o*l+r*u-i*s+a*c,p=o*c-r*s-i*u-a*l;return n.x=f,n.y=h,n.z=d,n.w=p,n},sr.multiplyByScalar=function(e,t,n){return _.a.typeOf.object("quaternion",e),_.a.typeOf.number("scalar",t),_.a.typeOf.object("result",n),n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n},sr.divideByScalar=function(e,t,n){return _.a.typeOf.object("quaternion",e),_.a.typeOf.number("scalar",t),_.a.typeOf.object("result",n),n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n},sr.computeAxis=function(e,t){_.a.typeOf.object("quaternion",e),_.a.typeOf.object("result",t);var n=e.w;if(Math.abs(n-1)<M.EPSILON6)return t.x=t.y=t.z=0,t;var r=1/Math.sqrt(1-n*n);return t.x=e.x*r,t.y=e.y*r,t.z=e.z*r,t},sr.computeAngle=function(e){return _.a.typeOf.object("quaternion",e),Math.abs(e.w-1)<M.EPSILON6?0:2*Math.acos(e.w)};var wr=new sr;sr.lerp=function(e,t,n,r){return _.a.typeOf.object("start",e),_.a.typeOf.object("end",t),_.a.typeOf.number("t",n),_.a.typeOf.object("result",r),wr=sr.multiplyByScalar(t,n,wr),r=sr.multiplyByScalar(e,1-n,r),sr.add(wr,r,r)};var Or=new sr,_r=new sr,Cr=new sr;sr.slerp=function(e,t,n,r){_.a.typeOf.object("start",e),_.a.typeOf.object("end",t),_.a.typeOf.number("t",n),_.a.typeOf.object("result",r);var i=sr.dot(e,t),a=t;if(i<0&&(i=-i,a=Or=sr.negate(t,Or)),1-i<M.EPSILON6)return sr.lerp(e,a,n,r);var o=Math.acos(i);return _r=sr.multiplyByScalar(e,Math.sin((1-n)*o),_r),Cr=sr.multiplyByScalar(a,Math.sin(n*o),Cr),r=sr.add(_r,Cr,r),sr.multiplyByScalar(r,1/Math.sin(o),r)},sr.log=function(e,t){_.a.typeOf.object("quaternion",e),_.a.typeOf.object("result",t);var n=M.acosClamped(e.w),r=0;return 0!==n&&(r=n/Math.sin(n)),G.multiplyByScalar(e,r,t)},sr.exp=function(e,t){_.a.typeOf.object("cartesian",e),_.a.typeOf.object("result",t);var n=G.magnitude(e),r=0;return 0!==n&&(r=Math.sin(n)/n),t.x=e.x*r,t.y=e.y*r,t.z=e.z*r,t.w=Math.cos(n),t};var Er=new G,xr=new G,Sr=new sr,jr=new sr;sr.computeInnerQuadrangle=function(e,t,n,r){_.a.typeOf.object("q0",e),_.a.typeOf.object("q1",t),_.a.typeOf.object("q2",n),_.a.typeOf.object("result",r);var i=sr.conjugate(t,Sr);sr.multiply(i,n,jr);var a=sr.log(jr,Er);sr.multiply(i,e,jr);var o=sr.log(jr,xr);return G.add(a,o,a),G.multiplyByScalar(a,.25,a),G.negate(a,a),sr.exp(a,Sr),sr.multiply(t,Sr,r)},sr.squad=function(e,t,n,r,i,a){_.a.typeOf.object("q0",e),_.a.typeOf.object("q1",t),_.a.typeOf.object("s0",n),_.a.typeOf.object("s1",r),_.a.typeOf.number("t",i),_.a.typeOf.object("result",a);var o=sr.slerp(e,t,i,Sr),s=sr.slerp(n,r,i,jr);return sr.slerp(o,s,2*i*(1-i),a)};for(var Tr=new sr,Ir=1.9011074535173003,Mr=or.supportsTypedArrays()?new Float32Array(8):[],Ar=or.supportsTypedArrays()?new Float32Array(8):[],Rr=or.supportsTypedArrays()?new Float32Array(8):[],Nr=or.supportsTypedArrays()?new Float32Array(8):[],Pr=0;Pr<7;++Pr){var Dr=Pr+1,kr=2*Dr+1;Mr[Pr]=1/(Dr*kr),Ar[Pr]=Dr/kr}Mr[7]=Ir/136,Ar[7]=8*Ir/17,sr.fastSlerp=function(e,t,n,r){_.a.typeOf.object("start",e),_.a.typeOf.object("end",t),_.a.typeOf.number("t",n),_.a.typeOf.object("result",r);var i,a=sr.dot(e,t);a>=0?i=1:(i=-1,a=-a);for(var o=a-1,s=1-n,u=n*n,l=s*s,c=7;c>=0;--c)Rr[c]=(Mr[c]*u-Ar[c])*o,Nr[c]=(Mr[c]*l-Ar[c])*o;var f=i*n*(1+Rr[0]*(1+Rr[1]*(1+Rr[2]*(1+Rr[3]*(1+Rr[4]*(1+Rr[5]*(1+Rr[6]*(1+Rr[7])))))))),h=s*(1+Nr[0]*(1+Nr[1]*(1+Nr[2]*(1+Nr[3]*(1+Nr[4]*(1+Nr[5]*(1+Nr[6]*(1+Nr[7])))))))),d=sr.multiplyByScalar(e,h,Tr);return sr.multiplyByScalar(t,f,r),sr.add(d,r,r)},sr.fastSquad=function(e,t,n,r,i,a){_.a.typeOf.object("q0",e),_.a.typeOf.object("q1",t),_.a.typeOf.object("s0",n),_.a.typeOf.object("s1",r),_.a.typeOf.number("t",i),_.a.typeOf.object("result",a);var o=sr.fastSlerp(e,t,i,Sr),s=sr.fastSlerp(n,r,i,jr);return sr.fastSlerp(o,s,2*i*(1-i),a)},sr.equals=function(e,t){return e===t||Object(o.a)(e)&&Object(o.a)(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},sr.equalsEpsilon=function(e,t,n){return n=Object(C.a)(n,0),e===t||Object(o.a)(e)&&Object(o.a)(t)&&Math.abs(e.x-t.x)<=n&&Math.abs(e.y-t.y)<=n&&Math.abs(e.z-t.z)<=n&&Math.abs(e.w-t.w)<=n},sr.ZERO=Object.freeze(new sr(0,0,0,0)),sr.IDENTITY=Object.freeze(new sr(0,0,0,1)),sr.prototype.clone=function(e){return sr.clone(this,e)},sr.prototype.equals=function(e){return sr.equals(this,e)},sr.prototype.equalsEpsilon=function(e,t){return sr.equalsEpsilon(this,e,t)},sr.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var Lr=sr,zr={},qr={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Br={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Ur={},Fr={east:new G,north:new G,up:new G,west:new G,south:new G,down:new G},Vr=new G,Wr=new G,Zr=new G;zr.localFrameToFixedFrameGenerator=function(e,t){if(!qr.hasOwnProperty(e)||!qr[e].hasOwnProperty(t))throw new E.a("firstAxis and secondAxis must be east, north, up, west, south or down.");var n,r=qr[e][t],i=e+t;return Object(o.a)(Ur[i])?n=Ur[i]:(n=function(n,i,a){if(!Object(o.a)(n))throw new E.a("origin is required.");if(Object(o.a)(a)||(a=new rt),G.equalsEpsilon(n,G.ZERO,M.EPSILON14))G.unpack(Br[e],0,Vr),G.unpack(Br[t],0,Wr),G.unpack(Br[r],0,Zr);else if(M.equalsEpsilon(n.x,0,M.EPSILON14)&&M.equalsEpsilon(n.y,0,M.EPSILON14)){var s=M.sign(n.z);G.unpack(Br[e],0,Vr),"east"!==e&&"west"!==e&&G.multiplyByScalar(Vr,s,Vr),G.unpack(Br[t],0,Wr),"east"!==t&&"west"!==t&&G.multiplyByScalar(Wr,s,Wr),G.unpack(Br[r],0,Zr),"east"!==r&&"west"!==r&&G.multiplyByScalar(Zr,s,Zr)}else{(i=Object(C.a)(i,me.WGS84)).geodeticSurfaceNormal(n,Fr.up);var u=Fr.up,l=Fr.east;l.x=-n.y,l.y=n.x,l.z=0,G.normalize(l,Fr.east),G.cross(u,l,Fr.north),G.multiplyByScalar(Fr.up,-1,Fr.down),G.multiplyByScalar(Fr.east,-1,Fr.west),G.multiplyByScalar(Fr.north,-1,Fr.south),Vr=Fr[e],Wr=Fr[t],Zr=Fr[r]}return a[0]=Vr.x,a[1]=Vr.y,a[2]=Vr.z,a[3]=0,a[4]=Wr.x,a[5]=Wr.y,a[6]=Wr.z,a[7]=0,a[8]=Zr.x,a[9]=Zr.y,a[10]=Zr.z,a[11]=0,a[12]=n.x,a[13]=n.y,a[14]=n.z,a[15]=1,a},Ur[i]=n),n},zr.eastNorthUpToFixedFrame=zr.localFrameToFixedFrameGenerator("east","north"),zr.northEastDownToFixedFrame=zr.localFrameToFixedFrameGenerator("north","east"),zr.northUpEastToFixedFrame=zr.localFrameToFixedFrameGenerator("north","up"),zr.northWestUpToFixedFrame=zr.localFrameToFixedFrameGenerator("north","west");var Hr=new Lr,Gr=new G(1,1,1),Yr=new rt;zr.headingPitchRollToFixedFrame=function(e,t,n,r,i){_.a.typeOf.object("HeadingPitchRoll",t),r=Object(C.a)(r,zr.eastNorthUpToFixedFrame);var a=Lr.fromHeadingPitchRoll(t,Hr),o=rt.fromTranslationQuaternionRotationScale(G.ZERO,a,Gr,Yr);return i=r(e,n,i),rt.multiply(i,o,i)};var Xr=new rt,Jr=new Ve;zr.headingPitchRollQuaternion=function(e,t,n,r,i){_.a.typeOf.object("HeadingPitchRoll",t);var a=zr.headingPitchRollToFixedFrame(e,t,n,r,Xr),o=rt.getMatrix3(a,Jr);return Lr.fromRotationMatrix(o,i)};var Kr=new G(1,1,1),$r=new G,Qr=new rt,ei=new rt,ti=new Ve,ni=new Lr;zr.fixedFrameToHeadingPitchRoll=function(e,t,n,r){_.a.defined("transform",e),t=Object(C.a)(t,me.WGS84),n=Object(C.a)(n,zr.eastNorthUpToFixedFrame),Object(o.a)(r)||(r=new pn);var i=rt.getTranslation(e,$r);if(G.equals(i,G.ZERO))return r.heading=0,r.pitch=0,r.roll=0,r;var a=rt.inverseTransformation(n(i,t,Qr),Qr),s=rt.setScale(e,Kr,ei);s=rt.setTranslation(s,G.ZERO,s),a=rt.multiply(a,s,a);var u=Lr.fromRotationMatrix(rt.getMatrix3(a,ti),ni);return u=Lr.normalize(u,u),pn.fromQuaternion(u,r)};var ri=M.TWO_PI/86400,ii=new en;zr.computeTemeToPseudoFixedMatrix=function(e,t){if(!Object(o.a)(e))throw new E.a("date is required.");var n,r=(ii=en.addSeconds(e,-en.computeTaiMinusUtc(e),ii)).dayNumber,i=ii.secondsOfDay,a=r-2451545,s=(24110.54841+(n=i>=43200?(a+.5)/Rt.DAYS_PER_JULIAN_CENTURY:(a-.5)/Rt.DAYS_PER_JULIAN_CENTURY)*(8640184.812866+n*(.093104+-62e-7*n)))*ri%M.TWO_PI+(72921158553e-15+1.1772758384668e-19*(r-2451545.5))*((i+.5*Rt.SECONDS_PER_DAY)%Rt.SECONDS_PER_DAY),u=Math.cos(s),l=Math.sin(s);return Object(o.a)(t)?(t[0]=u,t[1]=-l,t[2]=0,t[3]=l,t[4]=u,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new Ve(u,l,0,-l,u,0,0,0,1)},zr.iau2006XysData=new Tn,zr.earthOrientationParameters=ln.NONE;zr.preloadIcrfFixed=function(e){var t=e.start.dayNumber,n=e.start.secondsOfDay+32.184,r=e.stop.dayNumber,i=e.stop.secondsOfDay+32.184,a=zr.iau2006XysData.preload(t,n,r,i),o=zr.earthOrientationParameters.getPromiseToLoad();return xt.a.all([a,o])},zr.computeIcrfToFixedMatrix=function(e,t){if(!Object(o.a)(e))throw new E.a("date is required.");Object(o.a)(t)||(t=new Ve);var n=zr.computeFixedToIcrfMatrix(e,t);if(Object(o.a)(n))return Ve.transpose(n,t)};var ai=new _n(0,0,0),oi=new jt(0,0,0,0,0,0),si=new Ve,ui=new Ve;zr.computeFixedToIcrfMatrix=function(e,t){if(!Object(o.a)(e))throw new E.a("date is required.");Object(o.a)(t)||(t=new Ve);var n=zr.earthOrientationParameters.compute(e,oi);if(Object(o.a)(n)){var r=e.dayNumber,i=e.secondsOfDay+32.184,a=zr.iau2006XysData.computeXysRadians(r,i,ai);if(Object(o.a)(a)){var s=a.x+n.xPoleOffset,u=a.y+n.yPoleOffset,l=1/(1+Math.sqrt(1-s*s-u*u)),c=si;c[0]=1-l*s*s,c[3]=-l*s*u,c[6]=s,c[1]=-l*s*u,c[4]=1-l*u*u,c[7]=u,c[2]=-s,c[5]=-u,c[8]=1-l*(s*s+u*u);var f=Ve.fromRotationZ(-a.s,ui),h=Ve.multiply(c,f,si),d=e.dayNumber-2451545,p=(e.secondsOfDay-en.computeTaiMinusUtc(e)+n.ut1MinusUtc)/Rt.SECONDS_PER_DAY,m=.779057273264+p+.00273781191135448*(d+p);m=m%1*M.TWO_PI;var y=Ve.fromRotationZ(m,ui),g=Ve.multiply(h,y,si),b=Math.cos(n.xPoleWander),v=Math.cos(n.yPoleWander),w=Math.sin(n.xPoleWander),O=Math.sin(n.yPoleWander),_=r-2451545+i/Rt.SECONDS_PER_DAY,C=-47e-6*(_/=36525)*M.RADIANS_PER_DEGREE/3600,x=Math.cos(C),S=Math.sin(C),j=ui;return j[0]=b*x,j[1]=b*S,j[2]=w,j[3]=-v*S+O*w*x,j[4]=v*x+O*w*S,j[5]=-O*b,j[6]=-O*S-v*w*x,j[7]=O*x-v*w*S,j[8]=v*b,Ve.multiply(g,j,t)}}};var li=new Re;zr.pointToWindowCoordinates=function(e,t,n,r){return(r=zr.pointToGLWindowCoordinates(e,t,n,r)).y=2*t[5]-r.y,r},zr.pointToGLWindowCoordinates=function(e,t,n,r){if(!Object(o.a)(e))throw new E.a("modelViewProjectionMatrix is required.");if(!Object(o.a)(t))throw new E.a("viewportTransformation is required.");if(!Object(o.a)(n))throw new E.a("point is required.");Object(o.a)(r)||(r=new L);var i=li;return rt.multiplyByVector(e,Re.fromElements(n.x,n.y,n.z,1,i),i),Re.multiplyByScalar(i,1/i.w,i),rt.multiplyByVector(t,i,i),L.fromCartesian4(i,r)};var ci=new G,fi=new G,hi=new G;zr.rotationMatrixFromPositionVelocity=function(e,t,n,r){if(!Object(o.a)(e))throw new E.a("position is required.");if(!Object(o.a)(t))throw new E.a("velocity is required.");var i=Object(C.a)(n,me.WGS84).geodeticSurfaceNormal(e,ci),a=G.cross(t,i,fi);G.equalsEpsilon(a,G.ZERO,M.EPSILON6)&&(a=G.clone(G.UNIT_X,a));var s=G.cross(a,t,hi);return G.normalize(s,s),G.cross(t,s,a),G.negate(a,a),G.normalize(a,a),Object(o.a)(r)||(r=new Ve),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=a.x,r[4]=a.y,r[5]=a.z,r[6]=s.x,r[7]=s.y,r[8]=s.z,r};var di=new rt(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),pi=new ie,mi=new G,yi=new G,gi=new Ve,bi=new rt,vi=new rt;zr.basisTo2D=function(e,t,n){if(!Object(o.a)(e))throw new E.a("projection is required.");if(!Object(o.a)(t))throw new E.a("matrix is required.");if(!Object(o.a)(n))throw new E.a("result is required.");var r=rt.getTranslation(t,yi),i=e.ellipsoid,a=i.cartesianToCartographic(r,pi),s=e.project(a,mi);G.fromElements(s.z,s.x,s.y,s);var u=zr.eastNorthUpToFixedFrame(r,i,bi),l=rt.inverseTransformation(u,vi),c=rt.getMatrix3(t,gi),f=rt.multiplyByMatrix3(l,c,n);return rt.multiply(di,f,n),rt.setTranslation(n,s,n),n},zr.wgs84To2DModelMatrix=function(e,t,n){if(!Object(o.a)(e))throw new E.a("projection is required.");if(!Object(o.a)(t))throw new E.a("center is required.");if(!Object(o.a)(n))throw new E.a("result is required.");var r=e.ellipsoid,i=zr.eastNorthUpToFixedFrame(t,r,bi),a=rt.inverseTransformation(i,vi),s=r.cartesianToCartographic(t,pi),u=e.project(s,mi);G.fromElements(u.z,u.x,u.y,u);var l=rt.fromTranslation(u,bi);return rt.multiply(di,a,n),rt.multiply(l,n,n),n};var wi=zr,Oi={MORPHING:0,COLUMBUS_VIEW:1,SCENE2D:2,SCENE3D:3,getMorphTime:function(e){return e===Oi.SCENE3D?1:e!==Oi.MORPHING?0:void 0}},_i=Object.freeze(Oi),Ci={},Ei=new Re(0,0,0,1),xi=new Re,Si=new Se,ji=new L,Ti=new L;Ci.wgs84ToWindowCoordinates=function(e,t,n){return Ci.wgs84WithEyeOffsetToWindowCoordinates(e,t,G.ZERO,n)};var Ii=new Re,Mi=new G;function Ai(e,t,n,r){var i=n.viewMatrix,a=rt.multiplyByVector(i,Re.fromElements(e.x,e.y,e.z,1,Ii),Ii),o=G.multiplyComponents(t,G.normalize(a,Mi),Mi);return a.x+=t.x+o.x,a.y+=t.y+o.y,a.z+=o.z,rt.multiplyByVector(n.frustum.projectionMatrix,a,r)}var Ri=new ie(Math.PI,M.PI_OVER_TWO),Ni=new G,Pi=new G;Ci.wgs84WithEyeOffsetToWindowCoordinates=function(e,t,n,r){if(!Object(o.a)(e))throw new E.a("scene is required.");if(!Object(o.a)(t))throw new E.a("position is required.");var i=e.frameState,a=Ci.computeActualWgs84Position(i,t,Ei);if(Object(o.a)(a)){var s=e.canvas,u=Si;u.x=0,u.y=0,u.width=s.clientWidth,u.height=s.clientHeight;var l=e.camera,c=!1;if(i.mode===_i.SCENE2D){var f=e.mapProjection,h=Ri,d=f.project(h,Ni),p=G.clone(l.position,Pi),m=l.frustum.clone(),y=rt.computeViewportTransformation(u,0,1,new rt),g=l.frustum.projectionMatrix,b=l.positionWC.y,v=G.fromElements(M.sign(b)*d.x-b,0,-l.positionWC.x),w=wi.pointToGLWindowCoordinates(g,y,v);if(0===b||w.x<=0||w.x>=s.clientWidth)c=!0;else{if(w.x>.5*s.clientWidth){u.width=w.x,l.frustum.right=d.x-b,xi=Ai(a,n,l,xi),Ci.clipToGLWindowCoordinates(u,xi,ji),u.x+=w.x,l.position.x=-l.position.x;var O=l.frustum.right;l.frustum.right=-l.frustum.left,l.frustum.left=-O,xi=Ai(a,n,l,xi),Ci.clipToGLWindowCoordinates(u,xi,Ti)}else{u.x+=w.x,u.width-=w.x,l.frustum.left=-d.x-b,xi=Ai(a,n,l,xi),Ci.clipToGLWindowCoordinates(u,xi,ji),u.x=u.x-u.width,l.position.x=-l.position.x;var _=l.frustum.left;l.frustum.left=-l.frustum.right,l.frustum.right=-_,xi=Ai(a,n,l,xi),Ci.clipToGLWindowCoordinates(u,xi,Ti)}G.clone(p,l.position),l.frustum=m.clone(),((r=L.clone(ji,r)).x<0||r.x>s.clientWidth)&&(r.x=Ti.x)}}if(i.mode!==_i.SCENE2D||c){if((xi=Ai(a,n,l,xi)).z<0&&!(l.frustum instanceof Et)&&!(l.frustum instanceof Ot))return;r=Ci.clipToGLWindowCoordinates(u,xi,r)}return r.y=s.clientHeight-r.y,r}},Ci.wgs84ToDrawingBufferCoordinates=function(e,t,n){if(n=Ci.wgs84ToWindowCoordinates(e,t,n),Object(o.a)(n))return Ci.transformWindowToDrawingBuffer(e,n,n)};var Di=new G,ki=new ie;Ci.computeActualWgs84Position=function(e,t,n){var r=e.mode;if(r===_i.SCENE3D)return G.clone(t,n);var i=e.mapProjection,a=i.ellipsoid.cartesianToCartographic(t,ki);if(Object(o.a)(a)){if(i.project(a,Di),r===_i.COLUMBUS_VIEW)return G.fromElements(Di.z,Di.x,Di.y,n);if(r===_i.SCENE2D)return G.fromElements(0,Di.x,Di.y,n);var s=e.morphTime;return G.fromElements(M.lerp(Di.z,t.x,s),M.lerp(Di.x,t.y,s),M.lerp(Di.y,t.z,s),n)}};var Li=new G,zi=new G,qi=new rt;Ci.clipToGLWindowCoordinates=function(e,t,n){return G.divideByScalar(t,t.w,Li),rt.computeViewportTransformation(e,0,1,qi),rt.multiplyByPoint(qi,Li,zi),L.fromCartesian3(zi,n)},Ci.transformWindowToDrawingBuffer=function(e,t,n){var r=e.canvas,i=e.drawingBufferWidth/r.clientWidth,a=e.drawingBufferHeight/r.clientHeight;return L.fromElements(t.x*i,t.y*a,n)};var Bi=new Re,Ui=new Re;Ci.drawingBufferToWgs84Coordinates=function(e,t,n,r){var i=e.context.uniformState,a=i.currentFrustum,s=a.x,u=a.y;if(e.frameState.useLogDepth){var l=n*i.log2FarDepthFromNearPlusOne;n=u*(1-s/(Math.pow(2,l)-1+s))/(u-s)}var c,f=e.view.passState.viewport,h=Re.clone(Re.UNIT_W,Bi);h.x=(t.x-f.x)/f.width*2-1,h.y=(t.y-f.y)/f.height*2-1,h.z=2*n-1,h.w=1;var d=e.camera.frustum;if(Object(o.a)(d.fovy)){var p=1/(c=rt.multiplyByVector(i.inverseViewProjection,h,Ui)).w;G.multiplyByScalar(c,p,c)}else Object(o.a)(d._offCenterFrustum)&&(d=d._offCenterFrustum),(c=Ui).x=.5*(h.x*(d.right-d.left)+d.left+d.right),c.y=.5*(h.y*(d.top-d.bottom)+d.bottom+d.top),c.z=.5*(h.z*(s-u)-s-u),c.w=1,c=rt.multiplyByVector(i.inverseView,c,c);return G.fromCartesian4(c,r)};var Fi=Ci,Vi=n(56),Wi=n.n(Vi),Zi="undefined"!=typeof performance&&"function"==typeof performance.now&&isFinite(performance.now())?function(){return performance.now()}:function(){return Date.now()},Hi="-1000px";const Gi={Map:"Map",Query:"Query"};class Yi{constructor(e){this.mode=Gi.Map,this.layers=[],this.selectFeature=void 0,this._cesium=e,this._screenPositionX=Hi,this._screenPositionY=Hi,this.handler=new a.a.ScreenSpaceEventHandler(e.viewer.scene.canvas),this._tweens=e.viewer.scene.tweens,this._container=e.viewer.container,this._viewer=e.viewer,this._scene=e.viewer.scene,this._lastClockTime=new en(0,0),this._lastCameraViewMatrix=new rt,this._lastCameraMoveTime=0,this.stoppedRendering=!1,this.position=void 0,this.showSelection=!0,this.transform="",this.opacity=1,O.track(this,["position","_screenPositionX","_screenPositionY","_scale","rotate","showSelection","transform","opacity"]),this.isVisible=void 0,O.defineProperty(this,"isVisible",{get:function(){return this.showSelection&&Object(o.a)(this.position)}}),this.computeScreenSpacePosition=function(e,t){return a.a.SceneTransforms.wgs84ToWindowCoordinates(this._cesium.viewer.scene,e,t)};var t=document.createElement("div");t.className="selection-indicator",t.style.pointerEvents="none",t.style.position="absolute",t.style.width="50px",t.style.height="50px",this._container.appendChild(t),this._selectionIndicatorElement=t;var n=document.createElement("img");n.setAttribute("src",Wi.a),n.setAttribute("alt",""),n.setAttribute("width",50),n.setAttribute("height",50),t.appendChild(n);var r=this;return this.updateStyle=function(){t.style.top=r._screenPositionY,t.style.left=r._screenPositionX,t.style.transform=r.transform,t.style.opacity=r.opacity}.bind(this),this._subscriptions=[],this.updateStyle(),this}get container(){return this._container}get selectionIndicatorElement(){return this._selectionIndicatorElement}get scene(){return this._scene}get viewer(){return this._viewer}destroy(){this._selectionIndicatorElement.parentNode.removeChild(this._selectionIndicatorElement),this._subscriptions.forEach(function(e){e.dispose()})}update(){if(this.showSelection&&this.position){var e=Fi.wgs84ToWindowCoordinates(this.scene,this.position);if(e){var t=this._container,n=t.clientWidth,r=t.clientHeight,i=this._selectionIndicatorElement.clientWidth,a=.5*i;e.x=Math.min(Math.max(e.x,-i),n+i)-a,e.y=Math.min(Math.max(e.y,-i),r+i)-a,this._screenPositionX=Math.floor(e.x+.25)+"px",this._screenPositionY=Math.floor(e.y+.25)+"px"}else this._screenPositionX=Hi,this._screenPositionY=Hi}}animateAppear(){if(Object(o.a)(this._selectionIndicatorTween)){if(this._selectionIndicatorIsAppearing)return;this._selectionIndicatorTween.cancelTween(),this._selectionIndicatorTween=void 0}this._selectionIndicatorIsAppearing=!0;var e=this;this._selectionIndicatorTween=this._tweens.add({startObject:{scale:2,opacity:0,rotate:-180},stopObject:{scale:1,opacity:1,rotate:0},duration:.8,easingFunction:c.EXPONENTIAL_OUT,update:function(t){e.opacity=t.opacity,e.transform="scale("+t.scale+") rotate("+t.rotate+"deg)",e.updateStyle()},complete:function(){e._selectionIndicatorTween=void 0},cancel:function(){e._selectionIndicatorTween=void 0}})}animateDepart(){if(Object(o.a)(this._selectionIndicatorTween)){if(!this._selectionIndicatorIsAppearing)return;this._selectionIndicatorTween.cancelTween(),this._selectionIndicatorTween=void 0}this._selectionIndicatorIsAppearing=!1;var e=this;this._selectionIndicatorTween=this._tweens.add({startObject:{scale:1,opacity:1},stopObject:{scale:1.5,opacity:0},duration:1.6,easingFunction:c.EXPONENTIAL_OUT,update:function(t){e.opacity=t.opacity,e.transform="scale("+t.scale+") rotate(0deg)",e.updateStyle()},complete:function(){e._selectionIndicatorTween=void 0},cancel:function(){e._selectionIndicatorTween=void 0}}),console.log("selectionIndicatorTween",this._selectionIndicatorTween)}addTo(e){this.handler.setInputAction(this.handleClick.bind(this),a.a.ScreenSpaceEventType.LEFT_DOWN)}postRender(e,t){var n=Zi(),r=e.scene;rt.equalsEpsilon(e._lastCameraViewMatrix,r.camera.viewMatrix,1e-5)||(e._lastCameraMoveTime=n);var i=n-e._lastCameraMoveTime<1e3,a=r.globe._surface,o=!a._tileProvider.ready||a._tileLoadQueueHigh.length>0||a._tileLoadQueueMedium.length>0||a._tileLoadQueueLow.length>0||a._debug.tilesWaitingForChildren>0;i||o||e.viewer.clock.shouldAnimate||0!==e.scene.tweens.length||(e.verboseRendering&&console.log("停止渲染 @ "+Zi()),e.viewer.useDefaultRenderLoop=!1,e.stoppedRendering=!0),rt.clone(r.camera.viewMatrix,e._lastCameraViewMatrix),e.update()}updateScreen(e){var t=.5*this._selectionIndicatorElement.clientWidth;this._screenPositionX=e.position.x-t+"px",this._screenPositionY=e.position.y-t+"px"}handleClick(e){const t=this._cesium.viewer,n=this._cesium.viewer.scene,{position:r}=e;if(!r)return;const{x:i,y:o}=r;if(void 0===i||void 0===o)return;const s=new a.a.Cartesian2(i,o);var u=t.camera.getPickRay(s),l=n.globe.pick(u,n),c=a.a.Ellipsoid.WGS84.cartesianToCartographic(l);const f=a.a.Math.toDegrees(c.latitude),h=a.a.Math.toDegrees(c.longitude);if(this.updateScreen(e),this.updateStyle(),this.mode===Gi.Map)this.animateDepart();else if(this.mode===Gi.Query){const e={type:"loadding",position:[h,f]};this.queryEvent(e),this.animateAppear(),this.queryByPoint(h,f,"")}this._tweens.update()}bindQueryEvent(e){this.queryEvent=e}enableQuery(e){this.layers=e,this.mode=Gi.Query}disableQuery(){this.mode=Gi.Map}initQuaryParam(e){var t=new Zondy.Service.QueryFeatureStruct;t.IncludeGeometry=!0,t.IncludeAttribute=!0,t.IncludeWebGraphic=!1;var n=new Zondy.Object.Rectangle(e[0],e[1],e[2],e[3]),r=new Zondy.Service.QueryFeatureRule({EnableDisplayCondition:!1,MustInside:!1,CompareRectOnly:!1,Intersect:!0}),i=new Zondy.Service.QueryParameter({geometry:n,resultFormat:"json",struct:t,rule:r});return i.recordNumber=20,i.pageIndex=0,i}queryByPoint(e,t,n){const r=[e-1e-9,t-1e-9,e+1e-9,t-1e-9],i=this.initQuaryParam(r);this.layers.forEach(e=>{new Zondy.Service.QueryDocFeature(i,e.serverName,0,{ip:e.ip,port:e.port}).query(this.querySuccess.bind(this,e.serverName),this.queryError.bind(this))})}querySuccess(e,t){let n=t.SFEleArray;if(!n){this.layers=this.layers.map(t=>(t.serverName===e&&(t.feature=void 0,this.drawSelectFeature(e)),t));const t={type:"loaded",layers:this.layers};return void this.queryEvent(t)}let r={},i={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[]},properties:r}]};if(n&&n.length>0){const e=n[0].ftype;if(t.AttStruct.FldName.forEach((e,t)=>{r[e]=n[0].AttValue[t]}),i.features[0].properties=r,3===e){i.features[0].geometry.type="Polygon";for(var a=n[0].fGeom.RegGeom[0].Rings,o=0;o<a.length;o++)for(var s=a[o].Arcs[0].Dots,u=[],l=0;l<s.length;l++)u.push([s[l].x,s[l].y]);i.features[0].geometry.coordinates=[u]}else 2===e?i.features[0].geometry.type="LineString":1===e&&(i.features[0].geometry.type="Point")}this.layers=this.layers.map(t=>(t.serverName===e&&(t.feature=i,this.drawSelectFeature(e)),t));const c={type:"loaded",layers:this.layers};this.queryEvent(c)}queryError(e){console.log("queryError",e)}drawSelectFeature(e){const t=this,n=this.viewer,r=this.layers.filter(t=>t.serverName===e);if(r.length<0)return;const i=r[0].feature;i?(r[0].dataSource&&n.dataSources.remove(r[0].dataSource),console.log("drawSelectFeature",this.selectFeature,i),a.a.GeoJsonDataSource.load(i).then(function(r){t.selectFeature=r,n.dataSources.add(r),t.layers=t.layers.map(t=>(t.serverName===e&&(t.dataSource=r),t))}).otherwise(function(e){})):r[0].dataSource&&n.dataSources.remove(r[0].dataSource)}changePicks(e){this.layers=e,this.layers.forEach(e=>{!1===e.pickable?e.dataSource&&(e.dataSource.show=!1):e.dataSource&&(e.dataSource.show=!0)})}}r.UI.CesiumSelectionIndicator=Yi;var Xi=n(11);class Ji{constructor(e,t,n,r,i,a,o,s,u,l){this._tweens=e,this._tweenjs=t,this._startObject=Object(Xi.a)(n),this._stopObject=Object(Xi.a)(r),this._duration=i,this._delay=a,this._easingFunction=o,this._update=s,this._complete=u,this.cancel=l,this.needsStart=!0}get startObject(){return this._startObject}get stopObject(){return this._stopObject}get duration(){return this._duration}get delay(){return this._delay}get easingFunction(){return this._easingFunction}get update(){return this._update}get complete(){return this._complete}get tweenjs(){return this._tweenjs}cancelTween(){this._tweens.remove(this)}}class Ki{constructor(){this._tweens=[]}get length(){return this._tweens.length}add(e){if(e=Object(C.a)(e,C.a.EMPTY_OBJECT),!Object(o.a)(e.startObject)||!Object(o.a)(e.stopObject))throw new E.a("options.startObject and options.stopObject are required.");if(!Object(o.a)(e.duration)||e.duration<0)throw new E.a("options.duration is required and must be positive.");if(0===e.duration)return Object(o.a)(e.complete)&&e.complete(),new Ji(this);var t=e.duration/Rt.SECONDS_PER_MILLISECOND,n=Object(C.a)(e.delay,0),r=n/Rt.SECONDS_PER_MILLISECOND,i=Object(C.a)(e.easingFunction,c.LINEAR_NONE),a=e.startObject,s=new u.Tween(a);s.to(Object(Xi.a)(e.stopObject),t),s.delay(r),s.easing(i),Object(o.a)(e.update)&&s.onUpdate(function(){e.update(a)}),s.onComplete(Object(C.a)(e.complete,null)),s.repeat(Object(C.a)(e._repeat,0));var l=new Ji(this,s,e.startObject,e.stopObject,e.duration,n,i,e.update,e.complete,e.cancel);return this._tweens.push(l),l}addProperty(e){var t=(e=Object(C.a)(e,C.a.EMPTY_OBJECT)).object,n=e.property,r=e.startValue,i=e.stopValue;if(!Object(o.a)(t)||!Object(o.a)(e.property))throw new E.a("options.object and options.property are required.");if(!Object(o.a)(t[n]))throw new E.a("options.object must have the specified property.");if(!Object(o.a)(r)||!Object(o.a)(i))throw new E.a("options.startValue and options.stopValue are required.");return this.add({startObject:{value:r},stopObject:{value:i},duration:Object(C.a)(e.duration,3),delay:e.delay,easingFunction:e.easingFunction,update:function(e){t[n]=e.value},complete:e.complete,cancel:e.cancel,_repeat:e._repeat})}addAlpha(e){var t=(e=Object(C.a)(e,C.a.EMPTY_OBJECT)).material;if(!Object(o.a)(t))throw new E.a("options.material is required.");var n=[];for(var r in t.uniforms)t.uniforms.hasOwnProperty(r)&&Object(o.a)(t.uniforms[r])&&Object(o.a)(t.uniforms[r].alpha)&&n.push(r);if(0===n.length)throw new E.a("material has no properties with alpha components.");return this.add({startObject:{alpha:Object(C.a)(e.startValue,0)},stopObject:{alpha:Object(C.a)(e.stopValue,1)},duration:Object(C.a)(e.duration,3),delay:e.delay,easingFunction:e.easingFunction,update:function(e){for(var r=n.length,i=0;i<r;++i)t.uniforms[n[i]].alpha=e.alpha},complete:e.complete,cancel:e.cancel})}addOffsetIncrement(e){var t=(e=Object(C.a)(e,C.a.EMPTY_OBJECT)).material;if(!Object(o.a)(t))throw new E.a("material is required.");if(!Object(o.a)(t.uniforms.offset))throw new E.a("material.uniforms must have an offset property.");var n=t.uniforms;return this.addProperty({object:n,property:"offset",startValue:n.offset,stopValue:n.offset+1,duration:e.duration,delay:e.delay,easingFunction:e.easingFunction,update:e.update,cancel:e.cancel,_repeat:1/0})}remove(e){if(!Object(o.a)(e))return!1;var t=this._tweens.indexOf(e);return-1!==t&&(e.tweenjs.stop(),Object(o.a)(e.cancel)&&e.cancel(),this._tweens.splice(t,1),!0)}removeAll(){for(var e=this._tweens,t=0;t<e.length;++t){var n=e[t];n.tweenjs.stop(),Object(o.a)(n.cancel)&&n.cancel()}e.length=0}contains(e){return Object(o.a)(e)&&-1!==this._tweens.indexOf(e)}get(e){if(!Object(o.a)(e))throw new E.a("index is required.");return this._tweens[e]}update(e){var t=this._tweens,n=0;for(e=Object(o.a)(e)?e/Rt.SECONDS_PER_MILLISECOND:Zi();n<t.length;){var r=t[n],i=r.tweenjs;r.needsStart?(r.needsStart=!1,i.start(e)):i.update(e)?n++:(i.stop(),t.splice(n,1))}}}r.UI.Tween=Ji,r.UI.TweenCollection=Ki;class $i{constructor(){this._tweens=new Ki,this._tweens.update()}get tweens(){return this._tweens}destroy(){this._tweens.removeAll()}}r.UI.GlobelTweens=new $i;class Qi{constructor(e){this._viewer=Cesium.defaultValue(e.viewer,void 0),this._viewer&&(this._scene=Cesium.defaultValue(this._viewer.scene,void 0),this._shouldAnimate=this.viewer.clock.shouldAnimate)}get ellipsoid(){return this._viewer.scene.globe.ellipsoid}get viewer(){return this._viewer}get scene(){return this._scene}get shouldAnimate(){return this._shouldAnimate}screenPositionToCartographic(e){let t,n=null;if(e){if(this.scene._mode===Cesium.SceneMode.SCENE3D){let n=this.viewer.camera.getPickRay(e);t=this.scene.globe.pick(n,this.scene)}else t=this.viewer.camera.pickEllipsoid(e,this.ellipsoid);Cesium.defined(t)&&(n=this.ellipsoid.cartesianToCartographic(t))}return n}screenPositionToCartesian(e){let t=null;if(e)if(this.scene._mode===Cesium.SceneMode.SCENE3D){let n=this.viewer.camera.getPickRay(e);t=this.scene.globe.pick(n,this.scene)}else t=this.viewer.camera.pickEllipsoid(e,this.ellipsoid);return t}outputImageObj(){return this.viewer.render(),ReImg.fromCanvas(this.viewer.canvas)}outputImageFile(e){this.viewer.render(),ReImg.fromCanvas(this.viewer.canvas).downloadPng(e)}getHeightFromDegrees(e,t){var n,r=0;return e&&t&&(n=Cesium.Cartographic.fromDegrees(e,t),r=this.viewer.scene.globe.getHeight(n)),r}getColor(e,t,n,r){return new Cesium.Color(e,t,n,r)}getSceneRange(){let e=document.getElementById(this.elementID);if(Cesium.defined(e)){let t=e.offsetHeight,n=e.offsetWidth,r=navigator.userAgent.toLowerCase(),i=-1!==r.indexOf("opera"),a=-1!==r.indexOf("msie")&&!i;if(null===e.parentNode||"none"===e.style.display)return;let o,s,u,l=null,c=[];if(a){o=e.getBoundingClientRect();let t=Math.max(document.documentElement.scrollTop,document.body.scrollTop),n=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);s=o.left+n,u=o.top+t}else if(document.getBoxObjectFor){o=document.getBoxObjectFor(e);let t=e.style.borderLeftWidth?parseInt(e.style.borderLeftWidth):0,n=e.style.borderTopWidth?parseInt(e.style.borderTopWidth):0;c=[o.x-t,o.y-n]}else{if(c=[e.offsetLeft,e.offsetTop],(l=e.offsetParent)!==e)for(;l;)c[0]+=l.offsetLeft,c[1]+=l.offsetTop,l=l.offsetParent;(-1!==r.indexOf("opera")||-1!==r.indexOf("safari")&&"absolute"===e.style.position)&&(c[0]-=document.body.offsetLeft,c[1]-=document.body.offsetTop)}for(l=e.parentNode?e.parentNode:null;l&&"BODY"!==l.tagName&&"HTML"!==l.tagName;)c[0]-=l.scrollLeft,c[1]-=l.scrollTop,l=l.parentNode?l.parentNode:null;s=c[0],u=c[1];let f,h,d=new Cesium.Cartesian2(s,u),p=new Cesium.Cartesian2(s+n,u+t),m=this.viewer;if(this.scene.mode===Cesium.SceneMode.SCENE3D?(f=this.scene.globe.pick(m.camera.getPickRay(d),this.scene),h=this.scene.globe.pick(m.camera.getPickRay(p),this.scene)):(f=m.camera.pickEllipsoid(d,this.ellipsoid),h=m.camera.pickEllipsoid(p,this.ellipsoid)),void 0===f||void 0===h)return null;let y=m.scene.globe.ellipsoid.cartesianToCartographic(f),g=m.scene.globe.ellipsoid.cartesianToCartographic(h);return[[y.longitude/Math.PI*180,g.latitude/Math.PI*180],[g.longitude/Math.PI*180,y.latitude/Math.PI*180]]}return null}rotationView(e,t){if(!Cesium.defined(e))return new Cesium.DeveloperError("必须指定旋转类型");Cesium.defined(t)||(t={});let n=t.position;if("rotationAroundPos"===e&&!Cesium.defined(n))return new Cesium.DeveloperError("必须指定旋转点");let r=Cesium.Math.toRadians(Cesium.defaultValue(t.pitch,-30)),i=Cesium.defaultValue(t.distance,5e3),a=Cesium.defaultValue(t.duration,8),o=360/a,s=Cesium.JulianDate.fromDate(new Date),u=Cesium.JulianDate.addSeconds(s,a,new Cesium.JulianDate);this.viewer.clock.startTime=s.clone(),this.viewer.clock.stopTime=u.clone(),this.viewer.clock.currentTime=s.clone(),this.viewer.clock.clockRange=Cesium.ClockRange.CLAMPED,this.viewer.clock.clockStep=Cesium.ClockStep.SYSTEM_CLOCK;let l=this.viewer.camera.heading,c=()=>{let t=Cesium.JulianDate.secondsDifference(this.viewer.clock.currentTime,this.viewer.clock.startTime),a=-Cesium.Math.toRadians(t*o)+l,s=this.scene.camera.position;"rotationAroundPos"===e&&Cesium.defined(n)&&(s=n),this.scene.camera.setView({destination:s,orientation:{heading:a,pitch:r}}),this.scene.camera.moveBackward(i),Cesium.JulianDate.compare(this.viewer.clock.currentTime,this.viewer.clock.stopTime)>=0&&this.viewer.clock.onTick.removeEventListener(c)};return this.viewer.clock.shouldAnimate=!0,this.viewer.clock.onTick.addEventListener(c),c}removeRotationView(e){Cesium.defined(e)&&(this.viewer.clock.onTick.removeEventListener(e),this.viewer.clock.shouldAnimate=this.shouldAnimate)}pauseRotationView(){this.viewer.clock.shouldAnimate=!1}startRotationAroundPos(){this.viewer.clock.shouldAnimate=!0}caculHeadingFromCartographic(e,t){let n=Cesium.Cartesian3.fromRadians(e.longitude,e.latitude,e.height,this.ellipsoid,new Cesium.Cartesian3),r=Cesium.Cartesian3.fromRadians(t.longitude,t.latitude,t.height,this.ellipsoid,new Cesium.Cartesian3);return this.getHeadingFromCartesian3(n,r)}getHeadingFromCartesian3(e,t){let n=new Cesium.Cartographic;(n=Cesium.Cartographic.fromCartesian(e,this.ellipsoid,n)).height=0;let r=Cesium.Cartesian3.fromRadians(n.longitude,n.latitude,n.height,this.ellipsoid,new Cesium.Cartesian3),i=Cesium.Cartesian3.fromRadians(n.longitude,n.latitude+.1,n.height,this.ellipsoid,new Cesium.Cartesian3),a=Cesium.Cartesian3.subtract(i,r,new Cesium.Cartesian3);a=Cesium.Cartesian3.normalize(a,a);let o=new Cesium.Cartographic;(o=Cesium.Cartographic.fromCartesian(t,this.ellipsoid,o)).height=0;let s=Cesium.Cartesian3.fromRadians(o.longitude,o.latitude,o.height,this.ellipsoid,new Cesium.Cartesian3),u=Cesium.Cartesian3.subtract(s,r,new Cesium.Cartesian3);u=Cesium.Cartesian3.normalize(u,u);let l=Cesium.Cartesian3.angleBetween(a,u);return o.longitude<n.longitude&&(l=2*Math.PI-l),l}deepCopy(e){if(e instanceof Array){for(var t=[],n=0;n<e.length;++n)t[n]=this.deepCopy(e[n]);return t}if(e instanceof Object){t={};for(var n in e)t[n]=this.deepCopy(e[n]);return t}return e}simplifyLine(e){if(null!==e&&e.length>=3){let t=this.deepCopy(e),n=t.length;for(let e=0;e<n;e++)void 0!==t[e].z&&null!==t[e].z||(t=t.slice(0,e).concat(t.slice(e+1)));for(let e=0;e<=t.length-3;e++){let n=!((t[e].z-t[e+1].z)*(t[e+1].z-t[e+2].z)>0);ea([t[e].x,t[e].y,t[e].z],[t[e+1].x,t[e+1].y,t[e+1].z],[t[e+2].x,t[e+2].y,t[e+2].z])>175&&!n&&(t=t.slice(0,e+1).concat(t.slice(e+2)))}return t}return null}calcParabola(e,t){let n=e.height&&e.height>5e3?e.height:5e3,r=Math.abs(e.position1.lon-e.position2.lon)>Math.abs(e.position1.lat-e.position2.lat)?Math.abs(e.position1.lon-e.position2.lon):Math.abs(e.position1.lat-e.position2.lat),i=e.num&&e.num>50?e.num:50,a=[],o=r/i;if(Math.abs(e.position1.lon-e.position2.lon)>Math.abs(e.position1.lat-e.position2.lat)){let t=(e.position2.lat-e.position1.lat)/i;e.position1.lon-e.position2.lon>0&&(o=-o);for(var s=0;s<i;s++){var u=n-4*Math.pow(-.5*r+Math.abs(o)*s,2)*n/Math.pow(r,2),l=e.position1.lon+o*s,c=e.position1.lat+t*s;a.push([l,c,u])}}else{let t=(e.position2.lon-e.position1.lon)/i;e.position1.lat-e.position2.lat>0&&(o=-o);for(var f=0;f<i;f++){var h=n-4*Math.pow(-.5*r+Math.abs(o)*f,2)*n/Math.pow(r,2),d=e.position1.lon+t*f,p=e.position1.lat+o*f;a.push([d,p,h])}}return void 0!==t&&(t=a),a}linearInterpolate(e,t){let n=[],r=e.length-1;for(let i=0;i<r;i++){let r=e[i],a=e[i+1];0===i&&n.push(r);let o=Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2));if(o>t){let e=o/t;for(let i=1;i<e;i++){let e=(a.x-r.x)*(i*t/o)+r.x,s=(a.y-r.y)*(i*t/o)+r.y;n.push(new Cesium.Cartesian2(e,s))}}n.push(a)}return n}linearInterpolate3D(e,t){let n=[];for(let r=0;r<e.length-1;r++){let i=e[r],a=e[r+1];0===r&&n.push(i);let o=Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2));if(o>t){let e=o/t;for(let r=1;r<e;r++){let e=(a.x-i.x)*(r*t/o)+i.x,s=(a.y-i.y)*(r*t/o)+i.y,u=(a.z-i.z)*(r*t/o)+i.z;n.push(new Cesium.Cartesian3(e,s,u))}}n.push(a)}return n}generateRandom(){let e="";for(let t=1;t<=32;t++){e+=Math.floor(16*Math.random()).toString(16),8!=t&&12!=t&&16!=t&&20!=t||(e+="-")}return e}setZValueByTerrain(e,t,n,r,i){let a=[];if(null!=n&&n.length>0)for(let e=0;e<n.length;e++){let t=r.cartesianToCartographic(Cesium.Cartesian3.fromDegrees(n[e].x,n[e].y,0,r));a.push(t)}Cesium.sampleTerrain(e,t,a).then(e=>{let t=this.ellipsoid.cartographicArrayToCartesianArray(e);"function"==typeof i&&i(t)})}}function ea(e,t,n){let r=(e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1])+(e[2]-t[2])*(n[2]-t[2]),i=Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)),a=Math.sqrt(Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2)+Math.pow(n[2]-t[2],2));return 180*Math.acos(r/(i*a))/Math.PI}r.Manager.CommonFuncManager=Qi;let ta={directions:[]};function na(e){let t=Cesium.defaultValue(ta.children,void 0),n=ta.isAxis;if(!Cesium.defined(t))return;let r=Cesium.defaultValue(ta.distance,50),i=void 0,a=ta.viewer;if(ta.deltaDistance+=ta.speed,n){for(let e=0;e<t.length;e++){let n=t[e],r=ta.distances[e];if(ta.deltaDistance>r)break;i=n.transform;let a=ta.directions[e].clone();Cesium.Cartesian3.multiplyByScalar(a,ta.speed,a),i[12]+=a.x,i[13]+=a.y,i[14]+=a.z,n.transform=i.clone()}ta.deltaDistance>ta.maxDistances&&a.clock.onTick.removeEventListener(na)}else{for(let e=0;e<t.length;e++){let n=t[e];i=n.transform;let r=ta.directions[e].clone();Cesium.Cartesian3.multiplyByScalar(r,ta.speed,r),i[12]+=r.x,i[13]+=r.y,i[14]+=r.z,n.transform=i.clone()}ta.deltaDistance>r&&a.clock.onTick.removeEventListener(na)}}class ra{constructor(e){this._viewer=Cesium.defaultValue(e.viewer,void 0),this._scene=this._viewer.scene,this._commFun=new Qi(e)}get viewer(){return this._viewer}get scene(){return this._scene}createHeatMap(e,t,n,r,i){let a=Cesium.CesiumHeatmap.create(this.viewer,e,i);return a.setWGS84Data(t,n,r),a}removeHeatMap(e){e.removeLayer()}cruiseModel(e,t,n,r){let i=[],a=Cesium.JulianDate.now(),o=(t.length-1)*Cesium.defaultValue(r,10),s=Cesium.JulianDate.addSeconds(a,o,new Cesium.JulianDate);this.viewer.clock.startTime=a.clone(),this.viewer.clock.stopTime=s.clone(),this.viewer.clock.currentTime=a.clone(),this.viewer.clock.clockRange=Cesium.ClockRange.LOOP_STOP,this.viewer.clock.multiplier=10;for(let e=0;e<t.length;e++){let r=Cesium.Cartesian3.fromDegrees(t[e][0],t[e][1]),a=this.viewer.entities.add({position:r,point:{pixelSize:8,color:Cesium.Color.TRANSPARENT,outlineColor:Cesium.Color.YELLOW,outlineWidth:3},show:Cesium.defaultValue(n,!0)});i.push(a)}let u=this.calculatePositionSamples(t,a,r),l=this.viewer.entities.add({availability:new Cesium.TimeIntervalCollection([new Cesium.TimeInterval({start:a,stop:s})]),position:u,orientation:new Cesium.VelocityOrientationProperty(u),model:{uri:e,minimumPixelSize:64},path:{resolution:1,material:new Cesium.PolylineGlowMaterialProperty({glowPower:.1,color:Cesium.Color.YELLOW}),width:10,show:Cesium.defaultValue(n,!0)}});return i.push(l),i}calculatePositionSamples(e,t,n){if(void 0!==e&&e.constructor===Array){let r=new Cesium.SampledPositionProperty;for(let i=0;i<e.length;i++)r.addSample(Cesium.JulianDate.addSeconds(t,n*i,new Cesium.JulianDate),Cesium.Cartesian3.fromDegrees(e[i][0],e[i][1]));return r}}cruiseModelGround(e,t,n,r,i){let a=[],o=[];for(let e=0;e<t.length;e++)o.push(Cesium.Cartesian3.fromDegrees(t[e][0],t[e][1]));let s=t.length,u=0;for(let e=0;e<o.length-1;e++)u+=Math.sqrt(Math.pow(o[e].x-o[e+1].x,2)+Math.pow(o[e].y-o[e+1].y,2));let l=this._commFun.linearInterpolate3D(o,u/300),c=this._viewer.scene.globe.ellipsoid.cartesianArrayToCartographicArray(o);c=c.concat(this._viewer.scene.globe.ellipsoid.cartesianArrayToCartographicArray(l));let f=Cesium.JulianDate.fromDate(new Date(2015,2,25,16)),h=(t.length-1)*Cesium.defaultValue(r,10),d=Cesium.JulianDate.addSeconds(f,h,new Cesium.JulianDate);this.viewer.clock.startTime=f.clone(),this.viewer.clock.stopTime=d.clone(),this.viewer.clock.currentTime=f.clone(),this.viewer.clock.clockRange=Cesium.ClockRange.LOOP_STOP,this.viewer.clock.multiplier=10,Cesium.sampleTerrain(this.viewer.terrainProvider,7,c).then(t=>{let o=this.viewer.scene.globe.ellipsoid.cartographicArrayToCartesianArray(t),u=o.slice(0,s),l=o.slice(s);for(let e=0;e<u.length;e++){let t=this.viewer.entities.add({position:u[e],point:{pixelSize:8,color:Cesium.Color.TRANSPARENT,outlineColor:Cesium.Color.YELLOW,outlineWidth:3},show:Cesium.defaultValue(n,!0)});a.push(t)}let c=r*(u.length-1)/(l.length-1),h=this.calculatePositionSamplesGround(l,f,c),p=this.viewer.entities.add({availability:new Cesium.TimeIntervalCollection([new Cesium.TimeInterval({start:f,stop:d})]),position:h,orientation:new Cesium.VelocityOrientationProperty(h),model:{uri:e,minimumPixelSize:128},path:{resolution:1,material:new Cesium.PolylineGlowMaterialProperty({glowPower:.1,color:Cesium.Color.YELLOW}),width:10,show:Cesium.defaultValue(n,!0)}});a.push(p),"function"==typeof i&&i(a)})}calculatePositionSamplesGround(e,t,n){if(void 0!==e&&e.constructor===Array){let r=new Cesium.SampledPositionProperty;for(let i=0;i<e.length;i++)r.addSample(Cesium.JulianDate.addSeconds(t,n*i,new Cesium.JulianDate),e[i]);return r}}clearCruiseModel(e){if(e.constructor===Array)for(let t=e.length-1;t>=0;t--)this.viewer.entities.remove(e[t])}startCruiseModel(){this.viewer.clock.shouldAnimate=!0}stopCruiseModel(){this.viewer.clock.shouldAnimate=!1}createExcavateAnalysis(e){if(!Cesium.defined(e.tileSet)||!Cesium.defined(e.planes))return;let t=e.tileSet,n=e.planes,r=Cesium.defaultValue(e.material,Cesium.Color.WHITE.withAlpha(.02)),i=Cesium.defaultValue(e.edgeColor,Cesium.Color.RED),a=Cesium.defaultValue(e.edgeWidth,0),o=Cesium.defaultValue(e.unionClippingRegions,!1),s=e.longitude,u=e.latitude,l=Cesium.defaultValue(e.height,0),c=t._root.transform,f=new Cesium.Matrix3;Cesium.Matrix4.getRotation(c,f);let h=new Cesium.Cartesian3;Cesium.Matrix4.getScale(c,h);let d=new Cesium.Cartesian3;Cesium.Matrix4.getTranslation(c,d);let p=c.clone();Cesium.defined(s)&&Cesium.defined(u)&&(p=this.getTransForm(d,s,u,l)),t.clippingPlanes=new Cesium.ClippingPlaneCollection({modelMatrix:p,planes:n,edgeColor:i,edgeWidth:a,unionClippingRegions:o});let m=[],y=t.boundingSphere.radius;for(let e=0;e<n.length;++e){let e=this.viewer.entities.add({position:d,plane:{dimensions:new Cesium.Cartesian2(2.5*y,2.5*y),material:r}});m.push(e)}return{tileSet:t,planes:m}}startDynamicExcavate(e){let t=e.planetEntity,n=e.distance,r=e.planes,i=e.transform,a=new Cesium.ClippingPlane(Cesium.Cartesian3.UNIT_X,0);t.plane.plane=new Cesium.CallbackProperty(function(e){for(let e=0;e<r.length;e++)if(e===r.length-1){let t=r[e];t.distance=n,Cesium.Plane.transform(t,i,a)}},!1)}getTransForm(e,t,n,r){let i=Cesium.Cartographic.toCartesian(new Cesium.Cartographic.fromDegrees(t,n,r)),a=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(e,i,a),a.z=r;let o=new Cesium.Matrix4;return Cesium.Matrix4.fromTranslation(a,o),o}getClippingPlanes(e){if(!e)return;let t=e.length;if(t<2)return;let n=[];for(let r=0;r<t;++r){let i=(r+1)%t,a=Cesium.Cartesian3.add(e[r],e[i],new Cesium.Cartesian3);a=Cesium.Cartesian3.multiplyByScalar(a,.5,a);let o=Cesium.Cartesian3.normalize(a,new Cesium.Cartesian3),s=Cesium.Cartesian3.subtract(e[i],a,new Cesium.Cartesian3);s=Cesium.Cartesian3.normalize(s,s);let u=Cesium.Cartesian3.cross(s,o,new Cesium.Cartesian3);u=Cesium.Cartesian3.normalize(u,u);let l=new Cesium.Plane(u,0),c=Cesium.Plane.getPointDistance(l,a);n.push(new Cesium.ClippingPlane(u,c))}return n}createDynamicCutting(e,t,n){if(!Cesium.defined(e)&&e.length>0)return;let r=Cesium.Color.WHITE.withAlpha(.02),i=!1,a=1;Cesium.defined(n)&&(r=Cesium.defaultValue(n.color,r),i=Cesium.defaultValue(n.interaction,!1),a=Cesium.defaultValue(n.distance,1));let o,s,u=this,l=[];for(let n=0;n<e.length;++n){let i=e[n];i.clippingPlanes=new Cesium.ClippingPlaneCollection({planes:t,edgeColor:Cesium.Color.RED,edgeWidth:0,unionClippingRegions:!1});let a=i.boundingSphere.radius,o=i._root.transform,s=new Cesium.Cartesian3;Cesium.Matrix4.getTranslation(o,s);for(let e=0;e<t.length;++e){let e=this.viewer.entities.add({position:s,plane:{dimensions:new Cesium.Cartesian2(250*a,2.5*a),material:r}});l.push(e)}}return i&&((s=new Cesium.ScreenSpaceEventHandler(this.viewer.scene.canvas)).setInputAction(function(e){let t=u.scene.pick(e.position);Cesium.defined(t)&&Cesium.defined(t.id)&&Cesium.defined(t.id.plane)&&((o=t.id.plane).material=Cesium.Color.WHITE.withAlpha(1e-4),o.outlineColor=Cesium.Color.WHITE,u.scene.screenSpaceCameraController.enableInputs=!1)},Cesium.ScreenSpaceEventType.MIDDLE_DOWN),s.setInputAction(function(){Cesium.defined(o)&&(o.material=r,o.outlineColor=r,o=void 0),u.scene.screenSpaceCameraController.enableInputs=!0},Cesium.ScreenSpaceEventType.MIDDLE_UP),s.setInputAction(function(e){if(defined(o)){let t=e.startPosition.y-e.endPosition.y;a+=8*t}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)),{tileSets:e,planes:l,handler:s}}startDynamicCutting(e){let t=e.planetEntity,n=e.distance,r=e.plane,i=e.transform,a=new Cesium.ClippingPlane(Cesium.Cartesian3.UNIT_X,0);t.plane.plane=new Cesium.CallbackProperty(function(e){return r.distance=n,Cesium.Plane.transform(r,i,a)},!1)}deleteDynamicCutting(e){if(!Cesium.defined(e))return;let t=e.handler,n=e.planes,r=e.tileSets;Cesium.defined(e.tileSet)&&(Cesium.defined(r)?r.push(e.tileSet):r=[e.tileSet]);for(let e=0;e<n.length;++e){let t=n[e];t.distance=0,this.viewer.entities.remove(t)}if(Cesium.defined(r))for(let e=0;e<r.length;++e){r[e].clippingPlanes.removeAll()}Cesium.defined(t)&&(t.removeInputAction(Cesium.ScreenSpaceEventType.MIDDLE_DOWN),t.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE),t.removeInputAction(Cesium.ScreenSpaceEventType.MIDDLE_UP))}createRollershutters(e,t,n,r,i){Cesium.defined(i)||(i={});let a=Cesium.defaultValue(t[0],new Cesium.ClippingPlane(new Cesium.Cartesian3(1,0,0),-200)),o=Cesium.defaultValue(t[1],new Cesium.ClippingPlane(new Cesium.Cartesian3(-1,0,0),-200));this.createDynamicCutting(e,[a],{color:Cesium.defaultValue(i.color,new Cesium.Color(1,1,1,.3))}).planes[0].plane.plane=new Cesium.CallbackProperty(function(t){return a.distance=n,Cesium.Plane.transform(a,e[0].modelMatrix,new Cesium.ClippingPlane(Cesium.Cartesian3.UNIT_X,0))},!1),this.createDynamicCutting(e,[o],{color:Cesium.defaultValue(i.color1,new Cesium.Color(1,1,1,.3))}).planes[0].plane.plane=new Cesium.CallbackProperty(function(t){return o.distance=r,Cesium.Plane.transform(o,e[0].modelMatrix,new Cesium.ClippingPlane(Cesium.Cartesian3.UNIT_X,0))},!1)}startCustomDisplay(e,t,n){if(!Cesium.defined(e)||!Cesium.defined(t))return;Cesium.defined(n)||(n={});let r=this,i=Cesium.defaultValue(n.color,new Cesium.Color(1,0,0,.5)),a=Cesium.defaultValue(n.edgeColor,new Cesium.Color(1,0,0,1)),o=Cesium.defaultValue(n.negate,!1),s=Cesium.defaultValue(n.negateColor,Cesium.Color.WHITE),u=Cesium.defaultValue(n.applyForLayer,!1),l=Cesium.defaultValue(n.style,""),c=Cesium.defaultValue(n.colorBlendMode,Cesium.Cesium3DTileColorBlendMode.HIGHLIGHT),f=Cesium.defaultValue(n.colorBlendAmount,.5);function h(e,n){let a=e.getProperty("name"),o=e.tileset,c=a.split("_"),f=parseInt(c[2]),h=e.color;return i=o.color,"EdgeHighlight"!==l&&"Edge"!==l||(defined(o._edgeDetectionfeatureList)||(o._edgeDetectionfeatureList=[]),void 0!==a&&null!==a&&t.indexOf(f)>-1&&(o._edgeDetectionfeatureList.indexOf(e)<0&&o._edgeDetectionfeatureList.push(e),r._edgeDetectionStageCD.selected=o._edgeDetectionfeatureList),"Edge"!==l)?(h=u?i:o.negate?void 0!==a&&null!==a&&t.indexOf(f)>-1?s:i:void 0!==a&&null!==a&&t.indexOf(f)>-1?i:s,Cesium.Color.clone(h,n)):h}"Edge"!==l||Cesium.defined(this._edgeDetectionStageCD)||(this._edgeDetectionStageCD=Cesium.PostProcessStageLibrary.createEdgeDetectionStage(),this._edgeDetectionStageCD.uniforms.color=a,this._edgeDetectionStageCD.uniforms.length=.05,this._edgeDetectionStageCD.selected=[],this._silhouetteStageCD=Cesium.PostProcessStageLibrary.createSilhouetteStage([this._edgeDetectionStageCD]),this.viewer.scene.postProcessStages.add(this._silhouetteStageCD));for(let t=0;t<e.length;++t){let n=e[t];n.negate=o,n.color=i,n.colorBlendMode=c,n.colorBlendAmount=f,n.style=new Cesium.Cesium3DTileStyle,n.style.color={evaluateColor:h}}}stopCustomDisplay(e){if(Cesium.defined(e)){for(let t=0;t<e.length;++t){e[t].style=void 0}Cesium.defined(this._edgeDetectionStageCD)&&Cesium.defined(this._silhouetteStageCD)&&(this.viewer.scene.postProcessStages.remove(this._silhouetteStageCD),this._edgeDetectionStageCD=void 0,this._silhouetteStageCD.destroy(),this._silhouetteStageCD=void 0),this.viewer.scene.render()}}stopCustomDisplayByIds(e,t,n){if(!Cesium.defined(e)||!Cesium.defined(t))return;let r=this;function i(e,n){let i=e.getProperty("name"),a=i.split("_"),o=e.tileset,s=parseInt(a[2]),u=e.color;if(void 0!==i&&null!==i&&t.indexOf(s)>-1&&o._edgeDetectionfeatureList){let t=o._edgeDetectionfeatureList.indexOf(e);t>-1&&(o._edgeDetectionfeatureList.splice(t,1),r._edgeDetectionStageCD.selected=o._edgeDetectionfeatureList),u=Cesium.Color.WHITE}return Cesium.Color.clone(u,n)}for(let t=0;t<e.length;++t){let n=e[t];n.style=new Cesium.Cesium3DTileStyle,n.style.color={evaluateColor:i}}}SortByBoxZValue(e,t){let n,r,i,a,o=e.length;for(n=1;n<o;n++)for(r=o-1;r>=n;r--)t[r]>t[r-1]&&(a=t[r-1],t[r-1]=t[r],t[r]=a,i=e[r-1],e[r-1]=e[r],e[r]=i)}getAxis(){let e=0,t=ta.direction;return 1===t.x||-1===t.x?e=1:1===t.y||-1===t.y?e=2:1!==t.z&&-1!==t.z||(e=3),e}getDistance(e,t){let n=e.length,r=0,i=[],a=t,o=this.getAxis();for(let t=0;t<e.length;t++){let n=e[t];if(void 0===n)return;let a=n.boundingSphere;switch(o){case 1:case-1:r=a.center.x,i[t]=r;break;case 2:case-2:r=a.center.y,i[t]=r;break;case 3:case-3:r=a.center.z,i[t]=r}}this.SortByBoxZValue(e,i);let s=[];for(let t=0;t<e.length;t++){let e=(n-t-1)*a;s.push(e)}return{childList:e,distances:s}}createExplosion(e){if(ta.children=Cesium.defaultValue(e.children,void 0),!Cesium.defined(ta.children))return;ta.center=Cesium.defaultValue(e.center,void 0),ta.direction=Cesium.defaultValue(e.direction,new Cesium.Cartesian3(0,0,1)),ta.distance=Cesium.defaultValue(e.distance,50),ta.scene=this.scene,ta.viewer=this.viewer,ta.deltaDistance=Cesium.defaultValue(e.speed,1),ta.directions=[],ta.distancesCenterPoint=[],ta.speed=Cesium.defaultValue(e.speed,1);let t=ta.isAxis=Cesium.defaultValue(e.isAxis,!1),n=ta.expDistance=Cesium.defaultValue(e.expDistance,100),r=ta.transform=e.transform,i=ta.direction.clone(),a=new Cesium.Cartesian3(0,0,0),o=i;for(let e=0;e<ta.children.length;e++){let t=ta.children[e];if(Cesium.defined(ta.center)){let e=t.boundingSphere.center;Cesium.Cartesian3.subtract(e,ta.center,i),Cesium.Cartesian3.magnitude(i)<1e-10&&(i.x=1),Cesium.Cartesian3.normalize(i,i),ta.directions.push(i.clone())}}if(t){Cesium.Matrix4.multiplyByPoint(r,a,a),Cesium.Matrix4.multiplyByPoint(r,o,o),Cesium.Cartesian3.subtract(o,a,i),Cesium.Cartesian3.magnitude(i)<1e-10&&(i.x=1),Cesium.Cartesian3.normalize(i,i);for(let e=0;e<ta.children.length;e++)ta.directions.push(i.clone());let e=this.getDistance(ta.children,n);ta.children=e.childList,ta.distances=e.distances,ta.maxDistances=e.distances[0],this.viewer.clock.onTick.addEventListener(na)}else this.viewer.clock.onTick.addEventListener(na);this.scene.requestRender()}createExplosion1(e){let t=Cesium.defaultValue(e.children,void 0);if(!Cesium.defined(t))return;let n=Cesium.defaultValue(e.center,void 0),r=Cesium.defaultValue(e.direction,new Cesium.Cartesian3(0,0,1)),i=Cesium.defaultValue(e.distance,50),a=Cesium.defaultValue(e.isAxis,!1),o=Cesium.defaultValue(e.expDistance,100),s=this.scene,u=new Cesium.Matrix4;if(!1===a){for(let e=0;e<t.length;e++){let a=t[e];if(Cesium.defined(n)){let e=a.boundingSphere.center;Cesium.Cartesian3.subtract(n,e,r),Cesium.Cartesian3.magnitude(r)<1e-10&&(r.x=1)}Cesium.Cartesian3.normalize(r,r),ta.directions.push(r.clone()),Cesium.Cartesian3.multiplyByScalar(r,i,r),Cesium.Matrix4.fromTranslation(r,u),a.transform=u.clone()}}if(a){let n=Cesium.defaultValue(e.transform);if(void 0===n)return;let i=new Cesium.Cartesian3(0,0,0),a=r.clone();Cesium.Matrix4.multiplyByPoint(n,i,i),Cesium.Matrix4.multiplyByPoint(n,a,a),Cesium.Cartesian3.subtract(a,i,r),Cesium.Cartesian3.magnitude(r)<1e-10&&(r.x=1),Cesium.Cartesian3.normalize(r,r),ta.direction=r.clone();let s=this.getDistance(t,o);t=s.childList;let l=s.distances,c=r.clone();for(let e=0;e<t.length;e++){let n=t[e];Cesium.Cartesian3.multiplyByScalar(r,l[e],r),Cesium.Matrix4.fromTranslation(r,u),r=c.clone(),n.transform=u.clone()}}s.requestRender()}recoverExplosion(e){let t=Cesium.defaultValue(e.children,void 0);if(!Cesium.defined(t))return;let n=new Cesium.Matrix4;if(ta.direction){let e=ta.direction.clone();0!=e.x||0!=e.x?e.x*=-1:0!=e.y||0!=e.y?e.y*=-1:0==e.z&&0==e.z||(e.z*=-1);for(let r=0;r<t.length;r++){let i=t[r];Cesium.Matrix4.fromTranslation(e,n),i.transform=n.clone()}}else if(ta.directions)for(let e=0;e<t.length;e++){let r=ta.directions[e].clone();r.x*=-1,r.y*=-1,r.z*=-1;let i=t[e];Cesium.Matrix4.fromTranslation(r,n),i.transform=n.clone()}this.scene.requestRender()}addSceneEffect(e){if(Cesium.defined(e))return this.scene.postProcessStages.add(e._effect)}removeSceneEffect(e){Cesium.defined(e)&&this.scene.postProcessStages.remove(e._effect)}removeAllSceneEffect(){this.scene.postProcessStages.removeAll()}}r.Manager.AnalysisManager=ra;class ia{constructor(e){this._viewer=Cesium.defaultValue(e.viewer,void 0),this._scene=this._viewer.scene}get viewer(){return this._viewer}get scene(){return this._scene}createAnimation(e){return Cesium.defined(e)||(e={}),new Cesium.AnimationAnalyse(this.viewer,{exHeight:Cesium.defaultValue(e.exHeight,.8),isLoop:Cesium.defaultValue(e.isLoop,!1),modelUrl:e.modelUrl,complete:Cesium.defaultValue(e.callback,function(){alert("完毕")})})}createCutFill(e,t){Cesium.defined(t)||(t={});let n=this.viewer,r=new Cesium.CutFillAnalyzeC(n,{callBack:t.callback});return r.xPaneNum=t.xPaneNum,r.yPaneNum=t.yPaneNum,r.Height=t.Height,r.dataType=Cesium.defaultValue(e,0),r}startCutFill(e,t){e._pointsPolygon=t;let n=e.getMinAndMaxCartesian();e.start(n)}createFlood(e){Cesium.defined(e)||(e={});let t=new Cesium.FloodAnalysis(this.scene);return t.minHeight=Cesium.defaultValue(e.minHeight,0),t.maxHeight=Cesium.defaultValue(e.maxHeight,100),t.floodSpeed=Cesium.defaultValue(e.floodSpeed,20),t}createPlague(e,t,n){let r;if(Cesium.defined(n)||(n={}),void 0!==e&&void 0!==t)return(r=new Cesium.Plague(this.viewer,{center:e,cities:t,isAdd:Cesium.defaultValue(n.isAdd,!1)})).setVisible("add"),r}createModelFlatten(e,t){return Cesium.defined(t)||(t={}),e.u_isFlatten=Cesium.defaultValue(t.isFlatten,!0),e.u_height=Cesium.defaultValue(t.height,0),e.u_arrayLength=Cesium.defaultValue(t.arrayLength,0),e.u_positionArray=Cesium.defaultValue(t.array,[]),e}createSceneProjector(e){let t=Cesium.SceneProjectorType.COLOR;switch(e){case 0:t=Cesium.SceneProjectorType.COLOR;break;case 1:t=Cesium.SceneProjectorType.IMAGE;break;case 2:t=Cesium.SceneProjectorType.VIDEO;break;case 3:t=Cesium.SceneProjectorType.RTMP}let n=new Cesium.SceneProjector(t);return this.scene.VisualAnalysisManager.add(n),n}startSceneProjector(e,t,n){void 0!=t&&(e.viewPosition=t,e.textureSource=n),this.scene.requestRender()}endSceneProjector(e,t){void 0!=t&&(e.targetPosition=t)}removeSceneProjector(){this.scene.VisualAnalysisManager.removeAll()}createSkyLine(){let e=this.scene.VisualAnalysisManager,t=new Cesium.SkyLineAnalysis({scene:this.scene,analysisEndCallBack:function(e){alert("分析完成")}});return e.add(t),t}createViewshedAnalysis(){let e=this.scene.VisualAnalysisManager,t=new Cesium.ViewshedAnalysis;return e.add(t),t}createVisibilityAnalysis(){let e=this.scene.VisualAnalysisManager,t=new Cesium.VisiblityAnalysis;return e.add(t),t}createHeightLimited(e,t,n,r){return Cesium.defined(r)||(r={}),new Cesium.HeightLimited(this.viewer,{height:Cesium.defaultValue(e,0),transform:t,posArray:n,limitedColor:Cesium.defaultValue(r.limitedColor,new Cesium.Color(1,0,0,.5)),blendTransparency:Cesium.defaultValue(r.blendTransparency,.8)})}createAspectAnalysis(e){let t=this.scene.VisualAnalysisManager,n=new Cesium.AspectAnalysis(this.viewer,{colors:e});return t.add(n),n.start(),n}createSlopeAnalysis(e){let t=this.scene.VisualAnalysisManager,n=new Cesium.SlopeAnalysis(this.viewer,{colors:e});return t.add(n),n.start(),n}createRadarScan(e,t,n,r){return new Cesium.RadarScanEffect(this.viewer,{center:Cesium.defaultValue(e,Cesium.Cartesian3.fromDegrees(0,0,0)),radius:Cesium.defaultValue(t,50),scanColor:Cesium.defaultValue(n,new Cesium.Color(1,0,0,1)),duration:Cesium.defaultValue(r,8e3)})}createRain(e){let t=this.viewer.scene.postProcessStages,n=Cesium.PostProcessStageLibrary.createRainStage();return t.add(n),this.scene.skyAtmosphere.hueShift=Cesium.defaultValue(e.hueShift,-.8),this.scene.skyAtmosphere.saturationShift=Cesium.defaultValue(e.saturationShift,-.7),this.scene.skyAtmosphere.brightnessShift=Cesium.defaultValue(e.brightnessShift,-.33),this.scene.fog.density=Cesium.defaultValue(e.density,.001),this.scene.fog.minimumBrightness=Cesium.defaultValue(e.minimumBrightness,.8),n}createSnow(e){let t=this.viewer.scene.postProcessStages,n=Cesium.PostProcessStageLibrary.createSnowStage();return t.add(n),this.scene.skyAtmosphere.hueShift=Cesium.defaultValue(e.hueShift,-.8),this.scene.skyAtmosphere.saturationShift=Cesium.defaultValue(e.saturationShift,-.7),this.scene.skyAtmosphere.brightnessShift=Cesium.defaultValue(e.brightnessShift,-.33),this.scene.fog.density=Cesium.defaultValue(e.density,.001),this.scene.fog.minimumBrightness=Cesium.defaultValue(e.minimumBrightness,.8),n}createFog(e){Cesium.defined(e)&&(e={});let t=this.viewer.scene.postProcessStages,n=Cesium.PostProcessStageLibrary.createFogStage(Cesium.defaultValue(e.alpha,.1));return t.add(n),n}createFire(e,t,n,r){Cesium.defined(r)||(r={});let i=this.viewer.entities.add({model:{uri:e,minimumPixelSize:Cesium.defaultValue(r.minimumPixelSize,64)},position:Cesium.Cartesian3.fromDegrees(t[0],t[1],t[2])});this.viewer.trackedEntity=i,this.scene.primitives.add(new Cesium.ParticleSystem({image:n,startScale:Cesium.defaultValue(r.startScale,1),endScale:Cesium.defaultValue(r.endScale,4),particleLife:Cesium.defaultValue(r.particleLife,1),speed:Cesium.defaultValue(r.speed,5),imageSize:Cesium.defaultValue(r.imageSize,new Cesium.Cartesian2(20,20)),emissionRate:Cesium.defaultValue(r.emissionRate,5),lifetime:Cesium.defaultValue(r.lifetime,16),modelMatrix:this.computeModelMatrix(i,Cesium.JulianDate.now()),emitterModelMatrix:this.computeEmitterModelMatrix()}))}computeModelMatrix(e,t){let n=Cesium.Property.getValueOrUndefined(e.position,t,new Cesium.Cartesian3);if(!Cesium.defined(n))return;let r=Cesium.Property.getValueOrUndefined(e.orientation,t,new Cesium.Quaternion),i=void 0;return i=Cesium.defined(r)?Cesium.Matrix4.fromRotationTranslation(Cesium.Matrix3.fromQuaternion(r,new Cesium.Matrix3),n,new Cesium.Matrix4):Cesium.Transforms.eastNorthUpToFixedFrame(n,void 0,new Cesium.Matrix4)}computeEmitterModelMatrix(){let e=Cesium.HeadingPitchRoll.fromDegrees(0,0,0,new Cesium.HeadingPitchRoll),t=new Cesium.TranslationRotationScale;return t.translation=Cesium.Cartesian3.fromElements(3,3,1,new Cesium.Cartesian3),t.rotation=Cesium.Quaternion.fromHeadingPitchRoll(e,new Cesium.Quaternion),Cesium.Matrix4.fromTranslationRotationScale(t,new Cesium.Matrix4)}}r.Manager.AdvancedAnalysisManager=ia;let aa={UNKNOWN:0,VECTORLAYER:1,MODELLAYER:2,TERRAINLAYER:3,TILEIMAGELAYER:8,M3DLAYER:10};var oa=Object.freeze(aa);r.LayerType=aa;class sa{constructor(e){this._viewer=Cesium.defaultValue(e.viewer,void 0)}get ellipsoid(){return this._viewer.scene.globe.ellipsoid}get viewer(){return this._viewer}get scene(){return this._viewer.scene}zoomToM3dLayer(e){let t=e.boundingSphere;this.viewer.camera.viewBoundingSphere(t,new Cesium.HeadingPitchRange(0,-.5,t.radius)),this.viewer.camera.lookAtTransform(Cesium.Matrix4.IDENTITY)}removeM3dLayer(e){this.viewer.scene.primitives.remove(e)}removeDocs(e){if(Cesium.defined(e))for(var t in e)this.viewer.scene.primitives.remove(e[t])}addGridInfo(){if(void 0===this._tileGridLayer){let e=new Cesium.TileCoordinatesImageryProvider({showLonlats:!0}),t=this.viewer.imageryLayers;if(null!==t&&void 0!==t&&!t.contains(e))return t.addImageryProvider(e)}}removeGridInfo(e){let t=this.viewer.imageryLayers;null!==t&&void 0!==t&&t.contains(e)&&t.remove(e,!0)}removeImageLayer(e,t){let n=this.viewer.imageryLayers;null!==n&&void 0!==n&&n.contains(e)&&n.remove(e,t)}removeAllImageLayers(e){var t=this.viewer.imageryLayers;null!==t&&void 0!==t&&t.removeAll(e)}}r.Layer.BaseLayer=sa;class ua extends sa{constructor(e){super(e)}appendM3DLayer(e,t,n,r,i,a,o){let s=e+"/GetDataStreams?sceneIndex=0&layerIndex="+t+"&Level=0&Row=0&Col=0",u=Cesium.defaultValue(o.debugShowBoundingVolume,!1),l=Cesium.defaultValue(o.maximumScreenSpaceError,16),c=Cesium.defaultValue(o.debugShowMemoryUsage,!1),f=Cesium.defaultValue(o.debugShowUrl,!1),h=new Cesium.MapGISM3DSet({url:s,layerRenderIndex:t,layerIndex:n,gdbpUrl:r,show:i,igserver:a,debugShowBoundingVolume:u,maximumScreenSpaceError:l,debugShowMemoryUsage:c,debugShowUrl:f}),d=this.viewer.scene.primitives.add(h);return Cesium.defaultValue(o.autoReset,!0)&&d.readyPromise.then(e=>this.zoomToM3dLayer(e)),d}append(e,t){if(!Cesium.defined(e))return new Cesium.DeveloperError("必须指定url");t=Cesium.defaultValue(t,{});let n,r,i=!0,a=e,o=[];Cesium.defined(t)&&(Cesium.defined(t.proxy)&&(r=new Cesium.DefaultProxy(t.proxy)),Cesium.defaultValue(t.proxy,void 0),i=Cesium.defaultValue(t.synchronous,!0));let s=e=>{if(void 0!==e&&e.sceneInfos.length>0){let n=e.sceneInfos[0].layers;for(let e in n){let{layerType:r}=n[e];if(parseInt(r)===oa.M3DLAYER){let{layerRenderIndex:r,layerIndex:i,gdbpUrl:s,isVisible:l}=n[e],c=this.appendM3DLayer(a,r,i,s,l,!0,t);o.push(c),c.readyPromise.then(u)}}}},u=e=>{let n=e;Cesium.defined(t.loaded)&&"function"==typeof t.loaded&&t.loaded(n)};let l=`${a}/GetDocInfo`;if(i)(n=new Cesium.Resource({url:l,proxy:r})).fetchJson().then(e=>s(e));else{let e=new Cesium.XMLHttpRequest;if(e.open("GET",l,!1),e.send(null),200===e.status){let t=Cesium.JSON.parse(e.responseText);t&&s(t)}}return o}appendM3dCacheFromMangoDB(e,t){let n;t=Cesium.defaultValue(t,{});let r=!0;Cesium.defined(t)&&(Cesium.defined(t.proxy)&&(n=new Cesium.DefaultProxy(t.proxy)),Cesium.defaultValue(t.proxy,void 0),r=Cesium.defaultValue(t.autoReset,!0));var i=new Cesium.Resource({url:e+"/GetCacheInfo",proxy:n}),a=[],o=e+"/GetDataStreams?",s=new Cesium.MapGISM3DSet({url:o,igserver:!0});return a=this.viewer.scene.primitives.add(s),i.fetchJson().then(e=>{a.readyPromise.then(function(e){if(r){var n=e.boundingSphere;that.viewer.camera.viewBoundingSphere(n,new Cesium.HeadingPitchRange(0,-.5,n.radius)),that.viewer.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),"function"==typeof t.loaded&&t.loaded(e)}})}),a}setM3dLayerMovement(e,t,n,r){if(void 0===e||void 0===t||void 0===n)return!1;if(void 0===e._root.transform)return!1;Cesium.Cartesian3.normalize(t,t),Cesium.Cartesian3.multiplyByScalar(t,n,t);let i=Cesium.Matrix4.multiplyByPoint(e._root.transform,t,new Cesium.Cartesian3),a=Cesium.Matrix4.setTranslation(e._root.transform,i,new Cesium.Matrix4);e._root.transform=a,this.scene.requestRender()}setM3dLayerLocation(e,t,n){if(void 0===e)return!1;if(void 0===e._root)return!1;var r=new Cesium.Matrix3,i=new Cesium.HeadingPitchRoll(Cesium.Math.PI,Cesium.Math.PI,Cesium.Math.PI);r=Cesium.Matrix3.fromHeadingPitchRoll(i,r);var a=Cesium.Matrix4.multiplyByTranslation(Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Cartesian3.fromDegrees(t,n,0)),new Cesium.Cartesian3,new Cesium.Matrix4);Cesium.Matrix4.multiplyByMatrix3(a,r,a),e._root.transform=a}}r.Layer.M3DLayer=ua;class la extends sa{constructor(e){super(e)}appendTerrainLayer(e,t,n,r,i){let a;Cesium.defined(r)&&(a=new Cesium.DefaultProxy(r));let o=e+"/GetTerrain?sceneIndex="+t+"&layerIndex="+n+"&Level={z}&Row={x}&Col={y}&xdensity=65&ydensity=65&webGL=true",s=new Cesium.MapGISTerrainProvider({url:o,range:i.range,proxy:a,scale:i.scale});return this.viewer.terrainProvider=s,s}append(e,t){if(!Cesium.defined(e))return new Cesium.DeveloperError("必须指定url");t=Cesium.defaultValue(t,{});let n,r,i=!0,a=e,o=[];Cesium.defined(t)&&(Cesium.defined(t.proxy)&&(r=new Cesium.DefaultProxy(t.proxy)),Cesium.defaultValue(t.proxy,void 0),i=Cesium.defaultValue(t.synchronous,!0));let s=e=>{if(void 0!==e&&e.sceneInfos.length>0){let n=e.sceneInfos[0].layers;for(let e in n){let{layerType:i,layerRenderIndex:s,elevationScale:u,range:l}=n[e];if(parseInt(i)===oa.TERRAINLAYER){let e=0,n={range:l,scale:u};Object.extend(t,n);let i=this.appendTerrainLayer(a,e,s,r,t);o.push(i)}}}};if(i)(n=new Cesium.Resource({url:a+"/GetDocInfo",proxy:r})).fetchJson().then(e=>s(e));else{let e=new Cesium.XMLHttpRequest;if(e.open("GET",a+"/GetDocInfo",!1),e.send(null),200===e.status){let t=Cesium.JSON.parse(e.responseText);t&&s(t)}}return o}removeTerrain(){let e=new Cesium.EllipsoidTerrainProvider;this.viewer.terrainProvider=e}}r.Layer.TerrainLayer=la;class ca extends sa{constructor(e){super(e)}append3DDocTileLayer(e,t,n,r){let i;r.proxy&&(i=new Cesium.DefaultProxy(r.proxy));t.toString(),n.toString();return this.viewer.imageryLayers.addImageryProvider(new Cesium.MapGISDocMapProvider({url:_url,rectangle:r.tileRange,colNum:r.colNum,rowNum:r.rowNum,maximumLevel:r.maxLevel,proxy:i}))}append2DDocTile(e,t){return Cesium.defined(t)||(t={}),t.url=e,this.viewer.imageryLayers.addImageryProvider(new Cesium.MapGIS2DDocMapProvider(t))}appendMapGISTile(e,t){let n,r=e+"/{level}/{row}/{col}";return t.proxy&&(n=new Cesium.DefaultProxy(t.proxy)),this.viewer.imageryLayers.addImageryProvider(new Cesium.MapGISMapProvider({url:r,tilingScheme:t.tilingScheme,rectangle:t.tileRange,colNum:t.colNum,rowNum:t.rowNum,maximumLevel:t.maxLevel,tileWidth:t.tileWidth,tileHeight:t.tileHeight,proxy:n,mapStyle:t.mapStyle}))}appendWMSTile(e,t,n){let r;""!==n.proxy&&Cesium.defined(n.proxy)&&(r=n.proxy=new Cesium.DefaultProxy(n.proxy));let i={url:e,layers:t,parameters:n.parameters,proxy:r};return Cesium.defined(n)&&Object.extend(i,n),this.viewer.imageryLayers.addImageryProvider(new Cesium.WebMapServiceImageryProvider(i))}appendWMTSTile(e,t,n,r,i,a,o){let s,u="";return""!==i&&Cesium.defined(i)&&(u=new Cesium.DefaultProxy(i)),s="GoogleMapsCompatible_GB"===n?new Cesium.WebMercatorTilingScheme({numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1,rectangleSouthwestInMeters:new Cesium.Cartesian2(-20037508.342789244,-20037508.342789244),rectangleNortheastInMeters:new Cesium.Cartesian2(20037508.342789244,20037508.342789244)}):new Cesium.GeographicTilingScheme({rectangle:Cesium.Rectangle.fromDegrees(-180,-90,180,90),numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1}),this.viewer.imageryLayers.addImageryProvider(new Cesium.WebMapTileServiceImageryProvider({url:e,layer:t,style:a,format:"image/png",tileMatrixSetID:n,maximumLevel:r,credit:new Cesium.Credit("MapGIS"),tilingScheme:s,proxy:u,startLevel:Cesium.defaultValue(o,0)}))}appendWMTSTileExt(e,t){Cesium.defined(t)||(t={});let n,r=Cesium.defaultValue(t.synchronous,!0),i=Cesium.defaultValue(t.serverName,void 0),a=e+"?SERVICE=WMTS&VERSION=1.0.0&REQUEST=GetCapabilities";Cesium.defined(t.proxy)&&(a=t.proxy+"?url="+a);let o=r=>{let a,o,s=null,u=null,l=null,c=-1,f=r.getElementsByTagNameNS("*","Capabilities");if(null!==f&&f.length>0){var h=f[0];if(null!==h&&null!==(a=h.getElementsByTagNameNS("*","Contents"))&&a.length>0){let e,t=a[0].getElementsByTagNameNS("*","Layer");if(Cesium.defined(i))for(let n in t){e=t[n];for(var d=0;d<e.childNodes.length;d++)if("ows:Title"===e.childNodes[n].nodeName){i===e.childNodes[d].textContent&&(s=e);break}if(null!==t)break}else{e=t[0];for(let t in e.childNodes)if("ows:Title"===e.childNodes[t].nodeName){i=e.childNodes[t].textContent,s=e;break}}}}if(null!==s){let e=s.getElementsByTagNameNS("*","Style");if(null!==e&&e.length>0)for(let t in e[0].childNodes)if("ows:Identifier"===e[0].childNodes[t].nodeName){l=e[0].childNodes[t].textContent;break}let t=s.getElementsByTagNameNS("*","TileMatrixSetLink");if(null!==t&&t.length>0){var p=t[0].getElementsByTagNameNS("*","TileMatrixSet");null!==p&&p.length>0&&(u=p[0].textContent);var m=t[0].getElementsByTagNameNS("*","TileMatrixSetLimits");if(null!==m&&m.length>0){var y=m[0].getElementsByTagNameNS("*","TileMatrixLimits");null!==y&&y.length>0&&(c=y.length)}else if(-1===c&&Cesium.defined(a)){var g=a[0].getElementsByTagNameNS("*","TileMatrix");if(null!==g&&g.length>0){let e=g[g.length-1],t=g[0];for(let e in t.childNodes){t.childNodes[e].nodeName;if("ows:Identifier"===t.childNodes[e].nodeName){o=t.childNodes[e].textContent,o=parseInt(o);break}}for(let t in e.childNodes)if("ows:Identifier"===e.childNodes[t].nodeName){c=e.childNodes[t].textContent,c=parseInt(c),c-=o;break}}}}}if(null!==u&&-1!==c&&null!==l){let r="";Cesium.defined(t.proxy)&&(r=t.proxy+"?url="),r=r+e+"?tileMatrix={TileMatrix}&layer="+i+"&style="+l+"&tilecol={TileCol}&tilerow={TileRow}&tilematrixset={TileMatrixSet}&format=image/png&service=WMTS&version=1.0.0&&request=GetTile",n=this.appendWMTSTile(r,i,u,c,t.proxy,l,o),t.loaded&&t.loaded(n)}};if(r){new Cesium.Resource({url:a}).fetchXML().then(e=>o(e))}else{var s=new XMLHttpRequest;if(s.open("GET",a,!0),s.send(null),200===s.status){var u=(new DOMParser).parseFromString(s.responseText,"text/xml");u&&o(u)}}return n}appendGoogleMap(e){Cesium.defined(e)||(e={}),this._isHistoryImage=Cesium.defaultValue(e.isHistoryImage,!1),this._imageVersion=Cesium.defaultValue(e.imageVersion,"0");let t="";Cesium.defaultValue(e.Offset,!1)&&(t="&gl=cn");let n="http://mt{s}.google.cn/vt/{type}&hl=zh-CN"+t+"&x={x}&y={y}&z={z}&s=Galileo";return n=n.replace("{type}",e.ptype),this.viewer.imageryLayers.addImageryProvider(new Cesium.GoogleMapProvider({url:n}))}appendGoogleMapExt(e){return this.viewer.imageryLayers.addImageryProvider(new Cesium.GoogleMapProvider(e))}appendGaodeMap(e){Cesium.defined(e)||(e={});let t,n=Cesium.defaultValue(e.maximumLevel,16),r=(Cesium.defaultValue(e.type,"vec"),"http://{s}.is.autonavi.com/appmaptile?&size=1&scale=1&x={x}&y={y}&z={z}");switch(e.ptype){case"img":r="https://{s}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}";break;case"road":r+="&scl=2&style=8&ltype=11";break;default:r+="&style=7"}let i=new Cesium.UrlTemplateImageryProvider({url:r,credit:new Cesium.Credit("高德地图服务"),subdomains:["webst01","webst02","webst03","webst04"],tilingScheme:new Cesium.WebMercatorTilingScheme,maximumLevel:n});return t=this.viewer.imageryLayers.addImageryProvider(i)}appendBaiduMap(e){return this.viewer.imageryLayers.addImageryProvider(new Cesium.BaiduMapProvider(e))}appendOpenWeatherMap(e){if(!Cesium.defined(e))return new Cesium.DeveloperError("必须指定url 或type ");switch(e.ptype){case"Pressure":e.url="https://h.maps.owm.io/map/pressure_new/{level}/{row}/{col}?appid="+e.appid;break;case"Temperature":e.url="https://h.maps.owm.io/map/temp_new/{level}/{row}/{col}?appid="+e.appid;break;case"Windspeed":e.url="https://h.maps.owm.io/map/wind_new/{level}/{row}/{col}?appid="+e.appid;break;case"Clouds":e.url="https://h.maps.owm.io/map/clouds_new/{level}/{row}/{col}?appid="+e.appid;break;case"Label":e.url="http://c.basemaps.cartocdn.com/light_only_labels/{level}/{row}/{col}.png"}return this.viewer.imageryLayers.addImageryProvider(new Cesium.OpenWeatherMapProvider(e))}appendTDTuMap(e){if(!Cesium.defined(e))return new Cesium.DeveloperError("必须指定url 或type ");Cesium.defined(e.token)||Cesium.deprecationWarning("http://www.tianditu.gov.cn","请到天地图官网自行申请开发token，自带token仅做功能验证随时可能失效");const t="http://t0.tianditu.com/DataServer?",n="_c&X={x}&Y={y}&L={l}";switch(e.ptype){case"vec":e.url=`${t}T=vec${n}`;break;case"img":e.url=`${t}T=img${n}`;break;case"ter":e.url=`${t}T=ter${n}`;break;case"cia":e.url=`${t}T=cia${n}`;break;case"cva":e.url=`${t}T=cva${n}`;break;case"eia":e.url=`${t}T=eia${n}`;break;case"eva":e.url=`${t}T=eva${n}`;break;case"ibo":e.url=`${t}T=ibo${n}`;break;case"cta":e.url=`${t}T=cta${n}`}return this.viewer.imageryLayers.addImageryProvider(new Cesium.TiandituMapProvider(e))}appendTDTuMapByWMTS(e){Cesium.defined(e)||(e={});let t=Cesium.defaultValue(e.token,"9c157e9585486c02edf817d2ecbc7752");if(Cesium.defined(e.ptype)){let n="http://{s}.tianditu.com/{lw}/wmts?service=WMTS&version=1.0.0&request=GetTile&tilematrix={TileMatrix}&layer={layerType}&style={style}&tilerow={TileRow}&tilecol={TileCol}&tilematrixset=w&format=tiles&tk="+t;switch(e.ptype){case"img":n=(n=n.replace("{lw}","img_w")).replace("{layerType}","img");break;case"cta":n=(n=n.replace("{lw}","cta_w")).replace("{layerType}","cta");break;case"ter":n=(n=n.replace("{lw}","ter_w")).replace("{layerType}","ter");break;case"cia":n=(n=n.replace("{lw}","cia_w")).replace("{layerType}","cia")}let r=new Cesium.WebMapTileServiceImageryProvider({url:n,layer:e.ptype,style:"default",format:"tiles",tileMatrixSetID:"w",credit:new Cesium.Credit("天地图"),subdomains:["t0","t1","t2","t3","t4","t5","t6","t7"],maximumLevel:18});return this.viewer.imageryLayers.addImageryProvider(r)}return null}removeImageLayer(e,t){let n=this.viewer.imageryLayers;null!==n&&void 0!==n&&n.contains(e)&&n.remove(e,t)}removeAllImageLayers(e){var t=this.viewer.imageryLayers;null!==t&&void 0!==t&&t.removeAll(e)}addImageLayer(e){let t=this.viewer.imageryLayers;if(null!==t&&void 0!==t&&!t.contains(e))return t.addImageryProvider(e)}appendTileMapServiceImage(e,t){var n={url:e,maximumLevel:8};defined(t)&&Object.extend(n,t);var r=new Cesium.UrlTemplateImageryProvider(n);return this.viewer.imageryLayers.addImageryProvider(r)}}r.Layer.TilesLayer=ca;class fa{constructor(e){this.viewer=Cesium.defaultValue(e.viewer,void 0)}append(e,t){if(!Cesium.defined(e))return new Cesium.DeveloperError("必须指定url");t=Cesium.defaultValue(t,{});let n,r,i=!0,a=e,o=[];Cesium.defined(t)&&(Cesium.defined(t.proxy)&&(r=new Cesium.DefaultProxy(t.proxy)),Cesium.defaultValue(t.proxy,void 0),i=Cesium.defaultValue(t.synchronous,!0));let s=null,u=e=>{if(void 0!==e&&e.sceneInfos.length>0){let n=e.sceneInfos[0].layers;for(let e in n){let{layerRenderIndex:i,layerIndex:u,gdbpUrl:c,layerType:f,isVisible:h}=n[e];switch(parseInt(f)){case oa.UNKNOWN:console.log("未识别图层");break;case oa.TERRAINLAYER:{let s=0,u=new la({viewer:this.viewer}),l={range:n[e].range,scale:n[e].terrainLayer.elevationScale};Object.extend(t,l),layerRes=u.appendTerrainLayer(a,s,i,r,t),o.push(layerRes)}break;case oa.TILEIMAGELAYER:{let e=new ca({viewer:this.viewer}).append3DDocTileLayer(a,sceneIndex,i,r);o.push(e)}break;case oa.MODELLAYER:case oa.M3DLAYER:{let e=new ua({viewer:this.viewer});s=e.appendM3DLayer(a,i,u,c,h,!0,t),o.push(s),s.readyPromise.then(l)}}}}},l=e=>{let n=e;Cesium.defined(t.loaded)&&"function"==typeof t.loaded&&t.loaded(n)};if(i)(n=new Cesium.Resource({url:a+"/GetDocInfo",proxy:r})).fetchJson().then(e=>u(e));else{let e=new Cesium.XMLHttpRequest;if(e.open("GET",a+"/GetDocInfo",!1),e.send(null),200===e.status){let t=Cesium.JSON.parse(e.responseText);t&&u(t)}}return o}appendImageByUrl(e,t,n,r,i,a){let o={url:e,rectangle:Cesium.Rectangle.fromDegrees(t,n,r,i)};return Cesium.defined(a)&&Object.extend(o,a),this.viewer.imageryLayers.addImageryProvider(new Cesium.SingleTileImageryProvider(o))}removeImage(e,t=!0){this.viewer.imageryLayers.contains(e)&&this.viewer.imageryLayers.remove(e,t)}append3DTile(e,t,n){if(null===e)return null;let r={url:e};Cesium.defined(n)&&Object.extend(r,n);let i=this.viewer.scene.primitives.add(new Cesium.Cesium3DTileset(r));return"[object Function]"===Object.prototype.toString.call(t)&&i.readyPromise.then(()=>{t(i)}),i}remove3DTile(e){this.viewer.scene.primitives.remove(e)}appendModel(e,t,n,r,i=1e3,a=1,o){let s=Cesium.Cartesian3.fromDegrees(n,r,i),u={id:e,url:t,modelMatrix:Cesium.Transforms.headingPitchRollToFixedFrame(s,new Cesium.HeadingPitchRoll),scale:a};Cesium.defined(o)&&Object.extend(u,o);let l=this.viewer.scene.primitives.add(Cesium.Model.fromGltf(u));return l.readyPromise.then(()=>{l.activeAnimations.addAll({speedup:.5,loop:Cesium.ModelAnimationLoop.REPEAT})}),l}appendModels(e,t){let n=new Cesium.CzmlDataSource;return this.viewer.dataSources.add(n.load(e)).then(e=>{null!==t&&"function"==typeof t&&t(e.entities)}),n}appendModelsByFile(e,t){let n=new Cesium.CzmlDataSource;return this.viewer.dataSources.add(n.load(e)).then(e=>{null!==t&&"function"==typeof t&&t(e.entities)}),n}appendKml(e,t,n){var r={camera:this.viewer.scene.camera,canvas:this.viewer.scene.canvas};Cesium.defined(t)&&Object.extend(r,t);let i=new Cesium.KmlDataSource(r);return this.viewer.dataSources.add(i.load(e,r)).then(e=>{null!==n&&"function"==typeof n&&n(e.entities),this.viewer.clock.multiplier=1,this.viewer.clock.shouldAnimate=!0}),i}appendCZML(e,t){let n=new Cesium.CzmlDataSource;return this.viewer.dataSources.add(n.load(e)).then(e=>{null!==t&&"function"==typeof t&&t(e.entities)}),n}appendGeoJson(e,t,n){let r=new Cesium.GeoJsonDataSource,i={stroke:Cesium.Color.HOTPINK,fill:Cesium.Color.PINK.withAlpha(.5),strokeWidth:3};return Cesium.defined(n)&&Object.extend(i,n),this.viewer.dataSources.add(r.load(e,i)).then(e=>{null!==t&&"function"==typeof t&&t(e.entities)}),r}removeModel(e){this.viewer.entities.remove(e),this.viewer.scene.primitives.remove(e)}removeModels(e){this.viewer.dataSources.remove(e)}removeDataSource(e,t=!1){Cesium.defined(e)&&this.viewer.dataSources.contains(e)&&this.viewer.dataSources.remove(e,t)}removeAllDataSource(e=!1){this.viewer.dataSources.removeAll(e)}}r.Manager.LayerManager=fa;class ha extends fa{constructor(){super()}getCesiumCartian3(){let e=new Cesium.Cartesian3(1,2,3);return e.x=12,e}}r.Layer.CesiumFuncManager=ha;class da extends sa{constructor(e){super(e),this._commFun=new Qi(e)}get commFun(){return this._commFun}appendPoint(e,t,n,r,i,a,o,s,u){if(void 0===this.viewer)return;return this.viewer.entities.add({name:r,position:Cesium.Cartesian3.fromDegrees(e,t,n),point:{pixelSize:i,color:a,outlineColor:o,outlineWidth:s},description:u})}appendPointComm(e,t,n,r,i,a){let o={name:r,position:Cesium.Cartesian3.fromDegrees(e,t,n),point:new Cesium.PointGraphics,description:i};return Cesium.defined(a)&&Object.extend(o,a),this.viewer.entities.add(o)}appendGraphics(e){if(!Cesium.defined(e))return null;let t=new Cesium.Entity(e);return this.viewer.entities.add(t),t}appendPolygon(e,t,n,r,i){void 0===n&&(n=Cesium.Color.WHITE.withAlpha(.5)),void 0===r&&(r=Cesium.Color.RED.withAlpha(.5));var a=20,o=0;Cesium.defined(i)&&(a=Cesium.defaultValue(i.outlineWidth,20),o=Cesium.defaultValue(i.height,0));let s={name:e,polygon:{hierarchy:Cesium.Cartesian3.fromDegreesArray(t),extrudedHeight:0,material:n,outline:!0,outlineColor:r,outlineWidth:a,height:o}};return Cesium.defined(i)&&Object.extend(s,i),this.viewer.entities.add(s)}appendHolePolygon(e,t,n,r){let i=[];if(Cesium.defined(n)&&n.length>0)for(var a=0;a<n.length;a++)i.push(new Cesium.PolygonHierarchy(Cesium.Cartesian3.fromDegreesArray(n[a])));let o={name:e,polygon:{hierarchy:new Cesium.PolygonHierarchy(Cesium.Cartesian3.fromDegreesArray(t),i),perPositionHeight:!1,outline:!0,outlineColor:Cesium.Color.RED.withAlpha(1),outlineWidth:10,material:Cesium.Color.BLUE.withAlpha(.5)}};return Cesium.defined(r)&&Object.extend(o.polygon,r),this.viewer.entities.add(o)}appendHolePolygonOnTerrain(e,t,n,r,i,a){let o=[],s=this.viewer.scene.globe.ellipsoid,u=t.length/2,l=[];for(let e=0;e<u;e++)l.push(new Cesium.Cartesian2(t[2*e],t[2*e+1]));let c=this.commFun.linearInterpolate(l,r);if(null!==c&&c.length>0)for(let e=0;e<c.length;e++){let t=this.ellipsoid.cartesianToCartographic(Cesium.Cartesian3.fromDegrees(c[e].x,c[e].y,0,s));o.push(t)}let f=[];if(f.push(o.length),Cesium.defined(n)&&n.length>0)for(let e=0;e<n.length;e++){let t=n[e],i=t.length/2,a=[];for(var h=0;h<i;h++)a.push(new Cesium.Cartesian2(t[2*h],t[2*h+1]));let u=this.commFun.linearInterpolate(a,r);if(null!==u&&u.length>0){for(let e=0;e<u.length;e++){let t=this.ellipsoid.cartesianToCartographic(Cesium.Cartesian3.fromDegrees(u[e].x,u[e].y,0,s));o.push(t)}f.push(o.length)}a.length=0}let d=Cesium.sampleTerrain(this.viewer.terrainProvider,16,o);Cesium.when(d,t=>{let n=this.ellipsoid.cartographicArrayToCartesianArray(t),r=n.slice(0,f[0]),o=[];for(let e=1;e<f.length;e++)o.push(new Cesium.PolygonHierarchy(n.slice(f[e-1],f[e])));let s=new Cesium.PolygonHierarchy(r,o),u={name:e,polygon:{hierarchy:s,perPositionHeight:!0,outline:!0,outlineColor:Cesium.Color.RED.withAlpha(.5),outlineWidth:10,material:Cesium.Color.BLUE.withAlpha(.5),classificationType:Cesium.ClassificationType.TERRAIN}};Cesium.defined(i)&&Object.extend(u,i);let l=this.viewer.entities.add(u);"function"==typeof a&&a(l)})}appendLine(e,t,n,r,i,a){void 0===r&&(r=Cesium.Color.BLUE);let o=null,s={name:e,polyline:{positions:o=Cesium.defined(i)&&i?Cesium.Cartesian3.fromDegreesArrayHeights(t):Cesium.Cartesian3.fromDegreesArray(t),width:n,material:r}};return Cesium.defined(a)&&Object.extend(s,a),this.viewer.entities.add(s)}appendLineOnTerrain(e,t,n,r,i,a){if(Cesium.defined(t)&&t.length>=4){let u=t.length/2,l=[];for(var o=0;o<u;o++)l.push(new Cesium.Cartesian2(t[2*o],t[2*o+1]));var s=this.commFun.linearInterpolate(l,n);this.commFun.setZValueByTerrain(this.viewer.terrainProvider,r,s,this.viewer.scene.globe.ellipsoid,t=>{var n={positions:this.commFun.simplifyLine(t),width:1,geodesic:!0,id:e};Cesium.defined(a)&&Object.extend(n,a);let r=new Cesium.PathTool.PolylinePrimitive(n);this.scene.primitives.add(r),"function"==typeof i&&i(r)})}}appendGroundLine(e,t){let n=new Cesium.CorridorGeometry({positions:Cesium.Cartesian3.fromDegreesArray(e),width:100,cornerType:Cesium.CornerType.MITERED}),r=new Cesium.GeometryInstance({geometry:n,id:"groundPolygon_"+this.commFun.generateRandom(),attributes:{color:t}});return this.scene.primitives.add(new Cesium.GroundPrimitive({geometryInstances:r}))}appendGroundPolygon(e,t,n,r){let i=null;if(void 0===e||e.length<=0)return null;if(null===t||t.length<=0)i=new Cesium.PolygonGeometry({polygonHierarchy:new Cesium.PolygonHierarchy(Cesium.Cartesian3.fromDegreesArray(e))});else{let n=[];for(let e=0;e<t.length;e++)n.push(new Cesium.PolygonHierarchy(Cesium.Cartesian3.fromDegreesArray(t[e])));i=new Cesium.PolygonGeometry({polygonHierarchy:new Cesium.PolygonHierarchy(Cesium.Cartesian3.fromDegreesArray(e),n)})}let a={geometryInstances:new Cesium.GeometryInstance({geometry:i,id:"groundPolygon_"+this.commFun.generateRandom(),attributes:{color:n}})};return Cesium.defined(r)&&Object.extend(a,r),this.scene.primitives.add(new Cesium.GroundPrimitive(a))}}r.Layer.EntityController=da;class pa extends sa{constructor(e){super(e)}appendLabel(e,t,n,r,i){i=Cesium.defaultValue(i,Cesium.defaultValue.EMPTY_OBJECT);let a=Cesium.defaultValue(i.font,"14pt monospace"),o=Cesium.defaultValue(i.fillColor,Cesium.Color.WHITE),s=Cesium.defaultValue(i.outlineColor,Cesium.Color.WHITE),u=Cesium.defaultValue(i.style,Cesium.LabelStyle.FILL_AND_OUTLINE),l=Cesium.defaultValue(i.outlineWidth,1),c=Cesium.defaultValue(i.verticalOrigin,Cesium.VerticalOrigin.CENTER),f=Cesium.defaultValue(i.horizontalOrigin,Cesium.HorizontalOrigin.CENTER),h=Cesium.defaultValue(i.pixelOffset,new Cesium.Cartesian2(0,0)),d=Cesium.defaultValue(i.scaleByDistance,new Cesium.NearFarScalar(150,3,15e6,.5)),p=Cesium.defaultValue(i.transparentByDistance,new Cesium.NearFarScalar(15e4,1,15e6,0)),m=Cesium.defaultValue(i.heightReference,Cesium.HeightReference.NONE),y={name:"标签",position:Cesium.Cartesian3.fromDegrees(e,t,n),label:{text:r,font:a,fillColor:o,style:u,outlineWidth:l,outlineColor:s,verticalOrigin:c,horizontalOrigin:f,pixelOffset:h,heightReference:m,pixelOffsetScaleByDistance:d,translucencyByDistance:p},description:i.description};return Cesium.defined(i)&&Object.extend(y,i),this.viewer.entities.add(y)}appendBillboard(e,t,n,r,i,a,o,s){void 0!==s&&null!==s||(s={});let u=Cesium.defaultValue(s.scaleByDistance,new Cesium.NearFarScalar(150,3,15e6,.5)),l=Cesium.defaultValue(s.transparentByDistance,new Cesium.NearFarScalar(15e4,1,15e6,0)),c=Cesium.defaultValue(s.heightReference,Cesium.HeightReference.NONE),f={name:r,position:Cesium.Cartesian3.fromDegrees(e,t,n),billboard:{image:i,width:a,height:o,heightReference:c,pixelOffsetScaleByDistance:u,translucencyByDistance:l,verticalOrigin:Cesium.VerticalOrigin.BOTTOM},description:Cesium.defaultValue(s.description,"这是一个公告板的描述")};return Cesium.defined(s)&&Object.extend(f,s),this.viewer.entities.add(f)}appendLabelIcon(e,t,n,r,i,a,o,s,u,l,c){return l=void 0===l?Cesium.VerticalOrigin.BOTTOM:"center"===l?Cesium.VerticalOrigin.CENTER:"top"===l?Cesium.VerticalOrigin.TOP:Cesium.VerticalOrigin.BOTTOM,this.viewer.entities.add({name:e,position:Cesium.Cartesian3.fromDegrees(t,n,r),billboard:{image:o,width:s,height:u,pixelOffsetScaleByDistance:new Cesium.NearFarScalar(150,3,15e6,.5),translucencyByDistance:new Cesium.NearFarScalar(15e4,1,15e6,0),horizontalOrigin:Cesium.HorizontalOrigin.TOP},label:{text:e,font:i,style:Cesium.LabelStyle.FILL_AND_OUTLINE,fillColor:a,outlineWidth:1,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,horizontalOrigin:Cesium.HorizontalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,-u/4),pixelOffsetScaleByDistance:new Cesium.NearFarScalar(150,3,15e6,.5),translucencyByDistance:new Cesium.NearFarScalar(15e4,1,15e6,0)},description:c})}appendLabelIconComm(e,t,n,r,i){return this.viewer.entities.add({name:e,description:t,position:n,billboard:r,label:i})}}r.Manager.LabelLayer=pa;class ma{constructor(e){this._viewer=Cesium.defaultValue(e.viewer,void 0),this._screenSpaceEventHandler=new Cesium.ScreenSpaceEventHandler(this._viewer.scene.canvas)}get viewer(){return this._viewer}get screenSpaceEventHandler(){return this._screenSpaceEventHandler}registerMouseEvent(e,t,n){let r;return"LEFT_CLICK"===e?r=this.screenSpaceEventHandler.setInputAction(function(e){"function"==typeof t&&t(e)},Cesium.ScreenSpaceEventType.LEFT_CLICK):"RIGHT_CLICK"===e?r=this.screenSpaceEventHandler.setInputAction(function(e){"function"==typeof t&&t(e)},Cesium.ScreenSpaceEventType.RIGHT_CLICK):"MOUSE_MOVE"===e?r=this.screenSpaceEventHandler.setInputAction(function(e){"function"==typeof t&&t(e)},Cesium.ScreenSpaceEventType.MOUSE_MOVE):"LEFT_DOUBLE_CLICK"===e?r=this.screenSpaceEventHandler.setInputAction(function(e){"function"==typeof t&&t(e)},Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK):"RIGHT_DOUBLE_CLICK"===e?r=this.screenSpaceEventHandler.setInputAction(function(e){"function"==typeof t&&t(e)},Cesium.ScreenSpaceEventType.RIGHT_DOUBLE_CLICK):"WHEEL"===e&&(r=this.screenSpaceEventHandler.setInputAction(function(e){"function"==typeof t&&t(e)},Cesium.ScreenSpaceEventType.WHEEL)),r}unRegisterMouseEvent(e){"LEFT_CLICK"===e?this.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK):"RIGHT_CLICK"===e?this.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.RIGHT_CLICK):"MOUSE_MOVE"===e?this.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE):"LEFT_DOUBLE_CLICK"===e?this.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK):"RIGHT_DOUBLE_CLICK"===e?this.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.RIGHT_DOUBLE_CLICK):"WHEEL"===e&&this.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.WHEEL)}}r.Manager.MouseEventManager=ma;class ya extends sa{constructor(e){super(e),this._popupContain=[],this._commonFun=new Qi(e)}get popupContain(){return this._popupContain}get commFun(){return this._commonFun}appendPopUp(e,t,n,r,i,a){if(null!==this.popupContain&&this.popupContain.length>0)for(let e=0;e<this.popupContain.length;e++){let t=this.popupContain[e].position;if(t.x===n.x&&t.y===n.y&&t.z===n.z)return}let o=document.getElementById(e);null!==o&&void 0!==o||((o=document.createElement("div")).id="popup");let s=this.commFun.generateRandom(),u=document.createElement("div");u.setAttribute("id","popup_"+s),u.setAttribute("class","leaflet-popup"),u.setAttribute("style","top:5px;left:0;");let l=document.createElement("a");l.setAttribute("class","leaflet-popup-close-button"),l.setAttribute("href","#"),l.innerHTML="×";let c=this;"function"==typeof i&&(l.onclick=function(){i("popup_"+s,c)}),u.appendChild(l);let f=document.createElement("div");f.setAttribute("class","leaflet-popup-content-wrapper");let h=document.createElement("div");h.setAttribute("class","leaflet-popup-content"),h.setAttribute("style","max-width: 300px;"),h.innerHTML=t,f.appendChild(h),u.appendChild(f);let d=document.createElement("div");d.setAttribute("class","leaflet-popup-tip-container");let p=document.createElement("div");p.setAttribute("class","leaflet-popup-tip"),d.appendChild(p),u.appendChild(d),o.appendChild(u);let m=Cesium.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,n);m.x=Math.round(m.x),m.y=Math.round(m.y),null!==r&&void 0!==r||(r=[0,0]);let y=Math.ceil(this.viewer.camera.positionCartographic.height),g=-1,b=-1,v=-1;Cesium.defined(a)&&(Cesium.defined(a.scaleByDistance)&&(g=ga(y,a.scaleByDistance)),Cesium.defined(a.translucencyByDistance)&&(b=ga(y,a.translucencyByDistance)),Cesium.defined(a.pixelOffsetScaleByDistance)&&(v=ga(y,a.pixelOffsetScaleByDistance))),v=v>0?v:1,b=b>=0?b:1,u.style.transformOrigin="left top";let w=0,O=0;return g>0?(w=m.x-u.offsetWidth*g/2+r[0]*v*g,O=m.y-u.offsetHeight*g+r[1]*v*g,u.style.transform="translate3d("+w+"px, "+O+"px, 0)  scale("+g+", "+g+") "):(w=m.x-u.offsetWidth/2+r[0]*v,O=m.y-u.offsetHeight+r[1]*v,u.style.transform="translate3d("+w+"px, "+O+"px, 0) "),b>=0&&(u.style.opacity=b),Cesium.defined(a)?this.popupContain.push(new ba({id:"popup_"+s,containID:e,position:n,element:u,offset:r,scaleByDistance:a.scaleByDistance,translucencyByDistance:a.translucencyByDistance,pixelOffsetScaleByDistance:a.pixelOffsetScaleByDistance})):this.popupContain.push(new ba({id:"popup_"+s,containID:e,position:n,element:u,wPosition:m,offset:r})),"popup_"+s}refreshPopUps(){this.viewer.camera.percentageChanged=.01,this.viewer.camera.changed.addEventListener(this.updatePopups,this)}updatePopups(e){let t=this.popupContain;if(null!==t&&t.length>0){let e=Math.ceil(this.viewer.camera.positionCartographic.height);for(let n=0;n<t.length;n++){let r=t[n],i=-1,a=-1,o=-1;Cesium.defined(r.scaleByDistance)&&(i=ga(e,r.scaleByDistance)),Cesium.defined(r.translucencyByDistance)&&(a=ga(e,r.translucencyByDistance)),Cesium.defined(r.pixelOffsetScaleByDistance)&&(o=ga(e,r.pixelOffsetScaleByDistance)),o=o>0?o:1,(a=a>=0?a:1)>=0&&(r.element.style.opacity=a);let s=Cesium.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,r.position);if(void 0===s)return;s.x=Math.round(s.x),s.y=Math.round(s.y),r.element.style.transformOrigin="left top";let u=0,l=0;i>0?(u=Math.round(s.x-r.element.offsetWidth*i/2+r.offset[0]*o*i),l=Math.round(s.y-r.element.offsetHeight*i+r.offset[1]*o*i),r.element.style.transform="translate3d("+u+"px, "+l+"px, 0)  scale("+i+", "+i+") "):(u=Math.round(s.x-r.element.offsetWidth/2+r.offset[0]*o),l=Math.round(s.y-r.element.offsetHeight+r.offset[1]*o),r.element.style.transform="translate3d("+u+"px, "+l+"px, 0)")}}}removePopUp(e,t,n){let r=Cesium.defaultValue(t,this),i=document.getElementById(e);if(null===i||void 0===i)return;for(;i.hasChildNodes();)i.removeChild(i.firstChild);let a=!0;if(Cesium.defined(n.removeDiv)&&(a=n.removeDiv),a&&null!==i.parentNode&&i.parentNode.removeChild(i),null!==r.popupContain&&r.popupContain.length>0){for(let t=0,n=0;t<r.popupContain.length;t++)r.popupContain[t].id!==e&&(r.popupContain[n++]=r.popupContain[t]);r.popupContain.length-=1}r.popupContain.length<=0&&(r.viewer.camera.percentageChanged=.5,r.viewer.camera.changed.removeEventListener(this.updatePopups,this))}clearPopUps(){if(null!==this.popupContain&&this.popupContain.length>0){for(let e=0;e<this.popupContain.length;e++){let t=this.popupContain[e].id;if(null!==t){let e=document.getElementById(t);for(;e.hasChildNodes();)e.removeChild(e.firstChild);null!==e.parentNode&&e.parentNode.removeChild(e)}}this.popupContain.length=0}this.popupContain.length<=0&&(this.viewer.camera.percentageChanged=.5,this.viewer.camera.changed.removeEventListener(this.updatePopups,this))}}function ga(e,t){let n=-1;if(e<=t.near)n=t.nearValue;else if(e>=t.far)n=t.farValue;else{let r=Math.ceil(Math.log(t.far/t.near)/Math.log(2)),i=Math.round(Math.log(e/t.near)/Math.log(2));n=t.nearValue+(t.farValue-t.nearValue)*i/r}return n}class ba{constructor(e){this.id=Cesium.defaultValue(e.id,null),this.containID=Cesium.defaultValue(e.containID,null),this.position=Cesium.defaultValue(e.position,null),this.element=Cesium.defaultValue(e.element,null),this.wPosition=Cesium.defaultValue(e.wPosition,null),this.offset=Cesium.defaultValue(e.offset,[0,0]),this.scaleByDistance=Cesium.defaultValue(e.scaleByDistance,null),this.translucencyByDistance=Cesium.defaultValue(e.translucencyByDistance,null),this.pixelOffsetScaleByDistance=Cesium.defaultValue(e.pixelOffsetScaleByDistance,null)}}r.Manager.PopupController=ya;class va{constructor(e){this._viewer=Cesium.defaultValue(e.viewer,void 0),this._scene=this._viewer.scene,this._ellipsoid=this._viewer.scene.globe.ellipsoid}get viewer(){return this._viewer}get scene(){return this._scene}showPosition(e,t){let n=this;Cesium.defined(t)||(t={});let r,i,a=Cesium.defaultValue(t.showHpr,!1),o=Cesium.defaultValue(t.showSelectTileInfo,!1),s=Cesium.defaultValue(t.showViewLevelInfo,!1),u=0,l=null,c=null,f=null,h=new Cesium.Cartesian3,d=null,p=this._ellipsoid,m=this.viewer.scene.globe._surface.tileProvider._tilesToRenderByTextureCount;function y(e){let t,r=n.viewer.scene.camera.pickEllipsoid(e,p);if(Cesium.defined(r)){let e=p.cartesianToCartographic(r),i=n.viewer.scene.globe._surface.tileProvider._tilesToRenderByTextureCount;for(let n=0;!t&&n<i.length;++n){let r=i[n];if(Cesium.defined(r))for(let n=0;!t&&n<r.length;++n){let i=r[n];Cesium.Rectangle.contains(i.rectangle,e)&&(t=i)}}}return t}function g(){for(let e=0;e<m.length;e++)if(m[e])for(let t=0;t<m[e].length;t++)Cesium.Rectangle.contains(m[e][t].rectangle,n.viewer.camera.positionCartographic)&&(u=m[e][t]._level)}function b(t){h=n.viewer.getCartesian3Position(t,h);let i=n.viewer.camera,m="";if(h){let e=p.cartesianToCartographic(h);l=Cesium.Math.toDegrees(e.longitude),c=Cesium.Math.toDegrees(e.latitude),f=Math.ceil(n.viewer.camera.positionCartographic.height),d=Math.max(n.viewer.scene.globe.getHeight(e),e.height),m="经度:"+l.toFixed(4)+"°，纬度:"+c.toFixed(4)+"°，海拔高度:"+d.toFixed(0)+"米，相机视角高度:"+f.toFixed(0)+"米"}let y="";a&&(y=" heading："+Cesium.Math.toDegrees(i.heading).toFixed(1)+" pitch："+Cesium.Math.toDegrees(i.pitch).toFixed(1)+" roll："+Cesium.Math.toDegrees(i.roll).toFixed(1));let g="";o&&r&&(g="，瓦片X:"+r.x+"，瓦片Y:"+r.y+"，瓦片级别:"+r.level+"，"),(void 0===d||d<-7e3)&&(d=0);let b="";s&&(b="当前地图级别:"+u);let v=m+y+g+b;document.getElementById(e).innerHTML=v}if(void 0===e||null===e){let t=document.createElement("div");t.className="coordinateClass",t.id="coordinateDiv";let n=document.createElement("label");e=n.id="coordinate_location";let r=document.createElement("style");r.innerHTML='.coordinate_location {color: #F0EFEF; line-height: 30px; margin-left: 30%;bottom:0px;font-size: 80%;font:"雅黑";}',n.style=r,t.appendChild(n),this.viewer._element.appendChild(t)}return void 0!==e&&(this.viewer.scene.globe.tileLoadProgressEvent.addEventListener(function(e){g()}),this.viewer.camera.changed.addEventListener(function(){g()}),Cesium.defined(this.screenSpaceMouseEventHandler)||(this.screenSpaceMouseEventHandler=new Cesium.ScreenSpaceEventHandler(this.scene.canvas)),this.screenSpaceMouseEventHandler.setInputAction(function(e){g(),r=y(e.endPosition),b(e.endPosition),i=e.endPosition},Cesium.ScreenSpaceEventType.MOUSE_MOVE),this.screenSpaceMouseEventHandler.setInputAction(function(e){g(),r=y(i),b(i)},Cesium.ScreenSpaceEventType.WHEEL)),document.getElementById(e)}flyTo(e,t,n,r){if(null===n||""===n||void 0===n){n=Math.ceil(this.viewer.camera.positionCartographic.height)}this.viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(e,t,n),duration:r,orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:Cesium.Math.toRadians(0)}})}flyToEx(e,t,n){let r,i,a,o,s=null;if(n?(s=Cesium.defaultValue(n.height,void 0),r=Cesium.Math.toRadians(Cesium.defaultValue(n.heading,Cesium.Math.toRadians(0))),i=Cesium.Math.toRadians(Cesium.defaultValue(n.pitch,Cesium.Math.toRadians(-90))),a=Cesium.Math.toRadians(Cesium.defaultValue(n.roll,Cesium.Math.toRadians(0))),o=Cesium.defaultValue(n.duration,1)):(r=Cesium.Math.toRadians(0),i=Cesium.Math.toRadians(-90),a=Cesium.Math.toRadians(0),o=1),null===s||""===s||void 0===s){s=Math.ceil(this.viewer.camera.positionCartographic.height)}this.viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(e,t,s),duration:o,orientation:{heading:r,pitch:i,roll:a}})}flyToComm(e,t,n,r){if(null===n||""===n||void 0===n){n=Math.ceil(this.viewer.camera.positionCartographic.height)}let i={destination:Cesium.Cartesian3.fromDegrees(e,t,n)};Cesium.defined(r)&&Cesium.Object.extend(i,r),this.viewer.camera.flyTo(i)}setView(e,t,n,r,i,a){this.viewer.camera.setView({position:Cesium.Cartesian3.fromDegrees(e,t,n),heading:Cesium.Math.toRadians(r),pitch:Cesium.Math.toRadians(i),roll:Cesium.Math.toRadians(a)})}icrf(e,t){if(e.mode!==Cesium.SceneMode.SCENE3D)return;let n=Cesium.Transforms.computeIcrfToFixedMatrix(t);if(Cesium.defined(n)){let t=e.camera,r=Cesium.Cartesian3.clone(e.camera.position),i=Cesium.Matrix4.fromRotationTranslation(n);t.lookAtTransform(i,r)}}openRotation(){this.viewer.camera.flyHome(0),this.viewer.clock.multiplier=10800,this.viewer.scene.preRender.addEventListener(this.icrf),this._shouldAnimate||(this.viewer.clock._shouldAnimate=!0)}closeRotation(){this.scene.preRender.removeEventListener(this.icrf),this.viewer.clock.multiplier=1,this.viewer.clock._shouldAnimate=this._shouldAnimate,this.viewer.camera.lookAtTransform(Cesium.Matrix4.IDENTITY)}goHome(){this.viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(104,30,15682725)})}changeSceneMode(e,t){let n=null;switch(e){case"3D":n=Cesium.SceneMode.SCENE3D;break;case"COLUMBUS_VIEW":n=Cesium.SceneMode.COLUMBUS_VIEW;break;case"2D":n=Cesium.SceneMode.SCENE2D}let r=Cesium.defaultValue(t,2);this.scene.mode!==n&&(n===Cesium.SceneMode.SCENE3D?this.viewer.scene.morphTo3D(r):n===Cesium.SceneMode.COLUMBUS_VIEW?this.viewer.scene.morphToColumbusView(r):this.viewer.scene.morphTo2D(r))}zoomOut(){let e=this._ellipsoid.cartesianToCartographic(this.viewer.camera.position).height;this.viewer.camera.zoomOut(e/10)}zoomIn(){let e=this._ellipsoid.cartesianToCartographic(this.viewer.camera.position).height;this.viewer.camera.zoomIn(e/10)}changeSkyBox(e){if(Cesium.defined(e)){this.scene.skyBox=e;let t=this.scene._frameState;this.scene.skyBox.update(t)}}flyToFeatureById(e,t,n){if(!Cesium.defined(e))return;Cesium.defined(n)||(n={});let r=this,i=!0;function a(a,o){if(i){let o=a.getProperty("name").split("_");parseInt(o[2])===t&&i&&function(t){let a=t.getProperty("maxPoint"),o=t.getProperty("minPoint"),s=new Cesium.Cartesian3(o[0],-o[2],o[1]),u=new Cesium.Cartesian3(a[0],-a[2],a[1]),l=t.tileset.root.transform;u=Cesium.Matrix4.multiplyByPoint(l,u,u),s=Cesium.Matrix4.multiplyByPoint(l,s,s);let c=Cesium.Math.toRadians(0),f=Cesium.Math.toRadians(0),h=Cesium.defaultValue(n.range,0),d=new Cesium.BoundingSphere;d=Cesium.BoundingSphere.fromCornerPoints(s,u,d),r.viewer.camera.flyToBoundingSphere(d,{offset:Cesium.defaultValue(n.offset,new Cesium.HeadingPitchRange(c,f,h))});for(let t=0;t<e.length;++t){let n=e[t];n.style=void 0,n.styleEngine.justSelect(!1,!0)}i=!1}(a)}return a.color}for(let t=0;t<e.length;++t){let n=e[t];n.styleEngine.justSelect(!0),n.style=new Cesium.Cesium3DTileStyle,n.style.color={evaluateColor:a}}}}r.Manager.SceneManager=va;class wa extends sa{constructor(e){super(e)}appendWMSTile(e,t,n){let r;""!==(n=Cesium.defaultValue(n,{})).proxy&&Cesium.defined(n.proxy)&&(r=n.proxy=new Cesium.DefaultProxy(n.proxy));let i={url:e,layers:t,parameters:n.parameters,proxy:r};return Cesium.defined(n)&&Object.extend(i,n),this.viewer.imageryLayers.addImageryProvider(new Cesium.WebMapServiceImageryProvider(i))}appendWMTSTile(e,t,n,r,i,a,o){let s,u="";return""!==i&&Cesium.defined(i)&&(u=new Cesium.DefaultProxy(i)),s="GoogleMapsCompatible_GB"===n?new Cesium.WebMercatorTilingScheme({numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1,rectangleSouthwestInMeters:new Cesium.Cartesian2(-20037508.342789244,-20037508.342789244),rectangleNortheastInMeters:new Cesium.Cartesian2(20037508.342789244,20037508.342789244)}):new Cesium.GeographicTilingScheme({rectangle:Cesium.Rectangle.fromDegrees(-180,-90,180,90),numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1}),this.viewer.imageryLayers.addImageryProvider(new Cesium.WebMapTileServiceImageryProvider({url:e,layer:t,style:a,format:"image/png",tileMatrixSetID:n,maximumLevel:r,credit:new Cesium.Credit("MapGIS"),tilingScheme:s,proxy:u,startLevel:Cesium.defaultValue(o,0)}))}appendWMTSTileExt(e,t){t=Cesium.defaultValue(t,{});let n,r=Cesium.defaultValue(t.synchronous,!0),i=Cesium.defaultValue(t.serverName,void 0),a=e+"?SERVICE=WMTS&VERSION=1.0.0&REQUEST=GetCapabilities";Cesium.defined(t.proxy)&&(a=t.proxy+"?url="+a);let o=r=>{let a,o,s=null,u=null,l=null,c=-1,f=r.getElementsByTagNameNS("*","Capabilities");if(null!==f&&f.length>0){var h=f[0];if(null!==h&&null!==(a=h.getElementsByTagNameNS("*","Contents"))&&a.length>0){let e,t=a[0].getElementsByTagNameNS("*","Layer");if(Cesium.defined(i))for(let n in t){e=t[n];for(var d=0;d<e.childNodes.length;d++)if("ows:Title"===e.childNodes[n].nodeName){i===e.childNodes[d].textContent&&(s=e);break}if(null!==t)break}else{e=t[0];for(let t in e.childNodes)if("ows:Title"===e.childNodes[t].nodeName){i=e.childNodes[t].textContent,s=e;break}}}}if(null!==s){let e=s.getElementsByTagNameNS("*","Style");if(null!==e&&e.length>0)for(let t in e[0].childNodes)if("ows:Identifier"===e[0].childNodes[t].nodeName){l=e[0].childNodes[t].textContent;break}let t=s.getElementsByTagNameNS("*","TileMatrixSetLink");if(null!==t&&t.length>0){var p=t[0].getElementsByTagNameNS("*","TileMatrixSet");null!==p&&p.length>0&&(u=p[0].textContent);var m=t[0].getElementsByTagNameNS("*","TileMatrixSetLimits");if(null!==m&&m.length>0){var y=m[0].getElementsByTagNameNS("*","TileMatrixLimits");null!==y&&y.length>0&&(c=y.length)}else if(-1===c&&Cesium.defined(a)){var g=a[0].getElementsByTagNameNS("*","TileMatrix");if(null!==g&&g.length>0){let e=g[g.length-1],t=g[0];for(let e in t.childNodes){t.childNodes[e].nodeName;if("ows:Identifier"===t.childNodes[e].nodeName){o=t.childNodes[e].textContent,o=parseInt(o);break}}for(let t in e.childNodes)if("ows:Identifier"===e.childNodes[t].nodeName){c=e.childNodes[t].textContent,c=parseInt(c),c-=o;break}}}}}if(null!==u&&-1!==c&&null!==l){let r="";Cesium.defined(t.proxy)&&(r=t.proxy+"?url="),r=r+e+"?tileMatrix={TileMatrix}&layer="+i+"&style="+l+"&tilecol={TileCol}&tilerow={TileRow}&tilematrixset={TileMatrixSet}&format=image/png&service=WMTS&version=1.0.0&&request=GetTile",n=this.appendWMTSTile(r,i,u,c,t.proxy,l,o),t.loaded&&t.loaded(n)}};if(r){new Cesium.Resource({url:a}).fetchXML().then(e=>o(e))}else{var s=new XMLHttpRequest;if(s.open("GET",a,!0),s.send(null),200===s.status){var u=(new DOMParser).parseFromString(s.responseText,"text/xml");u&&o(u)}}return n}}r.Layer.OGCLayer=wa;var Oa=n(26);const _a=Oa.baiduMapLayer?Object.getPrototypeOf(Oa.baiduMapLayer):Function;class Ca extends _a{constructor(e,t,n,r){super(e,t,n),_a&&(this.map=e,this.scene=e.scene,this.dataSet=t,this.options=n||{},this.init(n),this.argCheck(n),this.initDevicePixelRatio(),this.canvasLayer=r,this.stopAniamation=!1,this.animation=n.animation,this.clickEvent=this.clickEvent.bind(this),this.mousemoveEvent=this.mousemoveEvent.bind(this),this.bindEvent())}initDevicePixelRatio(){this.devicePixelRatio=window.devicePixelRatio||1}clickEvent(e){const t=e.point;super.clickEvent(t,e)}mousemoveEvent(e){const t=e.point;super.mousemoveEvent(t,e)}animatorMovestartEvent(){this.isEnabledTime()&&this.animator&&this.animator.stop()}animatorMoveendEvent(){const e=this.options.animation;this.isEnabledTime()&&this.animator&&(e&&e.stepsRange&&this.steps&&(this.steps.step=e.stepsRange.start||0),this.animator.start())}bindEvent(){this.options.methods&&(this.options.methods.click,this.options.methods.mousemove)}unbindEvent(){const{map:e}=this;this.options.methods&&(this.options.methods.click&&e.off("click",this.clickEvent),this.options.methods.mousemove&&e.off("mousemove",this.mousemoveEvent))}getContext(){return this.canvasLayer.canvas.getContext(this.context)}init(e){const t=this;this.options=e,this.initDataRange(e),this.context=t.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(t.options.zIndex),this.initAnimator()}_canvasUpdate(e){const{map:t}=this,{Cesium:n}=window,{scene:r}=this;if(!this.canvasLayer||this.stopAniamation)return;const i=this,a=i.options.animation,o=i.getContext();if(i.isEnabledTime()){if(void 0===e)return void this.clear(o);"2d"===this.context&&(o.save(),o.globalCompositeOperation="destination-out",o.fillStyle="rgba(0, 0, 0, .1)",o.fillRect(0,0,o.canvas.width,o.canvas.height),o.restore())}else this.clear(o);"2d"===this.context?Object.keys(i.options).forEach(e=>{o[e]=i.options[e]}):o.clear(o.COLOR_BUFFER_BIT);const s={transferCoordinate(e){const a=n.Cartesian3.fromDegrees(e[0],e[1]),o=a,s=t.camera.position;let u=r.globe.ellipsoid.cartesianToCartographic(s).height;if(u+=1*r.globe.ellipsoid.maximumRadius,!(n.Cartesian3.distance(s,o)>u)){const e=n.SceneTransforms.wgs84ToWindowCoordinates(i.map.scene,a);return e?[e.x,e.y]:[0,0]}return[void 0,void 0]}};void 0!==e&&(s.filter=(t=>{const n=a.trails||10;return!!(e&&t.time>e-n&&t.time<e)}));const u=i.dataSet.get(s);this.processData(u),"m"===i.options.unit&&i.options.size,i.options._size=i.options.size;let l=n.SceneTransforms.wgs84ToWindowCoordinates(r,n.Cartesian3.fromDegrees(0,0));l||(l=[0,0]),this.drawContext(o,new Oa.DataSet(u),i.options,l),i.options.updateCallback&&i.options.updateCallback(e)}updateData(e,t){let n=e;n&&n.get&&(n=n.get()),void 0!==n&&this.dataSet.set(n),super.update({options:t})}addData(e,t){let n=e;e&&e.get&&(n=e.get()),this.dataSet.add(n),this.update({options:t})}getData(){return this.dataSet}removeData(e){if(!this.dataSet)return;const t=this.dataSet.get({filter:t=>null==e||"function"!=typeof e||!e(t)});this.dataSet.set(t),this.update({options:null})}clearData(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}draw(){this.canvasLayer.draw()}clear(e){const t=e||this.context;t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}}let Ea=0;r.Overlayer.MapvLayer=class{constructor(e,t,n,r){if(this.map=e,this.scene=e.scene,this.mapvBaseLayer=new Ca(e,t,n,this),this.mapVOptions=n,this.initDevicePixelRatio(),this.canvas=this._creteWidgetCanvas(),this.render=this.render.bind(this),this.postRenderTime=0,this.cesiumOptions=n.cesium||{postRender:!1,postRenderFrame:10},this.postRenderFrame=void 0===this.cesiumOptions.postRenderFrame?10:this.cesiumOptions.postRenderFrame,void 0!==r)this.container=r,r.appendChild(this.canvas);else{const t=document.getElementsByClassName("cesium-widget"),n=t.length>0?t[0]:e.container;this.container=n,this.addInnerContainer()}this.bindEvent(),this._reset()}initDevicePixelRatio(){this.devicePixelRatio=window.devicePixelRatio||1}addInnerContainer(){this.container.appendChild(this.canvas)}bindEvent(){const e=this,{map:t}=this,{scene:n}=this;this.innerMoveStart=this.moveStartEvent.bind(this),this.innerMoveEnd=this.moveEndEvent.bind(this),this.innnerZoomStart=this.zoomStartEvent.bind(this),this.innnerZoomEnd=this.zoomEndEvent.bind(this),this.postEvent=this.postEvent.bind(this),this.postStartEvent=this.postStartEvent.bind(this),this.postEndEvent=this.postEndEvent.bind(this);const r=new Cesium.ScreenSpaceEventHandler(this.scene.canvas);this.handler=r,this.cesiumOptions.postRender?(n.camera.moveStart.addEventListener(()=>this.postStartEvent(),this),n.camera.moveEnd.addEventListener(()=>this.postEndEvent(),this)):(r.setInputAction(this.innerMoveEnd,Cesium.ScreenSpaceEventType.WHEEL),r.setInputAction(this.innerMoveStart,Cesium.ScreenSpaceEventType.LEFT_DOWN),r.setInputAction(this.innerMoveEnd,Cesium.ScreenSpaceEventType.LEFT_UP),r.setInputAction(this.innerMoveStart,Cesium.ScreenSpaceEventType.RIGHT_DOWN),r.setInputAction(this.innerMoveEnd,Cesium.ScreenSpaceEventType.RIGHT_UP),t.scene.camera.moveEnd.addEventListener(()=>e.innerMoveEnd()))}unbindEvent(){this.scene.camera.moveStart.removeEventListener(this.postStartEvent,this),this.scene.camera.moveEnd.removeEventListener(this.postEndEvent,this),this.scene.postRender.removeEventListener(this.postEvent,this),this.handler&&(this.handler.destroy(),this.handler=null)}moveStartEvent(){this.mapvBaseLayer&&this.mapvBaseLayer.animatorMovestartEvent(),this._unvisiable()}moveEndEvent(){this.mapvBaseLayer&&this.mapvBaseLayer.animatorMoveendEvent(),this._reset(),this._visiable()}zoomStartEvent(){this._unvisiable()}zoomEndEvent(){this._unvisiable()}postStartEvent(){this.scene.postRender.addEventListener(this.postEvent)}postEndEvent(){this.scene.postRender.removeEventListener(this.postEvent)}postEvent(){this.postRenderFrame<=1?this._reset():(this.postRenderTime+=1,this.postRenderTime%this.postRenderFrame==0&&(this._reset(),this._visiable()))}addData(e,t){void 0!==this.mapvBaseLayer&&this.mapvBaseLayer.addData(e,t)}updateData(e,t){void 0!==this.mapvBaseLayer&&this.mapvBaseLayer.updateData(e,t)}getData(){return this.mapvBaseLayer&&(this.dataSet=this.mapvBaseLayer.getData()),this.dataSet}removeData(e){void 0!==this.mapvBaseLayer&&this.mapvBaseLayer&&this.mapvBaseLayer.removeData(e)}removeAllData(){void 0!==this.mapvBaseLayer&&this.mapvBaseLayer.clearData()}_visiable(){return this.canvas.style.display="block",this}_unvisiable(){return this.canvas.style.display="none",this}_createCanvas(){const e=document.createElement("canvas");Ea+=1,e.id=this.mapVOptions.layerid||`mapv${Ea}`,e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=this.mapVOptions.zIndex||100,e.width=parseInt(this.map.canvas.width,10),e.height=parseInt(this.map.canvas.height,10),e.style.width=this.map.canvas.style.width,e.style.height=this.map.canvas.style.height;const{devicePixelRatio:t}=this;return"2d"===this.mapVOptions.context&&e.getContext(this.mapVOptions.context).scale(t,t),e}_creteWidgetCanvas(){const e=document.createElement("canvas");Ea+=1,e.id=this.mapVOptions.layerid||`mapv${Ea}`,e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=this.mapVOptions.zIndex||100,e.width=parseInt(this.map.canvas.width,10),e.height=parseInt(this.map.canvas.height,10),e.style.width=this.map.canvas.style.width,e.style.height=this.map.canvas.style.height;const{devicePixelRatio:t}=this;return"2d"===this.mapVOptions.context&&e.getContext("2d").scale(t,t),e}_reset(){this.resizeCanvas(),this.render()}draw(){this._reset()}show(){this._visiable()}hide(){this._unvisiable()}destroy(){this.remove()}remove(){void 0!==this.mapvBaseLayer&&(this.removeAllData(),this.mapvBaseLayer.clear(this.mapvBaseLayer.getContext()),this.mapvBaseLayer=void 0,this.canvas.parentElement.removeChild(this.canvas),this.options.postRender&&this.scene.postRender.removeEventListener(this.postEventHandle))}update(e){void 0!==e&&this.updateData(e.data,e.options)}resizeCanvas(){if(void 0===this.canvas||null===this.canvas)return;const{canvas:e}=this;e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.width=parseInt(this.map.canvas.width,10),e.height=parseInt(this.map.canvas.height,10);const{devicePixelRatio:t}=this;"2d"===this.mapVOptions.context&&e.getContext("2d").scale(t,t)}render(){void 0!==this.mapvBaseLayer&&this.mapvBaseLayer._canvasUpdate()}};var xa=n(8),Sa=n.n(xa);function ja(e,t){this._CesiumMap=e,this._CesiumScene=e.scene,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=t}ja.prototype.dimensions=["lng","lat"],ja.prototype.setMapOffset=function(e){this._mapOffset=e},ja.prototype.getBMap=function(){return this._CesiumMap},ja.prototype.dataToPoint=function(e){const t=Cesium.Cartesian3.fromDegrees(e[0],e[1]);let{position:n}=this._CesiumMap.camera,r=this._CesiumMap.scene.globe.ellipsoid.cartesianToCartographic(n).height;if(r+=1.2*this._CesiumMap.scene.globe.ellipsoid.maximumRadius,Cesium.Cartesian3.distance(n,t)>r)return[-50,-50];const i=this._mapOffset;n=Cesium.Cartesian3.fromDegrees(e[0],e[1]);let a=Cesium.SceneTransforms.wgs84ToWindowCoordinates(this._CesiumScene,n);return[(a=a||{x:0,y:0}).x-i[0],a.y-i[1]]},ja.prototype.pointToData=function(e){const t=this._mapOffset,n=Cesium.Cartesian3.fromDegrees(e[0]+t[0],e[1]+t[1]),r=Cesium.SceneTransforms.wgs84ToWindowCoordinates(this._CesiumScene,n);return[r.x,r.y]},ja.prototype.getViewRect=function(){const e=this._api;return new Sa.a.graphic.BoundingRect(0,0,e.getWidth(),e.getHeight())},ja.prototype.getRoamTransform=function(){return Sa.a.matrix.create()},ja.prototype.prepareCustoms=function(){const e=Sa.a.util,t=this.getViewRect();return{coordSys:{type:"cesium",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:e.bind(this.dataToPoint,this),size:e.bind(function(t,n){const r=n||[0,0];return e.map([0,1],e=>{const n=r[e],i=t[e]/2,a=[],o=[];return a[e]=n-i,o[e]=n+i,a[1-e]=r[1-e],o[1-e]=r[1-e],Math.abs(this.dataToPoint(a)[e]-this.dataToPoint(o)[e])},this)},this)}}},ja.dimensions=ja.prototype.dimensions,ja.create=function(e,t){let n;e.eachComponent("cesium",e=>{const r=Sa.a.cesiumMap;(n=new ja(r,t)).setMapOffset(e.__mapOffset||[0,0]),e.coordinateSystem=n}),e.eachSeries(e=>{"cesium"===e.get("coordinateSystem")&&(e.coordinateSystem=n)})};let Ta=0;function Ia(e,t,n,r,i){if(!t)return;const{scene:a}=e,{camera:o}=e,s=o.computeViewRectangle(),u=Cesium.Math.toDegrees(s.south),l=Cesium.Math.toDegrees(s.north),c=Cesium.Math.toDegrees(s.east),f=Cesium.Math.toDegrees(s.west),h=window.document.getElementById(n);if(!h)return;let d,p,m;if(i&&i.longitude&&i.latitude){if(p=i.position.longitude,m=i.position.latitude,p<f||p>c||m>l||m<u)return void(h.style.display="none")}else d=Cesium.Ellipsoid.WGS84.cartesianToCartographic(t),p=Cesium.Math.toDegrees(d.longitude),m=Cesium.Math.toDegrees(d.latitude);const y=Cesium.SceneTransforms.wgs84ToWindowCoordinates(a,t);if(!y)return;let g=!1;const b=t,v=o.position;let w=a.globe.ellipsoid.cartesianToCartographic(v).height;if(w+=1*a.globe.ellipsoid.maximumRadius,Cesium.Cartesian3.distance(v,b)>w||(g=!0),(p<f||p>c||m>l||m<u)&&(g=!1),g){h.style.display="block";const e=window.document.getElementById(r),t=document.getElementById(r).offsetWidth,n=document.getElementById(r).offsetHeight;e.style.left=`${y.x-t/2}px`,e.style.top=`${y.y-(n-10)}px`}else h.style.display="none"}r.Overlayer.EchartsLayer=class{constructor(e,t,n){if(this.map=e,this.scene=e.scene,this.options=t,this.initStats=!1,this.handler=void 0,this.moveEndEvent=void 0,Ta+=1,this.layerId=t.layerId||`echarts${Ta}`,this.layerClass=t.layerClass||"echartlayerdefaultclass",this.initDevicePixelRatio(),this.canvas=this._createCanvas(),this.postRenderTime=0,this.postRenderFrame=t.postRenderFrame||30,void 0!==n)this.container=n,n.appendChild(this.canvas);else{const t=document.getElementsByClassName("cesium-widget"),n=t.length>0?t[0]:e.container;this.container=n,this.addInnerContainer()}return this.chart=Sa.a.init(this.canvas),this.initEcharts(),this._resizeCanvas(),this.resize(),this}initDevicePixelRatio(){this.devicePixelRatio=window.devicePixelRatio||1}addInnerContainer(){this.container.appendChild(this.canvas)}initEcharts(){return Sa.a.cesiumMap=this.map,Sa.a.registerCoordinateSystem("cesium",ja),Sa.a.extendComponentModel({type:"cesium",getBMap(){return this.__cesium},defaultOption:{roam:!1}}),Sa.a.registerAction({type:"CesiumRoma",event:"CesiumRoma",update:"updateLayout"},function(e,t){}),this}_createCanvas(){const e=document.createElement("div");e.className="cesium-echarts-layer",e.setAttribute("class","cesium-echarts-layer"),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=this.options.zIndex||100;const t=`${parseInt(this.map.canvas.width,10)}px`,n=`${parseInt(this.map.canvas.height,10)}px`;return e.width=t,e.height=n,e.style.width=t,e.style.height=n,e}_resizeCanvas(){const e=this;window.onresize=(()=>{const{canvas:t}=e,{map:n}=e;t.style.position="absolute",t.style.top="0px",t.style.left="0px";const r=`${parseInt(n.canvas.width,10)}px`,i=`${parseInt(n.canvas.height,10)}px`;t.width=r,t.height=i,t.style.width=r,t.style.height=i,e.chart.resize()})}_visible(){this.canvas.style.visibility="visible"}_unvisible(){this.canvas.style.visibility="hidden"}addTo(){const e=this;return Sa.a.extendComponentView({type:"cesium",render(t,n,r){let i=!0;const a=r.getZr().painter.getViewportRoot(),o=t.coordinateSystem,s=()=>{if(i||!e.map)return;e._unvisible();const n=e.map.canvas,s=[-parseInt(n.style.left,10)||0,-parseInt(n.style.top,10)||0];a.style.left=`${s[0]}px`,a.style.top=`${s[1]}px`,o.setMapOffset(s),t.__mapOffset=s,r.dispatchAction({type:"CesiumRoma"})},u=()=>{if(i||!e.map)return;const n=e.map.canvas,s=[-parseInt(n.style.left,10)||0,-parseInt(n.style.top,10)||0];a.style.left=`${s[0]}px`,a.style.top=`${s[1]}px`,o.setMapOffset(s),t.__mapOffset=s,r.dispatchAction({type:"CesiumRoma"}),e._visible()};e.moveEndEvent=u,e.handler=new Cesium.ScreenSpaceEventHandler(e.scene.canvas),!1===e.initStats&&(e.initStats=!0,e.options.postRender?e.map.scene.postRender.addEventListener(()=>{e.postRenderTime+=1,e.postRenderTime%e.postRenderFrame==0&&e.moveEndEvent()}):(e.handler.setInputAction(function(){e._unvisible(),i||r.dispatchAction({type:"CesiumRoma"})},Cesium.ScreenSpaceEventType.WHEEL),e.handler.setInputAction(s,Cesium.ScreenSpaceEventType.LEFT_DOWN),e.handler.setInputAction(u,Cesium.ScreenSpaceEventType.LEFT_UP),e.handler.setInputAction(s,Cesium.ScreenSpaceEventType.RIGHT_DOWN),e.handler.setInputAction(u,Cesium.ScreenSpaceEventType.RIGHT_UP),e.map.scene.camera.moveEnd.addEventListener(()=>{e.moveEndEvent()}))),this._oldMoveHandler=s,this._oldZoomEndHandler=function(){i||r.dispatchAction({type:"CesiumRoma"})},t.get("roam"),i=!1}}),this.chart.setOption(this.options),this}show(){this._visible()}hide(){this._unvisible()}resize(){if(void 0===this.canvas||null===this.canvas)return;const{canvas:e}=this;e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.width=parseInt(this.map.canvas.width,10),e.height=parseInt(this.map.canvas.height,10),e.style.width=this.map.canvas.style.width,e.style.height=this.map.canvas.style.height}remove(){const e=this;return this.chart.clear(),this.map.scene.camera.moveEnd.removeEventListener(()=>{e.moveEndEvent()}),this.handler.destroy(),this.canvas.parentElement&&this.canvas.parentElement.removeChild(this.canvas),this.map=void 0,this}};let Ma=0;r.Overlayer.PopupLayer=class{constructor(e,t,n,r){this.map=e,this.scene=e.scene,this.position=t,this.options=n,this.container=r,Ma+=1,this.popupId=n.popupId||`cesium-popup-id-${Ma}`,this.popupClass=n.popupClass||"cesium-popup",this.popupContentId=n.popupContentId||`cesium-popup-content-id-${Ma}`,this.options.postRender=void 0===this.options.postRender||this.options.postRender,this.scene=e.scene,this.camera=e.camera,this.isShow=!0,this.handler=new Cesium.ScreenSpaceEventHandler(this.scene.canvas),this.infoDiv=null,t.entity&&(this.cartesian=t.entity.position._value),this.cartesian=this.cartesian||this.position.cartesian||Cesium.Cartesian3.fromDegrees(this.position.longitude,this.position.latitude,this.position.height);const i=document.getElementsByClassName("cesium-widget"),a=i.length>0?i[0]:e.container;return this.parent=a,this.showClose=void 0===n.showClose||n.showClose,this.popup=this._createPopup(),this.moveStart=this.eventMoveStart.bind(this),this.moveEnd=this.eventMoveEnd.bind(this),this.movement=this.movement.bind(this),this.update=this.update.bind(this),this.bindEvent(),this}_createPopup(){const e=this;this.hide=this.hide.bind(this);const t=window.document.createElement("div");t.id=this.popupId,t.style.display="none",t.innerHTML=`<div id="${this.popupContentId}" class="cesium-popup">`+`<div class="cesium-popup-content-wrapper">${this.container}</div>`+'<div class="cesium-popup-tip-container"><div class="cesium-popup-tip" /></div></div>';const n=window.document.createElement("div");n.className="cesium-popup-close-button",n.addEventListener("click",()=>e.hide()),n.innerText="x",this.parent.appendChild(t),window.document.getElementById(this.popupId).style.display="block",this.showClose&&window.document.getElementById(this.popupContentId).appendChild(n),this.infoDiv=t}bindEvent(){const e=this;this.handler.setInputAction(this.movement,Cesium.ScreenSpaceEventType.LEFT_CLICK),this.options.postRender?this.map.scene.postRender.addEventListener(()=>e.update()):(this.map.camera.changed.addEventListener(()=>e.update()),this.handler.setInputAction(this.moveStart,Cesium.ScreenSpaceEventType.LEFT_DOWN),this.handler.setInputAction(this.moveEnd,Cesium.ScreenSpaceEventType.LEFT_UP),this.map.scene.camera.moveEnd.addEventListener(()=>e.update()))}unbindEvent(){const e=this;this.options.postRender?this.map.scene.postRender.removeEventListener(()=>e.update()):(this.map.camera.changed.removeEventListener(()=>e.update()),this.map.scene.camera.moveEnd.removeEventListener(()=>e.update()),this.handler.destroy())}movement(e){const t=this.map.scene.pick(e.position),n=Cesium.defined(t)?t.id:void 0;Cesium.defined(n)&&this.position&&this.position.entity&&t.id===this.position.entity.id&&this.show()}eventMoveStart(){this.hide()}eventMoveEnd(){this.update()}update(){this.cartesian&&this.isShow&&Ia(this.map,this.cartesian,this.popupId,this.popupContentId,this.options)}show(){this.isShow=!0,window.document.getElementById(this.popupId).style.display="block"}hide(){this.isShow=!1,window.document.getElementById(this.popupId).style.display="none"}remove(){return this.unbindEvent(),this.parent.removeChild(this.infoDiv),this}},n.d(t,"CesiumZondy",function(){return r}),n.d(t,"CesiumSelectionIndicator",function(){return Yi}),n.d(t,"GlobelTweens",function(){return $i}),n.d(t,"AnalysisManager",function(){return ra}),n.d(t,"AdvancedAnalysisManager",function(){return ia}),n.d(t,"CommonFuncManager",function(){return Qi}),n.d(t,"CesiumFuncManager",function(){return ha}),n.d(t,"EntityController",function(){return da}),n.d(t,"LabelLayer",function(){return pa}),n.d(t,"LayerManager",function(){return fa}),n.d(t,"MouseEventManager",function(){return ma}),n.d(t,"PopupController",function(){return ya}),n.d(t,"SceneManager",function(){return va}),n.d(t,"BaseLayer",function(){return sa}),n.d(t,"LayerType",function(){return oa}),n.d(t,"OGCLayer",function(){return wa}),n.d(t,"M3DLayer",function(){return ua}),n.d(t,"TilesLayer",function(){return ca}),n.d(t,"TerrainLayer",function(){return la}),n.d(t,"MapvLayer",function(){}),n.d(t,"EchartsLayer",function(){}),n.d(t,"PopupLayer",function(){}),n.d(t,"MapvBaseLayer",function(){}),n.d(t,"MapCoordSys",function(){return ja})}]);