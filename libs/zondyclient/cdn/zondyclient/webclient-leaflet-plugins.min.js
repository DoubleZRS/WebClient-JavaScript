!function(n){var i={};function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=44)}([function(e,t){e.exports=L},function(e,t,n){"use strict";var i,o=n(0),r=(i=o)&&i.__esModule?i:{default:i};r.default.zondy=r.default.zondy||{},r.default.zondy.control=r.default.zondy.control||{},r.default.mapv=r.default.mapv||{},r.default.echarts=r.default.echarts||{},r.default.CRS=r.default.CRS||{}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.Zondy=window.Zondy=window.Zondy||{};i.Util=i.Util||{},i.Network=i.Network||{},i.Event=i.Event||{},i.Socket=i.Socket||{}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapvLayer=t.MapVLayer=void 0;var i,o=n(0),r=(i=o)&&i.__esModule?i:{default:i};n(1);var a=n(12);var s=t.MapVLayer=r.default.Layer.extend({initialize:function(e,t,n,i){this.map=e,this.dataset=t||{},this.mapvoption=n,i=i||{},this.render=this.render.bind(this),r.default.Util.setOptions(this,i),this._canvas=this._createCanvas(),r.default.stamp(this),this.innerMoveStartEvent=this.moveStartEvent.bind(this),this.innerMoveEndEvent=this.moveEndEvent.bind(this),this.innnerZoomstart=this.zoomStartEvent.bind(this),this.innerViewreset=this.viewresetEvent.bind(this),this.innerResize=this.resizeEvent.bind(this)},addData:function(e,t){this.mapvBaseLayer.addData(e,t)},updateData:function(e,t){this.mapvBaseLayer.updateData(e,t)},initDevicePixelRatio:function(){this.devicePixelRatio=window.devicePixelRatio||1},_createCanvas:function(){var e=document.createElement("canvas");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=this.options.zIndex||100;e.setAttribute("class","leaflet-tile-container leaflet-zoom-animated");var t=this.devicePixelRatio;return"2d"==this.mapvoption.context&&e.getContext(this.mapvoption.context).scale(t,t),e},onAdd:function(e){var t=this.getPane(),n=r.default.DomUtil.create("div","leaflet-layer",t);n.appendChild(this._canvas),this._container=n,this.mapvBaseLayer=new a.MapvBaseLayer(e,this.dataset,this.mapvoption,this),this.bindEvent(),this.options.tileLoader&&this._initTileLoader(),this._reset(),this.fire("loaded")},bindEvent:function(){var e=this.map;e.on("movestart",this.innerMoveStartEvent),e.on("moveend",this.innerMoveEndEvent),e.on("zoomstart",this.innnerZoomstart),e.on("viewreset",this.innerViewreset),e.on("resize ",this.innerResize),this.mapvBaseLayer.bindEvent()},unbindEvent:function(){var e=this.map;e.off("movestart",this.innerMoveStartEvent),e.off("moveend",this.innerMoveEndEvent),e.off("zoomstart",this.innnerZoomstart),e.off("viewreset",this.innerViewreset),e.off("resize ",this.innerResize),this.mapvBaseLayer.unbindEvent()},moveStartEvent:function(){this.mapvBaseLayer.animatorMovestartEvent(),this._unvisiable()},moveEndEvent:function(){this.mapvBaseLayer.animatorMoveendEvent(),this._reset(),this._visiable()},zoomStartEvent:function(){this._unvisiable()},viewresetEvent:function(){this._reset(),this._visiable()},resizeEvent:function(){this._reset(),this._visiable()},_animateZoom:function(e){this._animating||(this._animating=!0)},_endZoomAnim:function(){},getCanvas:function(){return this._canvas},getAttribution:function(){return this.options.attribution},draw:function(){return this._reset()},onRemove:function(e){r.default.DomUtil.remove(this._container),this.unbindEvent(),this.disposeFlag=!0},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){this._canvas.style.zIndex=e},bringToFront:function(){return this},bringToBack:function(){return this},_reset:function(){this.resizeCanvas(),this.fixPosition(),this.onResize(),this.render()},_visiable:function(){this.getCanvas().style.display="block"},_unvisiable:function(){this.getCanvas().style.display="none"},_updateOpacity:function(){},_render:function(){this.render()},fixPosition:function(){var e=this.map.getBounds().getNorthWest(),t=this.map.latLngToLayerPoint(e);this.map.latLngToLayerPoint(r.default.latLng(0,0)),this.map.getPixelOrigin();e&&r.default.DomUtil.setPosition(this._canvas,{x:t.x,y:t.y})},resizeCanvas:function(){var e=this.map.getSize(),t=this.getCanvas();t.width=e.x,t.height=e.y,t.style.width=e.x+"px",t.style.height=e.y+"px"},redraw:function(e){this.resizeCanvas(),this.fixPosition(),this.render()},show:function(){this._visiable()},hide:function(){this._unvisiable()},destroy:function(){r.default.DomUtil.remove(this._container),this.unbindEvent(),this.disposeFlag=!0},update:function(e){null!=e&&this.mapvBaseLayer.updateData(e.data,e.options)},onResize:function(){},render:function(){this.mapvBaseLayer._canvasUpdate()}}),u=t.mapvLayer=function(e,t,n){return new s(e,t,n)};r.default.zondy.MapvLayer=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayerEvent=t.BroadcastEvent=t.SubscribeEvent=t.BroadcastPrefix=t.SubscribePrefix=void 0;var i=n(2),o=(t.SubscribePrefix="/subscribe",t.BroadcastPrefix="/broadcast",t.SubscribeEvent={OPEN:"subscribeOpen",MESSAGE:"subscribeMessage",CLOSE:"subscribeClose",ERROR:"subscribeError"}),r=t.BroadcastEvent={OPEN:"broadcastOpen",MESSAGE:"broadcastMessage",CLOSE:"broadcastClose",ERROR:"broadcastError"};t.LayerEvent={UPDATE:"layerupdate"};i.Zondy.Event.SubscribeEvent=o,i.Zondy.Event.BroadcastEvent=r,i.Zondy.Event.LayerEvent=r},function(e,t){e.exports=function(){try{return mapv}catch(e){return{}}}()},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IServiceLoadData=void 0;var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=n(2),r=n(22);o.Zondy.ElasticSearch=o.Zondy.ElasticSearch||{};var a=t.IServiceLoadData=function(){function u(e,t,n,i,o,r,a,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.method=e,this.url=t,this.params=n,this.fetchServiceData(o,i,r,a,s)}return i(u,[{key:"fetchServiceData",value:function(t,n,i,e,o){r.FetchRequest.commit(this.method,this.url,this.params,{}).then(function(e){return e.json()}).then(function(e){i(e,t,n,o)})}}]),u}();o.Zondy.ElasticSearch.IServiceLoadData=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeojsonStreamLayer=void 0;var i,o=n(0),r=(i=o)&&i.__esModule?i:{default:i};t.GeojsonStreamLayer=r.default.GeoJSON.extend({initialize:function(e,n){(n=n||{}).style&&!n.pointToLayer&&(n.pointToLayer=function(e,t){return r.default.circleMarker(t,n.style())}),r.default.Util.setOptions(this,n),this._layers={},r.default.stamp(this),this.url=e,this.fieldHash={}},onMessage:function(e){var t=e.feature,n=e.feature.properties[this.options.field],i=null;void 0!==n&&this.fieldHash[n]?(i=this.getLayer(this.fieldHash[n]),this.parasFeature(i,t)):((i=r.default.GeoJSON.geometryToLayer(t,this.options)).feature=r.default.GeoJSON.asFeature(t),this.addLayer(i),void 0!==n&&(this.fieldHash[n]=this.getLayerId(i))),this.options.onEachFeature&&this.options.onEachFeature(t,i)},parasFeature:function(e,t){t.properties&&(e.feature.properties=t.properties);var n=[];switch(t.geometry.type){case"Point":n=r.default.GeoJSON.coordsToLatLng(t.geometry.coordinates),e.setLatLng(n);break;case"LineString":n=r.default.GeoJSON.coordsToLatLngs(t.geometry.coordinates,0),e.setLatLngs(n);break;case"MultiLineString":case"Polygon":n=r.default.GeoJSON.coordsToLatLngs(t.geometry.coordinates,1),e.setLatLngs(n);break;case"MultiPolygon":n=r.default.GeoJSON.coordsToLatLngs(t.geometry.coordinates,2),e.setLatLngs(n)}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceEvent=void 0;var i,o=n(0),r=(i=o)&&i.__esModule?i:{default:i};var a=t.ServiceEvent=r.default.Evented.extend({initialize:function(e,t){this.url=e,r.default.setOptions(this,t),this.fire("initialize",this)},destroy:function(){this.fire("destroy",this)}});r.default.zondy.ServiceEvent=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelFn=t.requestFn=t.emptyImageUrl=t.isArray=t.lastId=t.create=t.endsWith=t.extendFromArray=t.appendUrl=t.extend=t.Util=void 0,t.bind=c,t.stamp=function(e){return e._leaflet_id=e._leaflet_id||(t.lastId=l+=1),e._leaflet_id},t.throttle=function(e,t,n){var i,o,r,a;return a=function(){i=!1,o&&(r.apply(n,o),o=!1)},r=function(){i?o=arguments:(e.apply(n,arguments),setTimeout(a,t),i=!0)}},t.wrapNum=function(e,t,n){var i=t[1],o=t[0],r=i-o;return e===i&&n?e:((e-o)%r+r)%r+o},t.falseFn=function(){return!1},t.formatNum=function(e,t){var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n},t.trim=f,t.splitWords=function(e){return f(e).split(/\s+/)},t.setOptions=function(e,t){e.hasOwnProperty("options")||(e.options=e.options?u(e.options):{});for(var n in t)e.options[n]=t[n];return e.options},t.getParamString=function(e,t,n){var i=[];for(var o in e)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(e[o]));return(t&&-1!==t.indexOf("?")?"&":"?")+i.join("&")},t.template=function(e,i){return e.replace(d,function(e,t){var n=i[t];if(void 0===n)throw new Error("No value provided for variable "+e);return"function"==typeof n&&(n=n(i)),n})},t.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},t.requestAnimFrame=function(e,t,n){{if(!n||y!==v)return y.call(window,c(e,t));e.call(t)}},t.cancelAnimFrame=function(e){e&&m.call(window,e)};var i=n(2),o=(t.Util=i.Zondy.Util=i.Zondy.Util||{},t.extend=function(e,t){if(e=e||{},t){for(var n in t){var i=t[n];void 0!==i&&(e[n]=i)}!("function"==typeof window.Event&&t instanceof window.Event)&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e}),r=t.appendUrl=function(e,t){var n=e;if(t){var i=(e+" ").split(/[?&]/);n+=" "===i.pop()?t:i.length?"&"+t:"?"+t}return n},a=t.extendFromArray=function(e,t){var n=!0,i=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;for(var u in s)e[u]=s[u]}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return e},s=t.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},u=t.create=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function c(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var i=n.call(arguments,2);return function(){return e.apply(t,i.length?i.concat(n.call(arguments)):arguments)}}var l=t.lastId=0;function f(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}var d=/\{ *([\w_-]+) *\}/g;t.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.emptyImageUrl="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function h(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var p=0;function v(e){var t=+new Date,n=Math.max(0,16-(t-p));return p=t+n,window.setTimeout(e,n)}var y=t.requestFn=window.requestAnimationFrame||h("RequestAnimationFrame")||v,m=t.cancelFn=window.cancelAnimationFrame||h("CancelAnimationFrame")||h("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};i.Zondy.Util.extend=o,i.Zondy.Util.appendUrl=r,i.Zondy.Util.endsWith=s,i.Zondy.Util.extendFromArray=a},function(e,t){e.exports=function(){try{return echarts}catch(e){return{}}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapvBaseLayer=void 0;var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),d=n(5),r=n(0),h=(i=r)&&i.__esModule?i:{default:i};function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=d.baiduMapLayer?d.baiduMapLayer.__proto__:Function;t.MapvBaseLayer=function(e){function a(e,t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var o=s(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t,n));if(!u)return s(o);o.map=e,o.dataSet=t;var r=o;return n=n||{},r.init(n),r.argCheck(n),o.initDevicePixelRatio(),o.canvasLayer=i,o.clickEvent=o.clickEvent.bind(o),o.mousemoveEvent=o.mousemoveEvent.bind(o),o.bindEvent(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,u),o(a,[{key:"clickEvent",value:function(e){var t=this.map.containerPointToLayerPoint([0,0]),n=this.devicePixelRatio||1,i=e.layerPoint;i.x,t.x,i.y,t.y}},{key:"mousemoveEvent",value:function(e){if(e){var t=this.map.containerPointToLayerPoint([0,0]),n=this.devicePixelRatio||1,i=e.layerPoint;i.x,t.x,i.y,t.y}}},{key:"addAnimatorEvent",value:function(){}},{key:"animatorMovestartEvent",value:function(){var e=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=e.stepsRange.start)}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator}},{key:"bindEvent",value:function(e){var t=this.map;this.options.methods&&(this.options.methods.click&&t.on("click",this.clickEvent),this.options.methods.mousemove&&t.on("mousemove",this.mousemoveEvent))}},{key:"unbindEvent",value:function(e){var t=this.map;this.options.methods&&(this.options.methods.click&&t.removeListener("click",this.clickEvent),this.options.methods.mousemove&&t.removeListener("mousemove",this.mousemoveEvent))}},{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"getContext",value:function(){return this.canvasLayer.getCanvas().getContext(this.context)}},{key:"_canvasUpdate",value:function(n){if(this.canvasLayer&&!this.canvasLayer.disposeFlag){var e=this,i=this.map,o=e.options.animation,t=this.getContext();if(e.isEnabledTime()){if(void 0===n)return void this.clear(t);"2d"==this.context&&(t.save(),t.globalCompositeOperation="destination-out",t.fillStyle="rgba(0, 0, 0, .1)",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.restore())}else this.clear(t);if("2d"==this.context)for(var r in e.options)t[r]=e.options[r];else t.clear(t.COLOR_BUFFER_BIT);if(!(e.options.minZoom&&i.getZoom()<e.options.minZoom||e.options.maxZoom&&i.getZoom()>e.options.maxZoom)){var a=i.getBounds().getNorthWest(),s=i.latLngToContainerPoint(a),u={transferCoordinate:function(e){var t=i.latLngToContainerPoint(new h.default.LatLng(e[1],e[0]));return[t.x-s.x,t.y-s.y]}};void 0!==n&&(u.filter=function(e){var t=o.trails||10;return!!(n&&e.time>n-t&&e.time<n)});var c=e.dataSet.get(u);this.processData(c),"m"==e.options.unit&&e.options.size,e.options._size=e.options.size;var l=i.latLngToContainerPoint(h.default.latLng(0,0)),f={x:l.x-s.x,y:l.y-s.y};this.drawContext(t,new d.DataSet(c),e.options,f),e.options.updateCallback&&e.options.updateCallback(n)}}}},{key:"init",value:function(e){this.options=e,this.initDataRange(e),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"updateData",value:function(e,t){var n=e;n&&n.get&&(n=n.get()),null!=n&&this.dataSet.set(n),function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0}(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"update",this).call(this,{options:t})}},{key:"addData",value:function(e,t){var n=e;e&&e.get&&(n=e.get()),this.dataSet.add(n),this.update({options:t})}},{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"clear",value:function(e){e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}}]),a}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.URL_HTTP_PROFIX="http://",t.URL_DIVISION="/",t.URL_SUB=":",t.uriSocket="8020",t.uriBody_end="?",t.uriParamLink="&",t.elsName="es",t.elsQuery="generalQuery",t.elsIndex="indexName=",t.elsType="typeName=",t.elsSpatial="spatialCondition=",t.elsTimeComdition="timeCondition=",t.elsQueryField="queryField=",t.PARAM_SUB=":",t.PARAM_COMMA=",",t.PARAM_SPLIT=";",t.aggGeoFormat="0",t.elsPercision="percision",t.SPACE_ENUM_POINT="point",t.SPACE_ENUM_LINE="line",t.SPACE_ENUM_POLYGON="polygon",t.QUERY_GEOHASH="stGeoHashQueryByAgg",t.QUERY_GEOHASH_POINT="0",t.QUERY_GEOHASH_POLYGON="1"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.geoPointService=t.GeoPointService=void 0;var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=n(0),a=(i=r)&&i.__esModule?i:{default:i},s=(n(5),n(13));n(1);var u=n(3),c=n(7);a.default.zondy.GeoHashLayer=void 0;var l=t.GeoPointService=function(){function r(e,t,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.layer=null,this.map=n,this.urlAddress="",this.queryOption={},this.styleOption=o,this.prefixUrlPost(e,t,i),new c.IServiceLoadData("GET",this.urlAddress,this.queryOption,this.styleOption,this.map,this.onSuccess,this.onFailure)}return o(r,[{key:"prefixUrlPost",value:function(e,t,n){this.urlAddress=""+s.URL_HTTP_PROFIX+e+s.URL_SUB+t+"/es/"+s.QUERY_GEOHASH,this.queryOption.indexName=n.db,this.queryOption.typeName=n.table,this.queryOption.aggfield=n.space.field,this.queryOption.spatialCondition=s.SPACE_ENUM_POLYGON+s.PARAM_SUB+n.space.north+s.PARAM_COMMA+n.space.west+s.PARAM_SPLIT+n.space.north+s.PARAM_COMMA+n.space.east+s.PARAM_SPLIT+n.space.south+s.PARAM_COMMA+n.space.east+s.PARAM_SPLIT+n.space.south+s.PARAM_COMMA+n.space.west,this.queryOption.aggGeoFormat=s.QUERY_GEOHASH_POINT,this.queryOption.percision=n.space.percision,this.queryOption.timefield=n.time.field,this.queryOption.timeCondition=""+n.time.starttime+s.PARAM_COMMA+n.time.endtime}},{key:"onSuccess",value:function(e,t,n){null!=a.default.zondy.GeoHashLayer&&a.default.zondy.GeoHashLayer.remove();var i=[],o=e.features;null!=o&&null!=o&&(o.forEach(function(e){i.push({geometry:{type:"Point",coordinates:e.geometry.coordinates},count:e.properties.aggcount})}),i=new i(i),a.default.zondy.GeoHashLayer=new u.MapVLayer(t,i,n).addTo(t))}},{key:"onFailure",value:function(){}}]),r}(),f=t.geoPointService=function(e,t,n,i,o){return new l(e,t,n,i,o)};a.default.zondy.GeoPointService=f},function(e,t,n){var i,o,r;o=[t,e],void 0===(r="function"==typeof(i=function(e,t){"use strict";var n={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function f(t){try{delete window[t]}catch(e){window[t]=void 0}}function d(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(r){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=r,u=a.timeout||n.timeout,c=a.jsonpCallback||n.jsonpCallback,l=void 0;return new Promise(function(t,e){var n=a.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),i=c+"_"+n;window[n]=function(e){t({ok:!0,json:function(){return Promise.resolve(e)}}),l&&clearTimeout(l),d(i),f(n)},s+=-1===s.indexOf("?")?"?":"&";var o=document.createElement("script");o.setAttribute("src",""+s+c+"="+n),a.charset&&o.setAttribute("charset",a.charset),o.id=i,document.getElementsByTagName("head")[0].appendChild(o),l=setTimeout(function(){e(new Error("JSONP request to "+r+" timed out")),f(n),d(i),window[n]=function(){f(n)}},u),o.onerror=function(){e(new Error("JSONP request to "+r+" failed")),f(n),d(i),l&&clearTimeout(l)}})}})?i.apply(t,o):i)||(e.exports=r)},function(p,e){!function(e){"use strict";if(e.__disableNativeFetch||!e.fetch){c.prototype.append=function(e,t){e=i(e),t=a(t);var n=this.map[e];n||(n=[],this.map[e]=n),n.push(t)},c.prototype.delete=function(e){delete this.map[i(e)]},c.prototype.get=function(e){var t=this.map[i(e)];return t?t[0]:null},c.prototype.getAll=function(e){return this.map[i(e)]||[]},c.prototype.has=function(e){return this.map.hasOwnProperty(i(e))},c.prototype.set=function(e,t){this.map[i(e)]=[a(t)]},c.prototype.forEach=function(n,i){Object.getOwnPropertyNames(this.map).forEach(function(t){this.map[t].forEach(function(e){n.call(i,e,t,this)},this)},this)};var o={blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e},r=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},s.call(f.prototype),s.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},h.error=function(){var e=new h(null,{status:0,statusText:""});return e.type="error",e};var n=[301,302,303,307,308];h.redirect=function(e,t){if(-1===n.indexOf(t))throw new RangeError("Invalid status code");return new h(null,{status:t,headers:{location:e}})},e.Headers=c,e.Request=f,e.Response=h,e.fetch=function(n,i){return new Promise(function(r,a){var e;e=f.prototype.isPrototypeOf(n)&&!i?n:new f(n,i);var s=new XMLHttpRequest;var u=!1;function t(){if(4===s.readyState){var e=1223===s.status?204:s.status;if(e<100||599<e){if(u)return;return u=!0,void a(new TypeError("Network request failed"))}var t,o,n={status:e,statusText:s.statusText,headers:(t=s,o=new c,t.getAllResponseHeaders().trim().split("\n").forEach(function(e){var t=e.trim().split(":"),n=t.shift().trim(),i=t.join(":").trim();o.append(n,i)}),o),url:"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0},i="response"in s?s.response:s.responseText;u||(u=!0,r(new h(i,n)))}}s.onreadystatechange=t,s.onload=t,s.onerror=function(){u||(u=!0,a(new TypeError("Network request failed")))},s.open(e.method,e.url,!0);try{"include"===e.credentials&&("withCredentials"in s?s.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(e){console&&console.warn&&console.warn("set withCredentials error:"+e)}"responseType"in s&&o.blob&&(s.responseType="blob"),e.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send(void 0===e._bodyInit?null:e._bodyInit)})},e.fetch.polyfill=!0,void 0!==p&&p.exports&&(p.exports=e.fetch)}function i(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function c(t){this.map={},t instanceof c?t.forEach(function(e,t){this.append(t,e)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function u(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function l(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function t(e){var t=new FileReader;return t.readAsArrayBuffer(e),l(t)}function s(){return this.bodyUsed=!1,this._initBody=function(e,t){if("string"==typeof(this._bodyInit=e))this._bodyText=e;else if(o.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e,this._options=t;else if(o.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!o.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText=""},o.blob?(this.blob=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(t)},this.text=function(){var e,t,n,i,o,r,a,s=u(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,t=this._options,n=new FileReader,i=t.headers.map["content-type"]?t.headers.map["content-type"].toString():"",o=/charset\=[0-9a-zA-Z\-\_]*;?/,r=e.type.match(o)||i.match(o),a=[e],r&&a.push(r[0].replace(/^charset\=/,"").replace(/;$/,"")),n.readAsText.apply(n,a),l(n);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=u(this);return e||Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e,t){var n,i,o=(t=t||{}).body;if(f.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,o||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=(n=t.method||this.method||"GET",i=n.toUpperCase(),-1<r.indexOf(i)?i:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o,t)}function d(e){var o=new FormData;return e.trim().split("&").forEach(function(e){if(e){var t=e.split("="),n=t.shift().replace(/\+/g," "),i=t.join("=").replace(/\+/g," ");o.append(decodeURIComponent(n),decodeURIComponent(i))}}),o}function h(e,t){t||(t={}),this._initBody(e,t),this.type="default",this.status=t.status,this.ok=200<=this.status&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof c?t.headers:new c(t.headers),this.url=t.url||""}}("undefined"!=typeof self?self:this)},function(e,t){var n,i,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){(function(e,p){!function(n,i){"use strict";if(!n.setImmediate){var o,r,t,a,e,s=1,u={},c=!1,l=n.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(n);f=f&&f.setTimeout?f:n,"[object process]"==={}.toString.call(n.process)?o=function(e){p.nextTick(function(){h(e)})}:!function(){if(n.postMessage&&!n.importScripts){var e=!0,t=n.onmessage;return n.onmessage=function(){e=!1},n.postMessage("","*"),n.onmessage=t,e}}()?n.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){h(e.data)},o=function(e){t.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(r=l.documentElement,o=function(e){var t=l.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):o=function(e){setTimeout(h,0,e)}:(a="setImmediate$"+Math.random()+"$",e=function(e){e.source===n&&"string"==typeof e.data&&0===e.data.indexOf(a)&&h(+e.data.slice(a.length))},n.addEventListener?n.addEventListener("message",e,!1):n.attachEvent("onmessage",e),o=function(e){n.postMessage(a+e,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[s]=i,o(s),s++},f.clearImmediate=d}function d(e){delete u[e]}function h(e){if(c)setTimeout(h,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(i,n)}}(t)}finally{d(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(6),n(17))},function(e,o,r){(function(e){var t=void 0!==e&&e||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}o.setTimeout=function(){return new i(n.call(setTimeout,t,arguments),clearTimeout)},o.setInterval=function(){return new i(n.call(setInterval,t,arguments),clearInterval)},o.clearTimeout=o.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(t,this._id)},o.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},o.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},o._unrefActive=o.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(18),o.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,o.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(6))},function(e,t,n){"use strict";(function(t){var n=setTimeout;function i(){}function r(e){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function o(n,i){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,r._immediateFn(function(){var e=1===n._state?i.onFulfilled:i.onRejected;if(null!==e){var t;try{t=e(n._value)}catch(e){return void s(i.promise,e)}a(i.promise,t)}else(1===n._state?a:s)(i.promise,n._value)})):n._deferreds.push(i)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof r)return t._state=3,t._value=e,void u(t);if("function"==typeof n)return void l((i=n,o=e,function(){i.apply(o,arguments)}),t)}t._state=1,t._value=e,u(t)}catch(e){s(t,e)}var i,o}function s(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,s(t,e))})}catch(e){if(n)return;n=!0,s(t,e)}}r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=new this.constructor(i);return o(this,new c(e,t,n)),n},r.prototype.finally=function(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})},r.all=function(t){return new r(function(i,o){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return i([]);var a=r.length;function s(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){s(t,e)},o)}r[t]=e,0==--a&&i(r)}catch(e){o(e)}}for(var e=0;e<r.length;e++)s(e,r[e])})},r.resolve=function(t){return t&&"object"==typeof t&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(n){return new r(function(e,t){t(n)})},r.race=function(o){return new r(function(e,t){for(var n=0,i=o.length;n<i;n++)o[n].then(e,t)})},r._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){n(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},e.exports=r}).call(this,n(19).setImmediate)},function(e,t,n){"use strict";var i,o=n(20),r=(i=o)&&i.__esModule?i:{default:i};window.Promise=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FetchRequest=t.DefaultTimeout=t.CORS=void 0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(21),n(16);var i,o=n(15),r=(i=o)&&i.__esModule?i:{default:i},a=n(2),s=n(10);var u=window.fetch,l=a.Zondy.CORS=a.Zondy.CORS||window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,f=a.Zondy.DefaultTimeout=a.Zondy.DefaultTimeout||6e4,d=a.Zondy.FetchRequest={commit:function(e,t,n,i){switch(e=e?e.toUpperCase():e){case"GET":return this.get(t,n,i);case"POST":return this.post(t,n,i);case"PUT":return this.put(t,n,i);case"DELETE":return this.delete(t,n,i);default:return this.get(t,n,i)}},get:function(e,t,n){n=n||{};return e=this.prefixUrl(e,n),e=(0,s.appendUrl)(e,this.getParamString(t||{})),this.urlIsLong(e)?this.postSimulate("GET",e.substring(0,e.indexOf("?")-1),t,n):this.fetchByES(e,t,n,"GET")},delete:function(e,t,n){n=n||{};return e=this.prefixUrl(e,n),e=(0,s.appendUrl)(e,this.getParamString(t||{})),!this.urlIsLong(e)&&l?this.fetchByES(e,t,n,"DELETE"):this.postSimulate("DELETE",e.substring(0,e.indexOf("?")-1),t,n)},post:function(e,t,n){return n=n||{},this.fetchByES(this.prefixUrl(e,n),t,n,"POST")},put:function(e,t,n){return n=n||{},this.fetchByES(this.prefixUrl(e,n),t,n,"PUT")},urlIsLong:function(e){for(var t=0,n=null,i=0,o=e.length;i<o;i++)(n=e.charCodeAt(i))<127?t++:128<=n&&n<=2047?t+=2:2048<=n&&n<=65535&&(t+=3);return!(t<2e3)},postSimulate:function(e,t,n,i){return t+=(-1<t.indexOf("?")?"&":"?")+"_method="+e,"string"!=typeof n&&(n=JSON.stringify(n)),this.post(t,n,i)},prefixUrl:function(e,t){return t&&t.proxy&&("function"==typeof t.proxy?e=t.proxy(e):(e=decodeURIComponent(e),e=t.proxy+encodeURIComponent(e))),e},fetchByES:function(e,t,n,i){return(n=n||{}).headers=n.headers||{},n.headers["Content-Type"]||(n.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),n.timeout?this.timeDelay(n.timeout,u(e,{method:i,headers:n.headers,body:"PUT"===i||"POST"===i?t:void 0,credentials:n.withCredentials?"include":"omit",mode:"cors",timeout:f}).then(function(e){return e})):u(e,{method:i,body:"PUT"===i||"POST"===i?t:void 0,headers:n.headers,credentials:n.withCredentials?"include":"omit",mode:"cors",timeout:f}).then(function(e){return e})},fetchByJsonp:function(e,t){return t=t||{},(0,r.default)(e,{method:"GET",timeout:t.timeout}).then(function(e){return e})},timeDelay:function(n,i){return new Promise(function(e,t){setTimeout(function(){t(new Error("timeout"))},n),i.then(e,t)})},getParamString:function(e){var t=[];for(var n in e){var i=e[n];if(null!=i&&"function"!=typeof i){var o;if("object"===(void 0===i?"undefined":c(i))&&i.constructor===Array){for(var r,a=[],s=0,u=i.length;s<u;s++)r=i[s],a.push(encodeURIComponent(null==r?"":r));o="["+a.join(",")+"]"}else o=encodeURIComponent(i);t.push(encodeURIComponent(n)+"="+o)}}return t.join("&")}};t.CORS=l,t.DefaultTimeout=f,t.FetchRequest=d,a.Zondy.Network.FetchRequest=d,a.Zondy.Network.CORS=l,a.Zondy.Network.DefaultTimeout=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.URL_HTTP_PROFIX="http://",t.URL_DIVISION="/",t.URL_SUB=":",t.uriSocket="8020",t.uriBody_end="?",t.uriParamLink="&",t.elsName="es",t.elsQuery="generalQuery",t.elsIndex="indexName=",t.elsType="typeName=",t.elsSpatial="spatialCondition=",t.elsTimeComdition="timeCondition=",t.elsQueryField="queryField=",t.PARAM_SUB=":",t.PARAM_COMMA=",",t.PARAM_SPLIT=";",t.aggGeoFormat="0",t.elsPercision="percision",t.SPACE_ENUM_POINT="point",t.SPACE_ENUM_LINE="line",t.SPACE_ENUM_POLYGON="polygon",t.QUERY_GEOHASH="stGeoHashQueryByAgg",t.QUERY_GEOHASH_POINT="0",t.QUERY_GEOHASH_POLYGON="1"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.geoHashService=t.GeoHashService=void 0;var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=n(0),s=(i=r)&&i.__esModule?i:{default:i},u=n(5),c=n(23),l=n(7);n(1);var f=n(3);s.default.zondy.GeoHashLayer=void 0;var a=t.GeoHashService=function(){function a(e,t,n,i,o,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.layer=null,this.map=n,this.urlAddress="",this.queryOption={},this.styleOption=o,this.onCallback=r,this.prefixUrlPost(e,t,i),new l.IServiceLoadData("GET",this.urlAddress,this.queryOption,this.styleOption,this.map,this.onSuccess,this.onFailure,this.onCallback)}return o(a,[{key:"prefixUrlPost",value:function(e,t,n){this.urlAddress=""+c.URL_HTTP_PROFIX+e+c.URL_SUB+t+"/es/"+c.QUERY_GEOHASH,this.queryOption.indexName=n.db,this.queryOption.typeName=n.table,n&&n.space&&(this.queryOption.aggfield=n.space.field,this.queryOption.spatialCondition=c.SPACE_ENUM_POLYGON+c.PARAM_SUB+n.space.north+c.PARAM_COMMA+n.space.west+c.PARAM_SPLIT+n.space.north+c.PARAM_COMMA+n.space.east+c.PARAM_SPLIT+n.space.south+c.PARAM_COMMA+n.space.east+c.PARAM_SPLIT+n.space.south+c.PARAM_COMMA+n.space.west),n&&n.time&&(this.queryOption.timefield=n.time.field,this.queryOption.timeCondition=""+n.time.starttime+c.PARAM_COMMA+n.time.endtime,this.startTime=n.time.starttime,this.endTime=n.time.endtime),this.queryOption.aggGeoFormat=c.QUERY_GEOHASH_POINT,this.queryOption.percision=n.space.percision}},{key:"onSuccess",value:function(e,t,n,i){null!=s.default.zondy.GeoHashLayer&&s.default.zondy.GeoHashLayer.remove();var o=[],r=e.features;null!=r&&null!=r&&(r.forEach(function(e){o.push({geometry:{type:"Point",coordinates:e.geometry.coordinates},count:e.properties.aggcount})}),o=new u.DataSet(o),s.default.zondy.GeoHashLayer=new f.MapVLayer(t,o,n).addTo(t),null!=i&&null!=i&&i(e))}},{key:"onFailure",value:function(){}}]),a}(),d=t.geoHashService=function(e,t,n,i,o,r){return new a(e,t,n,i,o,r)};s.default.zondy.GeoHashService=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoPointService=t.GeoHashService=void 0;var i=n(24),o=n(14);t.GeoHashService=i.GeoHashService,t.GeoPointService=o.GeoPointService},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9);Object.defineProperty(t,"ServiceEvent",{enumerable:!0,get:function(){return i.ServiceEvent}});var o=n(25);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeojsonStreamLayer=void 0;var i=n(8);t.GeojsonStreamLayer=i.GeojsonStreamLayer},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapvBaseLayer=void 0;var i=n(12);t.MapvBaseLayer=i.MapvBaseLayer},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapvStreamLayer=void 0;var i,o=n(0),r=(i=o)&&i.__esModule?i:{default:i},a=n(3);t.MapvStreamLayer=a.MapVLayer.extend({initialize:function(e,t,n){n=n||{},r.default.Util.setOptions(this,n),this.mapvOption=n.mapvOption||{},this.data=[],this.lastDate=new Date,this.url=t,this.fieldHash={},this.fieldDeg=n.fieldDeg,this.iconUrl=n.iconUrl,this.timeSpeed=n.timeSpeed||100,this.createIcon(),a.MapVLayer.prototype.initialize.call(this,e,new window.mapv.DataSet([]),this.mapvOption,n)},onMessage:function(e){var t=e.feature,n=e.feature.properties[this.options.field],i=this.parasIcon(t);void 0!==n&&this.fieldHash[n]?this.data[this.fieldHash[n]]=i:void 0!==n&&(this.data.push(i),this.fieldHash[n]=this.data.length-1),this.updateLayer()},createIcon:function(){var e=this.iconUrl||"http://client.snanyun.com:8899/img/leaflet/marker/bike.png";this.icon=new Image,this.icon.src=e},parasIcon:function(e){this.mapvOption={draw:"icon"};var t=e.properties[this.fieldDeg]||0;return{geometry:{type:"Point",coordinates:e.geometry.coordinates},deg:t,icon:this.icon}},updateLayer:function(){var e=new Date;e-this.lastDate<this.timeSpeed||(this.updateData(this.data,this.mapvOption),this.lastDate=e)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Evented=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(10));var o=t.Evented=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"on",value:function(e,t,n){if("object"===(void 0===e?"undefined":a(e)))for(var i in e)this._on(i,e[i],t);else for(var o=0,r=(e=u.splitWords(e)).length;o<r;o++)this._on(e[o],t,n);return this}},{key:"off",value:function(e,t,n){if(e)if("object"===(void 0===e?"undefined":a(e)))for(var i in e)this._off(i,e[i],t);else for(var o=0,r=(e=u.splitWords(e)).length;o<r;o++)this._off(e[o],t,n);else delete this._Evented;return this}},{key:"_on",value:function(e,t,n){this._Evented=this._Evented||{};var i=this._Evented[e];i||(i=[],this._Evented[e]=i),n===this&&(n=void 0);for(var o={fn:t,ctx:n},r=i,a=0,s=r.length;a<s;a++)if(r[a].fn===t&&r[a].ctx===n)return;r.push(o)}},{key:"_off",value:function(e,t,n){var i,o,r;if(this._Evented&&(i=this._Evented[e]))if(t){if(n===this&&(n=void 0),i)for(o=0,r=i.length;o<r;o++){var a=i[o];if(a.ctx===n&&a.fn===t)return a.fn=u.falseFn,this._firingCount&&(this._Evented[e]=i=i.slice()),void i.splice(o,1)}}else{for(o=0,r=i.length;o<r;o++)i[o].fn=u.falseFn;delete this._Evented[e]}}},{key:"fire",value:function(e,t,n){if(!this.listens(e,n))return this;var i=u.extend({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._Evented){var o=this._Evented[e];if(o){this._firingCount=this._firingCount+1||1;for(var r=0,a=o.length;r<a;r++){var s=o[r];s.fn.call(s.ctx||this,i)}this._firingCount--}}return n&&this._propagateEvent(i),this}},{key:"listens",value:function(e,t){var n=this._Evented&&this._Evented[e];if(n&&n.length)return!0;if(t)for(var i in this._eventParents)if(this._eventParents[i].listens(e,t))return!0;return!1}},{key:"once",value:function(e,t,n){if("object"===(void 0===e?"undefined":a(e))){for(var i in e)this.once(i,e[i],t);return this}var o=u.bind(function(){this.off(e,t,n).off(e,o,n)},this);return this.on(e,t,n).on(e,o,n)}},{key:"addEventParent",value:function(e){return this._eventParents=this._eventParents||{},this._eventParents[u.stamp(e)]=e,this}},{key:"removeEventParent",value:function(e){return this._eventParents&&delete this._eventParents[u.stamp(e)],this}},{key:"_propagateEvent",value:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,u.extend({layer:e.target,propagatedFrom:e.target},e),!0)}}]),e}();o.addEventListener=o.on,o.removeEventListener=o.clearAllEventListeners=o.off,o.addOneTimeEventListener=o.once,o.fireEvent=o.fire,o.hasEventListeners=o.listens},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ISocketService=void 0;var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=n(2),r=n(31),a=n(4);o.Zondy.Socket.ISocketService=void 0;var s=t.ISocketService=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.url=e||"",this.options=t,this.subscribesocket=null,this.subscribesocket=null,this.evented=new r.Evented}return i(n,[{key:"createSubscribe",value:function(){var n=this;this.subscribesocket=this.connect(this.url+a.SubscribePrefix),this.subscribesocket.onopen=function(e){e.eventType=a.SubscribeEvent.OPEN,n.evented.fire(a.SubscribeEvent.OPEN,e)},this.subscribesocket.onmessage=function(e){var t=JSON.parse(e.data);e.feature=t,e.eventType=a.SubscribeEvent.MESSAGE,n.evented.fire(a.SubscribeEvent.MESSAGE,e)},this.subscribesocket.onclose=function(e){e.eventType=a.SubscribeEvent.CLOSE,n.evented.fire(a.SubscribeEvent.CLOSE,e)},this.subscribesocket.onerror=function(e){e.eventType=a.SubscribeEvent.ERROR,n.evented.fire(a.SubscribeEvent.ERROR,e)}}},{key:"createBroadcast",value:function(){var n=this;this.broadcastsocket=this.connect(this.url+a.BroadcastPrefix),this.broadcastsocket.onopen=function(e){e.eventType=a.BroadcastEvent.OPEN,n.evented.fire(a.BroadcastEvent.OPEN,e)},this.broadcastsocket.onmessage=function(e){var t=JSON.parse(e.data);e.feature=t,e.eventType=a.BroadcastEvent.MESSAGE,n.evented.fire(a.BroadcastEvent.MESSAGE,e)},this.broadcastsocket.onclose=function(e){e.eventType=a.BroadcastEvent.CLOSE,n.evented.fire(a.BroadcastEvent.CLOSE,e)},this.broadcastsocket.onerror=function(e){e.eventType=a.BroadcastEvent.ERROR,n.evented.fire(a.BroadcastEvent.ERROR,e)}}},{key:"connect",value:function(e){return new("MozWebSocket"in window?window.MozWebSocket:WebSocket)(e)}},{key:"broadcast",value:function(e){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen&&this.broadcastsocket.send(JSON.stringify(e))}},{key:"closeSubscribe",value:function(){this.subscribesocket.close(),this.subscribesocket=null}},{key:"closeBroadcast",value:function(){this.broadcastsocket.close(),this.broadcastsocket=null}},{key:"close",value:function(){this.subscribesocket.close(),this.broadcastsocket.close(),this.subscribesocket=null,this.broadcastsocket=null}}]),n}();o.Zondy.Socket.ISocketService=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.socketService=t.SocketService=void 0;var i,o=n(0),r=(i=o)&&i.__esModule?i:{default:i},a=n(4),s=n(32),u=n(9);r.default.zondy.SocketService=void 0;var c=t.SocketService=u.ServiceEvent.extend({initialize:function(e,t){this.url=e||"",this.options=t||{},this.socket=new s.ISocketService(e,t)},createSubscribe:function(){console.log("在使用流图层的时候容易出现回调堆栈溢出的问题，其核心原因是socket通信是双工通信，因此上下文环境context在不同的场景下是不一样的，以leaflet的on为例，其函数原型off(types, fn, context)第三个参数context的默认会是运行时的this而不是绑定时的this，最好在使用on监听的时候主动传入真正的上下文环境this"),this.socket.createSubscribe(),this.socket.evented.on(a.SubscribeEvent.OPEN,this.mapEvent,this),this.socket.evented.on(a.SubscribeEvent.MESSAGE,this.mapEvent,this),this.socket.evented.on(a.SubscribeEvent.CLOSE,this.mapEvent,this),this.socket.evented.on(a.SubscribeEvent.ERROR,this.mapEvent,this)},createBroadcast:function(){this.socket.createBroadcast(),this.socket.evented.on(a.BroadcastEvent.OPEN,this.mapEvent,this),this.socket.evented.on(a.BroadcastEvent.MESSAGE,this.mapEvent,this),this.socket.evented.on(a.BroadcastEvent.CLOSE,this.mapEvent,this),this.socket.evented.on(a.BroadcastEvent.ERROR,this.mapEvent,this)},mapEvent:function(e){this.fire(e.eventType||e.type,e)},broadcast:function(e){this.socket&&this.socket.broadcast(e)},closeSubscribe:function(){this.socket.closeSubscribe(),this.socket.evented.off(a.SubscribeEvent.OPEN,this.mapEvent,this),this.socket.evented.off(a.SubscribeEvent.MESSAGE,this.mapEvent,this),this.socket.evented.off(a.SubscribeEvent.CLOSE,this.mapEvent,this),this.socket.evented.off(a.SubscribeEvent.ERROR,this.mapEvent,this)},closeBroadcast:function(){this.socket.closeBroadcast(),this.socket.evented.off(a.BroadcastEvent.OPEN,this.mapEvent),this.socket.evented.off(a.BroadcastEvent.MESSAGE,this.mapEvent),this.socket.evented.off(a.BroadcastEvent.CLOSE,this.mapEvent),this.socket.evented.off(a.BroadcastEvent.ERROR,this.mapEvent)}}),l=t.socketService=function(e,t){return new c(e,t)};r.default.zondy.SocketService=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.streamLayer=t.StreamLayer=void 0;var i,o=n(0),r=(i=o)&&i.__esModule?i:{default:i};n(1);var a=n(33),s=n(4),u=n(30),c=n(8);var l=t.StreamLayer=r.default.LayerGroup.extend({initialize:function(e,t,n){this.options=n||{},this.map=e,this.url=t,this._layers={},r.default.Util.setOptions(this,n),this.socketService=new a.SocketService(this.url,this.options)},onAdd:function(e){this.bindEvent(),"mapv"===this.options.render?this.addLayer(new u.MapvStreamLayer(this.map,this.url,this.options)):this.addLayer(new c.GeojsonStreamLayer(this.url,this.options)),r.default.LayerGroup.prototype.onAdd.call(this,e)},bindEvent:function(){var t=this;this.socketService.createSubscribe(),this.socketService.on(s.SubscribeEvent.OPEN,function(e){return t.fire(s.SubscribeEvent.OPEN,e)}),this.socketService.on(s.SubscribeEvent.MESSAGE,function(e){return t.onMessage(e)})},unbindEvent:function(){var t=this;this.socketService&&(this.socketService.on(s.SubscribeEvent.OPEN,function(e){return t.fire(s.SubscribeEvent.OPEN,e)}),this.socketService.on(s.SubscribeEvent.MESSAGE,function(e){return t.onMessage(e)}),this.socketService&&this.socketService.closeSubscribe())},onRemove:function(e){this.unbindEvent()},onMessage:function(t){var n=this;this.getLayers().map(function(e){return e.onMessage(t),n.fire(s.LayerEvent.UPDATE,{layer:e,data:t.feature}),e})}}),f=t.streamLayer=function(e,t,n){return new l(e,t,n)};r.default.zondy.StreamLayer=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapCoordSys=a;var o=i(n(11)),r=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){this._LeafletMap=e,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=t}a.prototype.dimensions=["lng","lat"],a.prototype.setMapOffset=function(e){this._mapOffset=e},a.prototype.getBMap=function(){return this._LeafletMap},a.prototype.dataToPoint=function(e){null===e[1]&&(e[1]=89.99);var t=new r.default.latLng(e[1],e[0]),n=this._LeafletMap.latLngToLayerPoint(t),i=this._mapOffset;return[n.x-i[0],n.y-i[1]]},a.prototype.pointToData=function(e){var t=this._mapOffset;return[(e=this._LeafletMap.layerPointToLatLng([e[0]+t[0],e[1]+t[1]])).lng,e.lat]},a.prototype.getViewRect=function(){var e=this._api;return new o.default.graphic.BoundingRect(0,0,e.getWidth(),e.getHeight())},a.prototype.getRoamTransform=function(){return o.default.matrix.create()},a.prototype.prepareCustoms=function(){var e=o.default.util,t=this.getViewRect();return{coordSys:{type:"leaflet",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:e.bind(this.dataToPoint,this),size:e.bind(function(r,a){return a=a||[0,0],e.map([0,1],function(e){var t=a[e],n=r[e]/2,i=[],o=[];return i[e]=t-n,o[e]=t+n,i[1-e]=o[1-e]=a[1-e],Math.abs(this.dataToPoint(i)[e]-this.dataToPoint(o)[e])},this)},this)}}},a.dimensions=a.prototype.dimensions,a.create=function(e,n){var i;e.eachComponent("leaflet",function(e){n.getZr().painter.getViewportRoot();var t=o.default.leafletMap;i||(i=new a(t,n)),i.setMapOffset(e.__mapOffset||[0,0]),e.coordinateSystem=i}),e.eachSeries(function(e){if(!e.get("coordinateSystem")||"leaflet"===e.get("coordinateSystem")){if(!i){var t=o.default.leafletMap;i=new a(t,n)}e.coordinateSystem=i,e.animation=!0===e.animation}})},t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.echartsLayer=t.EchartsLayer=void 0;var i=r(n(0)),l=r(n(11));n(1);var o=r(n(35));function r(e){return e&&e.__esModule?e:{default:e}}var a=t.EchartsLayer=i.default.Layer.extend({map:null,chart:null,options:null,canvas:null,initialize:function(e,t){this.map=e,this.options=t,this.layerId=t.layerId||"echartlayerdefaultid",this.layerClass=t.classId||"echartlayerdefaultclass",this.initDevicePixelRatio(),this.initOptions(this.options),this.initEcharts(),this._resizeCanvas()},initDevicePixelRatio:function(){this.devicePixelRatio=window.devicePixelRatio||1},initOptions:function(e){if(e){if(e.leaflet)return;this.options.leaflet={roam:!0}}},initEcharts:function(){l.default.registerCoordinateSystem("leaflet",o.default),l.default.extendComponentModel({type:"leaflet",getBMap:function(){return this.__leaflet},defaultOption:{roam:!1}}),l.default.registerAction({type:"LeafletRoma",event:"LeafletRoma",update:"updateLayout"},function(e,t){})},_visible:function(){this.canvas.style.visibility="visible"},_unvisible:function(){this.canvas.style.visibility="hidden"},onAdd:function(e){this.map=e,this.canvas=this._createCanvas(),e.getPanes().overlayPane.appendChild(this.canvas),this.chart=l.default.init(this.canvas),l.default.leafletMap=e;var c=this;e.on("resize",function(e){var t=e.newSize;c.canvas.style.width=t.x+"px",c.canvas.style.height=t.y+"px",c.chart.resize()}),e.on("zoomstart",function(){c._unvisible()}),l.default.extendComponentView({type:"leaflet",render:function(i,e,o){var r=!0,a=l.default.leafletMap,s=o.getZr().painter.getViewportRoot(),u=i.coordinateSystem,t=function(){if(!r){var e=a.getBounds().getNorthWest(),t=a.latLngToLayerPoint(e),n=[parseInt(t.x,10)||0,parseInt(t.y,10)||0];s.style.left=n[0]+"px",s.style.top=n[1]+"px",u.setMapOffset(n),i.__mapOffset=n,o.dispatchAction({type:"LeafletRoma"})}},n=function(){r||(o.dispatchAction({type:"LeafletRoma"}),c._visible())};a.off("move",this._oldMoveHandler),a.off("zoomend",this._oldZoomEndHandler),a.on("move",t),a.on("zoomend",n),this._oldMoveHandler=t,this._oldZoomEndHandler=n;i.get("roam");r=!1}}),this.chart.setOption(this.options)},onRemove:function(e){this.chart.dispose()},_createCanvas:function(){var e=document.createElement("div");return e.id=this.layerId,e.style.top="0px",e.style.left="0px",e.height=this.map.getSize().y+"px",e.width=this.map.getSize().x+"px",e.style.height=this.map.getSize().y+"px",e.style.width=this.map.getSize().x+"px",e.style.zIndex=100,e.setAttribute("id",this.layerId),e.setAttribute("class",this.layerClass),this.canvas=e},_resizeCanvas:function(){var t=this;window.onresize=function(){var e=t.canvas;t.map;e.style.top="0px",e.style.left="0px",e.height=this.map.getSize().y+"px",e.width=this.map.getSize().x+"px",e.style.height=this.map.getSize().y+"px",e.style.width=this.map.getSize().x+"px",t.chart.resize()}},show:function(){this._visible()},hide:function(){this._unvisible()},resize:function(){var e=this.canvas;this.map;e.style.top="0px",e.style.left="0px",e.height=this.map.getSize().y+"px",e.width=this.map.getSize().x+"px",e.style.height=this.map.getSize().y+"px",e.style.width=this.map.getSize().x+"px",this.chart.resize()}}),s=t.echartsLayer=function(e,t){return new a(e,t)};i.default.zondy.EchartsLayer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3);Object.defineProperty(t,"MapVLayer",{enumerable:!0,get:function(){return i.MapVLayer}});var o=n(36);Object.defineProperty(t,"EchartsLayer",{enumerable:!0,get:function(){return o.EchartsLayer}});var r=n(34);Object.defineProperty(t,"StreamLayer",{enumerable:!0,get:function(){return r.StreamLayer}});var a=n(29);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var s=n(28);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var u=n(27);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baiduTileLayer=t.BaiduTileLayer=void 0;var i,o=n(0),r=(i=o)&&i.__esModule?i:{default:i};n(1);var a=t.BaiduTileLayer=r.default.TileLayer.extend({style:{light:"light",visualization:"visualization",redalert:"redalert",grassgreen:"grassgreen",pink:"pink",bluish:"bluish",darkgreen:"darkgreen",grayscale:"grayscale",hardedge:"hardedge",midnight:"midnight",default:"pl"},url:"http://api2.map.bdimg.com/customimage/tile?&udt=20180601&scale=1&x={x}&y={y}&z={z}&ak={baidukey}&styles={styles}",options:{minZoom:3,maxZoom:18,subdomains:[0,1,2],errorTileUrl:"",zoomOffset:0,tms:!0,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,baidukey:"HmkUGKETQBkEcd6aj3udNZ3W5hKXmXSi",id:"dark",styles:"pl"},initialize:function(e){this.options=r.default.Util.setOptions(this,e)},getTileUrl:function(e){var t={s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl(),styles:this.options.styles,ak:this.options.baidukey};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=n),t["-y"]=n}return r.default.Util.template(this.url,r.default.Util.extend(t,this.options))},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]}}),s=t.baiduTileLayer=function(e){return new a(e)};r.default.zondy.BaiduTileLayer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(38);Object.defineProperty(t,"BaiduTileLayer",{enumerable:!0,get:function(){return i.BaiduTileLayer}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaiduMercator=void 0;var i,o=n(0),r=(i=o)&&i.__esModule?i:{default:i};var a;t.BaiduMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,e.lat),-n),o=Math.sin(i*t);return new r.default.Point(this.R*e.lng*t,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(e){var t=180/Math.PI;return new r.default.LatLng((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:(a=6378137*Math.PI,new r.default.Bounds([-a,-a],[a,a]))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(40);Object.defineProperty(t,"BaiduMercator",{enumerable:!0,get:function(){return i.BaiduMercator}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.epsgBaidu=t.EPSGBaidu=void 0;var i,o=n(0),r=(i=o)&&i.__esModule?i:{default:i};n(1);var a=t.EPSGBaidu=void 0;t.epsgBaidu=function(){return new a};r.default&&r.default.Proj?r.default.CRS.EPSGBaidu=new r.default.Proj.CRS("EPSG:3395","+proj=merc +lon_0=0 +k=1 +x_0=140 +y_0=-250 +datum=WGS84 +units=m +no_defs",{resolutions:function(){var e=[];e[0]=Math.pow(2,18);for(var t=1;t<19;t++)e[t]=Math.pow(2,18-t);return e}(),origin:[0,0],bounds:r.default.bounds([20037508.342789244,0],[0,20037508.342789244])}):(console.log("使用高斯投影的时候，请严格遵守espg的规范 http://client.snanyun.com:8899/ui/epsg.html , 请不要过分相信上面表格中的中文名字，以后面的+proj=tmerc +lat_0=0 +lon_0=135 为标准"),console.log("Leaflet and proj4 必须在使用之前加载！常见错误：如js引入的顺序问题leaflet>proj4>plugins!"))},function(e,t,n){"use strict";n(42)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var o=n(43);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var r=n(41);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var a=n(39);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var s=n(37);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var u=n(26);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})})}]);