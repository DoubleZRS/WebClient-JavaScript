!function(n){var i={};function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=31)}([function(e,t){e.exports=mapboxgl},function(e,t,n){"use strict";var i,o=n(0),r=(i=o)&&i.__esModule?i:{default:i};r.default.zondy=r.default.zondy||{}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.Zondy=window.Zondy=window.Zondy||{};i.Util=i.Util||{},i.Network=i.Network||{},i.Event=i.Event||{},i.Socket=i.Socket||{}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapvBaseLayer=void 0;var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},c=n(13),a=n(0),l=(i=a)&&i.__esModule?i:{default:i};function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=c.baiduMapLayer?c.baiduMapLayer.__proto__:Function;t.MapvBaseLayer=function(e){function a(e,t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var o=s(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t,n));if(!u)return s(o);o.map=e,o.dataSet=t;var r=o;return n=n||{},r.init(n),r.argCheck(n),o.initDevicePixelRatio(),o.canvasLayer=i,o.stopAniamation=!1,o.animation=n.animation,o.mousemoveEvent=o.mousemoveEvent.bind(o),o.bindEvent(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,u),o(a,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"clickEvent",value:function(e){var t=e.point;r(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"clickEvent",this).call(this,t,e)}},{key:"mousemoveEvent",value:function(e){var t=e.point;r(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"mousemoveEvent",this).call(this,t,e)}},{key:"addAnimatorEvent",value:function(){}},{key:"animatorMovestartEvent",value:function(){var e=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=e.stepsRange.start)}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator}},{key:"bindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.on("click",this.clickEvent),this.options.methods.mousemove&&e.on("mousemove",this.mousemoveEvent))}},{key:"unbindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.off("click",this.clickEvent),this.options.methods.mousemove&&e.off("mousemove",this.mousemoveEvent))}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"init",value:function(e){this.options=e,this.initDataRange(e),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"_canvasUpdate",value:function(n){var i=this.map;if(this.canvasLayer&&!this.stopAniamation&&!this.canvasLayer.disposeFlag){var e=this,o=e.options.animation,t=this.getContext();if(e.isEnabledTime()){if(void 0===n)return void this.clear(t);"2d"===this.context&&(t.save(),t.globalCompositeOperation="destination-out",t.fillStyle="rgba(0, 0, 0, .1)",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.restore())}else this.clear(t);if("2d"===this.context)for(var r in e.options)t[r]=e.options[r];else t.clear(t.COLOR_BUFFER_BIT);if(!(e.options.minZoom&&i.getZoom()<e.options.minZoom||e.options.maxZoom&&i.getZoom()>e.options.maxZoom)){var a={transferCoordinate:function(e){var t=i.project(new l.default.LngLat(e[0],e[1]));return[t.x,t.y]}};void 0!==n&&(a.filter=function(e){var t=o.trails||10;return!!(n&&e.time>n-t&&e.time<n)});var s=e.dataSet.get(a);this.processData(s),"m"==e.options.unit&&e.options.size,e.options._size=e.options.size;var u=i.project(new l.default.LngLat(0,0));this.drawContext(t,new c.DataSet(s),e.options,u),e.options.updateCallback&&e.options.updateCallback(n)}}}},{key:"updateData",value:function(e,t){var n=e;n&&n.get&&(n=n.get()),null!=n&&this.dataSet.set(n),r(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"update",this).call(this,{options:t})}},{key:"addData",value:function(e,t){var n=e;e&&e.get&&(n=e.get()),this.dataSet.add(n),this.update({options:t})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(t){if(this.dataSet){var e=this.dataSet.get({filter:function(e){return null==t||"function"!=typeof t||!t(e)}});this.dataSet.set(e),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"clear",value:function(e){e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}}]),a}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapCoordSys=r;i(n(0));var o=i(n(5));function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){this._MapboxGLMap=e,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=t}r.prototype.dimensions=["lng","lat"],r.prototype.setMapOffset=function(e){this._mapOffset=e},r.prototype.getBMap=function(){return this._MapboxGLMap},r.prototype.dataToPoint=function(e){var t=this._MapboxGLMap.project(e),n=this._mapOffset;return[t.x-n[0],t.y-n[1]]},r.prototype.pointToData=function(e){var t=this._mapOffset;return[(e=this._MapboxGLMap.project([e[0]+t[0],e[1]+t[1]])).lng,e.lat]},r.prototype.getViewRect=function(){var e=this._api;return new o.default.graphic.BoundingRect(0,0,e.getWidth(),e.getHeight())},r.prototype.getRoamTransform=function(){return o.default.matrix.create()},r.prototype.prepareCustoms=function(e){var t=o.default.util,n=this.getViewRect();return{coordSys:{type:"mapboxgl",x:n.x,y:n.y,width:n.width,height:n.height},api:{coord:t.bind(this.dataToPoint,this),size:t.bind(function(r,a){return a=a||[0,0],t.map([0,1],function(e){var t=a[e],n=r[e]/2,i=[],o=[];return i[e]=t-n,o[e]=t+n,i[1-e]=o[1-e]=a[1-e],Math.abs(this.dataToPoint(i)[e]-this.dataToPoint(o)[e])},this)},this)}}},r.dimensions=r.prototype.dimensions,r.create=function(e,n){var i;e.eachComponent("mapboxgl",function(e){n.getZr().painter.getViewportRoot();var t=o.default.mapboxglMap;(i=new r(t,n)).setMapOffset(e.__mapOffset||[0,0]),e.coordinateSystem=i}),e.eachSeries(function(e){"mapboxgl"===e.get("coordinateSystem")&&(e.coordinateSystem=i)})},t.default=r},function(e,t){e.exports=function(){try{return echarts}catch(e){return{}}}()},function(e,t,n){"use strict";var i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":o(window))&&(i=window)}e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4);Object.defineProperty(t,"MapCoordSys",{enumerable:!0,get:function(){return i.MapCoordSys}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3);Object.defineProperty(t,"MapvBaseLayer",{enumerable:!0,get:function(){return i.MapvBaseLayer}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElsCubeLayer=void 0;var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=n(0),a=(i=r)&&i.__esModule?i:{default:i};n(1);var s=t.ElsCubeLayer=function(){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.map=e,this.layers=[],this._prepareData(t,n),this._createCubes(this.map,n.style)}return o(i,[{key:"_prepareData",value:function(e,t){for(var n=0;n<10;n++){var i={type:"FeatureCollection",features:[]};this._prepareLayerCubes(i,e,t.space,t.index,t.style),this.layers.push(i)}}},{key:"_prepareLayerCubes",value:function(e,t,n,i,o){var r={};t.forEach(function(e){var t=e.lng,n=e.lat;r.minx=t-o.radio,r.maxx=t+o.radio,r.miny=n-o.radio,r.maxy=n+o.radio}),e.features.push(this._createCubeItem(r.minx,r.maxx,r.miny,r.maxy))}},{key:"_createCubeItem",value:function(e,t,n,i,o){return{type:"Feature",geometry:{type:"Polygon",coordinates:[[[e,i],[t,i],[t,n],[e,n],[e,i]]]},properties:o}}},{key:"_createCubes",value:function(e,t){for(var n=0;n<this.layers.length;n++){var i=this.layers[this.layers.length-n-1],o="TimeSpaceCubeSource"+n,r="ElsCubeLayer"+n,a="#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6);e.addSource(o,{type:"geojson",data:i}),e.addLayer({id:r,type:"fill-extrusion",source:o,paint:{"fill-extrusion-color":a,"fill-extrusion-height":t.height,"fill-extrusion-base":t.baseheight*n,"fill-extrusion-opacity":.8}})}}},{key:"_getRandomColor",value:function(){return function(e,t,n){return(n?arguments.callee(e,t,n-1):"#")+t[e.floor(16*e.random())]}(Math,"0123456789abcdef",5)}}]),i}();a.default.zondy.ElsCubeLayer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeSpaceCubeLayer=void 0;var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=n(0),a=(i=r)&&i.__esModule?i:{default:i};n(1);var s=t.TimeSpaceCubeLayer=function(){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.map=e,this.layers=[],this._prepareData(t,n),this._createCubes(this.map,n.style)}return o(i,[{key:"_prepareData",value:function(e,t){for(var n=0;n<10;n++){var i={type:"FeatureCollection",features:[]};this._prepareLayerCubes(i,t.space,t.index,t.style),this.layers.push(i)}}},{key:"_prepareLayerCubes",value:function(e,t,n,i){for(var o={},r=(t.endx-t.startx)/n.cols,a=(t.endy-t.starty)/n.rows,s=0;s<n.cols;s++)for(var u=0;u<n.rows;u++){if(i&&i.radio){var c=t.endx+(s+1)*r/2,l=t.endy+(u+1)*a/2;o.minx=c-i.radio,o.maxx=c+i.radio,o.miny=l-i.radio,o.maxy=l+i.radio}else o.minx=t.startx+s*r,o.maxx=t.endx+(s+1)*r,o.miny=t.starty+u*a,o.maxy=t.endy+(u+1)*a;e.features.push(this._createCubeItem(o.minx,o.maxx,o.miny,o.maxy))}}},{key:"_createCubeItem",value:function(e,t,n,i,o){return{type:"Feature",geometry:{type:"Polygon",coordinates:[[[e,i],[t,i],[t,n],[e,n],[e,i]]]},properties:o}}},{key:"_createCubes",value:function(e,t){for(var n=0;n<this.layers.length;n++){var i=this.layers[this.layers.length-n-1],o="TimeSpaceCubeSource"+n,r="TimeSpaceCubeLayer"+n,a="#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6);e.addSource(o,{type:"geojson",data:i}),e.addLayer({id:r,type:"fill-extrusion",source:o,paint:{"fill-extrusion-color":a,"fill-extrusion-height":t.height,"fill-extrusion-base":t.baseheight*n,"fill-extrusion-opacity":.8}})}}},{key:"_getRandomColor",value:function(){return function(e,t,n){return(n?arguments.callee(e,t,n-1):"#")+t[e.floor(16*e.random())]}(Math,"0123456789abcdef",5)}}]),i}();a.default.zondy.TimeSpaceCubeLayer=s},function(e,t){e.exports=function(){try{return d3}catch(e){return{}}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.D3Layer=void 0;var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=n(0),a=(i=r)&&i.__esModule?i:{default:i},s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(11));n(1),n(33);var u=t.D3Layer=function(){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.map=e,this._drawCallback=t,this.initD3()}return o(i,[{key:"initD3",value:function(){s.select("head").append("style").attr("type","text/css").text("g.d3-overlay *{pointer-events:visiblePainted;}")}},{key:"bindMapEvent",value:function(){this._svg;var e=this.selection,t=(this.draw,this.projection),n=this.map,i=this;this.map.on("viewreset",function(){i.draw(i,e,t,n)}),this.map.on("movestart",function(){e.classed("mapboxd3-hidden",!0)}),this.map.on("rotate",function(){e.classed("mapboxd3-hidden",!0)}),this.map.on("moveend",function(){e.classed("mapboxd3-hidden",!1),i.draw(i,e,t,n)})}},{key:"draw",value:function(e,t,n,i){e._drawCallback(t,n,i.getZoom())}},{key:"addTo",value:function(e){this.onAdd(e),this.draw(this,this.selection,this.projection,this.map),this.bindMapEvent()}},{key:"hide",value:function(){this.svg.classed("mapboxd3-hidden",!0)}},{key:"remove",value:function(){this.svg.classed("mapboxd3-hidden",!0),this.svg=null,this.selection=null}},{key:"onAdd",value:function(){var o=this.map;this._container=o.getCanvasContainer(),this._svg=s.select(this._container).select("svg"),this.selection=this._svg.append("g").classed("d3-overlay",!0),this.projection={latLngToLayerPoint:function(e,t,n){n=o.getZoom()?o.getZoom():n,console.log("longtitude: "+e+" latitude: "+t);var i=o.project(new a.default.LngLat(e,t));return console.log("screenPoint x: "+i.x+" y: "+i.y),i},layerPointToLatLng:function(e,t){return t=o.getZoom()?o.getZoom():t,o.unproject(new a.default.Point(e.x,e.y))},unitsPerMeter:256*Math.pow(2,o.getZoom())/40075017,map:o,scale:1},this.projection._projectPoint=function(e,t){null==t&&(t=0),null==e&&(e=0);var n=o.project(new a.default.LngLat(e,t));return this.stream.point(n.x,n.y)};var e=this.projection._projectPoint;this.projection.pathFromGeojson=s.geoPath().projection(s.geoTransform({point:e}))}}]),i}();a.default.zondy.d3Layer=u},function(e,t){e.exports=function(){try{return mapv}catch(e){return{}}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapvLayer=void 0;var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=n(0),a=(i=r)&&i.__esModule?i:{default:i};n(1);var s=n(3);var u=t.MapvLayer=function(){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.map=e,this.layerID=n.layerID,delete n.layerID,this.mapvBaseLayer=new s.MapvBaseLayer(e,t,n,this),this.mapVOptions=n,this.initDevicePixelRatio(),this.canvas=this._createCanvas(),this.render=this.render.bind(this),this.bindEvent(),this.mapContainer=e.getCanvasContainer(),this.mapContainer.appendChild(this.canvas),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px",this._reset()}return o(i,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"bindEvent",value:function(){var e=this.map;this.innerMoveStart=this.moveStartEvent.bind(this),this.innerMoveEnd=this.moveEndEvent.bind(this),this.innnerZoomStart=this.zoomStartEvent.bind(this),this.innnerZoomEnd=this.zoomEndEvent.bind(this),this.innnerRotateStart=this.rotateStartEvent.bind(this),this.innnerRotateEnd=this.rotateEndEvent.bind(this),this.innerResize=this.resizeEvent.bind(this),this.innerRemove=this.removeEvent.bind(this),e.on("resize",this.innerResize),e.on("zoomstart",this.innnerZoomStart),e.on("zoomend",this.innnerZoomEnd),e.on("rotatestart",this.innnerRotateStart),e.on("rotateend",this.innnerRotateEnd),e.on("movestart",this.innerMoveStart),e.on("moveend",this.innerMoveEnd),this.map.on("remove",this.innerRemove)}},{key:"unbindEvent",value:function(){var e=this.map;e.off("resize",this.innerResize),e.off("zoomstart",this.innnerZoomStart),e.off("zoomend",this.innnerZoomEnd),e.off("rotatestart",this.innnerRotateStart),e.off("rotateend",this.innnerRotateEnd),e.off("movestart",this.innerMoveStart),e.off("moveend",this.innerMoveEnd)}},{key:"moveStartEvent",value:function(){this.mapvBaseLayer.animatorMovestartEvent(),this._unvisiable()}},{key:"moveEndEvent",value:function(){this.mapvBaseLayer.animatorMoveendEvent(),this._reset(),this._visiable()}},{key:"zoomStartEvent",value:function(){this._unvisiable()}},{key:"zoomEndEvent",value:function(){this._unvisiable()}},{key:"rotateStartEvent",value:function(){this.mapvBaseLayer.animatorMovestartEvent(),this._unvisiable()}},{key:"rotateEndEvent",value:function(){this.mapvBaseLayer.animatorMoveendEvent(),this._reset(),this._visiable()}},{key:"resizeEvent",value:function(){this._reset(),this._visiable()}},{key:"removeEvent",value:function(){this.mapContainer.removeChild(this.canvas)}},{key:"addData",value:function(e,t){this.mapvBaseLayer.addData(e,t)}},{key:"updateData",value:function(e,t){this.mapvBaseLayer.updateData(e,t)}},{key:"getData",value:function(){return this.mapvBaseLayer&&(this.dataSet=this.mapvBaseLayer.getData()),this.dataSet}},{key:"removeData",value:function(e){this.mapvBaseLayer&&this.mapvBaseLayer.removeData(e)}},{key:"removeAllData",value:function(){this.mapvBaseLayer.clearData()}},{key:"_visiable",value:function(){return this.canvas.style.display="block",this}},{key:"_unvisiable",value:function(){return this.canvas.style.display="none",this}},{key:"_createCanvas",value:function(){var e=document.createElement("canvas");e.id=this.layerID,e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.width=parseInt(this.map.getCanvas().style.width),e.height=parseInt(this.map.getCanvas().style.height),e.style.width=this.map.getCanvas().style.width,e.style.height=this.map.getCanvas().style.height;var t=this.devicePixelRatio;return"2d"==this.mapVOptions.context&&e.getContext(this.mapVOptions.context).scale(t,t),e}},{key:"_reset",value:function(){null!=this.canvas&&(this.resizeCanvas(),this.fixPosition(),this.onResize(),this.render())}},{key:"draw",value:function(){return this._reset()}},{key:"show",value:function(){this._visiable()}},{key:"hide",value:function(){this._unvisiable()}},{key:"update",value:function(e){null!=e&&this.updateData(e.data,e.options)}},{key:"resizeCanvas",value:function(){this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.canvas;e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.width=parseInt(this.map.getCanvas().style.width),e.height=parseInt(this.map.getCanvas().style.height),e.style.width=this.map.getCanvas().style.width,e.style.height=this.map.getCanvas().style.height}},{key:"fixPosition",value:function(){}},{key:"onResize",value:function(){}},{key:"originPosition",value:function(){this.originPitch=this.map.getPitch(),this.originBearing=this.map.getBearing();var e=this.map.project(new a.default.LngLat(0,0));this.originX=e.x,this.originY=e.y}},{key:"render",value:function(){this.mapvBaseLayer._canvasUpdate()}},{key:"moveTo",value:function(e,t){var n=document.getElementById(this.layerID);if(t=void 0===t||t){var i=document.getElementById(e);n&&i&&i.parentNode.insertBefore(n,i)}else{var o=document.getElementById(e);if(n){if(o.nextSibling)return void o.parentNode.insertBefore(n,o.nextSibling);o.parentNode.appendChild(n)}}}},{key:"remove",value:function(){this.removeAllData(),this.unbindEvent(),this.mapContainer.removeChild(this.canvas),this.disposeFlag=!0}},{key:"destroy",value:function(){this.removeAllData(),this.unbindEvent(),this.mapContainer.removeChild(this.canvas),this.disposeFlag=!0}}]),i}();a.default.zondy.MapvLayer=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EchartsLayer=void 0;var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=a(n(0)),c=a(n(5));n(1);var r=n(4);function a(e){return e&&e.__esModule?e:{default:e}}var s=t.EchartsLayer=function(){function n(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.map=e,this.options=t,this.layerId=t.layerId||"echartlayerdefaultid",this.layerClass=t.classId||"echartlayerdefaultclass",this.initDevicePixelRatio(),this.mapContainer=e.getCanvasContainer(),this.canvas=this._createCanvas(),this.mapContainer.appendChild(this.canvas),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px",this.chart=c.default.init(this.canvas),this.initEcharts(),this._resizeCanvas(),this}return i(n,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"initEcharts",value:function(){return c.default.mapboxglMap=this.map,c.default.registerCoordinateSystem("mapboxgl",r.MapCoordSys),c.default.extendComponentModel({type:"mapboxgl",getBMap:function(){return this.__mapboxgl},defaultOption:{roam:!1}}),c.default.registerAction({type:"MapboxGLRoma",event:"MapboxGLRoma",update:"updateLayout"},function(e,t){}),this}},{key:"_createCanvas",value:function(){var e=document.createElement("div");return e.id=this.layerId,e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.width=parseInt(this.map.getCanvas().style.width),e.height=parseInt(this.map.getCanvas().style.height),e.style.width=this.map.getCanvas().style.width,e.style.height=this.map.getCanvas().style.height,e.setAttribute("id",this.layerId),e.setAttribute("class",this.layerClass),e}},{key:"_resizeCanvas",value:function(){var n=this;window.onresize=function(){var e=n.canvas,t=n.map;e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.width=t.getCanvas().style.width,e.style.height=t.getCanvas().style.height,e.width=parseInt(t.getCanvas().style.width),e.height=parseInt(t.getCanvas().style.height),n.chart.resize()}}},{key:"addTo",value:function(e){return c.default.extendComponentView({type:"mapboxgl",render:function(o,e,r){var a=!0,t=c.default.mapboxglMap,s=r.getZr().painter.getViewportRoot(),u=o.coordinateSystem,n=function(e,t){if(!a){var n=document.getElementsByClassName("mapboxgl-map")[0],i=[-parseInt(n.style.left,10)||0,-parseInt(n.style.top,10)||0];s.style.left=i[0]+"px",s.style.top=i[1]+"px",u.setMapOffset(i),o.__mapOffset=i,r.dispatchAction({type:"MapboxGLRoma"})}};function i(){a||r.dispatchAction({type:"MapboxGLRoma"})}t.off("move",this._oldMoveHandler),t.off("zoomend",this._oldZoomEndHandler),t.on("move",n),t.on("zoomend",i),this._oldMoveHandler=n,this._oldZoomEndHandler=i;o.get("roam");a=!1}}),this.chart.setOption(this.options),this}},{key:"_visible",value:function(){this.canvas.style.visibility="visible"}},{key:"_unvisible",value:function(){this.canvas.style.visibility="hidden"}},{key:"show",value:function(){this._visible()}},{key:"hide",value:function(){this._unvisible()}},{key:"remove",value:function(){var t=this;return this.map._listeners.move.forEach(function(e){"moveHandler"===e.name&&t.map.off("move",e)}),this.map._listeners.move.forEach(function(e){"zoomEndHandler"===e.name&&t.map.off("zoomend",e)}),this.chart.clear(),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.map=void 0,this}}]),n}();o.default.zondy.EchartsLayer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();t.DeveloperError=function(e){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t,n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));n.name="DeveloperError",n.message=e;try{throw new Error}catch(e){t=e.stack}return n.stack=t,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,Error),o(i,[{key:"toString",value:function(){var e=this.name+": "+this.message;return this.stack&&(e+="\n"+this.stack.toString()),e}},{key:"throwInstantiationError",value:function(){throw new i("This function defines an interface and should not be called directly.")}}]),i}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelFn=t.requestFn=t.emptyImageUrl=t.isArray=t.lastId=t.create=t.endsWith=t.extendFromArray=t.appendUrl=t.extend=t.Util=void 0,t.bind=c,t.stamp=function(e){return e._leaflet_id=e._leaflet_id||(t.lastId=l+=1),e._leaflet_id},t.throttle=function(e,t,n){var i,o,r,a;return a=function(){i=!1,o&&(r.apply(n,o),o=!1)},r=function(){i?o=arguments:(e.apply(n,arguments),setTimeout(a,t),i=!0)}},t.wrapNum=function(e,t,n){var i=t[1],o=t[0],r=i-o;return e===i&&n?e:((e-o)%r+r)%r+o},t.falseFn=function(){return!1},t.formatNum=function(e,t){var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n},t.trim=f,t.splitWords=function(e){return f(e).split(/\s+/)},t.setOptions=function(e,t){e.hasOwnProperty("options")||(e.options=e.options?u(e.options):{});for(var n in t)e.options[n]=t[n];return e.options},t.getParamString=function(e,t,n){var i=[];for(var o in e)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(e[o]));return(t&&-1!==t.indexOf("?")?"&":"?")+i.join("&")},t.template=function(e,i){return e.replace(d,function(e,t){var n=i[t];if(void 0===n)throw new Error("No value provided for variable "+e);return"function"==typeof n&&(n=n(i)),n})},t.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},t.requestAnimFrame=function(e,t,n){{if(!n||v!==y)return v.call(window,c(e,t));e.call(t)}},t.cancelAnimFrame=function(e){e&&m.call(window,e)};var i=n(2),o=(t.Util=i.Zondy.Util=i.Zondy.Util||{},t.extend=function(e,t){if(e=e||{},t){for(var n in t){var i=t[n];void 0!==i&&(e[n]=i)}!("function"==typeof window.Event&&t instanceof window.Event)&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e}),r=t.appendUrl=function(e,t){var n=e;if(t){var i=(e+" ").split(/[?&]/);n+=" "===i.pop()?t:i.length?"&"+t:"?"+t}return n},a=t.extendFromArray=function(e,t){var n=!0,i=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;for(var u in s)e[u]=s[u]}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return e},s=t.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},u=t.create=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function c(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var i=n.call(arguments,2);return function(){return e.apply(t,i.length?i.concat(n.call(arguments)):arguments)}}var l=t.lastId=0;function f(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}var d=/\{ *([\w_-]+) *\}/g;t.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.emptyImageUrl="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function h(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var p=0;function y(e){var t=+new Date,n=Math.max(0,16-(t-p));return p=t+n,window.setTimeout(e,n)}var v=t.requestFn=window.requestAnimationFrame||h("RequestAnimationFrame")||y,m=t.cancelFn=window.cancelAnimationFrame||h("CancelAnimationFrame")||h("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};i.Zondy.Util.extend=o,i.Zondy.Util.appendUrl=r,i.Zondy.Util.endsWith=s,i.Zondy.Util.extendFromArray=a},function(e,t,n){"use strict";var i,o,r;o=[t,e],void 0===(r="function"==typeof(i=function(e,t){var n={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function f(t){try{delete window[t]}catch(e){window[t]=void 0}}function d(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(r){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=r,u=a.timeout||n.timeout,c=a.jsonpCallback||n.jsonpCallback,l=void 0;return new Promise(function(t,e){var n=a.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),i=c+"_"+n;window[n]=function(e){t({ok:!0,json:function(){return Promise.resolve(e)}}),l&&clearTimeout(l),d(i),f(n)},s+=-1===s.indexOf("?")?"?":"&";var o=document.createElement("script");o.setAttribute("src",""+s+c+"="+n),a.charset&&o.setAttribute("charset",a.charset),o.id=i,document.getElementsByTagName("head")[0].appendChild(o),l=setTimeout(function(){e(new Error("JSONP request to "+r+" timed out")),f(n),d(i),window[n]=function(){f(n)}},u),o.onerror=function(){e(new Error("JSONP request to "+r+" failed")),f(n),d(i),l&&clearTimeout(l)}})}})?i.apply(t,o):i)||(e.exports=r)},function(p,e,t){"use strict";!function(e){if(e.__disableNativeFetch||!e.fetch){c.prototype.append=function(e,t){e=i(e),t=a(t);var n=this.map[e];n||(n=[],this.map[e]=n),n.push(t)},c.prototype.delete=function(e){delete this.map[i(e)]},c.prototype.get=function(e){var t=this.map[i(e)];return t?t[0]:null},c.prototype.getAll=function(e){return this.map[i(e)]||[]},c.prototype.has=function(e){return this.map.hasOwnProperty(i(e))},c.prototype.set=function(e,t){this.map[i(e)]=[a(t)]},c.prototype.forEach=function(n,i){Object.getOwnPropertyNames(this.map).forEach(function(t){this.map[t].forEach(function(e){n.call(i,e,t,this)},this)},this)};var o={blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e},r=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},s.call(f.prototype),s.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},h.error=function(){var e=new h(null,{status:0,statusText:""});return e.type="error",e};var n=[301,302,303,307,308];h.redirect=function(e,t){if(-1===n.indexOf(t))throw new RangeError("Invalid status code");return new h(null,{status:t,headers:{location:e}})},e.Headers=c,e.Request=f,e.Response=h,e.fetch=function(n,i){return new Promise(function(r,a){var e;e=f.prototype.isPrototypeOf(n)&&!i?n:new f(n,i);var s=new XMLHttpRequest;var u=!1;function t(){if(4===s.readyState){var e=1223===s.status?204:s.status;if(e<100||599<e){if(u)return;return u=!0,void a(new TypeError("Network request failed"))}var t,o,n={status:e,statusText:s.statusText,headers:(t=s,o=new c,t.getAllResponseHeaders().trim().split("\n").forEach(function(e){var t=e.trim().split(":"),n=t.shift().trim(),i=t.join(":").trim();o.append(n,i)}),o),url:"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0},i="response"in s?s.response:s.responseText;u||(u=!0,r(new h(i,n)))}}s.onreadystatechange=t,s.onload=t,s.onerror=function(){u||(u=!0,a(new TypeError("Network request failed")))},s.open(e.method,e.url,!0);try{"include"===e.credentials&&("withCredentials"in s?s.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(e){console&&console.warn&&console.warn("set withCredentials error:"+e)}"responseType"in s&&o.blob&&(s.responseType="blob"),e.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send(void 0===e._bodyInit?null:e._bodyInit)})},e.fetch.polyfill=!0,void 0!==p&&p.exports&&(p.exports=e.fetch)}function i(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function c(t){this.map={},t instanceof c?t.forEach(function(e,t){this.append(t,e)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function u(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function l(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function t(e){var t=new FileReader;return t.readAsArrayBuffer(e),l(t)}function s(){return this.bodyUsed=!1,this._initBody=function(e,t){if("string"==typeof(this._bodyInit=e))this._bodyText=e;else if(o.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e,this._options=t;else if(o.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!o.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText=""},o.blob?(this.blob=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(t)},this.text=function(){var e,t,n,i,o,r,a,s=u(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,t=this._options,n=new FileReader,i=t.headers.map["content-type"]?t.headers.map["content-type"].toString():"",o=/charset\=[0-9a-zA-Z\-\_]*;?/,r=e.type.match(o)||i.match(o),a=[e],r&&a.push(r[0].replace(/^charset\=/,"").replace(/;$/,"")),n.readAsText.apply(n,a),l(n);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=u(this);return e||Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e,t){var n,i,o=(t=t||{}).body;if(f.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,o||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=(n=t.method||this.method||"GET",i=n.toUpperCase(),-1<r.indexOf(i)?i:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o,t)}function d(e){var o=new FormData;return e.trim().split("&").forEach(function(e){if(e){var t=e.split("="),n=t.shift().replace(/\+/g," "),i=t.join("=").replace(/\+/g," ");o.append(decodeURIComponent(n),decodeURIComponent(i))}}),o}function h(e,t){t||(t={}),this._initBody(e,t),this.type="default",this.status=t.status,this.ok=200<=this.status&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof c?t.headers:new c(t.headers),this.url=t.url||""}}("undefined"!=typeof self?self:void 0)},function(e,t,n){"use strict";var i,o,r=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(i===setTimeout)return setTimeout(t,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(e){i=a}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var c,l=[],f=!1,d=-1;function h(){f&&c&&(f=!1,c.length?l=c.concat(l):d=-1,l.length&&p())}function p(){if(!f){var e=u(h);f=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,f=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function v(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new y(e,t)),1!==l.length||f||u(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";(function(e,p){!function(n,i){if(!n.setImmediate){var o,r,t,a,e,s=1,u={},c=!1,l=n.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(n);f=f&&f.setTimeout?f:n,"[object process]"==={}.toString.call(n.process)?o=function(e){p.nextTick(function(){h(e)})}:!function(){if(n.postMessage&&!n.importScripts){var e=!0,t=n.onmessage;return n.onmessage=function(){e=!1},n.postMessage("","*"),n.onmessage=t,e}}()?n.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){h(e.data)},o=function(e){t.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(r=l.documentElement,o=function(e){var t=l.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):o=function(e){setTimeout(h,0,e)}:(a="setImmediate$"+Math.random()+"$",e=function(e){e.source===n&&"string"==typeof e.data&&0===e.data.indexOf(a)&&h(+e.data.slice(a.length))},n.addEventListener?n.addEventListener("message",e,!1):n.attachEvent("onmessage",e),o=function(e){n.postMessage(a+e,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[s]=i,o(s),s++},f.clearImmediate=d}function d(e){delete u[e]}function h(e){if(c)setTimeout(h,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(i,n)}}(t)}finally{d(e),c=!1}}}}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(this,n(6),n(20))},function(e,o,r){"use strict";(function(e){var t=void 0!==e&&e||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}o.setTimeout=function(){return new i(n.call(setTimeout,t,arguments),clearTimeout)},o.setInterval=function(){return new i(n.call(setInterval,t,arguments),clearInterval)},o.clearTimeout=o.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(t,this._id)},o.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},o.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},o._unrefActive=o.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(21),o.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||void 0,o.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||void 0}).call(this,r(6))},function(e,t,n){"use strict";(function(t){var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=setTimeout;function i(){}function r(e){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function o(n,i){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,r._immediateFn(function(){var e=1===n._state?i.onFulfilled:i.onRejected;if(null!==e){var t;try{t=e(n._value)}catch(e){return void s(i.promise,e)}a(i.promise,t)}else(1===n._state?a:s)(i.promise,n._value)})):n._deferreds.push(i)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===(void 0===e?"undefined":u(e))||"function"==typeof e)){var n=e.then;if(e instanceof r)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void f((i=n,o=e,function(){i.apply(o,arguments)}),t)}t._state=1,t._value=e,c(t)}catch(e){s(t,e)}var i,o}function s(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,s(t,e))})}catch(e){if(n)return;n=!0,s(t,e)}}r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=new this.constructor(i);return o(this,new l(e,t,n)),n},r.prototype.finally=function(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})},r.all=function(t){return new r(function(i,o){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return i([]);var a=r.length;function s(t,e){try{if(e&&("object"===(void 0===e?"undefined":u(e))||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){s(t,e)},o)}r[t]=e,0==--a&&i(r)}catch(e){o(e)}}for(var e=0;e<r.length;e++)s(e,r[e])})},r.resolve=function(t){return t&&"object"===(void 0===t?"undefined":u(t))&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(n){return new r(function(e,t){t(n)})},r.race=function(o){return new r(function(e,t){for(var n=0,i=o.length;n<i;n++)o[n].then(e,t)})},r._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){n(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},e.exports=r}).call(this,n(22).setImmediate)},function(e,t,n){"use strict";var i,o=n(23),r=(i=o)&&i.__esModule?i:{default:i};window.Promise=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FetchRequest=t.DefaultTimeout=t.CORS=void 0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(24),n(19);var i,o=n(18),r=(i=o)&&i.__esModule?i:{default:i},a=n(2),s=n(17);var u=window.fetch,l=a.Zondy.CORS=a.Zondy.CORS||window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,f=a.Zondy.DefaultTimeout=a.Zondy.DefaultTimeout||6e4,d=a.Zondy.FetchRequest={commit:function(e,t,n,i){switch(e=e?e.toUpperCase():e){case"GET":return this.get(t,n,i);case"POST":return this.post(t,n,i);case"PUT":return this.put(t,n,i);case"DELETE":return this.delete(t,n,i);default:return this.get(t,n,i)}},get:function(e,t,n){n=n||{};return e=this.prefixUrl(e,n),e=(0,s.appendUrl)(e,this.getParamString(t||{})),this.urlIsLong(e)?this.postSimulate("GET",e.substring(0,e.indexOf("?")-1),t,n):this.fetchByES(e,t,n,"GET")},delete:function(e,t,n){n=n||{};return e=this.prefixUrl(e,n),e=(0,s.appendUrl)(e,this.getParamString(t||{})),!this.urlIsLong(e)&&l?this.fetchByES(e,t,n,"DELETE"):this.postSimulate("DELETE",e.substring(0,e.indexOf("?")-1),t,n)},post:function(e,t,n){return n=n||{},this.fetchByES(this.prefixUrl(e,n),t,n,"POST")},put:function(e,t,n){return n=n||{},this.fetchByES(this.prefixUrl(e,n),t,n,"PUT")},urlIsLong:function(e){for(var t=0,n=null,i=0,o=e.length;i<o;i++)(n=e.charCodeAt(i))<127?t++:128<=n&&n<=2047?t+=2:2048<=n&&n<=65535&&(t+=3);return!(t<2e3)},postSimulate:function(e,t,n,i){return t+=(-1<t.indexOf("?")?"&":"?")+"_method="+e,"string"!=typeof n&&(n=JSON.stringify(n)),this.post(t,n,i)},prefixUrl:function(e,t){return t&&t.proxy&&("function"==typeof t.proxy?e=t.proxy(e):(e=decodeURIComponent(e),e=t.proxy+encodeURIComponent(e))),e},fetchByES:function(e,t,n,i){return(n=n||{}).headers=n.headers||{},n.headers["Content-Type"]||(n.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),n.timeout?this.timeDelay(n.timeout,u(e,{method:i,headers:n.headers,body:"PUT"===i||"POST"===i?t:void 0,credentials:n.withCredentials?"include":"omit",mode:"cors",timeout:f}).then(function(e){return e})):u(e,{method:i,body:"PUT"===i||"POST"===i?t:void 0,headers:n.headers,credentials:n.withCredentials?"include":"omit",mode:"cors",timeout:f}).then(function(e){return e})},fetchByJsonp:function(e,t){return t=t||{},(0,r.default)(e,{method:"GET",timeout:t.timeout}).then(function(e){return e})},timeDelay:function(n,i){return new Promise(function(e,t){setTimeout(function(){t(new Error("timeout"))},n),i.then(e,t)})},getParamString:function(e){var t=[];for(var n in e){var i=e[n];if(null!=i&&"function"!=typeof i){var o;if("object"===(void 0===i?"undefined":c(i))&&i.constructor===Array){for(var r,a=[],s=0,u=i.length;s<u;s++)r=i[s],a.push(encodeURIComponent(null==r?"":r));o="["+a.join(",")+"]"}else o=encodeURIComponent(i);t.push(encodeURIComponent(n)+"="+o)}}return t.join("&")}};t.CORS=l,t.DefaultTimeout=f,t.FetchRequest=d,a.Zondy.Network.FetchRequest=d,a.Zondy.Network.CORS=l,a.Zondy.Network.DefaultTimeout=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IServiceQuery=void 0;var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=n(2),a=n(25);o.Zondy.Service=o.Zondy.Service||{};var r=t.IServiceQuery=function(){function s(e,t,n,i,o,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.method=e,this.url=t,this.params=n,this.fetchServiceData(i,o,r,a)}return i(s,[{key:"fetchServiceData",value:function(n,i,o,r){a.FetchRequest.commit(this.method,this.url,this.params,{}).then(function(e){return e.text?e.text():e.json()}).then(function(e){var t=null;"string"!=typeof e||"true"!=e.toLowerCase()&&"false"!=e.toLowerCase()?"string"==typeof e&&(t=e):(t={},"true"==e.toLowerCase()?t.succeed=!0:t.error=!0),t&&!t.error||(t=t&&t.error?{error:t.error}:{error:!0}),t.error?r(t):(isNaN(t)||(t={value:t}),"string"==typeof t&&(t={value:t}),"[object Array]"!=Object.prototype.toString.call(t)?t.succeed=null==t.succeed||t.succeed:t={value:t,succeed:!0},o(t,n,i))})}}]),s}();o.Zondy.Service.IServiceQuery=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QUERY_TIMECUBE=t.PARAM_INCLUDE_PROPS=t.PARAM_SCHEMAS=t.PARAM_TLE_NAME=t.PARAM_LIB_NAME=t.QUERY_TIMECUBE_INFO=t.QUERY_TIMECUBE_LIB=t.PARAM_SPLIT=t.PARAM_COMMA=t.PARAM_SUB=t.URL_PARAM_LINK=t.URL_BODY_END=t.URL_SOCKET=t.URL_SUB=t.URL_DIVISION=t.URL_HTTP_PROFIX=void 0;var i=n(2);i.Zondy.GeoSpark=i.Zondy.GeoSpark||{};t.URL_HTTP_PROFIX="http://";var o=t.URL_DIVISION="/",r=(t.URL_SUB=":",t.URL_SOCKET="8020",t.URL_BODY_END="?"),a=(t.URL_PARAM_LINK="&",t.PARAM_SUB=":",t.PARAM_COMMA=",",t.PARAM_SPLIT=";",t.QUERY_TIMECUBE_LIB="pgsql"),s=t.QUERY_TIMECUBE_INFO="tableInfoAsJson";t.PARAM_LIB_NAME="libName",t.PARAM_TLE_NAME="tableName?",t.PARAM_SCHEMAS="schemas",t.PARAM_INCLUDE_PROPS="includeProps",t.QUERY_TIMECUBE=a+o+s+r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeSpaceCubeService=void 0;var o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),i=n(2),r=n(27),a=n(26);n(16);i.Zondy.GeoSpark.TimeSpaceCubeService=void 0;var s=t.TimeSpaceCubeService=function(){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.urlAddress="",this.queryOption={},this.handleSuccess=t,this.handleFailure=n,this.prefixUrlPost(e.ip,e.socket,e.queryOption),new a.IServiceQuery("GET",this.urlAddress,this.queryOption,this.map,this.handleSuccess,this.handleFailure)}return o(i,[{key:"prefixUrlPost",value:function(e,t,n){this.urlAddress="http://192.168.81.223:9091/pgsql/tableInfoAsJson?libName=postgis&tableName=createspacetimecube_zhc_001&schemas=public&includeProps=true",this.urlAddress=""+r.URL_HTTP_PROFIX+e+r.URL_SUB+t+"/"+r.QUERY_TIMECUBE,this.queryOption=n}}]),i}();i.Zondy.GeoSpark.TimeSpaceCubeService=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(28);Object.defineProperty(t,"TimeSpaceCubeService",{enumerable:!0,get:function(){return i.TimeSpaceCubeService}});var o=n(15);Object.defineProperty(t,"EchartsLayer",{enumerable:!0,get:function(){return o.EchartsLayer}});var r=n(14);Object.defineProperty(t,"MapvLayer",{enumerable:!0,get:function(){return r.MapvLayer}});var a=n(12);Object.defineProperty(t,"D3Layer",{enumerable:!0,get:function(){return a.D3Layer}});var s=n(10);Object.defineProperty(t,"TimeSpaceCubeLayer",{enumerable:!0,get:function(){return s.TimeSpaceCubeLayer}});var u=n(9);Object.defineProperty(t,"ElsCubeLayer",{enumerable:!0,get:function(){return u.ElsCubeLayer}});var c=n(8);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})});var l=n(7);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})})},function(e,t,n){"use strict";n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(30);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var o=n(29);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})})},,function(e,t){}]);